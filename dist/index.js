!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";var r=t("cytoscape"),i=t("underscore"),o=t("cytoscape-qtip"),a=t("cytoscape-cola"),s=t("cytoscape-cose-bilkent"),u=t("cytoscape-dagre"),l=t("cytoscape-springy"),c=t("cytoscape-spread"),h=t("cytoscape-panzoom"),d=t("cytoscape-ngraph.forcelayout"),p=t("dagre"),f=t("springy"),g=t("cytoscape-cola/cola");$(function(){function t(t){return t.split("/").reverse()[0]}function e(){var e={},n={},o=$("#notes").val(),a=1,s=0;o.split("\n").forEach(function(r){var i=r.match(/(\S+)\t(0.[0-9]+)\t(\S+)/);i&&(e[i[1]]||(e[i[1]]={id:i[1],name:t(i[1])}),e[i[3]]||(e[i[3]]={id:i[3],name:t(i[3])}),n[i[1]+","+i[3]]||(n[i[1]+","+i[3]]={source:i[1],target:i[3],score:parseFloat(i[2])}),a>i[2]&&(a=i[2]),s<i[2]&&(s=i[2]))});var u=i.map(e,function(t){return{data:t}}),l=i.map(n,function(t){return{data:t}});v=r({container:document.getElementById("cy"),style:r.stylesheet().selector("node").style({content:"data(name)","text-valign":"center","text-outline-width":2,"text-outline-color":"#000",color:"#fff"}).selector("edge").css({width:"5px","line-color":function(t){return"hsl("+200*(t.data("score")-a)/(s-a)+",40%,60%)"}}),elements:{nodes:u,edges:l},textureOnViewport:!0,pixelRatio:1,motionBlur:!0,layout:{name:$("#layout option:selected").text().trim(),ungrabifyWhileSimulating:!0,nodeSpacing:$("#node_repulsion").val(),randomize:!0,handleDisconnected:!0,animate:$("#animate").prop("checked")}});var c={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"};v.panzoom(c),v.elements().qtip({content:function(){var t=this.data("score")?"Correlation: "+this.data("score"):this.data("name");return"<b>"+this.data("id")+"</b><br />"+t},position:{my:"top center",at:"bottom center"},style:{classes:"qtip-bootstrap","font-family":"sans-serif",tip:{width:16,height:8}}})}function n(){v.makeLayout({name:$("#layout option:selected").text().trim(),ungrabifyWhileSimulating:!0,nodeSpacing:$("#node_repulsion").val(),randomize:!1,handleDisconnected:!0,animate:$("#animate").prop("checked")}).run()}var v;a(r,g),u(r,p),l(r,f),c(r),s(r),d(r),o(r,$),h(r,$),$("#myform").submit(function(){return e(),!1}),$("#node_repulsion").on("change",n),$("#layout").on("change",n),$("#save_button").on("click",function(){$("#output").empty(),$("#output").append($("<a/>").attr({href:v.png({scale:3})}).append("Download picture"))}),e()})},{cytoscape:125,"cytoscape-cola":4,"cytoscape-cola/cola":3,"cytoscape-cose-bilkent":37,"cytoscape-dagre":38,"cytoscape-ngraph.forcelayout":39,"cytoscape-panzoom":40,"cytoscape-qtip":41,"cytoscape-spread":42,"cytoscape-springy":43,dagre:151,springy:207,underscore:208}],2:[function(t,e,n){},{}],3:[function(t,e,n){var r;!function(t){function e(t,e,n,i,o){function a(t,e){m=[],f=0,g=0,y=h;for(var n=0;n<t.length;n++){s(t[n],e)}return Math.abs(l()-o)}function s(t,e){for(var n=void 0,i=0;i<m.length;i++)if(m[i].space_left>=t.height&&m[i].x+m[i].width+t.width+r.PADDING-e<=r.FLOAT_EPSILON){n=m[i];break}m.push(t),void 0!==n?(t.x=n.x+n.width+r.PADDING,t.y=n.bottom,t.space_left=t.height,t.bottom=t.y,n.space_left-=t.height+r.PADDING,n.bottom+=t.height+r.PADDING):(t.y=y,y+=t.height+r.PADDING,t.x=c,t.bottom=t.y,t.space_left=t.height),t.y+t.height-g>-r.FLOAT_EPSILON&&(g=t.y+t.height-h),t.x+t.width-f>-r.FLOAT_EPSILON&&(f=t.x+t.width-c)}function u(t){var e=0;return t.forEach(function(t){return e+=t.width+r.PADDING}),e}function l(){return f/g}void 0===o&&(o=1);var c=0,h=0,d=e,p=n,o=void 0!==o?o:1,i=void 0!==i?i:0,f=0,g=0,v=0,y=0,m=[];0!=t.length&&(function(t){function e(t){var e=Number.MAX_VALUE,n=Number.MAX_VALUE,r=0,o=0;t.array.forEach(function(t){var a=void 0!==t.width?t.width:i,s=void 0!==t.height?t.height:i;a/=2,s/=2,r=Math.max(t.x+a,r),e=Math.min(t.x-a,e),o=Math.max(t.y+s,o),n=Math.min(t.y-s,n)}),t.width=r-e,t.height=o-n}t.forEach(function(t){e(t)})}(t),function(t,e){var n=Number.POSITIVE_INFINITY,i=0;t.sort(function(t,e){return e.height-t.height}),v=t.reduce(function(t,e){return t.width<e.width?t.width:e.width});for(var o=g=v,s=y=u(t),l=0,c=Number.MAX_VALUE,h=Number.MAX_VALUE,d=-1,p=Number.MAX_VALUE,f=Number.MAX_VALUE;p>v||f>r.FLOAT_EPSILON;){if(1!=d)var g=s-(s-o)/r.GOLDEN_SECTION,c=a(t,g);if(0!=d)var y=o+(s-o)/r.GOLDEN_SECTION,h=a(t,y);if(p=Math.abs(g-y),f=Math.abs(c-h),c<n&&(n=c,i=g),h<n&&(n=h,i=y),c>h?(o=g,g=y,c=h,d=1):(s=y,y=g,h=c,d=0),l++>100)break}a(t,i)}(t,o),function(t){t.forEach(function(t){var e={x:0,y:0};t.array.forEach(function(t){e.x+=t.x,e.y+=t.y}),e.x/=t.array.length,e.y/=t.array.length;var n={x:e.x-t.width/2,y:e.y-t.height/2},r={x:t.x-n.x+d/2-f/2,y:t.y-n.y+p/2-g/2};t.array.forEach(function(t){t.x+=r.x,t.y+=r.y})})}(t))}function n(t,e){function n(t,e){if(void 0===r[t.index]){e&&(a++,o.push({array:[]})),r[t.index]=a,o[a-1].array.push(t);var s=i[t.index];if(s)for(var u=0;u<s.length;u++)n(s[u],!1)}}for(var r={},i={},o=[],a=0,s=0;s<e.length;s++){var u=e[s],l=u.source,c=u.target;i[l.index]?i[l.index].push(c):i[l.index]=[c],i[c.index]?i[c.index].push(l):i[c.index]=[l]}for(var s=0;s<t.length;s++){var h=t[s];r[h.index]||n(h,!0)}return o}var r={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};t.applyPacking=e,t.separateGraphs=n}(r||(r={}));var r;!function(t){!function(t){function e(t,e,n){for(var o=t.map(function(t){return new i(t.desiredCenter)}),a=[],u=t.length,l=0;l<u-1;l++){var c=t[l],h=t[l+1];a.push(new r(o[l],o[l+1],(c.size+h.size)/2))}var d=o[0],p=o[u-1],f=t[0].size/2,g=t[u-1].size/2,v=null,y=null;return e&&(v=new i(e,1e3*d.weight),o.push(v),a.push(new r(v,d,f))),n&&(y=new i(n,1e3*p.weight),o.push(y),a.push(new r(p,y,g))),new s(o,a).solve(),{newCenters:o.slice(0,t.length).map(function(t){return t.position()}),lowerBound:v?v.position():d.position()-f,upperBound:y?y.position():p.position()+g}}var n=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.offset/t.scale,r=t.weight;this.AB+=r*e*n,this.AD+=r*e*t.desiredPosition,this.A2+=r*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();t.PositionStats=n;var r=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();t.Constraint=r;var i=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach(function(t){return n(t,t.right)}),this.cIn.forEach(function(t){return n(t,t.left)})},t}();t.Variable=i;var o=function(){function t(t){this.vars=[],t.offset=0,this.ps=new n(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,function(e,o){var a=r.compute_lm(o,t,n);o===e.right?(i+=a*e.left.scale,e.lm=a):(i+=a*e.right.scale,e.lm=-a),n(e)}),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)})},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,o){e.push(t(r)),i.traverse(t,e,o,n)})},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)}),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,function(){});var n=null;return this.findPath(t,null,e,function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)}),n},t.prototype.findPath=function(t,e,n,r){var i=this,o=!1;return t.visitNeighbours(e,function(e,a){o||a!==n&&!i.findPath(a,t,n,r)||(o=!0,r(e,a))}),o},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var o=t.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();t.Block=o;var a=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new o(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<s.LAGRANGIAN_TOLERANCE&&(n=r.left.block,o.split(r).forEach(function(t){return e.insert(t)}),e.remove(n),t.push(r))})},t}();t.Blocks=a;var s=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=e,e.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=e.map(function(t){return t.active=!1,t}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(t){return t.active=!1,t}),this.bs=new a(this.vs),this.bs.forEach(function(e,n){return e.posn=t[n]})},t.prototype.setDesiredPositions=function(t){this.vs.forEach(function(e,n){return e.desiredPosition=t[n]})},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;a<i;++a){var s=r[a];if(!s.unsatisfiable){var u=s.slack();if((s.equality||u<e)&&(e=u,n=s,o=a,s.equality))break}}return o!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new a(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();t.Solver=s,t.removeOverlapInOneDimension=e}(t.vpsc||(t.vpsc={}))}(r||(r={}));var r,i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};!function(t){!function(t){var e=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){function e(t,e){return n(e,t)}var n=this._comparator;return this._bound(t,e)},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new n(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(n=r._ancestors[o],e(t,n.data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},t}();t.TreeBase=e;var n=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else if(null===this._cursor.right){var e;do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else if(null===this._cursor.left){var e;do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();t.Iterator=n;var r=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}(),o=function(t){function e(e){t.call(this),this._root=null,this._comparator=e,this.size=0}return i(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new r(t),n=!0,this.size++;else{var i=new r(void 0),o=!1,a=!1,s=null,u=i,l=null,c=this._root;for(u.right=this._root;;){if(null===c?(c=new r(t),l.set_child(o,c),n=!0,this.size++):e.is_red(c.left)&&e.is_red(c.right)&&(c.red=!0,c.left.red=!1,c.right.red=!1),e.is_red(c)&&e.is_red(l)){var h=u.right===s;c===l.get_child(a)?u.set_child(h,e.single_rotate(s,!a)):u.set_child(h,e.double_rotate(s,!a))}var d=this._comparator(c.data,t);if(0===d)break;a=o,o=d<0,null!==s&&(u=s),s=l,l=c,c=c.get_child(o)}this._root=i.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new r(void 0),i=n;i.right=this._root;for(var o=null,a=null,s=null,u=!0;null!==i.get_child(u);){var l=u;a=o,o=i,i=i.get_child(u);var c=this._comparator(t,i.data);if(u=c>0,0===c&&(s=i),!e.is_red(i)&&!e.is_red(i.get_child(u)))if(e.is_red(i.get_child(!u))){var h=e.single_rotate(i,u);o.set_child(l,h),o=h}else if(!e.is_red(i.get_child(!u))){var d=o.get_child(!l);if(null!==d)if(e.is_red(d.get_child(!l))||e.is_red(d.get_child(l))){var p=a.right===o;e.is_red(d.get_child(l))?a.set_child(p,e.double_rotate(o,l)):e.is_red(d.get_child(!l))&&a.set_child(p,e.single_rotate(o,l));var f=a.get_child(p);f.red=!0,i.red=!0,f.left.red=!1,f.right.red=!1}else o.red=!1,d.red=!0,i.red=!0}}return null!==s&&(s.data=i.data,o.set_child(o.right===i,i.get_child(null===i.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==s},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(e);t.RBTree=o}(t.vpsc||(t.vpsc={}))}(r||(r={}));var r;!function(t){!function(t){function e(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce(function(t,e){return e.bounds.union(t)},v.empty()):v.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce(function(t,n){return e(n).union(t)},t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}function n(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=i.x-r.x,a=i.y-r.y,s=Math.sqrt(o*o+a*a),u=s-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+u*o/s,y:r.y+u*a/s}}}function r(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,o=r.y-t.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}}function o(t,e){return t.pos>e.pos?1:t.pos<e.pos?-1:t.isOpen?-1:e.isOpen?1:0}function a(){return new t.RBTree(function(t,e){return t.pos-e.pos})}function s(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,o=void 0!==t.groups?t.groups.length:0,a=void 0!==t.leaves?t.leaves.length:0,l=o?t.groups.reduce(function(t,r){return t.concat(s(r,e,n,!0))},[]):[],c=(r?2:0)+a+o,h=new Array(c),d=new Array(c),p=0,f=function(t,e){d[p]=t,h[p++]=e};if(r){var g=t.bounds,v=e.getCentre(g),y=e.getSize(g)/2,m=e.getOpen(g),x=e.getClose(g),b=v-y+i/2,w=v+y-i/2;t.minVar.desiredPosition=b,f(e.makeRect(m,x,b,i),t.minVar),t.maxVar.desiredPosition=w,f(e.makeRect(m,x,w,i),t.maxVar)}a&&t.leaves.forEach(function(t){return f(t.bounds,t.variable)}),o&&t.groups.forEach(function(t){var n=t.bounds;f(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)});var _=u(d,h,e,n);return o&&(h.forEach(function(t){t.cOut=[],t.cIn=[]}),_.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),t.groups.forEach(function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach(function(t){return t.gap+=n}),t.minVar.cOut.forEach(function(e){e.left=t.maxVar,e.gap+=n})})),l.concat(_)}function u(e,n,r,i){var s,u=e.length,l=2*u;console.assert(n.length>=u);var c=new Array(l);for(s=0;s<u;++s){var h=e[s],d=new y(n[s],h,r.getCentre(h));c[s]=new m(!0,d,r.getOpen(h)),c[s+u]=new m(!1,d,r.getClose(h))}c.sort(o);var p=new Array,f=a();for(s=0;s<l;++s){var g=c[s],d=g.v;if(g.isOpen)f.insert(d),r.findNeighbours(d,f);else{f.remove(d);var v=function(e,n){var o=(r.getSize(e.r)+r.getSize(n.r))/2+i;p.push(new t.Constraint(e.v,n.v,o))},x=function(t,e,n){for(var r,i=d[t].iterator();null!==(r=i[t]());)n(r,d),r[e].remove(d)};x("prev","next",function(t,e){return v(t,e)}),x("next","prev",function(t,e){return v(e,t)})}}return console.assert(0===f.size),p}function l(t,e){var n=function(n,r){for(var i,o=e.findIter(t);null!==(i=o[n]());){var a=i.r.overlapX(t.r);if((a<=0||a<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),a<=0)break}};n("next","prev"),n("prev","next")}function c(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}function h(t,e){return u(t,e,x,1e-6)}function d(t,e){return u(t,e,b,1e-6)}function p(t){return s(t,x,1e-6)}function f(t){return s(t,b,1e-6)}function g(e){var n=e.map(function(e){return new t.Variable(e.cx())}),r=t.generateXConstraints(e,n),i=new t.Solver(n,r);i.solve(),n.forEach(function(t,n){return e[n].setXCentre(t.position())}),n=e.map(function(e){return new t.Variable(e.cy())}),r=t.generateYConstraints(e,n),i=new t.Solver(n,r),i.solve(),n.forEach(function(t,n){return e[n].setYCentre(t.position())})}t.computeGroupBounds=e;var v=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;s<4;++s){var u=t.lineIntersection(e,n,r,i,o[s][0],o[s][1],o[s][2],o[s][3]);null!==u&&a.push({x:u.x,y:u.y})}return a},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y},{x:this.x,y:this.y}]},t.lineIntersection=function(t,e,n,r,i,o,a,s){var u=n-t,l=a-i,c=r-e,h=s-o,d=h*u-l*c;if(0==d)return null;var p=t-i,f=e-o,g=l*f-h*p,v=g/d,y=u*f-c*p,m=y/d;return v>=0&&v<=1&&m>=0&&m<=1?{x:t+v*u,y:e+v*c}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();t.Rectangle=v,t.makeEdgeBetween=n,t.makeEdgeTo=r;var y=function(){function t(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=a(),this.next=a()}return t}(),m=function(){function t(t,e,n){this.isOpen=t,this.v=e,this.pos=n}return t}(),x={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new v(n-r/2,n+r/2,t,e)},findNeighbours:l},b={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new v(t,e,n-r/2,n+r/2)},findNeighbours:c};t.generateXConstraints=h,t.generateYConstraints=d,t.generateXGroupConstraints=p,t.generateYGroupConstraints=f,t.removeOverlaps=g;var w=function(t){function e(e,n){t.call(this,0,n),this.index=e}return i(e,t),e}(t.Variable);t.IndexedVariable=w;var _=function(){function n(n,r,i,o,a){var s=this;if(void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=!1),this.nodes=n,this.groups=r,this.rootGroup=i,this.avoidOverlaps=a,this.variables=n.map(function(t,e){return t.variable=new w(e,1)}),o&&this.createConstraints(o),a&&i&&void 0!==i.groups){n.forEach(function(e){if(!e.width||!e.height)return void(e.bounds=new t.Rectangle(e.x,e.x,e.y,e.y));var n=e.width/2,r=e.height/2;e.bounds=new t.Rectangle(e.x-n,e.x+n,e.y-r,e.y+r)}),e(i);var u=n.length;r.forEach(function(t){s.variables[u]=t.minVar=new w(u++,void 0!==t.stiffness?t.stiffness:.01),s.variables[u]=t.maxVar=new w(u++,void 0!==t.stiffness?t.stiffness:.01)})}}return n.prototype.createSeparation=function(e){return new t.Constraint(this.nodes[e.left].variable,this.nodes[e.right].variable,e.gap,void 0!==e.equality&&e.equality)},n.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=t.offsets.map(function(t){return e.nodes[t.node]}).sort(function(t,e){return t[n]-e[n]}),o=null;i.forEach(function(t){o&&(t[n]=o[n]+o[r]+1),o=t})}},n.prototype.createAlignment=function(e){var n=this,r=this.nodes[e.offsets[0].node].variable;this.makeFeasible(e);var i="x"===e.axis?this.xConstraints:this.yConstraints;e.offsets.slice(1).forEach(function(e){var o=n.nodes[e.node].variable;i.push(new t.Constraint(r,o,e.offset,!0))})},n.prototype.createConstraints=function(t){var e=this,n=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter(function(t){return"x"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),this.yConstraints=t.filter(function(t){return"y"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),t.filter(function(t){return"alignment"===t.type}).forEach(function(t){return e.createAlignment(t)})},n.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach(function(i,o){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var a=(i.width||0)/2,s=(i.height||0)/2,u=t[o],l=e[o];i.bounds=new v(u-a,u+a,l-s,l+s)})},n.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,function(t){return t.px},this.xConstraints,p,function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i})},n.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,function(t){return t.py},this.yConstraints,f,function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i})},n.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},n.prototype.project=function(t,n,r,i,o,a,s,u,l){this.setupVariablesAndBounds(t,n,i,o),this.rootGroup&&this.avoidOverlaps&&(e(this.rootGroup),a=a.concat(s(this.rootGroup))),this.solve(this.variables,a,r,i),this.nodes.forEach(u),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(l),e(this.rootGroup))},n.prototype.solve=function(e,n,r,i){var o=new t.Solver(e,n);o.setStartingPositions(r),o.setDesiredPositions(i),o.solve()},n}();t.Projection=_}(t.vpsc||(t.vpsc={}))}(r||(r={}));var r;!function(t){!function(e){function n(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function r(t,e,r){return n(t,e,r)>0}function o(t,e,r){return n(t,e,r)<0}function a(t){var e,r=t.slice(0).sort(function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y}),i=t.length,o=r[0].x;for(e=1;e<i&&r[e].x===o;++e);var a=e-1,s=[];if(s.push(r[0]),a===i-1)r[a].y!==r[0].y&&s.push(r[a]);else{var u,l=i-1,c=r[i-1].x;for(e=i-2;e>=0&&r[e].x===c;e--);for(u=e+1,e=a;++e<=u;)if(!(n(r[0],r[u],r[e])>=0&&e<u)){for(;s.length>1&&!(n(s[s.length-2],s[s.length-1],r[e])>0);)s.length-=1;0!=e&&s.push(r[e])}l!=u&&s.push(r[l]);var h=s.length;for(e=u;--e>=a;)if(!(n(r[l],r[a],r[e])>=0&&e>a)){for(;s.length>h&&!(n(s[s.length-2],s[s.length-1],r[e])>0);)s.length-=1;0!=e&&s.push(r[e])}}return s}function s(t,e,n){e.slice(0).sort(function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)}).forEach(n)}function u(t,e){return{rtan:l(t,e),ltan:c(t,e)}}function l(t,e){var n,i,a,s,u,l=e.length-1;if(o(t,e[1],e[0])&&!r(t,e[l-1],e[0]))return 0;for(n=0,i=l;;){if(i-n==1)return r(t,e[n],e[i])?n:i;if(a=Math.floor((n+i)/2),(u=o(t,e[a+1],e[a]))&&!r(t,e[a-1],e[a]))return a;s=r(t,e[n+1],e[n]),s?u?i=a:r(t,e[n],e[a])?i=a:n=a:u&&o(t,e[n],e[a])?i=a:n=a}}function c(t,e){var n,i,a,s,u,l=e.length-1;if(r(t,e[l-1],e[0])&&!o(t,e[1],e[0]))return 0;for(n=0,i=l;;){if(i-n==1)return o(t,e[n],e[i])?n:i;if(a=Math.floor((n+i)/2),u=o(t,e[a+1],e[a]),r(t,e[a-1],e[a])&&!u)return a;s=o(t,e[n+1],e[n]),s?u?o(t,e[n],e[a])?i=a:n=a:i=a:u?n=a:r(t,e[n],e[a])?i=a:n=a}}function h(t,e,n,r,i,o){var a,s;a=n(e[0],t),s=r(t[a],e);for(var u=!1;!u;){for(u=!0;;){if(a===t.length-1&&(a=0),i(e[s],t[a],t[a+1]))break;++a}for(;;){if(0===s&&(s=e.length-1),o(t[a],e[s],e[s-1]))break;--s,u=!1}}return{t1:a,t2:s}}function d(t,e){var n=p(e,t);return{t1:n.t2,t2:n.t1}}function p(t,e){return h(t,e,l,c,r,o)}function f(t,e){return h(t,e,c,c,o,o)}function g(t,e){return h(t,e,l,l,r,r)}function v(e,n){for(var r=[],i=1,o=n.length;i<o;++i){var a=t.vpsc.Rectangle.lineIntersection(e.x1,e.y1,e.x2,e.y2,n[i-1].x,n[i-1].y,n[i].x,n[i].y);a&&r.push(a)}return r}function y(t,e){for(var r=t.length-1,i=e.length-1,o=new T,a=0;a<r;++a)for(var s=0;s<i;++s){var u=t[0==a?r-1:a-1],l=t[a],c=t[a+1],h=e[0==s?i-1:s-1],d=e[s],p=e[s+1],f=n(u,l,d),g=n(l,h,d),v=n(l,d,p),y=n(h,d,l),m=n(d,u,l),x=n(d,l,c);f>=0&&g>=0&&v<0&&y>=0&&m>=0&&x<0?o.ll=new k(a,s):f<=0&&g<=0&&v>0&&y<=0&&m<=0&&x>0?o.rr=new k(a,s):f<=0&&g>0&&v<=0&&y>=0&&m<0&&x>=0?o.rl=new k(a,s):f>=0&&g<0&&v>=0&&y<=0&&m>0&&x<=0&&(o.lr=new k(a,s))}return o}function m(t,e){for(var n=1,r=e.length;n<r;++n)if(o(e[n-1],e[n],t))return!1;return!0}function x(t,e){return!t.every(function(t){return!m(t,e)})}function b(t,e){if(x(t,e))return!0;if(x(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],o=t[n-1];if(v(new _(o.x,o.y,i.x,i.y),e).length>0)return!0}return!1}var w=function(){function t(){}return t}();e.Point=w;var _=function(){function t(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}return t}();e.LineSegment=_;var E=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(w);e.PolyPoint=E,e.isLeft=n,e.ConvexHull=a,e.clockwiseRadialSweep=s,e.tangent_PolyPolyC=h,e.LRtangent_PolyPolyC=d,e.RLtangent_PolyPolyC=p,e.LLtangent_PolyPolyC=f,e.RRtangent_PolyPolyC=g;var k=function(){function t(t,e){this.t1=t,this.t2=e}return t}();e.BiTangent=k;var T=function(){function t(){}return t}();e.BiTangents=T;var N=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(w);e.TVGPoint=N;var S=function(){function t(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this}return t}();e.VisibilityVertex=S;var L=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();e.VisibilityEdge=L;var C=function(){function t(t,n){if(this.P=t,this.V=[],this.E=[],n)this.V=n.V.slice(0),this.E=n.E.slice(0);else{for(var r=t.length,i=0;i<r;i++)for(var o=t[i],a=0;a<o.length;++a){var s=o[a],u=new S(this.V.length,i,a,s);this.V.push(u),a>0&&this.E.push(new L(o[a-1].vv,u))}for(var i=0;i<r-1;i++)for(var l=t[i],a=i+1;a<r;a++){var c=t[a],h=e.tangents(l,c);for(var d in h){var p=h[d],f=l[p.t1],g=c[p.t2];this.addEdgeIfVisible(f,g,i,a)}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new _(t.x,t.y,e.x,e.y),n,r)||this.E.push(new L(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n=this.P.length
;this.V.push(new S(this.V.length,n,0,t));for(var r=0;r<n;++r)if(r!==e){var i=this.P[r],o=u(t,i);this.addEdgeIfVisible(t,i[o.ltan],e,r),this.addEdgeIfVisible(t,i[o.rtan],e,r)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&v(t,this.P[r]).length>0)return!0;return!1},t}();e.TangentVisibilityGraph=C,e.tangents=y,e.polysOverlap=b}(t.geom||(t.geom={}))}(r||(r={}));var r;!function(t){var e=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(e,this.locks[e])},t}();t.Locks=e;var n=function(){function t(t,n,i){void 0===i&&(i=null),this.D=n,this.G=i,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new r,this.project=null,this.x=t,this.k=t.length;var o=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new e,this.minD=Number.MAX_VALUE;for(var a,s=o;s--;)for(a=o;--a>s;){var u=n[s][a];u>0&&u<this.minD&&(this.minD=u)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(o),this.H[s]=new Array(o),a=o;a--;)this.H[s][a]=new Array(o);this.Hd[s]=new Array(o),this.a[s]=new Array(o),this.b[s]=new Array(o),this.c[s]=new Array(o),this.d[s]=new Array(o),this.e[s]=new Array(o),this.ia[s]=new Array(o),this.ib[s]=new Array(o),this.xtmp[s]=new Array(o)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map(function(e){return e*=t.minD/n})},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,u=0;u<n;++u){for(r=0;r<this.k;++r)a[r]=this.g[r][u]=0;for(var l=0;l<n;++l)if(u!==l){for(var c=n;c--;){var h=0;for(r=0;r<this.k;++r){var d=i[r]=t[r][u]-t[r][l];h+=o[r]=d*d}if(h>1e-9)break;var p=this.offsetDir();for(r=0;r<this.k;++r)t[r][l]+=p[r]}var f=Math.sqrt(h),g=this.D[u][l],v=null!=this.G?this.G[u][l]:1;if(v>1&&f>g||!isFinite(g))for(r=0;r<this.k;++r)this.H[r][u][l]=0;else{v>1&&(v=1);var y=g*g,m=2*v*(f-g)/(y*f),x=f*f*f,b=2*-v/(y*x);for(isFinite(m)||console.log(m),r=0;r<this.k;++r)this.g[r][u]+=i[r]*m,a[r]-=this.H[r][u][l]=b*(x+g*(o[r]-h)+f*h)}}for(r=0;r<this.k;++r)s=Math.max(s,this.H[r][u][u]=a[r])}for(var w=this.snapGridSize/2,_=this.snapGridSize,E=this.snapStrength,k=E/(w*w),T=this.numGridSnapNodes,u=0;u<T;++u)for(r=0;r<this.k;++r){var N=this.x[r][u],S=N/_,L=S%1,C=S-L,D=Math.abs(L),d=D<=.5?N-C*_:N>0?N-(C+1)*_:N-(C-1)*_;-w<d&&d<=w&&(this.scaleSnapByMaxH?(this.g[r][u]+=s*k*d,this.H[r][u][u]+=s*k):(this.g[r][u]+=k*d,this.H[r][u][u]+=k))}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=s,e.g[r][n]-=s*(i[r]-t[r][n])})}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)e[i][o]=t[i][o]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply(function(r,i){return n.e[r][i]=t[r][i]-e[r][i]});var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,o=e.x[t][r]-i;n+=o*o,e.x[t][r]=i}),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2})},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][e]-this.x[a][r];o+=s*s}o=Math.sqrt(o);var u=this.D[e][r];if(isFinite(u)){var l=u-o,c=u*u;t+=l*l/c}}return t},t.zeroDistance=1e-10,t}();t.Descent=n;var r=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();t.PseudoRandom=r}(r||(r={}));var r;!function(t){!function(t){function e(t,n,r){t.forAll(function(t){if(t.isLeaf())n.leaves||(n.leaves=[]),n.leaves.push(t.id);else{var i=n;if(t.gid=r.length,!t.isIsland()||t.isPredefined()){if(i={id:t.gid},t.isPredefined())for(var o in t.definition)i[o]=t.definition[o];n.groups||(n.groups=[]),n.groups.push(t.gid),r.push(i)}e(t.children,i,r)}})}function n(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}function r(e,n,r,i){for(var o=e.length,a=new t.Configuration(o,n,r,i);a.greedyMerge(););var s=[],u=a.getGroupHierarchy(s);return s.forEach(function(t){var n=function(n){var r=t[n];"number"==typeof r&&(t[n]=e[r])};n("source"),n("target")}),{groups:u,powerEdges:s}}var i=function(){function t(t,e,n){this.source=t,this.target=e,this.type=n}return t}();t.PowerEdge=i;var o=function(){function t(t,e,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new s);for(var o=0;o<t;++o)this.roots[0].add(this.modules[o]=new a(o))}this.R=e.length,e.forEach(function(t){var e=i.modules[n.getSourceIndex(t)],r=i.modules[n.getTargetIndex(t)],o=n.getType(t);e.outgoing.add(o,r),r.incoming.add(o,e)})}return t.prototype.initModulesFromGroup=function(t){var e=new s;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],i=new a(r.id);this.modules[r.id]=i,e.add(i)}if(t.groups)for(var o=0;o<t.groups.length;++o){var l=t.groups[o],c={};for(var h in l)"leaves"!==h&&"groups"!==h&&l.hasOwnProperty(h)&&(c[h]=l[h]);e.add(new a(-1-o,new u,new u,this.initModulesFromGroup(l),c))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),i=t.outgoing.intersection(e.outgoing),o=new s;o.add(t),o.add(e);var u=new a(this.modules.length,i,r,o);this.modules.push(u);var l=function(n,r,i){n.forAll(function(n,o){n.forAll(function(n){var a=n[r];a.add(o,u),a.remove(o,t),a.remove(o,e),t[i].remove(o,n),e[i].remove(o,n)})})};return l(i,"incoming","outgoing"),l(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(u),u},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,o=0,a=n-1;o<a;++o)for(var s=o+1;s<n;++s){var u=e[o],l=e[s];r[i]={id:i,nEdges:this.nEdges(u,l),a:u,b:l},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort(function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges}),n=e[0];if(!(n.nEdges>=this.R))return this.merge(n.a,n.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var n=this,r=[],o={};return e(this.roots[0],o,r),this.allEdges().forEach(function(e){var o=n.modules[e.source],a=n.modules[e.target];t.push(new i(void 0===o.gid?e.source:r[o.gid],void 0===a.gid?e.target:r[a.gid],e.type))}),r},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll(function(e){e.getEdges(n),t.getEdges(e.children,n)})},t}();t.Configuration=o;var a=function(){function t(t,e,n,r,i){void 0===e&&(e=new u),void 0===n&&(n=new u),void 0===r&&(r=new s),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll(function(n,r){n.forAll(function(n){t.push(new i(e.id,n.id,r))})})},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();t.Module=a;var s=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var r=new t;return r.table=n(this.table,e.table),r},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll(function(e){e.isPredefined()||t.push(e)}),t},t}();t.ModuleSet=s;var u=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules(function(n){e||n.id!=t||(e=!0)}),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new s).add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],e)},t.prototype.forAllModules=function(t){this.forAll(function(e,n){return e.forAll(t)})},t.prototype.intersection=function(e){var n=new t;return this.forAll(function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}}),n},t}();t.LinkSets=u,t.getGroups=r}(t.powergraph||(t.powergraph={}))}(r||(r={}));var r;!function(t){function e(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function n(t,e){var n=0;for(var r in t)void 0!==e[r]&&++n;return n}function r(t,e){var n={},r=function(t,e){void 0===n[t]&&(n[t]={}),n[t][e]={}};return t.forEach(function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)}),n}function i(t,e,n,i){var o=r(t,i);t.forEach(function(t){var r=o[i.getSourceIndex(t)],a=o[i.getTargetIndex(t)];i.setLength(t,1+e*n(r,a))})}function o(t,r,o){void 0===o&&(o=1),i(t,o,function(t,r){return Math.sqrt(e(t,r)-n(t,r))},r)}function a(t,r,o){void 0===o&&(o=1),i(t,o,function(t,r){return Math.min(Object.keys(t).length,Object.keys(r).length)<1.1?0:n(t,r)/e(t,r)},r)}function s(t,e,n,r){var i=u(t,e,r),o={};i.forEach(function(t,e){return t.forEach(function(t){return o[t]=e})});var a=[];return e.forEach(function(t){var e=r.getSourceIndex(t),i=r.getTargetIndex(t);o[e]!==o[i]&&a.push({axis:n,left:e,right:i,gap:r.getMinSeparation(t)})}),a}function u(t,e,n){function r(t){t.index=t.lowlink=o++,a.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var i=n[e];void 0===i.index?(r(i),t.lowlink=Math.min(t.lowlink,i.lowlink)):i.onStack&&(t.lowlink=Math.min(t.lowlink,i.index))}if(t.lowlink===t.index){for(var u=[];a.length&&(i=a.pop(),i.onStack=!1,u.push(i),i!==t););s.push(u.map(function(t){return t.id}))}}for(var i=[],o=0,a=[],s=[],u=0;u<t;u++)i.push({id:u,out:[]});for(var l=0;l<e.length;l++){var c=e[l],h=i[n.getSourceIndex(c)],d=i[n.getTargetIndex(c)];h.out.push(d)}for(var p=0;p<i.length;p++){var f=i[p];void 0===f.index&&r(f)}return s}t.symmetricDiffLinkLengths=o,t.jaccardLinkLengths=a,t.generateDirectedEdgeConstraints=s,t.stronglyConnectedComponents=u}(r||(r={}));var r,o=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach(function(e){return e.forEach(t)}))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(t,e){return t+e.count()},0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every(function(n){return t(e.elem,n.elem)&&n.isHeap(t)})},t.prototype.insert=function(e,n){return this.merge(new t(e),n)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var o=e.removeMin(i);e.elem=o.elem,e.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(e.elem,e);var a=new t(n);return null!==r&&r(n,a),this.merge(a,i)},t}(),a=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n,r,i=0;r=t[i];++i)n=new o(r),this.root=this.empty()?n:this.root.merge(n,this.lessThan);return n},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}();!function(t){!function(t){var e=function(){function t(t,e){this.id=t,this.distance=e}return t}(),n=function(){function t(t){this.id=t,this.neighbours=[]}return t}(),r=function(){function t(t,e,n){this.node=t,this.prev=e,this.d=n}return t}(),i=function(){function t(t,r,i,o,a){this.n=t,this.es=r,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new n(s);for(s=this.es.length;s--;){var u=this.es[s],l=i(u),c=o(u),h=a(u);this.neighbours[l].neighbours.push(new e(c,h)),this.neighbours[c].neighbours.push(new e(l,h))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var i=new a(function(t,e){return t.d<=e.d}),o=this.neighbours[t],s=new r(o,null,0),u={};for(i.push(s);!i.empty()&&(s=i.pop(),o=s.node,o.id!==e);)for(var l=o.neighbours.length;l--;){var c=o.neighbours[l],h=this.neighbours[c.id];if(!s.prev||h.id!==s.prev.node.id){var d=h.id+","+o.id;if(!(d in u&&u[d]<=s.d)){var p=s.prev?n(s.prev.node.id,o.id,h.id):0,f=s.d+c.distance+p;u[d]=f,i.push(new r(h,s,f))}}}for(var g=[];s.prev;)s=s.prev,g.push(s.node.id);return g},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new a(function(t,e){return t.d<=e.d}),r=this.neighbours.length,i=new Array(r);r--;){var o=this.neighbours[r];o.d=r===t?0:Number.POSITIVE_INFINITY,o.q=n.push(o)}for(;!n.empty();){var s=n.pop();if(i[s.id]=s.d,s.id===e){for(var u=[],l=s;void 0!==l.prev;)u.push(l.prev.id),l=l.prev;return u}for(r=s.neighbours.length;r--;){var c=s.neighbours[r],l=this.neighbours[c.id],h=s.d+c.distance;s.d!==Number.MAX_VALUE&&l.d>h&&(l.d=h,l.prev=s,n.reduceKey(l.q,l,function(t,e){return t.q=e}))}}return i},t}();t.Calculator=i}(t.shortestpaths||(t.shortestpaths={}))}(r||(r={}));var r;!function(t){function e(t){return void 0!==t.leaves||void 0!==t.groups}!function(t){t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end"}(t.EventType||(t.EventType={}));var n=t.EventType,r=function(){function r(){var t=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:r.getSourceIndex,getTargetIndex:r.getTargetIndex,setLength:r.setLinkLength,getType:function(e){return"function"==typeof t._linkType?t._linkType(e):0}}}return r.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[n[t]]=e:this.event[t]=e,this},r.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},r.prototype.kick=function(){for(;!this.tick(););},r.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:n.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,r=this._nodes.length;this._links.length;for(this._descent.locks.clear(),e=0;e<r;++e)if(t=this._nodes[e],t.fixed){void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y);var i=[t.px,t.py];this._descent.locks.add(e,i)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:void 0!==this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:n.tick,alpha:this._alpha,stress:this._lastStress}),!1},r.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)t=this._nodes[r],t.x=e[r],t.y=n[r]},r.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach(function(t){e=Math.max(e,t.source,t.target)}),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},r.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach(function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach(function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)}),void 0!==t.groups&&t.groups.forEach(function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)})}),this._rootGroup.leaves=this._nodes.filter(function(t){return void 0===t.parent}),this._rootGroup.groups=this._groups.filter(function(t){return void 0===t.parent}),this):this._groups},r.prototype.powerGraphGroups=function(e){var n=t.powergraph.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(n.groups),e(n),this},r.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},r.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},r.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},r.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},r.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},r.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},r.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},r.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},r.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},r.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},r.prototype.linkType=function(t){return this._linkType=t,this},r.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},r.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:n.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},r.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},r.setLinkLength=function(t,e){t.length=e},r.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},r.prototype.symmetricDiffLinkLengths=function(e,n){var r=this;return void 0===n&&(n=1),this.linkDistance(function(t){return e*t.length}),this._linkLengthCalculator=function(){return t.symmetricDiffLinkLengths(r._links,r.linkAccessor,n)},this},r.prototype.jaccardLinkLengths=function(e,n){var r=this;return void 0===n&&(n=1),this.linkDistance(function(t){return e*t.length}),this._linkLengthCalculator=function(){return t.jaccardLinkLengths(r._links,r.linkAccessor,n)},this},r.prototype.start=function(e,n,i,o,a){var s=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=!0);var u,l=this.nodes().length,c=l+2*this._groups.length,h=(this._links.length,this._canvasSize[0]),d=this._canvasSize[1],p=new Array(c),f=new Array(c),g=null,v=this._avoidOverlaps;this._nodes.forEach(function(t,e){t.index=e,void 0===t.x&&(t.x=h/2,t.y=d/2),p[e]=t.x,f[e]=t.y}),this._linkLengthCalculator&&this._linkLengthCalculator();var y;this._distanceMatrix?y=this._distanceMatrix:(y=new t.shortestpaths.Calculator(c,this._links,r.getSourceIndex,r.getTargetIndex,function(t){return s.getLinkLength(t)}).DistanceMatrix(),g=t.Descent.createSquareMatrix(c,function(){return 2}),this._links.forEach(function(t){"number"==typeof t.source&&(t.source=s._nodes[t.source]),"number"==typeof t.target&&(t.target=s._nodes[t.target])}),this._links.forEach(function(t){var e=r.getSourceIndex(t),n=r.getTargetIndex(t);g[e][n]=g[n][e]=t.weight||1}));var m=t.Descent.createSquareMatrix(c,function(t,e){return y[t][e]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var u=l,x=function(t,e,n,r){g[t][e]=g[e][t]=n,m[t][e]=m[e][t]=r};this._groups.forEach(function(t){x(u,u+1,s._groupCompactness,.1),p[u]=0,f[u++]=0,p[u]=0,f[u++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var b=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,b=b.concat(t.generateDirectedEdgeConstraints(l,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new t.Descent([p,f],m),this._descent.locks.clear();for(var u=0;u<l;++u){var w=this._nodes[u];if(w.fixed){w.px=w.x,w.py=w.y;var _=[w.x,w.y];this._descent.locks.add(u,_)}}if(this._descent.threshold=this._threshold,this.initialLayout(e,p,f),b.length>0&&(this._descent.project=new t.vpsc.Projection(this._nodes,this._groups,this._rootGroup,b).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(h,d),this.avoidOverlaps(v),v&&(this._nodes.forEach(function(t,e){t.x=p[e],t.y=f[e]}),this._descent.project=new t.vpsc.Projection(this._nodes,this._groups,this._rootGroup,b,!0).projectFunctions(),this._nodes.forEach(function(t,e){p[e]=t.x,f[e]=t.y})),this._descent.G=g,this._descent.run(i),o){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=l,this._descent.scaleSnapByMaxH=l!=c;var E=t.Descent.createSquareMatrix(c,function(t,e){return t>=l||e>=l?g[t][e]:0});this._descent.G=E,this._descent.run(o)}return this.updateNodePositions(),this.separateOverlappingComponents(h,d),a?this.resume():this},r.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,o=this._links.map(function(t){return{source:t.source.index,target:t.target.index}}),a=this._nodes.map(function(t){return{index:t.index}});this._groups.forEach(function(t,e){a.push({index:t.index=i+e})}),this._groups.forEach(function(t,e){void 0!==t.leaves&&t.leaves.forEach(function(e){return o.push({source:t.index,target:e.index})}),void 0!==t.groups&&t.groups.forEach(function(e){return o.push({source:t.index,target:e.index})})}),(new t.Layout).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach(function(t){n[t.index]=a[t.index].x,r[t.index]=a[t.index].y})}else this._descent.run(e)},r.prototype.separateOverlappingComponents=function(e,n){var r=this;if(!this._distanceMatrix&&this._handleDisconnected){var i=this._descent.x[0],o=this._descent.x[1];this._nodes.forEach(function(t,e){t.x=i[e],t.y=o[e]});var a=t.separateGraphs(this._nodes,this._links);t.applyPacking(a,e,n,this._defaultNodeSize),this._nodes.forEach(function(t,e){r._descent.x[0][e]=t.x,r._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))})}},r.prototype.resume=function(){return this.alpha(.1)},r.prototype.stop=function(){return this.alpha(0)},r.prototype.prepareEdgeRouting=function(e){void 0===e&&(e=0),this._visibilityGraph=new t.geom.TangentVisibilityGraph(this._nodes.map(function(t){return t.bounds.inflate(-e).vertices()}))},r.prototype.routeEdge=function(e,n){var r=[],i=new t.geom.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:e.source.x,y:e.source.y},a={x:e.target.x,y:e.target.y},s=i.addPoint(o,e.source.index),u=i.addPoint(a,e.target.index);i.addEdgeIfVisible(o,a,e.source.index,e.target.index),void 0!==n&&n(i);var l=function(t){return t.source.id},c=function(t){return t.target.id},h=function(t){return t.length()},d=new t.shortestpaths.Calculator(i.V.length,i.E,l,c,h),p=d.PathFromNodeToNode(s.id,u.id);if(1===p.length||p.length===i.V.length){var f=t.vpsc.makeEdgeBetween(e.source.innerBounds,e.target.innerBounds,5);r=[f.sourceIntersection,f.arrowStart]}else{for(var g=p.length-2,v=i.V[p[g]].p,y=i.V[p[0]].p,r=[e.source.innerBounds.rayIntersection(v.x,v.y)],m=g;m>=0;--m)r.push(i.V[p[m]].p);r.push(t.vpsc.makeEdgeTo(y,e.target.innerBounds,5))}return r},r.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},r.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},r.linkId=function(t){return r.getSourceIndex(t)+"-"+r.getTargetIndex(t)},r.dragStart=function(t){e(t)?r.storeOffset(t,r.dragOrigin(t)):(r.stopNode(t),t.fixed|=2)},r.stopNode=function(t){t.px=t.x,t.py=t.y},r.storeOffset=function(t,e){void 0!==t.leaves&&t.leaves.forEach(function(t){t.fixed|=2,r.stopNode(t),t._dragGroupOffsetX=t.x-e.x,t._dragGroupOffsetY=t.y-e.y}),void 0!==t.groups&&t.groups.forEach(function(t){return r.storeOffset(t,e)})},r.dragOrigin=function(t){return e(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},r.drag=function(t,n){e(t)?(void 0!==t.leaves&&t.leaves.forEach(function(e){t.bounds.setXCentre(n.x),t.bounds.setYCentre(n.y),e.px=e._dragGroupOffsetX+n.x,e.py=e._dragGroupOffsetY+n.y}),void 0!==t.groups&&t.groups.forEach(function(t){return r.drag(t,n)})):(t.px=n.x,t.py=n.y)},r.dragEnd=function(t){e(t)?(void 0!==t.leaves&&t.leaves.forEach(function(t){r.dragEnd(t),delete t._dragGroupOffsetX,delete t._dragGroupOffsetY}),void 0!==t.groups&&t.groups.forEach(r.dragEnd)):t.fixed&=-7},r.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},r.mouseOut=function(t){t.fixed&=-5},r}();t.Layout=r}(r||(r={}));var r;!function(t){function e(t){return new n(t)}var n=function(e){function n(n){e.call(this);var r=n;r.trigger&&(this.trigger=r.trigger),r.kick&&(this.kick=r.kick),r.drag&&(this.drag=r.drag),r.on&&(this.on=r.on),this.dragstart=this.dragStart=t.Layout.dragStart,this.dragend=this.dragEnd=t.Layout.dragEnd}return i(n,e),n.prototype.trigger=function(t){},n.prototype.kick=function(){},n.prototype.drag=function(){},n.prototype.on=function(t,e){return this},n}(t.Layout);t.LayoutAdaptor=n,t.adaptor=e}(r||(r={}));var r;!function(t){function e(t,e,r,i){return t.cola.start(0,0,0,10,!1),n(t.cola.nodes(),t.cola.groups(),r,i).routeEdges(t.powerGraph.powerEdges,e,function(t){return t.source.routerNode.id},function(t){return t.target.routerNode.id})}function n(e,n,r,i){e.forEach(function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-r)}}),n.forEach(function(t){t.routerNode={bounds:t.bounds.inflate(-i),children:(void 0!==t.groups?t.groups.map(function(t){return e.length+t.id}):[]).concat(void 0!==t.leaves?t.leaves.map(function(t){return t.index}):[])}});var o=e.concat(n).map(function(t,e){return t.routerNode.id=e,t.routerNode});return new t.GridRouter(o,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},r-i)}function r(e,n,r,i,o){var a;e.nodes.forEach(function(t,e){return t.index=e}),(new t.Layout).avoidOverlaps(!1).nodes(e.nodes).links(e.links).powerGraphGroups(function(t){a=t,a.groups.forEach(function(t){return t.padding=r})});var s=e.nodes.length,u=[],l=e.nodes.slice(0);return l.forEach(function(t,e){return t.index=e}),a.groups.forEach(function(t){var e=t.index=t.id+s;l.push(t),void 0!==t.leaves&&t.leaves.forEach(function(t){return u.push({source:e,target:t.index})}),void 0!==t.groups&&t.groups.forEach(function(t){return u.push({source:e,target:t.id+s})})}),a.powerEdges.forEach(function(t){u.push({source:t.source.index,target:t.target.index})}),(new t.Layout).size(n).nodes(l).links(u).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new t.Layout).convergenceThreshold(.001).size(n).avoidOverlaps(!0).nodes(e.nodes).links(e.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(t){a=t,a.groups.forEach(function(t){t.padding=r})}).start(50,0,100,0,!1),powerGraph:a}}t.gridify=e,t.powerGraphGridLayout=r}(r||(r={}));var r;!function(t){function e(){return new n}var n=function(e){function n(){e.call(this),this.event=d3.dispatch(t.EventType[t.EventType.start],t.EventType[t.EventType.tick],t.EventType[t.EventType.end]);var n=this;this.drag=function(){if(!e)var e=d3.behavior.drag().origin(t.Layout.dragOrigin).on("dragstart.d3adaptor",t.Layout.dragStart).on("drag.d3adaptor",function(e){
t.Layout.drag(e,d3.event),n.resume()}).on("dragend.d3adaptor",t.Layout.dragEnd);if(!arguments.length)return e;this.call(e)}}return i(n,e),n.prototype.trigger=function(e){var n={type:t.EventType[e.type],alpha:e.alpha,stress:e.stress};this.event[n.type](n)},n.prototype.kick=function(){var t=this;d3.timer(function(){return e.prototype.tick.call(t)})},n.prototype.on=function(e,n){return"string"==typeof e?this.event.on(e,n):this.event.on(t.EventType[e],n),this},n}(t.Layout);t.D3StyleLayoutAdaptor=n,t.d3adaptor=e}(r||(r={}));var r;!function(t){var e=function(){function t(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf=void 0===n||0===n.length}return t}();t.NodeWrapper=e;var n=function(){function t(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i}return t}();t.Vert=n;var r=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),o=t.findMatch(e,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;a<n;a++){o[a]=new Array(r);for(var s=0;s<r;s++)if(t[a]===e[s]){var u=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;u>i.length&&(i.length=u,i.si=a-u+1,i.ti=s-u+1)}else o[a][s]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();t.LongestCommonSubsequence=r;var i=function(){function r(r,i,o){var a=this;void 0===o&&(o=12),this.originalnodes=r,this.groupPadding=o,this.leaves=null,this.nodes=r.map(function(t,n){return new e(n,i.getBounds(t),i.getChildren(t))}),this.leaves=this.nodes.filter(function(t){return t.leaf}),this.groups=this.nodes.filter(function(t){return!t.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(t){return t.children.forEach(function(e){return a.nodes[e].parent=t})}),this.root={children:[]},this.nodes.forEach(function(t){void 0===t.parent&&(t.parent=a.root,a.root.children.push(t.id)),t.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(t,e){return a.getDepth(t)-a.getDepth(e)}),this.backToFront.slice(0).reverse().filter(function(t){return!t.leaf}).forEach(function(e){var n=t.vpsc.Rectangle.empty();e.children.forEach(function(t){return n=n.union(a.nodes[t].rect)}),e.rect=n.inflate(a.groupPadding)});var s=this.midPoints(this.cols.map(function(t){return t.pos})),u=this.midPoints(this.rows.map(function(t){return t.pos})),l=s[0],c=s[s.length-1],h=u[0],d=u[u.length-1],p=this.rows.map(function(t){return{x1:l,x2:c,y1:t.pos,y2:t.pos}}).concat(u.map(function(t){return{x1:l,x2:c,y1:t,y2:t}})),f=this.cols.map(function(t){return{x1:t.pos,x2:t.pos,y1:h,y2:d}}).concat(s.map(function(t){return{x1:t,x2:t,y1:h,y2:d}})),g=p.concat(f);g.forEach(function(t){return t.verts=[]}),this.verts=[],this.edges=[],p.forEach(function(t){return f.forEach(function(e){var r=new n(a.verts.length,e.x1,t.y1);t.verts.push(r),e.verts.push(r),a.verts.push(r);for(var i=a.backToFront.length;i-- >0;){var o=a.backToFront[i],s=o.rect,u=Math.abs(r.x-s.cx()),l=Math.abs(r.y-s.cy());if(u<s.width()/2&&l<s.height()/2){r.node=o;break}}})}),g.forEach(function(t,e){a.nodes.forEach(function(e,r){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach(function(r,i){var o=new n(a.verts.length,r.x,r.y,e,t);a.verts.push(o),t.verts.push(o),e.ports.push(o)})});var r=Math.abs(t.y1-t.y2)<.1,i=function(t,e){return r?e.x-t.x:e.y-t.y};t.verts.sort(i);for(var o=1;o<t.verts.length;o++){var s=t.verts[o-1],u=t.verts[o];s.node&&s.node===u.node&&s.node.leaf||a.edges.push({source:s.id,target:u.id,length:Math.abs(i(s,u))})}})}return r.prototype.avg=function(t){return t.reduce(function(t,e){return t+e})/t.length},r.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter(function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)}),i={nodes:r,pos:this.avg(r.map(function(e){return e.rect["c"+t]()}))};e.push(i),i.nodes.forEach(function(t){return n.splice(n.indexOf(t),1)})}return e.sort(function(t,e){return t.pos-e.pos}),e},r.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},r.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},r.prototype.findLineage=function(t){var e=[t];do{t=t.parent,e.push(t)}while(t!==this.root);return e.reverse()},r.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},r.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach(function(t){return i[t.id]={}});var o=r.commonAncestor.children.filter(function(t){return!(t in i)});return r.lineages.filter(function(t){return t.parent!==r.commonAncestor}).forEach(function(t){return o=o.concat(t.parent.children.filter(function(e){return e!==t.id}))}),o.map(function(t){return n.nodes[t]})},r.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=t[i],a=0;a<o.length;a++){var s=o[a];s.edgeid=i,s.i=a;var u=s[1][e]-s[0][e];Math.abs(u)<.1&&r.push(s)}r.sort(function(t,n){return t[0][e]-n[0][e]});for(var l=[],c=null,h=0;h<r.length;h++){var s=r[h];(!c||Math.abs(s[0][e]-c.pos)>.1)&&(c={pos:s[0][e],segments:[]},l.push(c)),c.segments.push(s)}return l},r.nudgeSegs=function(e,n,r,i,o,a){var s=i.length;if(!(s<=1)){for(var u=i.map(function(n){return new t.vpsc.Variable(n[0][e])}),l=[],c=0;c<s;c++)for(var h=0;h<s;h++)if(c!==h){var d=i[c],p=i[h],f=d.edgeid,g=p.edgeid,v=-1,y=-1;"x"==e?o(f,g)&&(d[0][n]<d[1][n]?(v=h,y=c):(v=c,y=h)):o(f,g)&&(d[0][n]<d[1][n]?(v=c,y=h):(v=h,y=c)),v>=0&&l.push(new t.vpsc.Constraint(u[v],u[y],a))}new t.vpsc.Solver(u,l).solve(),u.forEach(function(t,n){var o=i[n],a=t.position();o[0][e]=o[1][e]=a;var s=r[o.edgeid];o.i>0&&(s[o.i-1][1][e]=a),o.i<s.length-1&&(s[o.i+1][0][e]=a)})}},r.nudgeSegments=function(t,e,n,i,o){for(var a=r.getSegmentSets(t,e,n),s=0;s<a.length;s++){for(var u=a[s],l=[],c=0;c<u.segments.length;c++){var h=u.segments[c];l.push({type:0,s:h,pos:Math.min(h[0][n],h[1][n])}),l.push({type:1,s:h,pos:Math.max(h[0][n],h[1][n])})}l.sort(function(t,e){return t.pos-e.pos+t.type-e.type});var d=[],p=0;l.forEach(function(a){0===a.type?(d.push(a.s),p++):p--,0==p&&(r.nudgeSegs(e,n,t,d,i,o),d=[])})}},r.prototype.routeEdges=function(e,n,r,i){var o=this,a=e.map(function(t){return o.route(r(t),i(t))}),s=t.GridRouter.orderEdges(a),u=a.map(function(e){return t.GridRouter.makeSegments(e)});return t.GridRouter.nudgeSegments(u,"x","y",s,n),t.GridRouter.nudgeSegments(u,"y","x",s,n),t.GridRouter.unreverseEdges(u,a),u},r.unreverseEdges=function(t,e){t.forEach(function(t,n){e[n].reversed&&(t.reverse(),t.forEach(function(t){t.reverse()}))})},r.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},r.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},r.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];void 0===e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return void 0!==e[t]&&e[t][n]}},r.orderEdges=function(e){for(var n=[],i=0;i<e.length-1;i++)for(var o=i+1;o<e.length;o++){var a,s,u,l=e[i],c=e[o],h=new t.LongestCommonSubsequence(l,c);0!==h.length&&(h.reversed&&(c.reverse(),c.reversed=!0,h=new t.LongestCommonSubsequence(l,c)),(h.si<=0||h.ti<=0)&&(h.si+h.length>=l.length||h.ti+h.length>=c.length)?n.push({l:i,r:o}):(h.si+h.length>=l.length||h.ti+h.length>=c.length?(a=l[h.si+1],u=l[h.si-1],s=c[h.ti-1]):(a=l[h.si+h.length-2],s=l[h.si+h.length],u=c[h.ti+h.length]),r.isLeft(a,s,u)?n.push({l:o,r:i}):n.push({l:i,r:o})))}return t.GridRouter.getOrder(n)},r.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=[],r=e(t[0]),i=1;i<t.length;i++){var o=e(t[i]),a=i<t.length-1?t[i+1]:null;a&&function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001}(r,o,a)||(n.push([r,o]),r=o)}return n},r.prototype.route=function(e,n){var r=this,i=this.nodes[e],o=this.nodes[n];this.obstacles=this.siblingObstacles(i,o);var a={};this.obstacles.forEach(function(t){return a[t.id]=t}),this.passableEdges=this.edges.filter(function(t){var e=r.verts[t.source],n=r.verts[t.target];return!(e.node&&e.node.id in a||n.node&&n.node.id in a)});for(var s=1;s<i.ports.length;s++){var u=i.ports[0].id,l=i.ports[s].id;this.passableEdges.push({source:u,target:l,length:0})}for(var s=1;s<o.ports.length;s++){var u=o.ports[0].id,l=o.ports[s].id;this.passableEdges.push({source:u,target:l,length:0})}var c=function(t){return t.source},h=function(t){return t.target},d=function(t){return t.length},p=new t.shortestpaths.Calculator(this.verts.length,this.passableEdges,c,h,d),f=function(t,e,n){var a=r.verts[t],s=r.verts[e],u=r.verts[n],l=Math.abs(u.x-a.x),c=Math.abs(u.y-a.y);return a.node===i&&a.node===s.node||s.node===o&&s.node===u.node?0:l>1&&c>1?1e3:0},g=p.PathFromNodeToNodeWithPrevCost(i.ports[0].id,o.ports[0].id,f),v=g.reverse().map(function(t){return r.verts[t]});return v.push(this.nodes[o.id].ports[0]),v.filter(function(t,e){return!(e<v.length-1&&v[e+1].node===i&&t.node===i||e>0&&t.node===o&&v[e-1].node===o)})},r.getRoutePath=function(t,e,n,i){var o={routepath:"M "+t[0][0].x+" "+t[0][0].y+" ",arrowpath:""};if(t.length>1)for(var a=0;a<t.length;a++){var s=t[a],u=s[1].x,l=s[1].y,c=u-s[0].x,h=l-s[0].y;if(a<t.length-1){Math.abs(c)>0?u-=c/Math.abs(c)*e:l-=h/Math.abs(h)*e,o.routepath+="L "+u+" "+l+" ";var d=t[a+1],p=d[0].x,f=d[0].y,g=d[1].x,v=d[1].y;c=g-p,h=v-f;var y,m,x=r.angleBetween2Lines(s,d)<0?1:0;Math.abs(c)>0?(y=p+c/Math.abs(c)*e,m=f):(y=p,m=f+h/Math.abs(h)*e);var b=Math.abs(y-u),w=Math.abs(m-l);o.routepath+="A "+b+" "+w+" 0 0 "+x+" "+y+" "+m+" "}else{var _,E,k=[u,l];Math.abs(c)>0?(u-=c/Math.abs(c)*i,_=[u,l+n],E=[u,l-n]):(l-=h/Math.abs(h)*i,_=[u+n,l],E=[u-n,l]),o.routepath+="L "+u+" "+l+" ",i>0&&(o.arrowpath="M "+k[0]+" "+k[1]+" L "+_[0]+" "+_[1]+" L "+E[0]+" "+E[1])}}else{var _,E,s=t[0],u=s[1].x,l=s[1].y,c=u-s[0].x,h=l-s[0].y,k=[u,l];Math.abs(c)>0?(u-=c/Math.abs(c)*i,_=[u,l+n],E=[u,l-n]):(l-=h/Math.abs(h)*i,_=[u+n,l],E=[u-n,l]),o.routepath+="L "+u+" "+l+" ",i>0&&(o.arrowpath="M "+k[0]+" "+k[1]+" L "+_[0]+" "+_[1]+" L "+E[0]+" "+E[1])}return o},r}();t.GridRouter=i}(r||(r={}));var r;!function(t){var e=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce(function(t,n){var r=n[e.target]-n[e.source];return t+r*r},0))},t}();t.Link3D=e;var n=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}return t}();t.Node3D=n;var r=function(){function e(t,n,r){var i=this;void 0===r&&(r=1),this.nodes=t,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(e.k);for(var o=0;o<e.k;++o)this.result[o]=new Array(t.length);t.forEach(function(t,n){for(var r=0,o=e.dims;r<o.length;r++){var a=o[r];void 0===t[a]&&(t[a]=Math.random())}i.result[0][n]=t.x,i.result[1][n]=t.y,i.result[2][n]=t.z})}return e.prototype.linkLength=function(t){return t.actualLength(this.result)},e.prototype.start=function(e){var n=this;void 0===e&&(e=100);var r=this.nodes.length,o=new i;this.useJaccardLinkLengths&&t.jaccardLinkLengths(this.links,o,1.5),this.links.forEach(function(t){return t.length*=n.idealLinkLength});var a=new t.shortestpaths.Calculator(r,this.links,function(t){return t.source},function(t){return t.target},function(t){return t.length}).DistanceMatrix(),s=t.Descent.createSquareMatrix(r,function(t,e){return a[t][e]}),u=t.Descent.createSquareMatrix(r,function(){return 2});this.links.forEach(function(t){var e=t.source,n=t.target;return u[e][n]=u[n][e]=1}),this.descent=new t.Descent(this.result,s),this.descent.threshold=.001,this.descent.G=u,this.constraints&&(this.descent.project=new t.vpsc.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var l=0;l<this.nodes.length;l++){var c=this.nodes[l];c.fixed&&this.descent.locks.add(l,[c.x,c.y,c.z])}return this.descent.run(e),this},e.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},e.dims=["x","y","z"],e.k=e.dims.length,e}();t.Layout3D=r;var i=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()}(r||(r={})),void 0!==e&&(e.exports=r)},{}],4:[function(t,e,n){!function(){"use strict";var n=function(t,e){function n(t){var e=this.options={};for(var n in s)e[n]=s[n];for(var n in t)e[n]=t[n]}if(t&&e){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,i=function(t){return"string"==typeof t},o=function(t){return"number"==typeof t},a=function(t){return null!=t&&typeof t==typeof{}},s={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(t){return 10},flow:void 0,alignment:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};n.prototype.run=function(){var t=this,n=this.options;t.manuallyStopped=!1;var s=n.cy,u=n.eles,l=u.nodes(),c=u.edges(),h=!1,d=n.boundingBox||{x1:0,y1:0,w:s.width(),h:s.height()};void 0===d.x2&&(d.x2=d.x1+d.w),void 0===d.w&&(d.w=d.x2-d.x1),void 0===d.y2&&(d.y2=d.y1+d.h),void 0===d.h&&(d.h=d.y2-d.y1);var p=function(t,e){if("function"==typeof t){return t.apply(e,[e])}return t},f=function(){for(var t=0;t<l.length;t++){var e=l[t],r=e.scratch("cola");if(!r.updatedDims){var i=p(n.nodeSpacing,e);r.width=e.outerWidth()+2*i,r.height=e.outerHeight()+2*i}}l.positions(function(t,e){var n,r=e.scratch().cola;return e.grabbed()||e.isParent()||(n={x:d.x1+r.x,y:d.y1+r.y},o(n.x)&&o(n.y)||(n=void 0)),n}),l.updateCompoundBounds(),h||(v(),h=!0),n.fit&&s.fit(n.padding)},g=function(){n.ungrabifyWhileSimulating&&x.grabify(),s.off("destroy",b),l.off("grab free position",w),l.off("lock unlock",_),t.one("layoutstop",n.stop),t.trigger({type:"layoutstop",layout:t})},v=function(){t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t})},y=n.refresh;n.refresh<0?(Math.abs(n.refresh),y=1):y=Math.max(1,y);var m=t.adaptor=e.adaptor({trigger:function(t){var r=e.EventType?e.EventType.tick:null,i=e.EventType?e.EventType.end:null;switch(t.type){case"tick":case r:n.animate&&f();break;case"end":case i:f(),n.infinite||g()}},kick:function(){var e=function(){if(t.manuallyStopped)return g(),!0;var e=m.tick();return e&&n.infinite&&m.resume(),e},i=function(){for(var t,n=0;n<y&&!t;n++)t=t||e();return t};if(n.animate){var o=function(){i()||r(o)};r(o)}else for(;!e(););},on:function(t,e){},drag:function(){}});t.adaptor=m;var x=l.filter(":grabbable");n.ungrabifyWhileSimulating&&x.ungrabify();var b;s.one("destroy",b=function(e){t.stop()});var w;l.on("grab free position",w=function(t){var e=this,n=e.scratch().cola,r=e.position();if(t.cyTarget===e||t.target===e)switch(t.type){case"grab":m.dragstart(n),m.resume();break;case"free":m.dragend(n);break;case"position":n.px===r.x-d.x1&&n.py===r.y-d.y1||(n.px=r.x-d.x1,n.py=r.y-d.y1,m.resume())}});var _;l.on("lock unlock",_=function(t){var e=this,n=e.scratch().cola;n.fixed=e.locked(),e.locked()?m.dragstart(n):m.dragend(n)});var E=l.stdFilter(function(t){return!t.isParent()});if(m.nodes(E.map(function(t,e){var r=p(n.nodeSpacing,t),i=t.position(),o=t.boundingBox();return t.scratch().cola={x:n.randomize||void 0===i.x?Math.round(Math.random()*d.w):i.x,y:n.randomize||void 0===i.y?Math.round(Math.random()*d.h):i.y,width:o.w+2*r,height:o.h+2*r,index:e,fixed:t.locked()}})),n.alignment){var k=[],T=[];E.forEach(function(t){var e=p(n.alignment,t),r=t.scratch().cola,i=r.index;e&&(null!=e.x&&k.push({node:i,offset:e.x}),null!=e.y&&T.push({node:i,offset:e.y}))});var N=[];k.length>0&&N.push({type:"alignment",axis:"x",offsets:k}),T.length>0&&N.push({type:"alignment",axis:"y",offsets:T}),m.constraints(N)}m.groups(l.stdFilter(function(t){return t.isParent()}).map(function(t,e){var r=p(n.nodeSpacing,t),i=function(e){return parseFloat(t.style("padding-"+e))},o=i("left")+r,a=i("right")+r,s=i("top")+r,u=i("bottom")+r;return t.scratch().cola={index:e,padding:Math.max(o,a,s,u),leaves:t.children().stdFilter(function(t){return!t.isParent()}).map(function(t){return t[0].scratch().cola.index}),fixed:t.locked()},t}).map(function(t){return t.scratch().cola.groups=t.children().stdFilter(function(t){return t.isParent()}).map(function(t){return t.scratch().cola.index}),t.scratch().cola}));var S,L;null!=n.edgeLength?(S=n.edgeLength,L="linkDistance"):null!=n.edgeSymDiffLength?(S=n.edgeSymDiffLength,L="symmetricDiffLinkLengths"):null!=n.edgeJaccardLength?(S=n.edgeJaccardLength,L="jaccardLinkLengths"):(S=100,L="linkDistance");var C=function(t){return t.calcLength};if(m.links(c.stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}).map(function(t,e){var n=t.scratch().cola={source:t.source()[0].scratch().cola.index,target:t.target()[0].scratch().cola.index};return null!=S&&(n.calcLength=p(S,t)),n})),m.size([d.w,d.h]),null!=S&&m[L](C),n.flow){var D;i(n.flow)?D={axis:n.flow,minSeparation:50}:o(n.flow)?D={axis:"y",minSeparation:n.flow}:a(n.flow)?(D=n.flow,D.axis=D.axis||"y",D.minSeparation=null!=D.minSeparation?D.minSeparation:50):D={axis:"y",minSeparation:50},m.flowLayout(D.axis,D.minSeparation)}return t.trigger({type:"layoutstart",layout:t}),m.avoidOverlaps(n.avoidOverlap).handleDisconnected(n.handleDisconnected).start(n.unconstrIter,n.userConstIter,n.allConstIter),n.infinite||setTimeout(function(){t.manuallyStopped||m.stop()},n.maxSimulationTime),this},n.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},t("layout","cola",n)}};void 0!==e&&e.exports&&(e.exports=function(e,r){n(e,r||t("webcola"))}),"undefined"!=typeof define&&define.amd&&define("cytoscape-cola",function(){return n}),"undefined"!=typeof cytoscape&&"undefined"!=typeof cola&&n(cytoscape,cola)}()},{webcola:209}],5:[function(t,e,n){function r(){}var i=t("./FDLayoutConstants");for(var o in i)r[o]=i[o];r.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,r.DEFAULT_RADIAL_SEPARATION=i.DEFAULT_EDGE_LENGTH,r.DEFAULT_COMPONENT_SEPERATION=60,e.exports=r},{"./FDLayoutConstants":14}],6:[function(t,e,n){function r(t,e,n){i.call(this,t,e,n)}var i=t("./FDLayoutEdge");r.prototype=Object.create(i.prototype);for(var o in i)r[o]=i[o];e.exports=r},{"./FDLayoutEdge":15}],7:[function(t,e,n){function r(t,e,n){i.call(this,t,e,n)}var i=t("./LGraph");r.prototype=Object.create(i.prototype);for(var o in i)r[o]=i[o];e.exports=r},{"./LGraph":23}],8:[function(t,e,n){function r(t){i.call(this,t)}var i=t("./LGraphManager");r.prototype=Object.create(i.prototype);for(var o in i)r[o]=i[o];e.exports=r},{"./LGraphManager":24}],9:[function(t,e,n){function r(){i.call(this)}var i=t("./FDLayout"),o=t("./CoSEGraphManager"),a=t("./CoSEGraph"),s=t("./CoSENode"),u=t("./CoSEEdge"),l=t("./CoSEConstants"),c=t("./FDLayoutConstants"),h=t("./LayoutConstants"),d=t("./Point"),p=t("./PointD"),f=t("./Layout"),g=t("./Integer"),v=t("./IGeometry"),y=t("./LGraph"),m=t("./Transform");r.prototype=Object.create(i.prototype);for(var x in i)r[x]=i[x];r.prototype.newGraphManager=function(){var t=new o(this);return this.graphManager=t,t},r.prototype.newGraph=function(t){return new a(null,this.graphManager,t)},r.prototype.newNode=function(t){return new s(this.graphManager,t)},r.prototype.newEdge=function(t){return new u(null,null,t)},r.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.isSubLayout||(l.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=l.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=l.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=c.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=c.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=c.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=c.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR)},r.prototype.layout=function(){return h.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},r.prototype.classicLayout=function(){if(this.calculateNodesToApplyGravitationTo(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),!this.incremental){var t=this.getFlatForest();t.length>0?this.positionNodesRadially(t):this.positionNodesRandomly()}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},r.prototype.tick=function(){if(++this.totalIterations===this.maxIterations)return!0;if(this.totalIterations%c.CONVERGENCE_CHECK_PERIOD==0){if(this.isConverged())return!0;this.coolingFactor=this.initialCoolingFactor*((this.maxIterations-this.totalIterations)/this.maxIterations),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},r.prototype.getPositionsData=function(){for(var t=this.graphManager.getAllNodes(),e={},n=0;n<t.length;n++){var r=t[n].rect,i=t[n].id;e[i]={id:i,x:r.getCenterX(),y:r.getCenterY(),w:r.width,h:r.height}}return e},r.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var t=!1;if("during"===c.ANIMATE)this.emit("layoutstarted");else{for(;!t;)t=this.tick();this.graphManager.updateBounds()}},r.prototype.calculateNodesToApplyGravitationTo=function(){var t,e,n=[],r=this.graphManager.getGraphs(),i=r.length;for(e=0;e<i;e++)t=r[e],t.updateConnected(),t.isConnected||(n=n.concat(t.getNodes()));this.graphManager.setAllNodesToApplyGravitation(n)},r.prototype.createBendpoints=function(){var t=[];t=t.concat(this.graphManager.getAllEdges());var e,n=new HashSet;for(e=0;e<t.length;e++){var r=t[e];if(!n.contains(r)){var i=r.getSource(),o=r.getTarget();if(i==o)r.getBendpoints().push(new p),r.getBendpoints().push(new p),this.createDummyNodesForBendpoints(r),n.add(r);else{var a=[];if(a=a.concat(i.getEdgeListToNode(o)),a=a.concat(o.getEdgeListToNode(i)),!n.contains(a[0])){if(a.length>1){var s;for(s=0;s<a.length;s++){var u=a[s];u.getBendpoints().push(new p),this.createDummyNodesForBendpoints(u)}}n.addAll(list)}}}if(n.size()==t.length)break}},r.prototype.positionNodesRadially=function(t){for(var e=new d(0,0),n=Math.ceil(Math.sqrt(t.length)),i=0,o=0,a=0,s=new p(0,0),u=0;u<t.length;u++){u%n==0&&(a=0,o=i,0!=u&&(o+=l.DEFAULT_COMPONENT_SEPERATION),i=0);var c=t[u],g=f.findCenterOfTree(c);e.x=a,e.y=o,s=r.radialLayout(c,g,e),s.y>i&&(i=Math.floor(s.y)),a=Math.floor(s.x+l.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(h.WORLD_CENTER_X-s.x/2,h.WORLD_CENTER_Y-s.y/2))},r.radialLayout=function(t,e,n){var i=Math.max(this.maxDiagonalInTree(t),l.DEFAULT_RADIAL_SEPARATION);r.branchRadialLayout(e,null,0,359,0,i);var o=y.calculateBounds(t),a=new m;a.setDeviceOrgX(o.getMinX()),a.setDeviceOrgY(o.getMinY()),a.setWorldOrgX(n.x),a.setWorldOrgY(n.y);for(var s=0;s<t.length;s++){t[s].transform(a)}var u=new p(o.getMaxX(),o.getMaxY());return a.inverseTransformPoint(u)},r.branchRadialLayout=function(t,e,n,i,o,a){var s=(i-n+1)/2;s<0&&(s+=180);var u=(s+n)%360,l=u*v.TWO_PI/360,c=(Math.cos(l),o*Math.cos(l)),h=o*Math.sin(l);t.setCenter(c,h);var d=[];d=d.concat(t.getEdges());var p=d.length;null!=e&&p--;for(var f,g=0,y=d.length,m=t.getEdgesBetween(e);m.length>1;){var x=m[0];m.splice(0,1);var b=d.indexOf(x);b>=0&&d.splice(b,1),y--,p--}f=null!=e?(d.indexOf(m[0])+1)%y:0;for(var w=Math.abs(i-n)/p,_=f;g!=p;_=++_%y){var E=d[_].getOtherEnd(t);if(E!=e){var k=(n+g*w)%360,T=(k+w)%360;r.branchRadialLayout(E,t,k,T,o+a,a),g++}}},r.maxDiagonalInTree=function(t){for(var e=g.MIN_VALUE,n=0;n<t.length;n++){var r=t[n],i=r.getDiagonal();i>e&&(e=i)}return e},r.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},e.exports=r},{"./CoSEConstants":5,"./CoSEEdge":6,"./CoSEGraph":7,"./CoSEGraphManager":8,"./CoSENode":10,"./FDLayout":13,"./FDLayoutConstants":14,"./IGeometry":19,"./Integer":21,"./LGraph":23,"./Layout":27,"./LayoutConstants":28,"./Point":29,"./PointD":30,"./Transform":34}],10:[function(t,e,n){function r(t,e,n,r){i.call(this,t,e,n,r)}var i=t("./FDLayoutNode"),o=t("./IMath");r.prototype=Object.create(i.prototype);for(var a in i)r[a]=i[a];r.prototype.move=function(){var t=this.graphManager.getLayout();this.displacementX=t.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX),this.displacementY=t.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY),Math.abs(this.displacementX)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementX=t.coolingFactor*t.maxNodeDisplacement*o.sign(this.displacementX)),Math.abs(this.displacementY)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementY=t.coolingFactor*t.maxNodeDisplacement*o.sign(this.displacementY)),null==this.child?this.moveBy(this.displacementX,this.displacementY):0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),t.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},r.prototype.propogateDisplacementToChildren=function(t,e){for(var n,r=this.getChild().getNodes(),i=0;i<r.length;i++)n=r[i],null==n.getChild()?(n.moveBy(t,e),n.displacementX+=t,n.displacementY+=e):n.propogateDisplacementToChildren(t,e)},r.prototype.setPred1=function(t){this.pred1=t},r.prototype.getPred1=function(){return pred1},r.prototype.getPred2=function(){return pred2},r.prototype.setNext=function(t){this.next=t},r.prototype.getNext=function(){return next},r.prototype.setProcessed=function(t){this.processed=t},r.prototype.isProcessed=function(){return processed},e.exports=r},{"./FDLayoutNode":16,"./IMath":20}],11:[function(t,e,n){function r(t,e){this.width=0,this.height=0,null!==t&&null!==e&&(this.height=e,this.width=t)}r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(t){this.width=t},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(t){this.height=t},e.exports=r},{}],12:[function(t,e,n){function r(){this.listeners=[]}var i=r.prototype;i.addListener=function(t,e){this.listeners.push({event:t,callback:e})},i.removeListener=function(t,e){for(var n=this.listeners.length;n>=0;n--){var r=this.listeners[n];r.event===t&&r.callback===e&&this.listeners.splice(n,1)}},i.emit=function(t,e){for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];t===r.event&&r.callback(e)}},e.exports=r},{}],13:[function(t,e,n){function r(){i.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.springConstant=o.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=o.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=1,this.initialCoolingFactor=1,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}var i=t("./Layout"),o=t("./FDLayoutConstants"),a=t("./LayoutConstants"),s=t("./IGeometry"),u=t("./IMath");r.prototype=Object.create(i.prototype);for(var l in i)r[l]=i[l];r.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.layoutQuality==a.DRAFT_QUALITY?(this.displacementThresholdPerNode+=.3,this.maxIterations*=.8):this.layoutQuality==a.PROOF_QUALITY&&(this.displacementThresholdPerNode-=.3,this.maxIterations*=1.2),this.totalIterations=0,this.notAnimatedIterations=0},r.prototype.calcIdealEdgeLengths=function(){for(var t,e,n,r,i,s,u=this.getGraphManager().getAllEdges(),l=0;l<u.length;l++)t=u[l],t.idealLength=this.idealEdgeLength,t.isInterGraph&&(n=t.getSource(),r=t.getTarget(),i=t.getSourceInLca().getEstimatedSize(),s=t.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(t.idealLength+=i+s-2*a.SIMPLE_NODE_SIZE),e=t.getLca().getInclusionTreeDepth(),t.idealLength+=o.DEFAULT_EDGE_LENGTH*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+r.getInclusionTreeDepth()-2*e))},r.prototype.initSpringEmbedder=function(){this.incremental?(this.coolingFactor=.8,this.initialCoolingFactor=.8,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=1,this.initialCoolingFactor=1,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},r.prototype.calcSpringForces=function(){for(var t,e=this.getAllEdges(),n=0;n<e.length;n++)t=e[n],this.calcSpringForce(t,t.idealLength)},r.prototype.calcRepulsionForces=function(){var t,e,n,r,i=this.getAllNodes();for(t=0;t<i.length;t++)for(n=i[t],e=t+1;e<i.length;e++)r=i[e],n.getOwner()==r.getOwner()&&this.calcRepulsionForce(n,r)},r.prototype.calcGravitationalForces=function(){for(var t,e=this.getAllNodesToApplyGravitation(),n=0;n<e.length;n++)t=e[n],this.calcGravitationalForce(t)},r.prototype.moveNodes=function(){for(var t,e=this.getAllNodes(),n=0;n<e.length;n++)t=e[n],t.move()},r.prototype.calcSpringForce=function(t,e){var n,r,i,o,a=t.getSource(),s=t.getTarget();if(this.uniformLeafNodeSizes&&null==a.getChild()&&null==s.getChild())t.updateLengthSimple();else if(t.updateLength(),t.isOverlapingSourceAndTarget)return;n=t.getLength(),r=this.springConstant*(n-e),i=r*(t.lengthX/n),o=r*(t.lengthY/n),a.springForceX+=i,a.springForceY+=o,s.springForceX-=i,s.springForceY-=o},r.prototype.calcRepulsionForce=function(t,e){var n,r,i,a,l,c,h,d=t.getRect(),p=e.getRect(),f=new Array(2),g=new Array(4);d.intersects(p)?(s.calcSeparationAmount(d,p,f,o.DEFAULT_EDGE_LENGTH/2),c=f[0],h=f[1]):(this.uniformLeafNodeSizes&&null==t.getChild()&&null==e.getChild()?(n=p.getCenterX()-d.getCenterX(),r=p.getCenterY()-d.getCenterY()):(s.getIntersection(d,p,g),n=g[2]-g[0],r=g[3]-g[1]),Math.abs(n)<o.MIN_REPULSION_DIST&&(n=u.sign(n)*o.MIN_REPULSION_DIST),Math.abs(r)<o.MIN_REPULSION_DIST&&(r=u.sign(r)*o.MIN_REPULSION_DIST),i=n*n+r*r,a=Math.sqrt(i),l=this.repulsionConstant/i,c=l*n/a,h=l*r/a),t.repulsionForceX-=c,t.repulsionForceY-=h,e.repulsionForceX+=c,e.repulsionForceY+=h},r.prototype.calcGravitationalForce=function(t){var e,n,r,i,o,a,s,u;e=t.getOwner(),n=(e.getRight()+e.getLeft())/2,r=(e.getTop()+e.getBottom())/2,i=t.getCenterX()-n,o=t.getCenterY()-r,a=Math.abs(i),s=Math.abs(o),t.getOwner()==this.graphManager.getRoot()?(Math.floor(80),u=Math.floor(e.getEstimatedSize()*this.gravityRangeFactor),(a>u||s>u)&&(t.gravitationForceX=-this.gravityConstant*i,
t.gravitationForceY=-this.gravityConstant*o)):(u=Math.floor(e.getEstimatedSize()*this.compoundGravityRangeFactor),(a>u||s>u)&&(t.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,t.gravitationForceY=-this.gravityConstant*o*this.compoundGravityConstant))},r.prototype.isConverged=function(){var t,e=!1;return this.totalIterations>this.maxIterations/3&&(e=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),t=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,t||e},r.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},r.prototype.calcRepulsionRange=function(){return 0},e.exports=r},{"./FDLayoutConstants":14,"./IGeometry":19,"./IMath":20,"./Layout":27,"./LayoutConstants":28}],14:[function(t,e,n){function r(){}var i=t("./LayoutConstants");for(var o in i)r[o]=i[o];r.MAX_ITERATIONS=2500,r.DEFAULT_EDGE_LENGTH=50,r.DEFAULT_SPRING_STRENGTH=.45,r.DEFAULT_REPULSION_STRENGTH=4500,r.DEFAULT_GRAVITY_STRENGTH=.4,r.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,r.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,r.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,r.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,r.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,r.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,r.MAX_NODE_DISPLACEMENT=3*r.MAX_NODE_DISPLACEMENT_INCREMENTAL,r.MIN_REPULSION_DIST=r.DEFAULT_EDGE_LENGTH/10,r.CONVERGENCE_CHECK_PERIOD=100,r.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,r.MIN_EDGE_LENGTH=1,r.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=r},{"./LayoutConstants":28}],15:[function(t,e,n){function r(t,e,n){i.call(this,t,e,n),this.idealLength=o.DEFAULT_EDGE_LENGTH}var i=t("./LEdge"),o=t("./FDLayoutConstants");r.prototype=Object.create(i.prototype);for(var a in i)r[a]=i[a];e.exports=r},{"./FDLayoutConstants":14,"./LEdge":22}],16:[function(t,e,n){function r(t,e,n,r){i.call(this,t,e,n,r),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}var i=t("./LNode");r.prototype=Object.create(i.prototype);for(var o in i)r[o]=i[o];r.prototype.setGridCoordinates=function(t,e,n,r){this.startX=t,this.finishX=e,this.startY=n,this.finishY=r},e.exports=r},{"./LNode":26}],17:[function(t,e,n){function r(){this.map={},this.keys=[]}var i=t("./UniqueIDGeneretor");r.prototype.put=function(t,e){var n=i.createID(t);this.contains(n)||(this.map[n]=e,this.keys.push(t))},r.prototype.contains=function(t){i.createID(t);return null!=this.map[t]},r.prototype.get=function(t){var e=i.createID(t);return this.map[e]},r.prototype.keySet=function(){return this.keys},e.exports=r},{"./UniqueIDGeneretor":35}],18:[function(t,e,n){function r(){this.set={}}var i=t("./UniqueIDGeneretor");r.prototype.add=function(t){var e=i.createID(t);this.contains(e)||(this.set[e]=t)},r.prototype.remove=function(t){delete this.set[i.createID(t)]},r.prototype.clear=function(){this.set={}},r.prototype.contains=function(t){return this.set[i.createID(t)]==t},r.prototype.isEmpty=function(){return 0===this.size()},r.prototype.size=function(){return Object.keys(this.set).length},r.prototype.addAllTo=function(t){for(var e=Object.keys(this.set),n=e.length,r=0;r<n;r++)t.push(this.set[e[r]])},r.prototype.size=function(){return Object.keys(this.set).length},r.prototype.addAll=function(t){for(var e=t.length,n=0;n<e;n++){var r=t[n];this.add(r)}},e.exports=r},{"./UniqueIDGeneretor":35}],19:[function(t,e,n){function r(){}r.calcSeparationAmount=function(t,e,n,i){if(!t.intersects(e))throw"assert failed";var o=new Array(2);r.decideDirectionsForOverlappingNodes(t,e,o),n[0]=Math.min(t.getRight(),e.getRight())-Math.max(t.x,e.x),n[1]=Math.min(t.getBottom(),e.getBottom())-Math.max(t.y,e.y),t.getX()<=e.getX()&&t.getRight()>=e.getRight()?n[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight()):e.getX()<=t.getX()&&e.getRight()>=t.getRight()&&(n[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight())),t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()?n[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()):e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()&&(n[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()));var a=Math.abs((e.getCenterY()-t.getCenterY())/(e.getCenterX()-t.getCenterX()));e.getCenterY()==t.getCenterY()&&e.getCenterX()==t.getCenterX()&&(a=1);var s=a*n[0],u=n[1]/a;n[0]<u?u=n[0]:s=n[1],n[0]=-1*o[0]*(u/2+i),n[1]=-1*o[1]*(s/2+i)},r.decideDirectionsForOverlappingNodes=function(t,e,n){t.getCenterX()<e.getCenterX()?n[0]=-1:n[0]=1,t.getCenterY()<e.getCenterY()?n[1]=-1:n[1]=1},r.getIntersection2=function(t,e,n){var i=t.getCenterX(),o=t.getCenterY(),a=e.getCenterX(),s=e.getCenterY();if(t.intersects(e))return n[0]=i,n[1]=o,n[2]=a,n[3]=s,!0;var u=t.getX(),l=t.getY(),c=t.getRight(),h=t.getX(),d=t.getBottom(),p=t.getRight(),f=t.getWidthHalf(),g=t.getHeightHalf(),v=e.getX(),y=e.getY(),m=e.getRight(),x=e.getX(),b=e.getBottom(),w=e.getRight(),_=e.getWidthHalf(),E=e.getHeightHalf(),k=!1,T=!1;if(i==a){if(o>s)return n[0]=i,n[1]=l,n[2]=a,n[3]=b,!1;if(o<s)return n[0]=i,n[1]=d,n[2]=a,n[3]=y,!1}else if(o==s){if(i>a)return n[0]=u,n[1]=o,n[2]=m,n[3]=s,!1;if(i<a)return n[0]=c,n[1]=o,n[2]=v,n[3]=s,!1}else{var N,S,L,C,D,A,M=t.height/t.width,P=e.height/e.width,I=(s-o)/(a-i);if(-M==I?i>a?(n[0]=h,n[1]=d,k=!0):(n[0]=c,n[1]=l,k=!0):M==I&&(i>a?(n[0]=u,n[1]=l,k=!0):(n[0]=p,n[1]=d,k=!0)),-P==I?a>i?(n[2]=x,n[3]=b,T=!0):(n[2]=m,n[3]=y,T=!0):P==I&&(a>i?(n[2]=v,n[3]=y,T=!0):(n[2]=w,n[3]=b,T=!0)),k&&T)return!1;if(i>a?o>s?(N=r.getCardinalDirection(M,I,4),S=r.getCardinalDirection(P,I,2)):(N=r.getCardinalDirection(-M,I,3),S=r.getCardinalDirection(-P,I,1)):o>s?(N=r.getCardinalDirection(-M,I,1),S=r.getCardinalDirection(-P,I,3)):(N=r.getCardinalDirection(M,I,2),S=r.getCardinalDirection(P,I,4)),!k)switch(N){case 1:C=l,L=i+-g/I,n[0]=L,n[1]=C;break;case 2:L=p,C=o+f*I,n[0]=L,n[1]=C;break;case 3:C=d,L=i+g/I,n[0]=L,n[1]=C;break;case 4:L=h,C=o+-f*I,n[0]=L,n[1]=C}if(!T)switch(S){case 1:A=y,D=a+-E/I,n[2]=D,n[3]=A;break;case 2:D=w,A=s+_*I,n[2]=D,n[3]=A;break;case 3:A=b,D=a+E/I,n[2]=D,n[3]=A;break;case 4:D=x,A=s+-_*I,n[2]=D,n[3]=A}}return!1},r.getCardinalDirection=function(t,e,n){return t>e?n:1+n%4},r.getIntersection=function(t,e,n,i){if(null==i)return r.getIntersection2(t,e,n);var o,a,s,u,l,c,h,d,p,f=t.x,g=t.y,v=e.x,y=e.y,m=n.x,x=n.y,b=i.x,w=i.y;return s=y-g,l=f-v,h=v*g-f*y,u=w-x,c=m-b,d=b*x-m*w,0==(p=s*c-u*l)?null:(o=(l*d-c*h)/p,a=(u*h-s*d)/p,new Point(o,a))},r.HALF_PI=.5*Math.PI,r.ONE_AND_HALF_PI=1.5*Math.PI,r.TWO_PI=2*Math.PI,r.THREE_PI=3*Math.PI,e.exports=r},{}],20:[function(t,e,n){function r(){}r.sign=function(t){return t>0?1:t<0?-1:0},r.floor=function(t){return t<0?Math.ceil(t):Math.floor(t)},r.ceil=function(t){return t<0?Math.floor(t):Math.ceil(t)},e.exports=r},{}],21:[function(t,e,n){function r(){}r.MAX_VALUE=2147483647,r.MIN_VALUE=-2147483648,e.exports=r},{}],22:[function(t,e,n){function r(t,e,n){i.call(this,n),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=n,this.bendpoints=[],this.source=t,this.target=e}var i=t("./LGraphObject"),o=t("./IGeometry"),a=t("./IMath");r.prototype=Object.create(i.prototype);for(var s in i)r[s]=i[s];r.prototype.getSource=function(){return this.source},r.prototype.getTarget=function(){return this.target},r.prototype.isInterGraph=function(){return this.isInterGraph},r.prototype.getLength=function(){return this.length},r.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},r.prototype.getBendpoints=function(){return this.bendpoints},r.prototype.getLca=function(){return this.lca},r.prototype.getSourceInLca=function(){return this.sourceInLca},r.prototype.getTargetInLca=function(){return this.targetInLca},r.prototype.getOtherEnd=function(t){if(this.source===t)return this.target;if(this.target===t)return this.source;throw"Node is not incident with this edge"},r.prototype.getOtherEndInGraph=function(t,e){for(var n=this.getOtherEnd(t),r=e.getGraphManager().getRoot();;){if(n.getOwner()==e)return n;if(n.getOwner()==r)break;n=n.getOwner().getParent()}return null},r.prototype.updateLength=function(){var t=new Array(4);this.isOverlapingSourceAndTarget=o.getIntersection(this.target.getRect(),this.source.getRect(),t),this.isOverlapingSourceAndTarget||(this.lengthX=t[0]-t[2],this.lengthY=t[1]-t[3],Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},r.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=r},{"./IGeometry":19,"./IMath":20,"./LGraphObject":25}],23:[function(t,e,n){function r(t,e,n){i.call(this,n),this.estimatedSize=o.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=t,null!=e&&e instanceof s?this.graphManager=e:null!=e&&e instanceof Layout&&(this.graphManager=e.graphManager)}var i=t("./LGraphObject"),o=t("./Integer"),a=t("./LayoutConstants"),s=t("./LGraphManager"),u=t("./LNode"),l=t("./HashSet"),c=t("./RectangleD"),h=t("./Point");r.prototype=Object.create(i.prototype);for(var d in i)r[d]=i[d];r.prototype.getNodes=function(){return this.nodes},r.prototype.getEdges=function(){return this.edges},r.prototype.getGraphManager=function(){return this.graphManager},r.prototype.getParent=function(){return this.parent},r.prototype.getLeft=function(){return this.left},r.prototype.getRight=function(){return this.right},r.prototype.getTop=function(){return this.top},r.prototype.getBottom=function(){return this.bottom},r.prototype.isConnected=function(){return this.isConnected},r.prototype.add=function(t,e,n){if(null==e&&null==n){var r=t;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(r)>-1)throw"Node already in graph!";return r.owner=this,this.getNodes().push(r),r}var i=t;if(!(this.getNodes().indexOf(e)>-1&&this.getNodes().indexOf(n)>-1))throw"Source or target not in graph!";if(e.owner!=n.owner||e.owner!=this)throw"Both owners must be this graph!";return e.owner!=n.owner?null:(i.source=e,i.target=n,i.isInterGraph=!1,this.getEdges().push(i),e.edges.push(i),n!=e&&n.edges.push(i),i)},r.prototype.remove=function(t){var e=t;if(t instanceof u){if(null==e)throw"Node is null!";if(null==e.owner||e.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var n,r=e.edges.slice(),i=r.length,o=0;o<i;o++)n=r[o],n.isInterGraph?this.graphManager.remove(n):n.source.owner.remove(n);var a=this.nodes.indexOf(e);if(a==-1)throw"Node not in owner node list!";this.nodes.splice(a,1)}else if(t instanceof LEdge){var n=t;if(null==n)throw"Edge is null!";if(null==n.source||null==n.target)throw"Source and/or target is null!";if(null==n.source.owner||null==n.target.owner||n.source.owner!=this||n.target.owner!=this)throw"Source and/or target owner is invalid!";var s=n.source.edges.indexOf(n),l=n.target.edges.indexOf(n);if(!(s>-1&&l>-1))throw"Source and/or target doesn't know this edge!";n.source.edges.splice(s,1),n.target!=n.source&&n.target.edges.splice(l,1);var a=n.source.owner.getEdges().indexOf(n);if(a==-1)throw"Not in owner's edge list!";n.source.owner.getEdges().splice(a,1)}},r.prototype.updateLeftTop=function(){for(var t,e,n=o.MAX_VALUE,r=o.MAX_VALUE,i=this.getNodes(),a=i.length,s=0;s<a;s++){var u=i[s];t=Math.floor(u.getTop()),e=Math.floor(u.getLeft()),n>t&&(n=t),r>e&&(r=e)}return n==o.MAX_VALUE?null:(this.left=r-this.margin,this.top=n-this.margin,new h(this.left,this.top))},r.prototype.updateBounds=function(t){for(var e,n,r,i,a=o.MAX_VALUE,s=-o.MAX_VALUE,u=o.MAX_VALUE,l=-o.MAX_VALUE,h=this.nodes,d=h.length,p=0;p<d;p++){var f=h[p];t&&null!=f.child&&f.updateBounds(),e=Math.floor(f.getLeft()),n=Math.floor(f.getRight()),r=Math.floor(f.getTop()),i=Math.floor(f.getBottom()),a>e&&(a=e),s<n&&(s=n),u>r&&(u=r),l<i&&(l=i)}var g=new c(a,u,s-a,l-u);a==o.MAX_VALUE&&(this.left=Math.floor(this.parent.getLeft()),this.right=Math.floor(this.parent.getRight()),this.top=Math.floor(this.parent.getTop()),this.bottom=Math.floor(this.parent.getBottom())),this.left=g.x-this.margin,this.right=g.x+g.width+this.margin,this.top=g.y-this.margin,this.bottom=g.y+g.height+this.margin},r.calculateBounds=function(t){for(var e,n,r,i,a=o.MAX_VALUE,s=-o.MAX_VALUE,u=o.MAX_VALUE,l=-o.MAX_VALUE,h=t.length,d=0;d<h;d++){var p=t[d];e=Math.floor(p.getLeft()),n=Math.floor(p.getRight()),r=Math.floor(p.getTop()),i=Math.floor(p.getBottom()),a>e&&(a=e),s<n&&(s=n),u>r&&(u=r),l<i&&(l=i)}return new c(a,u,s-a,l-u)},r.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},r.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},r.prototype.calcEstimatedSize=function(){for(var t=0,e=this.nodes,n=e.length,r=0;r<n;r++){t+=e[r].calcEstimatedSize()}return this.estimatedSize=0==t?a.EMPTY_COMPOUND_NODE_SIZE:Math.floor(t/Math.sqrt(this.nodes.length)),Math.floor(this.estimatedSize)},r.prototype.updateConnected=function(){if(0==this.nodes.length)return void(this.isConnected=!0);var t,e,n=[],r=new l,i=this.nodes[0];for(n=n.concat(i.withChildren());n.length>0;){i=n.shift(),r.add(i),t=i.getEdges();for(var o=t.length,a=0;a<o;a++){e=t[a].getOtherEndInGraph(i,this),null==e||r.contains(e)||(n=n.concat(e.withChildren()))}}if(this.isConnected=!1,r.size()>=this.nodes.length){var s=0,o=r.size();for(var u in r.set){r.set[u].owner==this&&s++}s==this.nodes.length&&(this.isConnected=!0)}},e.exports=r},{"./HashSet":18,"./Integer":21,"./LGraphManager":24,"./LGraphObject":25,"./LNode":26,"./LayoutConstants":28,"./Point":29,"./RectangleD":32}],24:[function(t,e,n){function r(t){this.layout=t,this.graphs=[],this.edges=[]}r.prototype.addRoot=function(){var t=this.layout.newGraph(),e=this.layout.newNode(null),n=this.add(t,e);return this.setRootGraph(n),this.rootGraph},r.prototype.add=function(t,e,n,r,i){if(null==n&&null==r&&null==i){if(null==t)throw"Graph is null!";if(null==e)throw"Parent node is null!";if(this.graphs.indexOf(t)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(t),null!=t.parent)throw"Already has a parent!";if(null!=e.child)throw"Already has a child!";return t.parent=e,e.child=t,t}i=n,r=e,n=t;var o=r.getOwner(),a=i.getOwner();if(null==o||o.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==a||a.getGraphManager()!=this)throw"Target not in this graph mgr!";if(o==a)return n.isInterGraph=!1,o.add(n,r,i);if(n.isInterGraph=!0,n.source=r,n.target=i,this.edges.indexOf(n)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(n),null==n.source||null==n.target)throw"Edge source and/or target is null!";if(n.source.edges.indexOf(n)!=-1||n.target.edges.indexOf(n)!=-1)throw"Edge already in source and/or target incidency list!";return n.source.edges.push(n),n.target.edges.push(n),n},r.prototype.remove=function(t){if(t instanceof LGraph){var e=t;if(e.getGraphManager()!=this)throw"Graph not in this graph mgr";if(e!=this.rootGraph&&(null==e.parent||e.parent.graphManager!=this))throw"Invalid parent node!";var n=[];n=n.concat(e.getEdges());for(var r,i=n.length,o=0;o<i;o++)r=n[o],e.remove(r);var a=[];a=a.concat(e.getNodes());var s;i=a.length;for(var o=0;o<i;o++)s=a[o],e.remove(s);e==this.rootGraph&&this.setRootGraph(null);var u=this.graphs.indexOf(e);this.graphs.splice(u,1),e.parent=null}else if(t instanceof LEdge){if(null==(r=t))throw"Edge is null!";if(!r.isInterGraph)throw"Not an inter-graph edge!";if(null==r.source||null==r.target)throw"Source and/or target is null!";if(r.source.edges.indexOf(r)==-1||r.target.edges.indexOf(r)==-1)throw"Source and/or target doesn't know this edge!";var u=r.source.edges.indexOf(r);if(r.source.edges.splice(u,1),u=r.target.edges.indexOf(r),r.target.edges.splice(u,1),null==r.source.owner||null==r.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(r.source.owner.getGraphManager().edges.indexOf(r)==-1)throw"Not in owner graph manager's edge list!";var u=r.source.owner.getGraphManager().edges.indexOf(r);r.source.owner.getGraphManager().edges.splice(u,1)}},r.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},r.prototype.getGraphs=function(){return this.graphs},r.prototype.getAllNodes=function(){if(null==this.allNodes){for(var t=[],e=this.getGraphs(),n=e.length,r=0;r<n;r++)t=t.concat(e[r].getNodes());this.allNodes=t}return this.allNodes},r.prototype.resetAllNodes=function(){this.allNodes=null},r.prototype.resetAllEdges=function(){this.allEdges=null},r.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},r.prototype.getAllEdges=function(){if(null==this.allEdges){for(var t=[],e=this.getGraphs(),n=(e.length,0);n<e.length;n++)t=t.concat(e[n].getEdges());t=t.concat(this.edges),this.allEdges=t}return this.allEdges},r.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},r.prototype.setAllNodesToApplyGravitation=function(t){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=t},r.prototype.getRoot=function(){return this.rootGraph},r.prototype.setRootGraph=function(t){if(t.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=t,null==t.parent&&(t.parent=this.layout.newNode("Root node"))},r.prototype.getLayout=function(){return this.layout},r.prototype.isOneAncestorOfOther=function(t,e){if(null==t||null==e)throw"assert failed";if(t==e)return!0;for(var n,r=t.getOwner();;){if(null==(n=r.getParent()))break;if(n==e)return!0;if(null==(r=n.getOwner()))break}for(r=e.getOwner();;){if(null==(n=r.getParent()))break;if(n==t)return!0;if(null==(r=n.getOwner()))break}return!1},r.prototype.calcLowestCommonAncestors=function(){for(var t,e,n,r,i,o=this.getAllEdges(),a=o.length,s=0;s<a;s++)if(t=o[s],e=t.source,n=t.target,t.lca=null,t.sourceInLca=e,t.targetInLca=n,e!=n){for(r=e.getOwner();null==t.lca;){for(i=n.getOwner();null==t.lca;){if(i==r){t.lca=i;break}if(i==this.rootGraph)break;if(null!=t.lca)throw"assert failed";t.targetInLca=i.getParent(),i=t.targetInLca.getOwner()}if(r==this.rootGraph)break;null==t.lca&&(t.sourceInLca=r.getParent(),r=t.sourceInLca.getOwner())}if(null==t.lca)throw"assert failed"}else t.lca=e.getOwner()},r.prototype.calcLowestCommonAncestor=function(t,e){if(t==e)return t.getOwner();for(var n=t.getOwner();;){if(null==n)break;for(var r=e.getOwner();;){if(null==r)break;if(r==n)return r;r=r.getParent().getOwner()}n=n.getParent().getOwner()}return n},r.prototype.calcInclusionTreeDepths=function(t,e){null==t&&null==e&&(t=this.rootGraph,e=1);for(var n,r=t.getNodes(),i=r.length,o=0;o<i;o++)n=r[o],n.inclusionTreeDepth=e,null!=n.child&&this.calcInclusionTreeDepths(n.child,e+1)},r.prototype.includesInvalidEdge=function(){for(var t,e=this.edges.length,n=0;n<e;n++)if(t=this.edges[n],this.isOneAncestorOfOther(t.source,t.target))return!0;return!1},e.exports=r},{}],25:[function(t,e,n){function r(t){this.vGraphObject=t}e.exports=r},{}],26:[function(t,e,n){function r(t,e,n,r){null==n&&null==r&&(r=e),i.call(this,r),null!=t.graphManager&&(t=t.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=r,this.edges=[],this.graphManager=t,this.rect=null!=n&&null!=e?new a(e.x,e.y,n.width,n.height):new a}var i=t("./LGraphObject"),o=t("./Integer"),a=t("./RectangleD"),s=t("./LayoutConstants"),u=t("./RandomSeed"),l=t("./PointD"),c=t("./HashSet");r.prototype=Object.create(i.prototype);for(var h in i)r[h]=i[h];r.prototype.getEdges=function(){return this.edges},r.prototype.getChild=function(){return this.child},r.prototype.getOwner=function(){if(null!=this.owner&&!(null==this.owner||this.owner.getNodes().indexOf(this)>-1))throw"assert failed";return this.owner},r.prototype.getWidth=function(){return this.rect.width},r.prototype.setWidth=function(t){this.rect.width=t},r.prototype.getHeight=function(){return this.rect.height},r.prototype.setHeight=function(t){this.rect.height=t},r.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},r.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},r.prototype.getCenter=function(){return new l(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},r.prototype.getLocation=function(){return new l(this.rect.x,this.rect.y)},r.prototype.getRect=function(){return this.rect},r.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},r.prototype.setRect=function(t,e){this.rect.x=t.x,this.rect.y=t.y,this.rect.width=e.width,this.rect.height=e.height},r.prototype.setCenter=function(t,e){this.rect.x=t-this.rect.width/2,this.rect.y=e-this.rect.height/2},r.prototype.setLocation=function(t,e){this.rect.x=t,this.rect.y=e},r.prototype.moveBy=function(t,e){this.rect.x+=t,this.rect.y+=e},r.prototype.getEdgeListToNode=function(t){var e,n=[];for(var r in this.edges)if(e=r,e.target==t){if(e.source!=this)throw"Incorrect edge source!";n.push(e)}return n},r.prototype.getEdgesBetween=function(t){var e,n=[];for(var r in this.edges){if(e=this.edges[r],e.source!=this&&e.target!=this)throw"Incorrect edge source and/or target";e.target!=t&&e.source!=t||n.push(e)}return n},r.prototype.getNeighborsList=function(){var t,e=new c;for(var n in this.edges)if(t=this.edges[n],t.source==this)e.add(t.target);else{if(!t.target==this)throw"Incorrect incidency!";e.add(t.source)}return e},r.prototype.withChildren=function(){var t,e=[];if(e.push(this),null!=this.child)for(var n=this.child.getNodes(),r=0;r<n.length;r++)t=n[r],e=e.concat(t.withChildren());return e},r.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},r.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=Math.floor((this.rect.width+this.rect.height)/2):(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},r.prototype.scatter=function(){var t,e,n=-s.INITIAL_WORLD_BOUNDARY,r=s.INITIAL_WORLD_BOUNDARY;t=s.WORLD_CENTER_X+u.nextDouble()*(r-n)+n;var i=-s.INITIAL_WORLD_BOUNDARY,o=s.INITIAL_WORLD_BOUNDARY;e=s.WORLD_CENTER_Y+u.nextDouble()*(o-i)+i,this.rect.x=t,this.rect.y=e},r.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var t=this.getChild();t.updateBounds(!0),this.rect.x=t.getLeft(),this.rect.y=t.getTop(),this.setWidth(t.getRight()-t.getLeft()+2*s.COMPOUND_NODE_MARGIN),this.setHeight(t.getBottom()-t.getTop()+2*s.COMPOUND_NODE_MARGIN+s.LABEL_HEIGHT)}},r.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},r.prototype.transform=function(t){var e=this.rect.x;e>s.WORLD_BOUNDARY?e=s.WORLD_BOUNDARY:e<-s.WORLD_BOUNDARY&&(e=-s.WORLD_BOUNDARY);var n=this.rect.y;n>s.WORLD_BOUNDARY?n=s.WORLD_BOUNDARY:n<-s.WORLD_BOUNDARY&&(n=-s.WORLD_BOUNDARY);var r=new l(e,n),i=t.inverseTransformPoint(r);this.setLocation(i.x,i.y)},r.prototype.getLeft=function(){return this.rect.x},r.prototype.getRight=function(){return this.rect.x+this.rect.width},r.prototype.getTop=function(){return this.rect.y},r.prototype.getBottom=function(){return this.rect.y+this.rect.height},r.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=r},{"./HashSet":18,"./Integer":21,"./LGraphObject":25,"./LayoutConstants":28,"./PointD":30,"./RandomSeed":31,"./RectangleD":32}],27:[function(t,e,n){function r(t){d.call(this),this.layoutQuality=i.DEFAULT_QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new o,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=t&&(this.isRemoteUse=t)}var i=t("./LayoutConstants"),o=t("./HashMap"),a=t("./LGraphManager"),s=t("./LNode"),u=t("./LEdge"),l=t("./LGraph"),c=t("./PointD"),h=t("./Transform"),d=t("./Emitter"),p=t("./HashSet");r.RANDOM_SEED=1,r.prototype=Object.create(d.prototype),r.prototype.getGraphManager=function(){return this.graphManager},r.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},r.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},r.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},r.prototype.newGraphManager=function(){var t=new a(this);return this.graphManager=t,t},r.prototype.newGraph=function(t){return new l(null,this.graphManager,t)},r.prototype.newNode=function(t){return new s(this.graphManager,t)},r.prototype.newEdge=function(t){return new u(null,null,t)},r.prototype.runLayout=function(){this.isLayoutFinished=!1,this.initParameters();var t;if(null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge())t=!1;else{if(this.isSubLayout||(new Date).getTime(),t=this.layout(),!this.isSubLayout){(new Date).getTime()}}return t&&(this.isSubLayout||this.doPostLayout()),this.isLayoutFinished=!0,t},r.prototype.doPostLayout=function(){this.transform(),this.update()},r.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var t=this.graphManager.getAllEdges(),e=0;e<t.length;e++)t[e];for(var n=this.graphManager.getRoot().getNodes(),e=0;e<n.length;e++)n[e];this.update(this.graphManager.getRoot())}},r.prototype.update=function(t){if(null==t)this.update2();else if(t instanceof s){var e=t;if(null!=e.getChild())for(var n=e.getChild().getNodes(),r=0;r<n.length;r++)update(n[r]);if(null!=e.vGraphObject){var i=e.vGraphObject;i.update(e)}}else if(t instanceof u){var o=t;if(null!=o.vGraphObject){var a=o.vGraphObject;a.update(o)}}else if(t instanceof l){var c=t;if(null!=c.vGraphObject){var h=c.vGraphObject;h.update(c)}}},r.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.DEFAULT_QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(animationOnLayout=!1)},r.prototype.transform=function(t){if(void 0==t)this.transform(new c(0,0));else{var e=new h,n=this.graphManager.getRoot().updateLeftTop();if(null!=n){e.setWorldOrgX(t.x),e.setWorldOrgY(t.y),e.setDeviceOrgX(n.x),e.setDeviceOrgY(n.y);for(var r,i=this.getAllNodes(),o=0;o<i.length;o++)r=i[o],r.transform(e)}}},r.prototype.positionNodesRandomly=function(t){if(void 0==t)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var e,n,r=t.getNodes(),i=0;i<r.length;i++)e=r[i],n=e.getChild(),null==n?e.scatter():0==n.getNodes().length?e.scatter():(this.positionNodesRandomly(n),e.updateBounds())},r.prototype.getFlatForest=function(){for(var t=[],e=!0,n=this.graphManager.getRoot().getNodes(),r=!0,i=0;i<n.length;i++)null!=n[i].getChild()&&(r=!1);if(!r)return t;var a=new p,s=[],u=new o,l=[];for(l=l.concat(n);l.length>0&&e;){for(s.push(l[0]);s.length>0&&e;){var c=s[0];s.splice(0,1),a.add(c);for(var h=c.getEdges(),i=0;i<h.length;i++){var d=h[i].getOtherEnd(c);if(u.get(c)!=d){if(a.contains(d)){e=!1;break}s.push(d),u.put(d,c)}}}if(e){var f=[];a.addAllTo(f),t.push(f);for(var i=0;i<f.length;i++){var g=f[i],v=l.indexOf(g);v>-1&&l.splice(v,1)}a=new p,u=new o}else t=[]}return t},r.prototype.createDummyNodesForBendpoints=function(t){for(var e=[],n=t.source,r=this.graphManager.calcLowestCommonAncestor(t.source,t.target),i=0;i<t.bendpoints.length;i++){var o=this.newNode(null);o.setRect(new Point(0,0),new Dimension(1,1)),r.add(o);var a=this.newEdge(null);this.graphManager.add(a,n,o),e.add(o),n=o}var a=this.newEdge(null);return this.graphManager.add(a,n,t.target),this.edgeToDummyNodes.put(t,e),t.isInterGraph()?this.graphManager.remove(t):r.remove(t),e},r.prototype.createBendpointsFromDummyNodes=function(){var t=[];t=t.concat(this.graphManager.getAllEdges()),t=this.edgeToDummyNodes.keySet().concat(t);for(var e=0;e<t.length;e++){var n=t[e];if(n.bendpoints.length>0){for(var r=this.edgeToDummyNodes.get(n),i=0;i<r.length;i++){var o=r[i],a=new c(o.getCenterX(),o.getCenterY()),s=n.bendpoints.get(i);s.x=a.x,s.y=a.y,o.getOwner().remove(o)}this.graphManager.add(n,n.source,n.target)}}},r.transform=function(t,e,n,r){if(void 0!=n&&void 0!=r){var i=e;if(t<=50){i-=(e-e/n)/50*(50-t)}else{i+=(e*r-e)/50*(t-50)}return i}var o,a;return t<=50?(o=9*e/500,a=e/10):(o=9*e/50,a=-8*e),o*t+a},r.findCenterOfTree=function(t){var e=[];e=e.concat(t);var n=[],r=new o,i=!1,a=null;1!=e.length&&2!=e.length||(i=!0,a=e[0]);for(var s=0;s<e.length;s++){var u=e[s],l=u.getNeighborsList().size();r.put(u,u.getNeighborsList().size()),1==l&&n.push(u)}var c=[];for(c=c.concat(n);!i;){var h=[];h=h.concat(c),c=[];for(var s=0;s<e.length;s++){var u=e[s],d=e.indexOf(u);d>=0&&e.splice(d,1);var p=u.getNeighborsList();for(var f in p.set){var g=p.set[f];if(n.indexOf(g)<0){var v=r.get(g),y=v-1;1==y&&c.push(g),r.put(g,y)}}}n=n.concat(c),1!=e.length&&2!=e.length||(i=!0,a=e[0])}return a},r.prototype.setGraphManager=function(t){this.graphManager=t},e.exports=r},{"./Emitter":12,"./HashMap":17,"./HashSet":18,"./LEdge":22,"./LGraph":23,"./LGraphManager":24,"./LNode":26,"./LayoutConstants":28,"./PointD":30,"./Transform":34}],28:[function(t,e,n){function r(){}r.PROOF_QUALITY=0,r.DEFAULT_QUALITY=1,r.DRAFT_QUALITY=2,r.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,r.DEFAULT_INCREMENTAL=!1,r.DEFAULT_ANIMATION_ON_LAYOUT=!0,r.DEFAULT_ANIMATION_DURING_LAYOUT=!1,r.DEFAULT_ANIMATION_PERIOD=50,r.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,r.DEFAULT_GRAPH_MARGIN=10,r.LABEL_HEIGHT=20,r.COMPOUND_NODE_MARGIN=5,r.SIMPLE_NODE_SIZE=40,r.SIMPLE_NODE_HALF_SIZE=r.SIMPLE_NODE_SIZE/2,r.EMPTY_COMPOUND_NODE_SIZE=40,r.MIN_EDGE_LENGTH=1,r.WORLD_BOUNDARY=1e6,r.INITIAL_WORLD_BOUNDARY=r.WORLD_BOUNDARY/1e3,r.WORLD_CENTER_X=1200,r.WORLD_CENTER_Y=900,e.exports=r},{}],29:[function(t,e,n){function r(t,e,n){this.x=null,this.y=null,null==t&&null==e&&null==n?(this.x=0,this.y=0):"number"==typeof t&&"number"==typeof e&&null==n?(this.x=t,this.y=e):"Point"==t.constructor.name&&null==e&&null==n&&(n=t,this.x=n.x,this.y=n.y)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.getLocation=function(){return new r(this.x,this.y)},r.prototype.setLocation=function(t,e,n){"Point"==t.constructor.name&&null==e&&null==n?(n=t,this.setLocation(n.x,n.y)):"number"==typeof t&&"number"==typeof e&&null==n&&(parseInt(t)==t&&parseInt(e)==e?this.move(t,e):(this.x=Math.floor(t+.5),this.y=Math.floor(e+.5)))},r.prototype.move=function(t,e){this.x=t,this.y=e},r.prototype.translate=function(t,e){this.x+=t,this.y+=e},r.prototype.equals=function(t){if("Point"==t.constructor.name){var e=t;return this.x==e.x&&this.y==e.y}return this==t},r.prototype.toString=function(){return(new r).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=r},{}],30:[function(t,e,n){function r(t,e){null==t&&null==e?(this.x=0,this.y=0):(this.x=t,this.y=e)}r.prototype.getX=function(){
return this.x},r.prototype.getY=function(){return this.y},r.prototype.setX=function(t){this.x=t},r.prototype.setY=function(t){this.y=t},r.prototype.getDifference=function(t){return new DimensionD(this.x-t.x,this.y-t.y)},r.prototype.getCopy=function(){return new r(this.x,this.y)},r.prototype.translate=function(t){return this.x+=t.width,this.y+=t.height,this},e.exports=r},{}],31:[function(t,e,n){function r(){}r.seed=1,r.x=0,r.nextDouble=function(){return r.x=1e4*Math.sin(r.seed++),r.x-Math.floor(r.x)},e.exports=r},{}],32:[function(t,e,n){function r(t,e,n,r){this.x=0,this.y=0,this.width=0,this.height=0,null!=t&&null!=e&&null!=n&&null!=r&&(this.x=t,this.y=e,this.width=n,this.height=r)}r.prototype.getX=function(){return this.x},r.prototype.setX=function(t){this.x=t},r.prototype.getY=function(){return this.y},r.prototype.setY=function(t){this.y=t},r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(t){this.width=t},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(t){this.height=t},r.prototype.getRight=function(){return this.x+this.width},r.prototype.getBottom=function(){return this.y+this.height},r.prototype.intersects=function(t){return!(this.getRight()<t.x)&&(!(this.getBottom()<t.y)&&(!(t.getRight()<this.x)&&!(t.getBottom()<this.y)))},r.prototype.getCenterX=function(){return this.x+this.width/2},r.prototype.getMinX=function(){return this.getX()},r.prototype.getMaxX=function(){return this.getX()+this.width},r.prototype.getCenterY=function(){return this.y+this.height/2},r.prototype.getMinY=function(){return this.getY()},r.prototype.getMaxY=function(){return this.getY()+this.height},r.prototype.getWidthHalf=function(){return this.width/2},r.prototype.getHeightHalf=function(){return this.height/2},e.exports=r},{}],33:[function(t,e,n){e.exports=function(t){t.toBeTiled={},t.getToBeTiled=function(e){var n=e.data("id");if(null!=t.toBeTiled[n])return t.toBeTiled[n];var r=e.children();if(null==r||0==r.length)return t.toBeTiled[n]=!1,!1;for(var i=0;i<r.length;i++){var o=r[i];if(t.getNodeDegree(o)>0)return t.toBeTiled[n]=!1,!1;if(null!=o.children()&&0!=o.children().length){if(!t.getToBeTiled(o))return t.toBeTiled[n]=!1,!1}else t.toBeTiled[o.data("id")]=!1}return t.toBeTiled[n]=!0,!0},t.getNodeDegree=function(e){var n=e.id();return t.options.eles.edges().filter(function(t,e){"number"==typeof t&&(t=e);var r=t.data("source"),i=t.data("target");if(r!=i&&(r==n||i==n))return!0}).length},t.getNodeDegreeWithChildren=function(e){for(var n=t.getNodeDegree(e),r=e.children(),i=0;i<r.length;i++){var o=r[i];n+=t.getNodeDegreeWithChildren(o)}return n},t.groupZeroDegreeMembers=function(){for(var e=[],n=[],r=this,i={},o=0;o<t.options.eles.nodes().length;o++)i[t.options.eles.nodes()[o].id()]=!0;for(var a=t.options.eles.nodes().filter(function(t,e){"number"==typeof t&&(t=e);var n=t.data("parent");return void 0==n||i[n]||(n=void 0),0==r.getNodeDegreeWithChildren(t)&&(void 0==n||void 0!=n&&!r.getToBeTiled(t.parent()[0]))}),o=0;o<a.length;o++){var s=a[o],u=s.parent().id();void 0==u||i[u]||(u=void 0),void 0===e[u]&&(e[u]=[]),e[u]=e[u].concat(s)}for(var u in e)if(e[u].length>1){var l="DummyCompound_"+u;if(n[l]=e[u],t.options.cy.getElementById(l).empty()){t.options.cy.add({group:"nodes",data:{id:l,parent:u}});var c=t.options.cy.nodes()[t.options.cy.nodes().length-1];t.options.eles=t.options.eles.union(c),c.hide();for(var o=0;o<e[u].length;o++){0==o&&c.scratch("coseBilkent",{tempchildren:[]});var s=e[u][o],h=s.scratch("coseBilkent");h||(h={},s.scratch("coseBilkent",h)),h.dummy_parent_id=l,t.options.cy.add({group:"nodes",data:{parent:l,width:s.width(),height:s.height()}});var d=t.options.cy.nodes()[t.options.cy.nodes().length-1];d.hide(),d.css("width",d.data("width")),d.css("height",d.data("height")),d.width(),c.scratch("coseBilkent").tempchildren.push(d)}}}return n},t.performDFSOnCompounds=function(e){var n=[],r=t.getTopMostNodes(t.options.eles.nodes());return t.fillCompexOrderByDFS(n,r),n},t.fillCompexOrderByDFS=function(e,n){for(var r=0;r<n.length;r++){var i=n[r];t.fillCompexOrderByDFS(e,i.children()),t.getToBeTiled(i)&&e.push(i)}},t.clearCompounds=function(){var e=[],n=t.performDFSOnCompounds(t.options);t.compoundOrder=n,t.processChildrenList(t.root,t.getTopMostNodes(t.options.eles.nodes()),t.layout);for(var r=0;r<n.length;r++){var i=t.idToLNode[n[r].id()];e[n[r].id()]=n[r].children(),i.child=null}return t.tileCompoundMembers(e)},t.clearZeroDegreeMembers=function(e){var n=[];for(var r in e){var i=t.idToLNode[r];n[r]=t.tileNodes(e[r]),i.rect.width=n[r].width,i.rect.height=n[r].height}return n},t.repopulateCompounds=function(e){for(var n=t.compoundOrder.length-1;n>=0;n--){var r=t.compoundOrder[n].id(),i=t.idToLNode[r],o=parseInt(t.compoundOrder[n].css("padding-left")),a=parseInt(t.compoundOrder[n].css("padding-top"));t.adjustLocations(e[r],i.rect.x,i.rect.y,o,a)}},t.repopulateZeroDegreeMembers=function(e){for(var n in e){var r=t.cy.getElementById(n),i=t.idToLNode[n],o=parseInt(r.css("padding-left")),a=parseInt(r.css("padding-top"));t.adjustLocations(e[n],i.rect.x,i.rect.y,o,a);for(var s=r.scratch("coseBilkent").tempchildren,n=0;n<s.length;n++)s[n].remove();r.remove()}},t.adjustLocations=function(e,n,r,i,o){n+=i,r+=o;for(var a=n,s=0;s<e.rows.length;s++){var u=e.rows[s];n=a;for(var l=0,c=0;c<u.length;c++){var h=u[c];t.cy.getElementById(h.id);h.rect.x=n,h.rect.y=r,n+=h.rect.width+e.horizontalPadding,h.rect.height>l&&(l=h.rect.height)}r+=l+e.verticalPadding}},t.tileCompoundMembers=function(e){var n=[];for(var r in e){var i=t.idToLNode[r];n[r]=t.tileNodes(e[r]),i.rect.width=n[r].width+20,i.rect.height=n[r].height+20}return n},t.tileNodes=function(e){for(var n=this,r="function"==typeof n.options.tilingPaddingVertical?n.options.tilingPaddingVertical.call():n.options.tilingPaddingVertical,i="function"==typeof n.options.tilingPaddingHorizontal?n.options.tilingPaddingHorizontal.call():n.options.tilingPaddingHorizontal,o={rows:[],rowWidth:[],rowHeight:[],width:20,height:20,verticalPadding:r,horizontalPadding:i},a=[],s=0;s<e.length;s++){var u=e[s],l=t.idToLNode[u.id()];if(!u.scratch("coseBilkent")||!u.scratch("coseBilkent").dummy_parent_id){l.owner.remove(l),t.gm.resetAllNodes(),t.gm.getAllNodes()}a.push(l)}a.sort(function(t,e){return t.rect.width*t.rect.height>e.rect.width*e.rect.height?-1:t.rect.width*t.rect.height<e.rect.width*e.rect.height?1:0});for(var s=0;s<a.length;s++){var l=a[s],c=t.cy.getElementById(l.id).parent()[0],h=0;c&&(h=parseInt(c.css("padding-left"))+parseInt(c.css("padding-right"))),0==o.rows.length?t.insertNodeToRow(o,l,0,h):t.canAddHorizontal(o,l.rect.width,l.rect.height)?t.insertNodeToRow(o,l,t.getShortestRowIndex(o),h):t.insertNodeToRow(o,l,o.rows.length,h),t.shiftToLastRow(o)}return o},t.insertNodeToRow=function(t,e,n,r){var i=r;if(n==t.rows.length){var o=[];t.rows.push(o),t.rowWidth.push(i),t.rowHeight.push(0)}var a=t.rowWidth[n]+e.rect.width;t.rows[n].length>0&&(a+=t.horizontalPadding),t.rowWidth[n]=a,t.width<a&&(t.width=a);var s=e.rect.height;n>0&&(s+=t.verticalPadding);var u=0;s>t.rowHeight[n]&&(u=t.rowHeight[n],t.rowHeight[n]=s,u=t.rowHeight[n]-u),t.height+=u,t.rows[n].push(e)},t.getShortestRowIndex=function(t){for(var e=-1,n=Number.MAX_VALUE,r=0;r<t.rows.length;r++)t.rowWidth[r]<n&&(e=r,n=t.rowWidth[r]);return e},t.getLongestRowIndex=function(t){for(var e=-1,n=Number.MIN_VALUE,r=0;r<t.rows.length;r++)t.rowWidth[r]>n&&(e=r,n=t.rowWidth[r]);return e},t.canAddHorizontal=function(e,n,r){var i=t.getShortestRowIndex(e);if(i<0)return!0;var o=e.rowWidth[i];if(o+e.horizontalPadding+n<=e.width)return!0;var a=0;e.rowHeight[i]<r&&i>0&&(a=r+e.verticalPadding-e.rowHeight[i]);var s;s=e.width-o>=n+e.horizontalPadding?(e.height+a)/(o+n+e.horizontalPadding):(e.height+a)/e.width,a=r+e.verticalPadding;var u;return u=e.width<n?(e.height+a)/n:(e.height+a)/e.width,u<1&&(u=1/u),s<1&&(s=1/s),s<u},t.shiftToLastRow=function(e){var n=t.getLongestRowIndex(e),r=e.rowWidth.length-1,i=e.rows[n],o=i[i.length-1],a=o.width+e.horizontalPadding;if(e.width-e.rowWidth[r]>a&&n!=r){i.splice(-1,1),e.rows[r].push(o),e.rowWidth[n]=e.rowWidth[n]-a,e.rowWidth[r]=e.rowWidth[r]+a,e.width=e.rowWidth[t.getLongestRowIndex(e)];for(var s=Number.MIN_VALUE,u=0;u<i.length;u++)i[u].height>s&&(s=i[u].height);n>0&&(s+=e.verticalPadding);var l=e.rowHeight[n]+e.rowHeight[r];e.rowHeight[n]=s,e.rowHeight[r]<o.height+e.verticalPadding&&(e.rowHeight[r]=o.height+e.verticalPadding);var c=e.rowHeight[n]+e.rowHeight[r];e.height+=c-l,t.shiftToLastRow(e)}},t.preLayout=function(){var e=t.groupZeroDegreeMembers();t.tiledMemberPack=t.clearCompounds(),t.tiledZeroDegreeNodes=t.clearZeroDegreeMembers(e)},t.postLayout=function(){for(var e=t.options.eles.nodes(),n=0;n<e.length;n++)t.getToBeTiled(e[n]);t.repopulateZeroDegreeMembers(t.tiledZeroDegreeNodes),t.repopulateCompounds(t.tiledMemberPack),t.options.cy.nodes().updateCompoundBounds()}}},{}],34:[function(t,e,n){function r(t,e){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}var i=t("./PointD");r.prototype.getWorldOrgX=function(){return this.lworldOrgX},r.prototype.setWorldOrgX=function(t){this.lworldOrgX=t},r.prototype.getWorldOrgY=function(){return this.lworldOrgY},r.prototype.setWorldOrgY=function(t){this.lworldOrgY=t},r.prototype.getWorldExtX=function(){return this.lworldExtX},r.prototype.setWorldExtX=function(t){this.lworldExtX=t},r.prototype.getWorldExtY=function(){return this.lworldExtY},r.prototype.setWorldExtY=function(t){this.lworldExtY=t},r.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},r.prototype.setDeviceOrgX=function(t){this.ldeviceOrgX=t},r.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},r.prototype.setDeviceOrgY=function(t){this.ldeviceOrgY=t},r.prototype.getDeviceExtX=function(){return this.ldeviceExtX},r.prototype.setDeviceExtX=function(t){this.ldeviceExtX=t},r.prototype.getDeviceExtY=function(){return this.ldeviceExtY},r.prototype.setDeviceExtY=function(t){this.ldeviceExtY=t},r.prototype.transformX=function(t){var e=0,n=this.lworldExtX;return 0!=n&&(e=this.ldeviceOrgX+(t-this.lworldOrgX)*this.ldeviceExtX/n),e},r.prototype.transformY=function(t){var e=0,n=this.lworldExtY;return 0!=n&&(e=this.ldeviceOrgY+(t-this.lworldOrgY)*this.ldeviceExtY/n),e},r.prototype.inverseTransformX=function(t){var e=0,n=this.ldeviceExtX;return 0!=n&&(e=this.lworldOrgX+(t-this.ldeviceOrgX)*this.lworldExtX/n),e},r.prototype.inverseTransformY=function(t){var e=0,n=this.ldeviceExtY;return 0!=n&&(e=this.lworldOrgY+(t-this.ldeviceOrgY)*this.lworldExtY/n),e},r.prototype.inverseTransformPoint=function(t){return new i(this.inverseTransformX(t.x),this.inverseTransformY(t.y))},e.exports=r},{"./PointD":30}],35:[function(t,e,n){function r(){}r.lastID=0,r.createID=function(t){return r.isPrimitive(t)?t:null!=t.uniqueID?t.uniqueID:(t.uniqueID=r.getString(),r.lastID++,t.uniqueID)},r.getString=function(t){return null==t&&(t=r.lastID),"Object#"+t},r.isPrimitive=function(t){var e=typeof t;return null==t||"object"!=e&&"function"!=e},e.exports=r},{}],36:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}function i(t){d(this),this.options=r(p,t),f(this.options)}var o=t("./DimensionD"),a=(t("./HashMap"),t("./HashSet"),t("./IGeometry"),t("./IMath"),t("./Integer"),t("./Point"),t("./PointD")),s=(t("./RandomSeed"),t("./RectangleD"),t("./Transform"),t("./UniqueIDGeneretor"),t("./LGraphObject"),t("./LGraph"),t("./LEdge"),t("./LGraphManager"),t("./LNode"),t("./Layout"),t("./LayoutConstants")),u=(t("./FDLayout"),t("./FDLayoutConstants")),l=(t("./FDLayoutEdge"),t("./FDLayoutNode"),t("./CoSEConstants")),c=(t("./CoSEEdge"),t("./CoSEGraph"),t("./CoSEGraphManager"),t("./CoSELayout")),h=t("./CoSENode"),d=t("./TilingExtension"),p={ready:function(){},stop:function(){},refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8},f=function(t){null!=t.nodeRepulsion&&(l.DEFAULT_REPULSION_STRENGTH=u.DEFAULT_REPULSION_STRENGTH=t.nodeRepulsion),null!=t.idealEdgeLength&&(l.DEFAULT_EDGE_LENGTH=u.DEFAULT_EDGE_LENGTH=t.idealEdgeLength),null!=t.edgeElasticity&&(l.DEFAULT_SPRING_STRENGTH=u.DEFAULT_SPRING_STRENGTH=t.edgeElasticity),null!=t.nestingFactor&&(l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=t.nestingFactor),null!=t.gravity&&(l.DEFAULT_GRAVITY_STRENGTH=u.DEFAULT_GRAVITY_STRENGTH=t.gravity),null!=t.numIter&&(l.MAX_ITERATIONS=u.MAX_ITERATIONS=t.numIter),null!=t.gravityRange&&(l.DEFAULT_GRAVITY_RANGE_FACTOR=u.DEFAULT_GRAVITY_RANGE_FACTOR=t.gravityRange),null!=t.gravityCompound&&(l.DEFAULT_COMPOUND_GRAVITY_STRENGTH=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=t.gravityCompound),null!=t.gravityRangeCompound&&(l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=t.gravityRangeCompound),l.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!t.randomize,l.ANIMATE=u.ANIMATE=t.animate};i.prototype.run=function(){var t,e,n=this.options,r=(this.idToLNode={},this.layout=new c),i=this;this.cy=this.options.cy,this.cy.trigger("layoutstart");var o=r.newGraphManager();this.gm=o;var a=this.options.eles.nodes(),s=this.options.eles.edges();this.root=o.addRoot(),this.options.tile?this.preLayout():this.processChildrenList(this.root,this.getTopMostNodes(a),r);for(var u=0;u<s.length;u++){var l=s[u],h=this.idToLNode[l.data("source")],d=this.idToLNode[l.data("target")];o.add(r.newEdge(),h,d).id=l.id()}var p=function(t,e){"number"==typeof t&&(t=e);var n=t.data("id"),r=i.idToLNode[n];return{x:r.getRect().getCenterX(),y:r.getRect().getCenterY()}},f=function(){for(var r,o=function(){n.fit&&n.cy.fit(n.eles.nodes(),n.padding),t||(t=!0,i.cy.one("layoutready",n.ready),i.cy.trigger({type:"layoutready",layout:i}))},a=i.options.refresh,s=0;s<a&&!r;s++)r=i.layout.tick();if(r)return i.options.tile&&i.postLayout(),i.options.eles.nodes().positions(p),o(),i.cy.one("layoutstop",i.options.stop),i.cy.trigger("layoutstop"),e&&cancelAnimationFrame(e),i.options.eles.nodes().removeScratch("coseBilkent"),void(t=!1);var u=i.layout.getPositionsData();n.eles.nodes().positions(function(t,e){if("number"==typeof t&&(t=e),t.scratch("coseBilkent")&&t.scratch("coseBilkent").dummy_parent_id){var n=t.scratch("coseBilkent").dummy_parent_id;return{x:n.x,y:n.y}}for(var r=t.data("id"),i=u[r],o=this;null==i;)o=o.parent()[0],i=u[o.id()],u[r]=i;return{x:i.x,y:i.y}}),o(),e=requestAnimationFrame(f)};return r.addListener("layoutstarted",function(){"during"===i.options.animate&&(e=requestAnimationFrame(f))}),r.runLayout(),"during"!==this.options.animate&&setTimeout(function(){i.options.tile&&i.postLayout(),i.options.eles.nodes().layoutPositions(i,i.options,p),i.options.eles.nodes().removeScratch("coseBilkent"),t=!1},0),this},i.prototype.getTopMostNodes=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].id()]=!0;return t.filter(function(t,n){"number"==typeof t&&(t=n);for(var r=t.parent()[0];null!=r;){if(e[r.id()])return!1;r=r.parent()[0]}return!0})},i.prototype.processChildrenList=function(t,e,n){for(var r=e.length,i=0;i<r;i++){var s=e[i];this.options.eles.nodes().length;var u,l=s.children();if(u=null!=s.width()&&null!=s.height()?t.add(new h(n.graphManager,new a(s.position("x"),s.position("y")),new o(parseFloat(s.width()),parseFloat(s.height())))):t.add(new h(this.graphManager)),u.id=s.data("id"),this.idToLNode[s.data("id")]=u,isNaN(u.rect.x)&&(u.rect.x=0),isNaN(u.rect.y)&&(u.rect.y=0),null!=l&&l.length>0){var c;c=n.getGraphManager().add(n.newGraph(),u),this.processChildrenList(c,l,n)}}},i.prototype.stop=function(){return this.stopped=!0,this.trigger("layoutstop"),this},e.exports=function(t){return i}},{"./CoSEConstants":5,"./CoSEEdge":6,"./CoSEGraph":7,"./CoSEGraphManager":8,"./CoSELayout":9,"./CoSENode":10,"./DimensionD":11,"./FDLayout":13,"./FDLayoutConstants":14,"./FDLayoutEdge":15,"./FDLayoutNode":16,"./HashMap":17,"./HashSet":18,"./IGeometry":19,"./IMath":20,"./Integer":21,"./LEdge":22,"./LGraph":23,"./LGraphManager":24,"./LGraphObject":25,"./LNode":26,"./Layout":27,"./LayoutConstants":28,"./Point":29,"./PointD":30,"./RandomSeed":31,"./RectangleD":32,"./TilingExtension":33,"./Transform":34,"./UniqueIDGeneretor":35}],37:[function(t,e,n){"use strict";var r=t("./Layout"),i=function(t){t("layout","cose-bilkent",r(t))};"undefined"!=typeof cytoscape?i(cytoscape):"undefined"!=typeof define&&define.amd&&define([],i),e.exports=i},{"./Layout":36}],38:[function(t,e,n){!function(){"use strict";var n=function(t,e){function n(t){var e=this.options={};for(var n in i)e[n]=i[n];for(var n in t)e[n]=t[n]}if(t&&e){var r=function(t){return"function"==typeof t},i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(t){return 1},edgeWeight:function(t){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,boundingBox:void 0,ready:function(){},stop:function(){}};n.prototype.run=function(){var t=this.options,n=this,i=t.cy,o=t.eles,a=function(t,e){return r(e)?e.apply(t,[t]):e},s=t.boundingBox||{x1:0,y1:0,w:i.width(),h:i.height()};void 0===s.x2&&(s.x2=s.x1+s.w),void 0===s.w&&(s.w=s.x2-s.x1),void 0===s.y2&&(s.y2=s.y1+s.h),void 0===s.h&&(s.h=s.y2-s.y1);var u=new e.graphlib.Graph({multigraph:!0,compound:!0}),l={},c=function(t,e){null!=e&&(l[t]=e)};c("nodesep",t.nodeSep),c("edgesep",t.edgeSep),c("ranksep",t.rankSep),c("rankdir",t.rankDir),u.setGraph(l),u.setDefaultEdgeLabel(function(){return{}}),u.setDefaultNodeLabel(function(){return{}});for(var h=o.nodes(),d=0;d<h.length;d++){var p=h[d],f=p.boundingBox();u.setNode(p.id(),{width:f.w,height:f.h,name:p.id()})}for(var d=0;d<h.length;d++){var p=h[d];p.isChild()&&u.setParent(p.id(),p.parent().id())}for(var g=o.edges().stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}),d=0;d<g.length;d++){var v=g[d];u.setEdge(v.source().id(),v.target().id(),{minlen:a(v,t.minLen),weight:a(v,t.edgeWeight),name:v.id()},v.id())}e.layout(u);for(var y=u.nodes(),d=0;d<y.length;d++){var m=y[d],x=u.node(m);i.getElementById(m).scratch().dagre=x}var b;t.boundingBox?(b={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)},h.forEach(function(t){var e=t.scratch().dagre;b.x1=Math.min(b.x1,e.x),b.x2=Math.max(b.x2,e.x),b.y1=Math.min(b.y1,e.y),b.y2=Math.max(b.y2,e.y)}),b.w=b.x2-b.x1,b.h=b.y2-b.y1):b=s;var w=function(e){if(t.boundingBox){var n=0===b.w?0:(e.x-b.x1)/b.w,r=0===b.h?0:(e.y-b.y1)/b.h;return{x:s.x1+n*s.w,y:s.y1+r*s.h}}return e};return h.layoutPositions(n,t,function(){var t=this.scratch().dagre;return w({x:t.x,y:t.y})}),this},t("layout","dagre",n)}};void 0!==e&&e.exports&&(e.exports=function(e,r){n(e,r||t("dagre"))}),"undefined"!=typeof define&&define.amd&&define("cytoscape-dagre",function(){return n}),"undefined"!=typeof cytoscape&&"undefined"!=typeof dagre&&n(cytoscape,dagre)}()},{dagre:151}],39:[function(t,e,n){(function(r){!function(t){if("object"==typeof n&&void 0!==e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;i="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this,(i.cytoscapeNgraph||(i.cytoscapeNgraph={})).forcelayout=t()}}(function(){var e;return function e(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var l="function"==typeof t&&t;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=r[s]={exports:{}};n[s][0].call(h.exports,function(t){var e=n[s][1][t];return o(e?e:t)},h,h.exports,e,n,r,i)}return r[s].exports}for(var a="function"==typeof t&&t,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){function r(e,n){function r(){if(!k)return D.postMessage(L),N}function d(t,e,n,r){D.postMessage({kind:h.setNodePosition,payload:{nodeId:t,x:e,y:n,z:r}}),E(C[t],{x:e,y:n,z:r})}function p(){return w}function f(t,e){D.postMessage({kind:h.pinNode,payload:{nodeId:t.id,isPinned:e}}),S[t.id]=e}function g(t){return S[t.id]}function v(t){return C[t]}function y(t){return _||m(),_[t]}function m(){_=Object.create(null),e.forEachLink(function(t){_[t.id]={from:v(t.fromId),to:v(t.toId)}})}function x(t){var e=t.data.kind,n=t.data.payload;e===h.cycleComplete&&(b(n.positions,n.systemStable),w=n.bbox,A.fire("cycle",n.iterations,n.systemStable)),e===h.initDone&&(k=!1,r())}function b(t,e){function n(e){var n=t[e],r=C[e];r?E(r,n):C[e]=n}N=e,Object.keys(t).forEach(n)}n=c(n);var w,_,E=n.is3d?i:o,k=!1,T=!1,N=!1,S=Object.create(null),L={kind:h.step},C=Object.create(null),D=a(t("./lib/layoutWorker.js"));D.addEventListener("message",x),function(){if(T)throw new Error("Init request is already sent to the worker");D.postMessage({kind:h.init,payload:{graph:s(e),options:JSON.stringify(n)}}),T=!0}(),function(){function t(t){C[t.id]=r.getNodePosition(t.id)}var r=l(e,n);e.forEachNode(t),w=r.getGraphRect()}();var A={step:r,getNodePosition:v,getLinkPosition:y,pinNode:f,setNodePosition:d,getGraphRect:p,isNodePinned:g};return u(A),A}function i(t,e){t.x=e.x,t.y=e.y,t.z=e.z}function o(t,e){t.x=e.x,t.y=e.y}var a=t("webworkify"),s=t("ngraph.tojson"),u=t("ngraph.events"),l=t("./lib/createLayout.js"),c=t("./options.js"),h=t("./lib/messages.js");e.exports=r},{"./lib/createLayout.js":2,"./lib/layoutWorker.js":3,"./lib/messages.js":4,"./options.js":5,"ngraph.events":6,"ngraph.tojson":35,webworkify:39}],2:[function(t,e,n){function r(t,e){return e=e||{},e.is3d?i(t,e.physics):o(t,e.physics)}var i=t("ngraph.forcelayout3d"),o=i.get2dLayout;e.exports=r},{"ngraph.forcelayout3d":16}],3:[function(t,e,n){function r(t){function e(t){var e=t.data.kind,i=t.data.payload;if(e===s.init){v=o(i.graph);l(v,JSON.parse(i.options))}else e===s.step?h():e===s.pinNode?r(i.nodeId,i.isPinned):e===s.setNodePosition&&n(i.nodeId,i.x,i.y,i.z)}function n(t,e,n,r){u(),f.setNodePosition.apply(f,arguments),b=!1,h()}function r(t,e){u();var n=v.getNode(t);n&&f.pinNode(n,e)}function u(){if(!v)throw new Error("Pin node requested without initialied graph");if(!f)throw new Error("Layout was not created. Something is really wrong here")}function l(e,n){n=a(n),g=n.async,f=i(e,n),e.forEachNode(c),t.postMessage({kind:s.initDone})}function c(t){w[t.id]=f.getNodePosition(t.id)}function h(){u(),m=!0,x||d()}function d(){if(b)return void(x=0);x=setTimeout(function(){p(),m||!g.waitForStep?(m=!1,d()):x=0},0)}function p(){for(var e=0;e<g.stepsPerCycle;++e)b=f.step(),y+=1;y>=g.maxIterations&&(b=!0),t.postMessage({kind:s.cycleComplete,payload:{positions:w,systemStable:b,bbox:f.getGraphRect(),iterations:y}})}var f,g,v,y=0,m=!1,x=0,b=!1,w=Object.create(null);t.addEventListener("message",e)}var i=t("./createLayout.js"),o=t("ngraph.fromjson"),a=t("../options.js"),s=t("./messages.js");e.exports=r},{"../options.js":5,"./createLayout.js":2,"./messages.js":4,"ngraph.fromjson":22}],4:[function(t,e,n){e.exports={init:10,initDone:11,step:12,cycleComplete:13,pinNode:41,setNodePosition:43}},{}],5:[function(t,e,n){function r(t){t=t||{},t.is3d="boolean"==typeof t.is3d&&t.is3d;var e=t.async=t.async||{};return e.stepsPerCycle="number"==typeof e.stepsPerCycle?e.stepsPerCycle:5,e.maxIterations="number"==typeof e.maxIterations?e.maxIterations:Number.POSITIVE_INFINITY,e.waitForStep="boolean"!=typeof e.waitForStep||e.waitForStep,t}e.exports=r},{}],6:[function(t,e,n){function r(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!=typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){if(void 0===n)return e=Object.create(null),t;if(e[n]){if("function"!=typeof r)delete e[n];else for(var i=e[n],o=0;o<i.length;++o)i[o].callback===r&&i.splice(o,1)}return t},fire:function(n){var r=e[n];if(!r)return t;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var o=0;o<r.length;++o){var a=r[o];a.callback.apply(a.ctx,i)}return t}}}function i(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}e.exports=function(t){i(t);var e=r(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},{}],7:[function(t,e,n){function r(t,e,n){if("[object Array]"===Object.prototype.toString.call(n))for(var r=0;r<n.length;++r)i(t,e,n[r]);else for(var o in t)i(t,e,o)}function i(t,e,n){if(t.hasOwnProperty(n)){if("function"==typeof e[n])return;e[n]=function(r){return void 0!==r?(t[n]=r,e):t[n]}}}e.exports=r},{}],8:[function(t,e,n){function r(e,n){function r(t,n){var r;if(void 0===n)r="string"==typeof t?t:t.id;else{var i=e.hasLink(t,n);if(!i)return;r=i.id}return x[r]}function o(t){return m[t]}function a(t){for(var e=0;e<t.length;++e){var n=t[e];"add"===n.changeType?(n.node&&s(n.node.id),n.link&&l(n.link)):"remove"===n.changeType&&(n.node&&u(n.node),n.link&&c(n.link))}}function s(t){var n=m[t];if(!n){var r=e.getNode(t);if(!r)throw new Error("initBody() was called with unknown node id");var i=r.position;if(!i){var o=h(r);i=y.getBestNewBodyPosition(o)}n=y.addBodyAt(i),m[t]=n,d(t),p(r)&&(n.isPinned=!0)}}function u(t){var e=t.id,n=m[e];n&&(m[e]=null,delete m[e],y.removeBody(n))}function l(t){d(t.fromId),d(t.toId);var e=m[t.fromId],n=m[t.toId],r=y.addSpring(e,n,t.length);b(t,r),x[t.id]=r}function c(t){var n=x[t.id];if(n){var r=e.getNode(t.fromId),i=e.getNode(t.toId);r&&d(r.id),i&&d(i.id),delete x[t.id],y.removeSpring(n)}}function h(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),r=0;r<n;++r){var i=t.links[r],o=i.fromId!==t.id?m[i.fromId]:m[i.toId];o&&o.pos&&e.push(o)}return e}function d(t){m[t].mass=g(t)}function p(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}function f(t){var e=m[t];return e||(s(t),e=m[t]),e}function g(t){return 1+e.getLinks(t).length/3}if(!e)throw new Error("Graph structure cannot be undefined");var v=t("ngraph.physics.simulator"),y=v(n),m="function"==typeof Object.create?Object.create(null):{},x={},b=y.settings.springTransform||i;return function(){e.forEachNode(function(t){s(t.id)}),e.forEachLink(l)}(),function(){e.on("changed",a)}(),{step:function(){return y.step()},getNodePosition:function(t){return f(t).pos},setNodePosition:function(t){var e=f(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=x[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return y.getBBox()},pinNode:function(t,e){f(t.id).isPinned=!!e},isNodePinned:function(t){return f(t.id).isPinned},dispose:function(){e.off("changed",a)},getBody:o,getSpring:r,simulator:y}}function i(){}e.exports=r,e.exports.simulator=t("ngraph.physics.simulator")},{"ngraph.physics.simulator":9}],9:[function(t,e,n){function r(e){function n(){var t,e=h.length;if(e)for(p.insertBodies(h);e--;)t=h[e],t.isPinned||(t.force.reset(),p.updateBodyForce(t),v.update(t));for(e=d.length;e--;)g.update(d[e])}var r=t("./lib/spring"),i=t("ngraph.expose");e=t("ngraph.merge")(e,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,stableThreshold:.009});var o=e.createQuadTree||t("ngraph.quadtreebh"),a=e.createBounds||t("./lib/bounds"),s=e.createDragForce||t("./lib/dragForce"),u=e.createSpringForce||t("./lib/springForce"),l=e.integrator||t("./lib/eulerIntegrator"),c=e.createBody||t("./lib/createBody"),h=[],d=[],p=o(e),f=a(h,e),g=u(e),v=s(e),y={bodies:h,springs:d,settings:e,step:function(){n();var t=l(h,e.timeStep);return f.update(),t<e.stableThreshold},addBody:function(t){if(!t)throw new Error("Body is required");return h.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=c(t);return h.push(e),e},removeBody:function(t){if(t){var e=h.indexOf(t);if(!(e<0))return h.splice(e,1),0===h.length&&f.reset(),!0}},addSpring:function(t,e,n,i,o){if(!t||!e)throw new Error("Cannot add null spring to force simulator");"number"!=typeof n&&(n=-1);var a=new r(t,e,n,o>=0?o:-1,i);return d.push(a),a},removeSpring:function(t){if(t){var e=d.indexOf(t);return e>-1?(d.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return f.getBestNewPosition(t)},getBBox:function(){return f.box},gravity:function(t){return void 0!==t?(e.gravity=t,p.options({gravity:t}),this):e.gravity},theta:function(t){return void 0!==t?(e.theta=t,p.options({theta:t}),this):e.theta}};return i(e,y),y}e.exports=r},{"./lib/bounds":10,"./lib/createBody":11,"./lib/dragForce":12,"./lib/eulerIntegrator":13,"./lib/spring":14,"./lib/springForce":15,"ngraph.expose":7,"ngraph.merge":24,"ngraph.quadtreebh":26}],10:[function(t,e,n){e.exports=function(e,n){function r(){var t=e.length;if(0!==t){for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MIN_VALUE;t--;){var s=e[t];s.isPinned?(s.pos.x=s.prevPos.x,s.pos.y=s.prevPos.y):(s.prevPos.x=s.pos.x,s.prevPos.y=s.pos.y),s.pos.x<n&&(n=s.pos.x),s.pos.x>i&&(i=s.pos.x),s.pos.y<r&&(r=s.pos.y),s.pos.y>a&&(a=s.pos.y)}o.x1=n,o.x2=i,o.y1=r,o.y2=a}}var i=t("ngraph.random").random(42),o={x1:0,y1:0,x2:0,y2:0};return{box:o,update:r,reset:function(){o.x1=o.y1=0,o.x2=o.y2=0},getBestNewPosition:function(t){var e=o,r=0,a=0;if(t.length){for(var s=0;s<t.length;++s)r+=t[s].pos.x,a+=t[s].pos.y;r/=t.length,a/=t.length}else r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2;var u=n.springLength;return{x:r+i.next(u)-u/2,y:a+i.next(u)-u/2}}}}},{"ngraph.random":34}],11:[function(t,e,n){var r=t("ngraph.physics.primitives");e.exports=function(t){return new r.Body(t)}},{"ngraph.physics.primitives":25}],12:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.expose");e=n(e,{dragCoeff:.02});var i={update:function(t){t.force.x-=e.dragCoeff*t.velocity.x,t.force.y-=e.dragCoeff*t.velocity.y}};return r(e,i,["dragCoeff"]),i}},{"ngraph.expose":7,"ngraph.merge":24}],13:[function(t,e,n){function r(t,e){var n,r=0,i=0,o=0,a=0,s=t.length;for(n=0;n<s;++n){var u=t[n],l=e/u.mass;u.velocity.x+=l*u.force.x,u.velocity.y+=l*u.force.y;var c=u.velocity.x,h=u.velocity.y,d=Math.sqrt(c*c+h*h);d>1&&(u.velocity.x=c/d,u.velocity.y=h/d),r=e*u.velocity.x,o=e*u.velocity.y,u.pos.x+=r,u.pos.y+=o,i+=Math.abs(r),a+=Math.abs(o)}return(i*i+a*a)/t.length}e.exports=r},{}],14:[function(t,e,n){function r(t,e,n,r,i){this.from=t,this.to=e,this.length=n,this.coeff=r,this.weight="number"==typeof i?i:1}e.exports=r},{}],15:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.random").random(42),i=t("ngraph.expose");e=n(e,{springCoeff:2e-4,springLength:80});var o={update:function(t){var n=t.from,i=t.to,o=t.length<0?e.springLength:t.length,a=i.pos.x-n.pos.x,s=i.pos.y-n.pos.y,u=Math.sqrt(a*a+s*s);0===u&&(a=(r.nextDouble()-.5)/50,s=(r.nextDouble()-.5)/50,u=Math.sqrt(a*a+s*s));var l=u-o,c=(!t.coeff||t.coeff<0?e.springCoeff:t.coeff)*l/u*t.weight;n.force.x+=c*a,n.force.y+=c*s,i.force.x-=c*a,i.force.y-=c*s}};return i(e,o,["springCoeff","springLength"]),o}},{"ngraph.expose":7,"ngraph.merge":24,"ngraph.random":34}],16:[function(t,e,n){function r(e,n){return n=t("ngraph.merge")(n,{createQuadTree:t("ngraph.quadtreebh3d"),createBounds:t("./lib/bounds"),createDragForce:t("./lib/dragForce"),createSpringForce:t("./lib/springForce"),integrator:t("./lib/eulerIntegrator"),createBody:t("./lib/createBody")}),r.get2dLayout(e,n)}e.exports=r,r.get2dLayout=t("ngraph.forcelayout")},{"./lib/bounds":17,"./lib/createBody":18,"./lib/dragForce":19,"./lib/eulerIntegrator":20,"./lib/springForce":21,"ngraph.forcelayout":8,"ngraph.merge":24,"ngraph.quadtreebh3d":30}],17:[function(t,e,n){e.exports=function(e,n){function r(){var t=e.length;if(0!==t){for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MAX_VALUE,a=Number.MIN_VALUE,s=Number.MIN_VALUE,u=Number.MIN_VALUE;t--;){var l=e[t];l.isPinned?(l.pos.x=l.prevPos.x,l.pos.y=l.prevPos.y,l.pos.z=l.prevPos.z):(l.prevPos.x=l.pos.x,l.prevPos.y=l.pos.y,l.prevPos.z=l.pos.z),l.pos.x<n&&(n=l.pos.x),l.pos.x>a&&(a=l.pos.x),l.pos.y<r&&(r=l.pos.y),l.pos.y>s&&(s=l.pos.y),l.pos.z<i&&(i=l.pos.z),l.pos.z>u&&(u=l.pos.z)}
o.x1=n,o.x2=a,o.y1=r,o.y2=s,o.z1=i,o.z2=u}}var i=t("ngraph.random").random(42),o={x1:0,y1:0,z1:0,x2:0,y2:0,z2:0};return{box:o,update:r,reset:function(){o.x1=o.y1=0,o.x2=o.y2=0,o.z1=o.z2=0},getBestNewPosition:function(t){var e=o,r=0,a=0,s=0;if(t.length){for(var u=0;u<t.length;++u)r+=t[u].pos.x,a+=t[u].pos.y,s+=t[u].pos.z;r/=t.length,a/=t.length,s/=t.length}else r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=(e.z1+e.z2)/2;var l=n.springLength;return{x:r+i.next(l)-l/2,y:a+i.next(l)-l/2,z:s+i.next(l)-l/2}}}}},{"ngraph.random":34}],18:[function(t,e,n){var r=t("ngraph.physics.primitives");e.exports=function(t){return new r.Body3d(t)}},{"ngraph.physics.primitives":25}],19:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.expose");e=n(e,{dragCoeff:.02});var i={update:function(t){t.force.x-=e.dragCoeff*t.velocity.x,t.force.y-=e.dragCoeff*t.velocity.y,t.force.z-=e.dragCoeff*t.velocity.z}};return r(e,i,["dragCoeff"]),i}},{"ngraph.expose":7,"ngraph.merge":24}],20:[function(t,e,n){function r(t,e){var n,r=0,i=0,o=0,a=0,s=0,u=0,l=t.length;for(n=0;n<l;++n){var c=t[n],h=e/c.mass;c.velocity.x+=h*c.force.x,c.velocity.y+=h*c.force.y,c.velocity.z+=h*c.force.z;var d=c.velocity.x,p=c.velocity.y,f=c.velocity.z,g=Math.sqrt(d*d+p*p+f*f);g>1&&(c.velocity.x=d/g,c.velocity.y=p/g,c.velocity.z=f/g),r=e*c.velocity.x,o=e*c.velocity.y,s=e*c.velocity.z,c.pos.x+=r,c.pos.y+=o,c.pos.z+=s,i+=Math.abs(r),a+=Math.abs(o),u+=Math.abs(s)}return(i*i+a*a+u*u)/t.length}e.exports=r},{}],21:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.random").random(42),i=t("ngraph.expose");e=n(e,{springCoeff:2e-4,springLength:80});var o={update:function(t){var n=t.from,i=t.to,o=t.length<0?e.springLength:t.length,a=i.pos.x-n.pos.x,s=i.pos.y-n.pos.y,u=i.pos.z-n.pos.z,l=Math.sqrt(a*a+s*s+u*u);0===l&&(a=(r.nextDouble()-.5)/50,s=(r.nextDouble()-.5)/50,u=(r.nextDouble()-.5)/50,l=Math.sqrt(a*a+s*s+u*u));var c=l-o,h=(!t.coeff||t.coeff<0?e.springCoeff:t.coeff)*c/l*t.weight;n.force.x+=h*a,n.force.y+=h*s,n.force.z+=h*u,i.force.x-=h*a,i.force.y-=h*s,i.force.z-=h*u}};return i(e,o,["springCoeff","springLength"]),o}},{"ngraph.expose":7,"ngraph.merge":24,"ngraph.random":34}],22:[function(t,e,n){function r(t,e,n){var r;e=e||i,n=n||i,r="string"==typeof t?JSON.parse(t):t;var a,s=o();if(void 0===r.links||void 0===r.nodes)throw new Error("Cannot load graph without links and nodes");for(a=0;a<r.nodes.length;++a){var u=e(r.nodes[a]);if(!u.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");s.addNode(u.id,u.data)}for(a=0;a<r.links.length;++a){var l=n(r.links[a]);if(!l.hasOwnProperty("fromId")||!l.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");s.addLink(l.fromId,l.toId,l.data)}return s}function i(t){return t}e.exports=r;var o=t("ngraph.graph")},{"ngraph.graph":23}],23:[function(t,e,n){function r(t){function e(t,e){O.push({link:t,changeType:e})}function n(t,e){O.push({node:t,changeType:e})}function r(t,e){if(void 0===t)throw new Error("Invalid node identifier");B();var n=u(t);return n?j(n,"update"):(n=new o(t),A++,j(n,"add")),n.data=e,L[t]=n,F(),n}function u(t){return L[t]}function h(t){var e=u(t);if(!e)return!1;if(B(),e.links)for(;e.links.length;){var n=e.links[0];v(n)}return delete L[t],A--,j(e,"remove"),F(),!0}function d(t,e,n){B();var i=u(t)||r(t),o=u(e)||r(e),s=I(t,e,n);return C.push(s),a(i,s),t!==e&&a(o,s),R(s,"add"),F(),s}function p(t,e,n){return new s(t,e,n,l(t,e))}function f(t,e,n){var r=l(t,e),i=D.hasOwnProperty(r);if(i||y(t,e)){i||(D[r]=0);var o="@"+ ++D[r];r=l(t+o,e+o)}return new s(t,e,n,r)}function g(t){var e=u(t);return e?e.links:null}function v(t){if(!t)return!1;var e=i(t,C);if(e<0)return!1;B(),C.splice(e,1);var n=u(t.fromId),r=u(t.toId);return n&&(e=i(t,n.links))>=0&&n.links.splice(e,1),r&&(e=i(t,r.links))>=0&&r.links.splice(e,1),R(t,"remove"),F(),!0}function y(t,e){var n,r=u(t);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var i=r.links[n];if(i.fromId===t&&i.toId===e)return i}return null}function m(){B(),P(function(t){h(t.id)}),F()}function x(t){var e,n;if("function"==typeof t)for(e=0,n=C.length;e<n;++e)t(C[e])}function b(t,e,n){var r=u(t);if(r&&r.links&&"function"==typeof e)return n?_(r.links,t,e):w(r.links,t,e)}function w(t,e,n){for(var r=0;r<t.length;++r){var i=t[r];if(n(L[i.fromId===e?i.toId:i.fromId],i))return!0}}function _(t,e,n){for(var r=0;r<t.length;++r){var i=t[r];if(i.fromId===e&&n(L[i.toId],i))return!0}}function E(){}function k(){M+=1}function T(){0===(M-=1)&&O.length>0&&(q.fire("changed",O),O.length=0)}function N(t){if("function"==typeof t)for(var e=Object.keys(L),n=0;n<e.length;++n)if(t(L[e[n]]))return!0}function S(t){if("function"==typeof t){var e;for(e in L)if(t(L[e]))return!0}}t=t||{},void 0===t.uniqueLinkId&&(t.uniqueLinkId=!0);var L="function"==typeof Object.create?Object.create(null):{},C=[],D={},A=0,M=0,P=function(){return Object.keys?N:S}(),I=t.uniqueLinkId?f:p,O=[],R=E,j=E,B=E,F=E,q={addNode:r,addLink:d,removeLink:v,removeNode:h,getNode:u,getNodesCount:function(){return A},getLinksCount:function(){return C.length},getLinks:g,forEachNode:P,forEachLinkedNode:b,forEachLink:x,beginUpdate:B,endUpdate:F,clear:m,hasLink:y,getLink:y};return c(q),function(){function t(){return q.beginUpdate=B=k,q.endUpdate=F=T,R=e,j=n,q.on=r,r.apply(q,arguments)}var r=q.on;q.on=t}(),q}function i(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,r=e.length;for(n=0;n<r;n+=1)if(e[n]===t)return n;return-1}function o(t){this.id=t,this.links=null,this.data=null}function a(t,e){t.links?t.links.push(e):t.links=[e]}function s(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function u(t){var e,n,r,i=0;if(0==t.length)return i;for(e=0,r=t.length;e<r;e++)n=t.charCodeAt(e),i=(i<<5)-i+n,i|=0;return i}function l(t,e){return u(t.toString()+" "+e.toString())}e.exports=r;var c=t("ngraph.events")},{"ngraph.events":6}],24:[function(t,e,n){function r(t,e){var n;if(t||(t={}),e)for(n in e)if(e.hasOwnProperty(n)){var i=t.hasOwnProperty(n),o=typeof e[n],a=!i||typeof t[n]!==o;a?t[n]=e[n]:"object"===o&&(t[n]=r(t[n],e[n]))}return t}e.exports=r},{}],25:[function(t,e,n){function r(t,e){this.pos=new i(t,e),this.prevPos=new i(t,e),this.force=new i,this.velocity=new i,this.mass=1}function i(t,e){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0)}function o(t,e,n){this.pos=new a(t,e,n),this.prevPos=new a(t,e,n),this.force=new a,this.velocity=new a,this.mass=1}function a(t,e,n){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0,this.z="number"==typeof t.z?t.z:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof n?n:0)}e.exports={Body:r,Vector2d:i,Body3d:o,Vector3d:a},r.prototype.setPosition=function(t,e){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e},i.prototype.reset=function(){this.x=this.y=0},o.prototype.setPosition=function(t,e,n){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e,this.prevPos.z=this.pos.z=n},a.prototype.reset=function(){this.x=this.y=this.z=0}},{}],26:[function(t,e,n){function r(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:null}function i(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e&&(t.quad3=n)}e.exports=function(e){e=e||{},e.gravity="number"==typeof e.gravity?e.gravity:-1,e.theta="number"==typeof e.theta?e.theta:.8;var n=t("ngraph.random").random(1984),o=t("./node"),a=t("./insertStack"),s=t("./isSamePosition"),u=e.gravity,l=[],c=new a,h=e.theta,d=[],p=0,f=function(){var t=d[p];return t?(t.quad0=null,t.quad1=null,t.quad2=null,t.quad3=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0):(t=new o,d[p]=t),++p,t},g=f(),v=function(t){for(c.reset(),c.push(g,t);!c.isEmpty();){var e=c.pop(),o=e.node,a=e.body;if(o.body){var u=o.body;if(o.body=null,s(u.pos,a.pos)){var l=3;do{var h=n.nextDouble(),d=(o.right-o.left)*h,p=(o.bottom-o.top)*h;u.pos.x=o.left+d,u.pos.y=o.top+p,l-=1}while(l>0&&s(u.pos,a.pos));if(0===l&&s(u.pos,a.pos))return}c.push(o,u),c.push(o,a)}else{var v=a.pos.x,y=a.pos.y;o.mass=o.mass+a.mass,o.massX=o.massX+a.mass*v,o.massY=o.massY+a.mass*y;var m=0,x=o.left,b=(o.right+x)/2,w=o.top,_=(o.bottom+w)/2;if(v>b){m+=1;var E=x;x=b,b+=b-E}if(y>_){m+=2;var k=w;w=_,_+=_-k}var T=r(o,m);T?c.push(T,a):(T=f(),T.left=x,T.top=w,T.right=b,T.bottom=_,T.body=a,i(o,m,T))}}},y=function(t){var e,r,i,o,a=l,s=0,c=0,d=1,p=0,f=1;for(a[0]=g;d;){var v=a[p],y=v.body;d-=1,p+=1;var m=y!==t;y&&m?(r=y.pos.x-t.pos.x,i=y.pos.y-t.pos.y,o=Math.sqrt(r*r+i*i),0===o&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=Math.sqrt(r*r+i*i)),e=u*y.mass*t.mass/(o*o*o),s+=e*r,c+=e*i):m&&(r=v.massX/v.mass-t.pos.x,i=v.massY/v.mass-t.pos.y,o=Math.sqrt(r*r+i*i),0===o&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=Math.sqrt(r*r+i*i)),(v.right-v.left)/o<h?(e=u*v.mass*t.mass/(o*o*o),s+=e*r,c+=e*i):(v.quad0&&(a[f]=v.quad0,d+=1,f+=1),v.quad1&&(a[f]=v.quad1,d+=1,f+=1),v.quad2&&(a[f]=v.quad2,d+=1,f+=1),v.quad3&&(a[f]=v.quad3,d+=1,f+=1)))}t.force.x+=s,t.force.y+=c};return{insertBodies:function(t){var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MIN_VALUE,a=t.length;for(e=a;e--;){var s=t[e].pos.x,u=t[e].pos.y;s<n&&(n=s),s>i&&(i=s),u<r&&(r=u),u>o&&(o=u)}var l=i-n,c=o-r;for(l>c?o=r+l:i=n+c,p=0,g=f(),g.left=n,g.right=i,g.top=r,g.bottom=o,e=a-1,e>0&&(g.body=t[e]);e--;)v(t[e])},updateBodyForce:y,options:function(t){return t?("number"==typeof t.gravity&&(u=t.gravity),"number"==typeof t.theta&&(h=t.theta),this):{gravity:u,theta:h}}}}},{"./insertStack":27,"./isSamePosition":28,"./node":29,"ngraph.random":34}],27:[function(t,e,n){function r(){this.stack=[],this.popIdx=0}function i(t,e){this.node=t,this.body=e}e.exports=r,r.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new i(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],28:[function(t,e,n){e.exports=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return n<1e-8&&r<1e-8}},{}],29:[function(t,e,n){e.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},{}],30:[function(t,e,n){function r(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:4===e?t.quad4:5===e?t.quad5:6===e?t.quad6:7===e?t.quad7:null}function i(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e?t.quad3=n:4===e?t.quad4=n:5===e?t.quad5=n:6===e?t.quad6=n:7===e&&(t.quad7=n)}e.exports=function(e){e=e||{},e.gravity="number"==typeof e.gravity?e.gravity:-1,e.theta="number"==typeof e.theta?e.theta:.8;var n=t("ngraph.random").random(1984),o=t("./node"),a=t("./insertStack"),s=t("./isSamePosition"),u=e.gravity,l=[],c=new a,h=e.theta,d=[],p=0,f=function(){var t=d[p];return t?(t.quad0=null,t.quad4=null,t.quad1=null,t.quad5=null,t.quad2=null,t.quad6=null,t.quad3=null,t.quad7=null,t.body=null,t.mass=t.massX=t.massY=t.massZ=0,t.left=t.right=t.top=t.bottom=t.front=t.back=0):(t=new o,d[p]=t),++p,t},g=f(),v=function(t){for(c.reset(),c.push(g,t);!c.isEmpty();){var e=c.pop(),o=e.node,a=e.body;if(o.body){var u=o.body;if(o.body=null,s(u.pos,a.pos)){var l=3;do{var h=n.nextDouble(),d=(o.right-o.left)*h,p=(o.bottom-o.top)*h,v=(o.front-o.back)*h;u.pos.x=o.left+d,u.pos.y=o.top+p,u.pos.z=o.back+v,l-=1}while(l>0&&s(u.pos,a.pos));if(0===l&&s(u.pos,a.pos))return}c.push(o,u),c.push(o,a)}else{var y=a.pos.x,m=a.pos.y,x=a.pos.z;o.mass+=a.mass,o.massX+=a.mass*y,o.massY+=a.mass*m,o.massZ+=a.mass*x;var b=0,w=o.left,_=(o.right+w)/2,E=o.top,k=(o.bottom+E)/2,T=o.back,N=(o.front+T)/2;if(y>_){b+=1;var S=w;w=_,_+=_-S}if(m>k){b+=2;var L=E;E=k,k+=k-L}if(x>N){b+=4;var C=T;T=N,N=T+(T-C)}var D=r(o,b);D?c.push(D,a):(D=f(),D.left=w,D.top=E,D.right=_,D.bottom=k,D.back=T,D.front=N,D.body=a,i(o,b,D))}}},y=function(t){var e,r,i,o,a,s=l,c=0,d=0,p=0,f=1,v=0,y=1;for(s[0]=g;f;){var m=s[v],x=m.body;f-=1,v+=1;var b=x!==t;x&&b?(r=x.pos.x-t.pos.x,i=x.pos.y-t.pos.y,o=x.pos.z-t.pos.z,a=Math.sqrt(r*r+i*i+o*o),0===a&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=(n.nextDouble()-.5)/50,a=Math.sqrt(r*r+i*i+o*o)),e=u*x.mass*t.mass/(a*a*a),c+=e*r,d+=e*i,p+=e*o):b&&(r=m.massX/m.mass-t.pos.x,i=m.massY/m.mass-t.pos.y,o=m.massZ/m.mass-t.pos.z,a=Math.sqrt(r*r+i*i+o*o),0===a&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=(n.nextDouble()-.5)/50,a=Math.sqrt(r*r+i*i+o*o)),(m.right-m.left)/a<h?(e=u*m.mass*t.mass/(a*a*a),c+=e*r,d+=e*i,p+=e*o):(m.quad0&&(s[y]=m.quad0,f+=1,y+=1),m.quad1&&(s[y]=m.quad1,f+=1,y+=1),m.quad2&&(s[y]=m.quad2,f+=1,y+=1),m.quad3&&(s[y]=m.quad3,f+=1,y+=1),m.quad4&&(s[y]=m.quad4,f+=1,y+=1),m.quad5&&(s[y]=m.quad5,f+=1,y+=1),m.quad6&&(s[y]=m.quad6,f+=1,y+=1),m.quad7&&(s[y]=m.quad7,f+=1,y+=1)))}t.force.x+=c,t.force.y+=d,t.force.z+=p};return{insertBodies:function(t){var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MIN_VALUE,s=Number.MIN_VALUE,u=t.length;for(e=u;e--;){var l=t[e].pos,c=l.x,h=l.y,d=l.z;c<n&&(n=c),c>o&&(o=c),h<r&&(r=h),h>a&&(a=h),d<i&&(i=d),d>s&&(s=d)}var y=Math.max(o-n,Math.max(a-r,s-i));for(o=n+y,a=r+y,s=i+y,p=0,g=f(),g.left=n,g.right=o,g.top=r,g.bottom=a,g.back=i,g.front=s,e=u-1,e>0&&(g.body=t[e]);e--;)v(t[e])},updateBodyForce:y,options:function(t){return t?("number"==typeof t.gravity&&(u=t.gravity),"number"==typeof t.theta&&(h=t.theta),this):{gravity:u,theta:h}}}}},{"./insertStack":31,"./isSamePosition":32,"./node":33,"ngraph.random":34}],31:[function(t,e,n){function r(){this.stack=[],this.popIdx=0}function i(t,e){this.node=t,this.body=e}e.exports=r,r.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new i(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],32:[function(t,e,n){e.exports=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y),i=Math.abs(t.z-e.z);return n<1e-8&&r<1e-8&&i<1e-8}},{}],33:[function(t,e,n){e.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.quad4=null,this.quad5=null,this.quad6=null,this.quad7=null,this.mass=0,this.massX=0,this.massY=0,this.massZ=0,this.left=0,this.top=0,this.bottom=0,this.right=0,this.front=0,this.back=0}},{}],34:[function(t,e,n){function r(t){var e="number"==typeof t?t:+new Date,n=function(){return e=e+2127912214+(e<<12)&4294967295,e=4294967295&(3345072700^e^e>>>19),e=e+374761393+(e<<5)&4294967295,e=4294967295&(e+3550635116^e<<9),e=e+4251993797+(e<<3)&4294967295,(268435455&(e=4294967295&(3042594569^e^e>>>16)))/268435456};return{next:function(t){return Math.floor(n()*t)},nextDouble:function(){return n()}}}function i(t,e){var n=e||r();if("function"!=typeof n.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var r,i,o;for(r=t.length-1;r>0;--r)i=n.next(r+1),o=t[i],t[i]=t[r],t[r]=o,e(o);t.length&&e(t[0])},shuffle:function(){var e,r,i;for(e=t.length-1;e>0;--e)r=n.next(e+1),i=t[r],t[r]=t[e],t[e]=i;return t}}}e.exports={random:r,randomIterator:i}},{}],35:[function(t,e,n){function r(t,e,n){function r(t){s.nodes.push(u(t))}function i(t){s.links.push(l(t))}function o(t){var e={id:t.id};return void 0!==t.data&&(e.data=t.data),e}function a(t){var e={fromId:t.fromId,toId:t.toId};return void 0!==t.data&&(e.data=t.data),e}var s={nodes:[],links:[]},u=e||o,l=n||a;return t.forEachNode(r),t.forEachLink(i),JSON.stringify(s)}e.exports=r},{}],36:[function(t,e,n){function r(){d&&c&&(d=!1,c.length?h=c.concat(h):p=-1,h.length&&i())}function i(){if(!d){var t=s(r);d=!0;for(var e=h.length;e;){for(c=h,h=[];++p<e;)c&&c[p].run();p=-1,e=h.length}c=null,d=!1,u(t)}}function o(t,e){this.fun=t,this.array=e}function a(){}var s,u,l=e.exports={};!function(){try{s=setTimeout}catch(t){s=function(){throw new Error("setTimeout is not defined")}}try{u=clearTimeout}catch(t){u=function(){throw new Error("clearTimeout is not defined")}}}();var c,h=[],d=!1,p=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new o(t,e)),1!==h.length||d||s(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],37:[function(t,n,r){(function(t){!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof r&&"object"==typeof n)n.exports=t();else if("function"==typeof e&&e.amd)e(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var i="undefined"!=typeof window?window:self,o=i.Q;i.Q=t(),i.Q.noConflict=function(){return i.Q=o,this}}}(function(){"use strict";function e(t){return function(){return H.apply(t,arguments)}}function n(t){return t===Object(t)}function r(t){return"[object StopIteration]"===et(t)||t instanceof G}function i(t,e){if(z&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&t.stack.indexOf(nt)===-1){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+nt+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];u(i)||a(i)||!i||n.push(i)}return n.join("\n")}function a(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function s(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function u(t){var e=s(t);if(!e)return!1;var n=e[0],r=e[1];return n===V&&r>=X&&r<=st}function l(){if(z)try{throw new Error}catch(r){var t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=s(e);if(!n)return;return V=n[0],n[1]}}function c(t){return t instanceof f?t:m(t)?S(t):N(t)}function h(){function t(t){e=t,o.source=t,$(n,function(e,n){c.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=K(h.prototype),o=K(f.prototype);if(o.promiseDispatch=function(t,i,o){var a=W(arguments);n?(n.push(a),"when"===i&&o[1]&&r.push(o[1])):c.nextTick(function(){e.promiseDispatch.apply(e,a)})},o.valueOf=function(){if(n)return o;var t=v(e);return y(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},c.longStackSupport&&z)try{throw new Error}catch(t){o.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(c(n))},i.fulfill=function(n){e||t(N(n))},i.reject=function(n){e||t(T(n))},i.notify=function(t){e||$(r,function(e,n){c.nextTick(function(){n(t)})},void 0)},i}function d(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=h();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function p(t){return d(function(e,n){for(var r=0,i=t.length;r<i;r++)c(t[r]).then(e,n)})}function f(t,e,n){void 0===e&&(e=function(t){return T(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=K(f.prototype);if(r.promiseDispatch=function(n,i,o){var a;try{a=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(t){a=T(t)}n&&n(a)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function g(t,e,n,r){return c(t).then(e,n,r)}function v(t){if(y(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function y(t){return t instanceof f}function m(t){return n(t)&&"function"==typeof t.then}function x(t){return y(t)&&"pending"===t.inspect().state}function b(t){return!y(t)||"fulfilled"===t.inspect().state}function w(t){return y(t)&&"rejected"===t.inspect().state}function _(){rt.length=0,it.length=0,at||(at=!0)}function E(e,n){at&&("object"==typeof t&&"function"==typeof t.emit&&c.nextTick.runAfter(function(){Z(it,e)!==-1&&(t.emit("unhandledRejection",n,e),ot.push(e))}),it.push(e),n&&void 0!==n.stack?rt.push(n.stack):rt.push("(no stack) "+n))}function k(e){if(at){var n=Z(it,e);n!==-1&&("object"==typeof t&&"function"==typeof t.emit&&c.nextTick.runAfter(function(){var r=Z(ot,e);r!==-1&&(t.emit("rejectionHandled",rt[n],e),ot.splice(r,1))}),it.splice(n,1),rt.splice(n,1))}}function T(t){var e=f({when:function(e){return e&&k(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return E(e,t),e}function N(t){return f({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return tt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function S(t){var e=h();return c.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function L(t){return f({isDef:function(){}},function(e,n){return I(t,e,n)},function(){return c(t).inspect()})}function C(t,e,n){return c(t).spread(e,n)}function D(t){return function(){function e(t,e){var a;if("undefined"==typeof StopIteration){try{a=n[t](e)}catch(t){return T(t)}return a.done?c(a.value):g(a.value,i,o)}try{a=n[t](e)}catch(t){return r(t)?c(t.value):T(t)}return g(a,i,o)}var n=t.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}}function A(t){c.done(c.async(t)())}function M(t){throw new G(t)}function P(t){return function(){return C([this,O(arguments)],function(e,n){return t.apply(e,n)})}}function I(t,e,n){return c(t).dispatch(e,n)}function O(t){return g(t,function(t){var e=0,n=h();return $(t,function(r,i,o){var a;y(i)&&"fulfilled"===(a=i.inspect()).state?t[o]=a.value:(++e,g(i,function(r){t[o]=r,0==--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function R(t){if(0===t.length)return c.resolve();var e=c.defer(),n=0;return $(t,function(r,i,o){function a(t){e.resolve(t)}function s(){0===--n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function u(t){e.notify({index:o,value:t})}var l=t[o];n++,g(l,a,s,u)},void 0),e.promise}function j(t){return g(t,function(t){return t=Q(t,c),g(O(Q(t,function(t){return g(t,Y,Y)})),function(){return t})})}function B(t){return c(t).allSettled()}function F(t,e){return c(t).then(void 0,void 0,e)}function q(t,e){return c(t).nodeify(e)}var z=!1;try{throw new Error}catch(t){z=!!t.stack}var V,G,X=l(),Y=function(){},U=function(){function e(){for(var t,e;r.next;)r=r.next,t=r.task,r.task=void 0,e=r.domain,e&&(r.domain=void 0,e.enter()),n(t,e);for(;u.length;)t=u.pop(),n(t);o=!1}function n(t,n){try{t()}catch(t){if(s)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),t;setTimeout(function(){throw t},0)}n&&n.exit()}var r={task:void 0,next:null},i=r,o=!1,a=void 0,s=!1,u=[];if(U=function(e){i=i.next={task:e,domain:s&&t.domain,next:null},o||(o=!0,a())},"object"==typeof t&&"[object process]"===t.toString()&&t.nextTick)s=!0,a=function(){t.nextTick(e)};else if("function"==typeof setImmediate)a="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=function(){a=c,l.port1.onmessage=e,e()};var c=function(){l.port2.postMessage(0)};a=function(){setTimeout(e,0),c()}}else a=function(){setTimeout(e,0)};return U.runAfter=function(t){u.push(t),o||(o=!0,a())},U}(),H=Function.call,W=e(Array.prototype.slice),$=e(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(e=t(e,this[n],n));return e}),Z=e(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Q=e(Array.prototype.map||function(t,e){var n=this,r=[];return $(n,function(i,o,a){r.push(t.call(e,o,a,n))},void 0),r}),K=Object.create||function(t){function e(){}return e.prototype=t,new e},J=e(Object.prototype.hasOwnProperty),tt=Object.keys||function(t){var e=[];for(var n in t)J(t,n)&&e.push(n);return e},et=e(Object.prototype.toString);G="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var nt="From previous event:";c.resolve=c,c.nextTick=U,c.longStackSupport=!1,"object"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(c.longStackSupport=!0),c.defer=h,h.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(W(arguments,1)):t.resolve(n)}},c.Promise=d,c.promise=d,d.race=p,d.all=O,d.reject=T,d.resolve=c,c.passByCopy=function(t){return t},f.prototype.passByCopy=function(){return this},c.join=function(t,e){return c(t).join(e)},f.prototype.join=function(t){return c([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},c.race=p,f.prototype.race=function(){return this.then(c.race)},c.makePromise=f,f.prototype.toString=function(){return"[object Promise]"},f.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(t){return T(t)}}function o(t){if("function"==typeof e){i(t,s);try{return e(t)}catch(t){return T(t)}}return T(t)}function a(t){return"function"==typeof n?n(t):t}var s=this,u=h(),l=!1;return c.nextTick(function(){s.promiseDispatch(function(t){l||(l=!0,u.resolve(r(t)))},"when",[function(t){l||(l=!0,u.resolve(o(t)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=a(t)}catch(t){if(n=!0,!c.onerror)throw t;c.onerror(t)}n||u.notify(e)}]),u.promise},c.tap=function(t,e){return c(t).tap(e)},f.prototype.tap=function(t){return t=c(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},c.when=g,f.prototype.thenResolve=function(t){return this.then(function(){return t})},c.thenResolve=function(t,e){return c(t).thenResolve(e)},f.prototype.thenReject=function(t){return this.then(function(){throw t})},c.thenReject=function(t,e){return c(t).thenReject(e)},c.nearer=v,c.isPromise=y,c.isPromiseAlike=m,c.isPending=x,f.prototype.isPending=function(){return"pending"===this.inspect().state},c.isFulfilled=b,f.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},c.isRejected=w,f.prototype.isRejected=function(){return"rejected"===this.inspect().state};var rt=[],it=[],ot=[],at=!0;c.resetUnhandledRejections=_,c.getUnhandledReasons=function(){return rt.slice()},c.stopUnhandledRejectionTracking=function(){_(),at=!1},_(),c.reject=T,c.fulfill=N,c.master=L,c.spread=C,f.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},c.async=D,c.spawn=A,c.return=M,c.promised=P,c.dispatch=I,f.prototype.dispatch=function(t,e){var n=this,r=h();return c.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},c.get=function(t,e){return c(t).dispatch("get",[e])},f.prototype.get=function(t){return this.dispatch("get",[t])},c.set=function(t,e,n){return c(t).dispatch("set",[e,n])},f.prototype.set=function(t,e){return this.dispatch("set",[t,e])},c.del=c.delete=function(t,e){return c(t).dispatch("delete",[e])},f.prototype.del=f.prototype.delete=function(t){return this.dispatch("delete",[t])},c.mapply=c.post=function(t,e,n){return c(t).dispatch("post",[e,n])},f.prototype.mapply=f.prototype.post=function(t,e){return this.dispatch("post",[t,e])},c.send=c.mcall=c.invoke=function(t,e){return c(t).dispatch("post",[e,W(arguments,2)])},f.prototype.send=f.prototype.mcall=f.prototype.invoke=function(t){return this.dispatch("post",[t,W(arguments,1)])},c.fapply=function(t,e){return c(t).dispatch("apply",[void 0,e])},f.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},c.try=c.fcall=function(t){return c(t).dispatch("apply",[void 0,W(arguments,1)])},f.prototype.fcall=function(){return this.dispatch("apply",[void 0,W(arguments)])},c.fbind=function(t){var e=c(t),n=W(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(W(arguments))])}},f.prototype.fbind=function(){var t=this,e=W(arguments);return function(){return t.dispatch("apply",[this,e.concat(W(arguments))])}},c.keys=function(t){return c(t).dispatch("keys",[])},f.prototype.keys=function(){return this.dispatch("keys",[])},c.all=O,f.prototype.all=function(){return O(this)},c.any=R,f.prototype.any=function(){return R(this)},c.allResolved=function(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}(j,"allResolved","allSettled"),f.prototype.allResolved=function(){return j(this)},c.allSettled=B,f.prototype.allSettled=function(){return this.then(function(t){return O(Q(t,function(t){function e(){return t.inspect()}return t=c(t),t.then(e,e)}))})},c.fail=c.catch=function(t,e){return c(t).then(void 0,e)},f.prototype.fail=f.prototype.catch=function(t){return this.then(void 0,t)},c.progress=F,f.prototype.progress=function(t){return this.then(void 0,void 0,t)},c.fin=c.finally=function(t,e){return c(t).finally(e)},f.prototype.fin=f.prototype.finally=function(t){return t=c(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},c.done=function(t,e,n,r){return c(t).done(e,n,r)},f.prototype.done=function(e,n,r){var o=function(t){c.nextTick(function(){if(i(t,a),!c.onerror)throw t;c.onerror(t)})},a=e||n||r?this.then(e,n,r):this;"object"==typeof t&&t&&t.domain&&(o=t.domain.bind(o)),a.then(void 0,o)},c.timeout=function(t,e,n){return c(t).timeout(e,n)},f.prototype.timeout=function(t,e){var n=h(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},c.delay=function(t,e){return void 0===e&&(e=t,t=void 0),c(t).delay(e)},f.prototype.delay=function(t){return this.then(function(e){var n=h();return setTimeout(function(){n.resolve(e)},t),n.promise})},c.nfapply=function(t,e){return c(t).nfapply(e)},f.prototype.nfapply=function(t){var e=h(),n=W(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},c.nfcall=function(t){var e=W(arguments,1);return c(t).nfapply(e)},f.prototype.nfcall=function(){var t=W(arguments),e=h();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},c.nfbind=c.denodeify=function(t){var e=W(arguments,1);return function(){var n=e.concat(W(arguments)),r=h();return n.push(r.makeNodeResolver()),c(t).fapply(n).fail(r.reject),r.promise}},f.prototype.nfbind=f.prototype.denodeify=function(){var t=W(arguments);return t.unshift(this),c.denodeify.apply(void 0,t)},c.nbind=function(t,e){var n=W(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(W(arguments)),o=h();return i.push(o.makeNodeResolver()),c(r).fapply(i).fail(o.reject),o.promise}},f.prototype.nbind=function(){var t=W(arguments,0);return t.unshift(this),c.nbind.apply(void 0,t)},c.nmapply=c.npost=function(t,e,n){return c(t).npost(e,n)},f.prototype.nmapply=f.prototype.npost=function(t,e){var n=W(e||[]),r=h();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},c.nsend=c.nmcall=c.ninvoke=function(t,e){var n=W(arguments,2),r=h();return n.push(r.makeNodeResolver()),
c(t).dispatch("post",[e,n]).fail(r.reject),r.promise},f.prototype.nsend=f.prototype.nmcall=f.prototype.ninvoke=function(t){var e=W(arguments,1),n=h();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},c.nodeify=q,f.prototype.nodeify=function(t){if(!t)return this;this.then(function(e){c.nextTick(function(){t(null,e)})},function(e){c.nextTick(function(){t(e)})})},c.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var st=l();return c})}).call(this,t("_process"))},{_process:36}],38:[function(t,n,r){(function(){function t(t){function e(e,n,r,i,o,a){for(;o>=0&&o<a;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}return function(n,r,i,o){r=_(r,o,4);var a=!C(n)&&w.keys(n),s=(a||n).length,u=t>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=t),e(n,r,i,a,u,s)}}function i(t){return function(e,n,r){n=E(n,r);for(var i=L(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function o(t,e,n){return function(r,i,o){var a=0,s=L(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(p.call(r,a,s),w.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}function a(t,e){var n=I.length,r=t.constructor,i=w.isFunction(r)&&r.prototype||c,o="constructor";for(w.has(t,o)&&!w.contains(e,o)&&e.push(o);n--;)(o=I[n])in t&&t[o]!==i[o]&&!w.contains(e,o)&&e.push(o)}var s=this,u=s._,l=Array.prototype,c=Object.prototype,h=Function.prototype,d=l.push,p=l.slice,f=c.toString,g=c.hasOwnProperty,v=Array.isArray,y=Object.keys,m=h.bind,x=Object.create,b=function(){},w=function(t){return t instanceof w?t:this instanceof w?void(this._wrapped=t):new w(t)};void 0!==r?(void 0!==n&&n.exports&&(r=n.exports=w),r._=w):s._=w,w.VERSION="1.8.3";var _=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},E=function(t,e,n){return null==t?w.identity:w.isFunction(t)?_(t,e,n):w.isObject(t)?w.matcher(t):w.property(t)};w.iteratee=function(t,e){return E(t,e,1/0)};var k=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;u<s;u++){var l=a[u];e&&void 0!==n[l]||(n[l]=o[l])}return n}},T=function(t){if(!w.isObject(t))return{};if(x)return x(t);b.prototype=t;var e=new b;return b.prototype=null,e},N=function(t){return function(e){return null==e?void 0:e[t]}},S=Math.pow(2,53)-1,L=N("length"),C=function(t){var e=L(t);return"number"==typeof e&&e>=0&&e<=S};w.each=w.forEach=function(t,e,n){e=_(e,n);var r,i;if(C(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=w.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},w.map=w.collect=function(t,e,n){e=E(e,n);for(var r=!C(t)&&w.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},w.reduce=w.foldl=w.inject=t(1),w.reduceRight=w.foldr=t(-1),w.find=w.detect=function(t,e,n){var r;if(void 0!==(r=C(t)?w.findIndex(t,e,n):w.findKey(t,e,n))&&r!==-1)return t[r]},w.filter=w.select=function(t,e,n){var r=[];return e=E(e,n),w.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},w.reject=function(t,e,n){return w.filter(t,w.negate(E(e)),n)},w.every=w.all=function(t,e,n){e=E(e,n);for(var r=!C(t)&&w.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},w.some=w.any=function(t,e,n){e=E(e,n);for(var r=!C(t)&&w.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},w.contains=w.includes=w.include=function(t,e,n,r){return C(t)||(t=w.values(t)),("number"!=typeof n||r)&&(n=0),w.indexOf(t,e,n)>=0},w.invoke=function(t,e){var n=p.call(arguments,2),r=w.isFunction(e);return w.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},w.pluck=function(t,e){return w.map(t,w.property(e))},w.where=function(t,e){return w.filter(t,w.matcher(e))},w.findWhere=function(t,e){return w.find(t,w.matcher(e))},w.max=function(t,e,n){var r,i,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=C(t)?t:w.values(t);for(var s=0,u=t.length;s<u;s++)(r=t[s])>o&&(o=r)}else e=E(e,n),w.each(t,function(t,n,r){((i=e(t,n,r))>a||i===-(1/0)&&o===-(1/0))&&(o=t,a=i)});return o},w.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=C(t)?t:w.values(t);for(var s=0,u=t.length;s<u;s++)(r=t[s])<o&&(o=r)}else e=E(e,n),w.each(t,function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},w.shuffle=function(t){for(var e,n=C(t)?t:w.values(t),r=n.length,i=Array(r),o=0;o<r;o++)e=w.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},w.sample=function(t,e,n){return null==e||n?(C(t)||(t=w.values(t)),t[w.random(t.length-1)]):w.shuffle(t).slice(0,Math.max(0,e))},w.sortBy=function(t,e,n){return e=E(e,n),w.pluck(w.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var D=function(t){return function(e,n,r){var i={};return n=E(n,r),w.each(e,function(r,o){t(i,r,n(r,o,e))}),i}};w.groupBy=D(function(t,e,n){w.has(t,n)?t[n].push(e):t[n]=[e]}),w.indexBy=D(function(t,e,n){t[n]=e}),w.countBy=D(function(t,e,n){w.has(t,n)?t[n]++:t[n]=1}),w.toArray=function(t){return t?w.isArray(t)?p.call(t):C(t)?w.map(t,w.identity):w.values(t):[]},w.size=function(t){return null==t?0:C(t)?t.length:w.keys(t).length},w.partition=function(t,e,n){e=E(e,n);var r=[],i=[];return w.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},w.first=w.head=w.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:w.initial(t,t.length-e)},w.initial=function(t,e,n){return p.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},w.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:w.rest(t,Math.max(0,t.length-e))},w.rest=w.tail=w.drop=function(t,e,n){return p.call(t,null==e||n?1:e)},w.compact=function(t){return w.filter(t,w.identity)};var A=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=L(t);a<s;a++){var u=t[a];if(C(u)&&(w.isArray(u)||w.isArguments(u))){e||(u=A(u,e,n));var l=0,c=u.length;for(i.length+=c;l<c;)i[o++]=u[l++]}else n||(i[o++]=u)}return i};w.flatten=function(t,e){return A(t,e,!1)},w.without=function(t){return w.difference(t,p.call(arguments,1))},w.uniq=w.unique=function(t,e,n,r){w.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=E(n,r));for(var i=[],o=[],a=0,s=L(t);a<s;a++){var u=t[a],l=n?n(u,a,t):u;e?(a&&o===l||i.push(u),o=l):n?w.contains(o,l)||(o.push(l),i.push(u)):w.contains(i,u)||i.push(u)}return i},w.union=function(){return w.uniq(A(arguments,!0,!0))},w.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=L(t);r<i;r++){var o=t[r];if(!w.contains(e,o)){for(var a=1;a<n&&w.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},w.difference=function(t){var e=A(arguments,!0,!0,1);return w.filter(t,function(t){return!w.contains(e,t)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(t){for(var e=t&&w.max(t,L).length||0,n=Array(e),r=0;r<e;r++)n[r]=w.pluck(t,r);return n},w.object=function(t,e){for(var n={},r=0,i=L(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},w.findIndex=i(1),w.findLastIndex=i(-1),w.sortedIndex=function(t,e,n,r){n=E(n,r,1);for(var i=n(e),o=0,a=L(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},w.indexOf=o(1,w.findIndex,w.sortedIndex),w.lastIndexOf=o(-1,w.findLastIndex),w.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var M=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=T(t.prototype),a=t.apply(o,i);return w.isObject(a)?a:o};w.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,p.call(arguments,1));if(!w.isFunction(t))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),r=function(){return M(t,r,e,this,n.concat(p.call(arguments)))};return r},w.partial=function(t){var e=p.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===w?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return M(t,n,this,this,o)};return n},w.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)n=arguments[e],t[n]=w.bind(t[n],t);return t},w.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return w.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},w.delay=function(t,e){var n=p.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},w.defer=w.partial(w.delay,w,1),w.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:w.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var l=w.now();s||n.leading!==!1||(s=l);var c=e-(l-s);return r=this,i=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=l,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(u,c)),o}},w.debounce=function(t,e,n){var r,i,o,a,s,u=function(){var l=w.now()-a;l<e&&l>=0?r=setTimeout(u,e-l):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=w.now();var l=n&&!r;return r||(r=setTimeout(u,e)),l&&(s=t.apply(o,i),o=i=null),s}},w.wrap=function(t,e){return w.partial(e,t)},w.negate=function(t){return function(){return!t.apply(this,arguments)}},w.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},w.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},w.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},w.once=w.partial(w.before,2);var P=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(t){if(!w.isObject(t))return[];if(y)return y(t);var e=[];for(var n in t)w.has(t,n)&&e.push(n);return P&&a(t,e),e},w.allKeys=function(t){if(!w.isObject(t))return[];var e=[];for(var n in t)e.push(n);return P&&a(t,e),e},w.values=function(t){for(var e=w.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},w.mapObject=function(t,e,n){e=E(e,n);for(var r,i=w.keys(t),o=i.length,a={},s=0;s<o;s++)r=i[s],a[r]=e(t[r],r,t);return a},w.pairs=function(t){for(var e=w.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},w.invert=function(t){for(var e={},n=w.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},w.functions=w.methods=function(t){var e=[];for(var n in t)w.isFunction(t[n])&&e.push(n);return e.sort()},w.extend=k(w.allKeys),w.extendOwn=w.assign=k(w.keys),w.findKey=function(t,e,n){e=E(e,n);for(var r,i=w.keys(t),o=0,a=i.length;o<a;o++)if(r=i[o],e(t[r],r,t))return r},w.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;w.isFunction(e)?(i=w.allKeys(a),r=_(e,n)):(i=A(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=i.length;s<u;s++){var l=i[s],c=a[l];r(c,l,a)&&(o[l]=c)}return o},w.omit=function(t,e,n){if(w.isFunction(e))e=w.negate(e);else{var r=w.map(A(arguments,!1,!1,1),String);e=function(t,e){return!w.contains(r,e)}}return w.pick(t,e,n)},w.defaults=k(w.allKeys,!0),w.create=function(t,e){var n=T(t);return e&&w.extendOwn(n,e),n},w.clone=function(t){return w.isObject(t)?w.isArray(t)?t.slice():w.extend({},t):t},w.tap=function(t,e){return e(t),t},w.isMatch=function(t,e){var n=w.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var O=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof w&&(t=t._wrapped),e instanceof w&&(e=e._wrapped);var i=f.call(t);if(i!==f.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(w.isFunction(a)&&a instanceof a&&w.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if((u=t.length)!==e.length)return!1;for(;u--;)if(!O(t[u],e[u],n,r))return!1}else{var l,c=w.keys(t);if(u=c.length,w.keys(e).length!==u)return!1;for(;u--;)if(l=c[u],!w.has(e,l)||!O(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0};w.isEqual=function(t,e){return O(t,e)},w.isEmpty=function(t){return null==t||(C(t)&&(w.isArray(t)||w.isString(t)||w.isArguments(t))?0===t.length:0===w.keys(t).length)},w.isElement=function(t){return!(!t||1!==t.nodeType)},w.isArray=v||function(t){return"[object Array]"===f.call(t)},w.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){w["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}}),w.isArguments(arguments)||(w.isArguments=function(t){return w.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(t){return"function"==typeof t||!1}),w.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},w.isNaN=function(t){return w.isNumber(t)&&t!==+t},w.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===f.call(t)},w.isNull=function(t){return null===t},w.isUndefined=function(t){return void 0===t},w.has=function(t,e){return null!=t&&g.call(t,e)},w.noConflict=function(){return s._=u,this},w.identity=function(t){return t},w.constant=function(t){return function(){return t}},w.noop=function(){},w.property=N,w.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},w.matcher=w.matches=function(t){return t=w.extendOwn({},t),function(e){return w.isMatch(e,t)}},w.times=function(t,e,n){var r=Array(Math.max(0,t));e=_(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},w.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},w.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=w.invert(R),B=function(t){var e=function(e){return t[e]},n="(?:"+w.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};w.escape=B(R),w.unescape=B(j),w.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),w.isFunction(r)?r.call(t):r};var F=0;w.uniqueId=function(t){var e=++F+"";return t?t+e:e},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=function(t){return"\\"+q[t]};w.template=function(t,e,n){!e&&n&&(e=n),e=w.defaults({},e,w.templateSettings);var r=RegExp([(e.escape||/(.)^/).source,(e.interpolate||/(.)^/).source,(e.evaluate||/(.)^/).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(/\\|'|\r|\n|\u2028|\u2029/g,z),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return a.call(this,t,w)},u=e.variable||"obj";return s.source="function("+u+"){\n"+o+"}",s},w.chain=function(t){var e=w(t);return e._chain=!0,e};var V=function(t,e){return t._chain?w(e).chain():e};w.mixin=function(t){w.each(w.functions(t),function(e){var n=w[e]=t[e];w.prototype[e]=function(){var t=[this._wrapped];return d.apply(t,arguments),V(this,n.apply(w,t))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=l[t];w.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],V(this,n)}}),w.each(["concat","join","slice"],function(t){var e=l[t];w.prototype[t]=function(){return V(this,e.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof e&&e.amd&&e("underscore",[],function(){return w})}).call(this)},{}],39:[function(t,e,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){for(var n,s=Object.keys(o),u=0,l=s.length;u<l;u++){var c=s[u],h=o[c].exports;if(h===t||h&&h.default===t){n=c;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var d={},u=0,l=s.length;u<l;u++){var c=s[u];d[c]=c}i[n]=[Function(["require","module","exports"],"("+t+")(self)"),d]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),f={};f[n]=n,i[p]=[Function(["require"],"var f = require("+a(n)+");(f.default ? f.default : f)(self);"),f];var g="("+r+")({"+Object.keys(i).map(function(t){return a(t)+":["+i[t][0]+","+a(i[t][1])+"]"}).join(",")+"},{},["+a(p)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([g],{type:"text/javascript"});if(e&&e.bare)return y;var m=v.createObjectURL(y),x=new Worker(m);return x.objectURL=m,x}},{}],40:[function(t,e,n){"use strict";var r=t("ngraph.graph"),i=t("underscore"),o=(t("Q"),t("ngraph.asyncforce")),a=function(t){function e(t){this.options=a({},n,t),this.layoutOptions=a({},n,t),delete this.layoutOptions.cy,delete this.layoutOptions.eles}if(t){var n={async:{maxIterations:1e3,stepsPerCycle:30,waitForStep:!1},physics:{springLength:100,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,iterations:1e4,fit:!0,stableThreshold:9e-6},iterations:1e4,refreshInterval:16,refreshIterations:10,stableThreshold:2,animate:!0,fit:!0},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t};return e.prototype.l=o,e.prototype.g=r,e.prototype.run=function(){var t=this;t.trigger({type:"layoutstart",layout:t});var e=this.options,n=this.layoutOptions,r=this,o=r.g(),a=e.cy,s=e.eles,u=s.nodes(),l=u.parents();u=u.difference(l),u=u.filterFn(function(t){return t.connectedEdges().length>0});var c,h=s.edges(),d={},p=!0,f=function(e){u.positions(function(t,e){if(!e.data("dragging"))return c.getNodePosition(e.id())}),n.async&&setTimeout(function(){t.trigger({type:"layoutstop",layout:t}),t.trigger({type:"layoutready",layout:t})},500),n.fit&&a.fit(n.padding),p&&(t.trigger("layoutready"),p=!1)};o.on("changed",function(t){}),i.each(u,function(t,e){t.on("tapstart",function(t){t.cyTarget.data("dragging",!0)}),t.on("tapend",function(t){t.cyTarget.removeData("dragging")}),t.on("position","node[dragging]",function(t){c.setNodePosition&&t.cyTarget.data("dragging")&&c.setNodePosition(t.cyTarget.data().id)}),o.addNode(t.data().id)}),i.each(h,function(t,e){d[t.data().source+":"+t.data().target]||d[t.data().target+":"+t.data().source]||(d[t.data().source+":"+t.data().target]=t,o.addLink(t.data().source,t.data().target))}),c=r.l(o,n),i.each(u,function(t,e){var n=t.data();n.pin?(c.pinNode(n.id,!0),t.removeData("pin"),t.data("unpin",!0)):n.unpin&&(c.pinNode(n.id,!1),t.removeData("unpin"))});var g=n.iterations;this.on("layoutstop",function(){n.iterations=0}),c.on("stable",function(){console.log("got Stable event"),g=0}),n.animate||(n.refreshInterval=0);var v;if(c.on("cycle",function(){f()}),n.async)return this;var y=function(){if(n.animate)0!=g?v&&0!=g||(v=setTimeout(function(){g--,v=null,!!c.step()&&(g=0),y()},n.refreshInterval)):(t.trigger({type:"layoutstop",layout:t}),t.trigger({type:"layoutready",layout:t}));else{for(var e=0;e<n.iterations;e++)c.step();t.trigger({type:"layoutstop",layout:t}),t.trigger({type:"layoutready",layout:t})}};return y(),this},e.prototype.stop=function(){return this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},e.prototype.destroy=function(){return this.thread&&this.thread.stop(),this},e}};e.exports=function(t){return a(t)}},{Q:37,"ngraph.asyncforce":1,"ngraph.graph":23,underscore:38}],41:[function(t,n,r){"use strict";!function(){var r=t("./impl.js"),i=function(t){t("layout","cytoscape-ngraph.forcelayout",r(t))};void 0!==n&&n.exports&&(n.exports=i),void 0!==e&&e.amd&&e("cytoscape-ngraph.forcelayout",function(){return i}),"undefined"!=typeof cytoscape&&i(cytoscape)}()},{"./impl.js":40}]},{},[41])(41)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(t,e,n){!function(){"use strict";var t=function(t,e){t&&(e.fn.cyPanzoom=e.fn.cytoscapePanzoom=function(t){return r.apply(this,[t,e]),this},t("core","panzoom",function(t){var n=this;return r.apply(n.container(),[t,e]),this}))},n={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},r=function(t,e){var r=e.extend(!0,{},n,t),i=t,o={destroy:function(){var t=e(this),n=t.find(".cy-panzoom");n.data("winbdgs").forEach(function(t){e(window).unbind(t.evt,t.fn)}),n.data("cybdgs").forEach(function(e){t.cytoscape("get").off(e.evt,e.fn)}),n.remove()},init:function(){window;return e(this).each(function(){function t(t){var e={x:t.originalEvent.pageX-N.offset().left-N.width()/2,y:t.originalEvent.pageY-N.offset().top-N.height()/2},n=r.panDragAreaSize,i=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.min(i/n,1);return i<r.panInactiveArea?{x:NaN,y:NaN}:(e={x:e.x/i,y:e.y/i},o=Math.max(r.panMinPercentSpeed,o),{x:-1*e.x*(o*r.panDistance),y:-1*e.y*(o*r.panDistance)})}function n(){clearInterval(O),v("mousemove",j),M.hide()}function i(t){var e=t,n=Math.sqrt(e.x*e.x+e.y*e.y),i={x:-1*e.x/n,y:-1*e.y/n},o=N.width(),a=N.height(),s=n/r.panDistance,u=Math.max(r.panIndicatorMinOpacity,s),l=255-Math.round(255*u);M.show().css({left:o/2*i.x+o/2,top:a/2*i.y+a/2,background:"rgb("+l+", "+l+", "+l+")"})}function o(){var t=d.cytoscape("get");t.pan(),t.zoom();P=d.width()/2,I=d.height()/2}function a(){R=!0,o()}function s(){R=!1}function u(t){var e=d.cytoscape("get");R||o(),e.zoom({level:t,renderedPosition:{x:P,y:I}})}function l(t,e){void 0===e&&(e=0);var n=z,i=0+n,o=E.height()-k.height()-2*n,a=t.pageY-E.offset().top-e;a<i&&(a=i),a>o&&(a=o);var s=1-(a-i)/(o-i);k.css("top",a);var l=r.minZoom,c=r.maxZoom,h=Math.log(l)/Math.log(c),d=(1-h)*s+h,p=Math.pow(c,d);p<l?p=l:p>c&&(p=c),u(p)}function c(){var t=d.cytoscape("get"),e=t.zoom(),n=r.minZoom,i=r.maxZoom,o=Math.log(n)/Math.log(i),a=Math.log(e)/Math.log(i),s=1-(a-o)/(1-o),u=z,l=E.height()-k.height()-2*z,c=s*(l-u);c<u&&(c=u),c>l&&(c=l),k.css("top",c)}function h(t,e){var n;t.bind("mousedown",function(t){if(t.preventDefault(),t.stopPropagation(),0==t.button){var i=d.cytoscape("get"),o=function(){var t=i.zoom(),n=i.zoom()*e;n<r.minZoom&&(n=r.minZoom),n>r.maxZoom&&(n=r.maxZoom),n==r.maxZoom&&t==r.maxZoom||n==r.minZoom&&t==r.minZoom||u(n)};return a(),o(),n=setInterval(o,r.zoomDelay),!1}}),g("mouseup blur",function(){clearInterval(n),s()})}var d=e(this),p=[],f=e(window),g=function(t,e){p.push({evt:t,fn:e}),f.bind(t,e)},v=function(t,e){for(var n=0;n<p.length;n++){var r=p[n];if(r.evt===t&&r.fn===e){p.splice(n,1);break}}f.unbind(t,e)},y=[],m=d.cytoscape("get"),x=e('<div class="cy-panzoom"></div>');d.prepend(x),x.css("position","absolute"),x.data("winbdgs",p),x.data("cybdgs",y),r.zoomOnly&&x.addClass("cy-panzoom-zoom-only");var b=e('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+r.zoomInIcon+'"></span></div>');x.append(b);var w=e('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+r.zoomOutIcon+'"></span></div>');x.append(w);var _=e('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+r.resetIcon+'"></span></div>');x.append(_);var E=e('<div class="cy-panzoom-slider"></div>');x.append(E),E.append('<div class="cy-panzoom-slider-background"></div>');var k=e('<div class="cy-panzoom-slider-handle"><span class="icon '+r.sliderHandleIcon+'"></span></div>');E.append(k);var T=e('<div class="cy-panzoom-no-zoom-tick"></div>');E.append(T);var N=e('<div class="cy-panzoom-panner"></div>');x.append(N);var S=e('<div class="cy-panzoom-panner-handle"></div>');N.append(S);var L=e('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),C=e('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),D=e('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),A=e('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');N.append(L).append(C).append(D).append(A);var M=e('<div class="cy-panzoom-pan-indicator"></div>');N.append(M);var P,I,O,R=!1,j=function(e){e.stopPropagation(),e.preventDefault(),clearInterval(O);var n=t(e);if(isNaN(n.x)||isNaN(n.y))return void M.hide();i(n),O=setInterval(function(){d.cytoscape("get").panBy(n)},r.panSpeed)};S.bind("mousedown",function(t){j(t),g("mousemove",j)}),S.bind("mouseup",function(){n()}),g("mouseup blur",function(){n()}),E.bind("mousedown",function(){return!1});var B,F,q=!1,z=2;k.bind("mousedown",B=function(t){var e=t.target===k[0]?t.offsetY:0;q=!0,a(),k.addClass("active");var n=0;return g("mousemove",F=function(t){var r=+new Date;return r>n+10&&(n=r,l(t,e),!1)}),g("mouseup",function(){v("mousemove",F),q=!1,k.removeClass("active"),s()}),!1}),E.bind("mousedown",function(t){t.target!==k[0]&&(B(t),l(t))}),c(),function(t,e){y.push({evt:t,fn:e}),m.on(t,e)}("zoom",function(){q||c()}),function(){var t=r.minZoom,e=r.maxZoom,n=Math.log(t)/Math.log(e),i=Math.log(1)/Math.log(e),o=1-(i-n)/(1-n);if(o>1||o<0)return void T.hide();var a=z,s=E.height()-k.height()-2*z,u=o*(s-a);u<a&&(u=a),u>s&&(u=s),T.css("top",u)}(),h(b,1+r.zoomFactor),h(w,1-r.zoomFactor),_.bind("mousedown",function(t){if(0==t.button){var e=d.cytoscape("get"),n=r.fitSelector?e.elements(r.fitSelector):e.elements();if(0===n.size())e.reset();else{("function"==typeof r.animateOnFit?r.animateOnFit.call():r.animateOnFit)?e.animate({fit:{eles:n,padding:r.fitPadding}},{duration:r.fitAnimationDuration}):e.fit(n,r.fitPadding)}return!1}})})}};return o[i]?o[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(e.error("No such function `"+i+"` for jquery.cytoscapePanzoom"),e(this)):o.init.apply(this,arguments)};void 0!==e&&e.exports&&(e.exports=t),"undefined"!=typeof define&&define.amd&&define("cytoscape-panzoom",function(){return t}),"undefined"!=typeof cytoscape&&"undefined"!=typeof jQuery&&t(cytoscape,jQuery)}()},{}],41:[function(t,e,n){!function(n,r){"use strict";function i(t,e){function n(t,n){var r=t.scratch().qtip,o=e.extend({},n);o.id||(o.id="cy-qtip-target-"+(Date.now()+Math.round(1e4*Math.random()))),r.$domEle||(r.$domEle=i),o.position=o.position||{},o.position.container=o.position.container||e(document.body),o.position.viewport=o.position.viewport||e(document.body),o.position.target=[0,0],o.position.my=o.position.my||"top center",o.position.at=o.position.at||"bottom center";var c=o.position.adjust=o.position.adjust||{};return c.method=c.method||"flip",c.mouse=!1,o.show=o.show||{},u(o.show.event)&&(o.show.event="tap"),o.hide=o.hide||{},o.hide.cyViewport=void 0===o.hide.cyViewport||o.hide.cyViewport,u(o.hide.event)&&(o.hide.event="unfocus"),o.overwrite=!1,o.content&&(a(o.content)||s(o.content)?o.content=l(o.content,t):o.content={text:l(o.content.text,t),title:l(o.content.title,t)}),o}function r(t,e,n){var r=n,i=a(t.pan),o=!i,s=o&&t.isNode(),u=i?t:t.cy(),l=u.container().getBoundingClientRect(),c=s?t.renderedPosition():r?r.cyRenderedPosition:void 0;if(c&&null!=c.x&&!isNaN(c.x)){var h=s?t.renderedBoundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1,includeShadows:!1}):{x1:c.x-1,x2:c.x+1,w:3,y1:c.y-1,y2:c.y+1,h:3};0===e.$domEle.parent().length&&e.$domEle.appendTo(document.body),e.$domEle.css({width:h.w,height:h.h,top:h.y1+l.top+window.pageYOffset,left:h.x1+l.left+window.pageXOffset,position:"absolute","pointer-events":"none",background:"red","z-index":99999999,opacity:.5,visibility:"hidden"}),e.api.set("position.target",e.$domEle)}}var i=e("<div></div>");i.css({"z-index":-1,position:"absolute"}),t("collection","qtip",function(t){var e=this,i=this.cy();i.container();return"api"===t?this.scratch().qtip.api:(e.each(function(e,o){var a=o.scratch(),s=a.qtip=a.qtip||{},u=n(o,t);u.position.adjust;s.$domEle.qtip(u);var l=s.api=s.$domEle.qtip("api");s.$domEle.removeData("qtip"),r(o,s),o.on(u.show.event,function(t){r(o,s,t),l.show()}),o.on(u.hide.event,function(t){l.hide()}),u.hide.cyViewport&&i.on("viewport",c(function(){l.hide()},250,{leading:!0})),u.position.adjust.cyViewport&&i.on("pan zoom",c(function(t){r(o,s,t),l.reposition()},250,{trailing:!0}))}),this)}),t("core","qtip",function(t){var e=this;e.container();if("api"===t)return this.scratch().qtip.api;var i=e.scratch(),o=i.qtip=i.qtip||{},a=n(e,t);o.$domEle.qtip(a);var s=o.api=o.$domEle.qtip("api");return o.$domEle.removeData("qtip"),e.on(a.show.event,function(t){(!a.show.cyBgOnly||a.show.cyBgOnly&&t.cyTarget===e)&&(r(e,o,t),s.show())}),e.on(a.hide.event,function(t){(!a.hide.cyBgOnly||a.hide.cyBgOnly&&t.cyTarget===e)&&s.hide()}),a.hide.cyViewport&&e.on("viewport",c(function(){s.hide()},250,{leading:!0})),this})}var o=function(t){return null!=t&&"object"==typeof t},a=function(t){return null!=t&&"function"==typeof t},s=function(t){return null!=t&&"string"==typeof t},u=function(t){return void 0===t},l=function(t,e){return a(t)?function(n,r){return t.apply(e,[n,r])}:t},c=function(t,e,n){var r,i,s,u,l,c,h,d=0,p=!1,f=!0;if(a(t)){if(e=Math.max(0,e)||0,n===!0){var g=!0;f=!1}else o(n)&&(g=n.leading,p="maxWait"in n&&(Math.max(e,n.maxWait)||0),f="trailing"in n?n.trailing:f);var v=function(){var n=e-(Date.now()-u);if(n<=0){i&&clearTimeout(i);var o=h;i=c=h=void 0,o&&(d=Date.now(),s=t.apply(l,r),c||i||(r=l=null))}else c=setTimeout(v,n)},y=function(){c&&clearTimeout(c),i=c=h=void 0,(f||p!==e)&&(d=Date.now(),s=t.apply(l,r),c||i||(r=l=null))};return function(){if(r=arguments,u=Date.now(),l=this,h=f&&(c||!g),p===!1)var n=g&&!c;else{i||g||(d=u);var o=p-(u-d),a=o<=0;a?(i&&(i=clearTimeout(i)),d=u,s=t.apply(l,r)):i||(i=setTimeout(y,o))}return a&&c?c=clearTimeout(c):c||e===p||(c=setTimeout(v,e)),n&&(a=!0,s=t.apply(l,r)),!a||c||i||(r=l=null),s}}};void 0!==e&&e.exports&&(e.exports=function(e){var n=window.jQuery,r=window.$,o=window.jQuery=window.$=t("jquery");t("qtip2");i(e,o),window.jQuery=n,window.$=r}),"undefined"!=typeof define&&define.amd&&define("cytoscape-qtip",function(){return i}),n&&r&&i(r,n)}("undefined"!=typeof jQuery?jQuery:null,"undefined"!=typeof cytoscape?cytoscape:null)},{jquery:201,qtip2:206}],42:[function(t,n,r){(function(i){!function(t){if("object"==typeof r&&void 0!==n)n.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this,e.cytoscapeSpread=t()}}(function(){return function e(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var l="function"==typeof t&&t;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=r[s]={exports:{}};n[s][0].call(h.exports,function(t){var e=n[s][1][t];return o(e?e:t)},h,h.exports,e,n,r,i)}return r[s].exports}for(var a="function"==typeof t&&t,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,n,r){window.foograph={insertVertex:function(t){this.vertices.push(t),this.vertexCount++},insertEdge:function(t,e,n,r,i){var o=new foograph.Edge(t,e,r,i),a=new foograph.Edge(null,e,n,null);return n.edges.push(o),r.reverseEdges.push(a),o},
removeEdge:function(t,e){for(var n=t.edges.length-1;n>=0;n--)if(t.edges[n].endVertex==e){t.edges.splice(n,1);break}for(var n=e.reverseEdges.length-1;n>=0;n--)if(e.reverseEdges[n].endVertex==t){e.reverseEdges.splice(n,1);break}},removeVertex:function(t){for(var e=t.edges.length-1;e>=0;e--)this.removeEdge(t,t.edges[e].endVertex);for(var e=t.reverseEdges.length-1;e>=0;e--)this.removeEdge(t.reverseEdges[e].endVertex,t);for(var e=this.vertices.length-1;e>=0;e--)if(this.vertices[e]==t){this.vertices.splice(e,1);break}this.vertexCount--},plot:function(t){var e=0;for(e=0;e<this.vertices.length;e++){var n=this.vertices[e];if(!n.hidden)for(var r=0;r<n.edges.length;r++){var i=n.edges[r];i.hidden||i.draw(t,n)}}for(e=0;e<this.vertices.length;e++)n=this.vertices[e],n.hidden||n.draw(t)},Graph:function(t,e){this.label=t,this.vertices=new Array,this.directed=e,this.vertexCount=0,this.insertVertex=foograph.insertVertex,this.removeVertex=foograph.removeVertex,this.insertEdge=foograph.insertEdge,this.removeEdge=foograph.removeEdge,this.plot=foograph.plot},Vertex:function(t,e,n,r){this.label=t,this.edges=new Array,this.reverseEdges=new Array,this.x=e,this.y=n,this.dx=0,this.dy=0,this.level=-1,this.numberOfParents=0,this.hidden=!1,this.fixed=!1,this.style=null!=r?r:new foograph.VertexStyle("ellipse",80,40,"#ffffff","#000000",!0)},VertexStyle:function(t,e,n,r,i,o){this.shape=t,this.width=e,this.height=n,this.fillColor=r,this.borderColor=i,this.showLabel=o},Edge:function(t,e,n,r){this.label=t,this.weight=e,this.endVertex=n,this.style=null,this.hidden=!1,this.curved=!1,this.controlX=-1,this.controlY=-1,this.original=null,this.style=null!=r?r:new foograph.EdgeStyle(2,"#000000",!0,!1)},EdgeStyle:function(t,e,n,r){this.width=t,this.color=e,this.showArrow=n,this.showLabel=r},RandomVertexLayout:function(t,e){this.width=t,this.height=e},ForceDirectedVertexLayout:function(t,e,n,r,i){this.width=t,this.height=e,this.iterations=n,this.randomize=r,this.eps=i,this.callback=function(){}},A:1.5,R:.5},foograph.Vertex.prototype.toString=function(){return"[v:"+this.label+"] "},foograph.Edge.prototype.toString=function(){return"[e:"+this.endVertex.label+"] "},foograph.Vertex.prototype.draw=function(t){var e=this.x,n=this.y,r=this.style.width,i=this.style.height,o=this.style.shape;t.setStroke(2),t.setColor(this.style.fillColor),"rect"==o?(t.fillRect(e,n,r,i),t.setColor(this.style.borderColor),t.drawRect(e,n,r,i)):(t.fillEllipse(e,n,r,i),t.setColor(this.style.borderColor),t.drawEllipse(e,n,r,i)),this.style.showLabel&&t.drawStringRect(this.label,e,n+i/2-7,r,"center")},foograph.Graph.prototype.normalize=function(t,e,n){for(var r in this.vertices){var i=this.vertices[r];i.oldX=i.x,i.oldY=i.y}var o=.1*t,a=.9*t,s=.1*e,u=.9*e;null==n&&(n=!0);var l=Number.MAX_VALUE,c=Number.MAX_VALUE,h=Number.MIN_VALUE,d=Number.MIN_VALUE;for(var p in this.vertices){var i=this.vertices[p];i.x<l&&(l=i.x),i.y<c&&(c=i.y),i.x>h&&(h=i.x),i.y>d&&(d=i.y)}var f=(a-o)/(h-l),g=(u-s)/(d-c);n&&(f=Math.min(f,g),g=Math.min(f,g));var v=Number.MIN_VALUE,y=Number.MIN_VALUE;for(var r in this.vertices){var i=this.vertices[r];i.x=(i.x-l)*f,i.y=(i.y-c)*g,i.x>v&&(v=i.x),i.y>y&&(y=i.y)}var m=(t-v)/2,x=(e-y)/2;for(var r in this.vertices){var i=this.vertices[r];i.x+=m,i.y+=x}},foograph.Edge.prototype.draw=function(t,e){function n(t){return(1-t)*(1-t)*l+2*(1-t)*t*p+t*t*h}function r(t){return(1-t)*(1-t)*c+2*(1-t)*t*f+t*t*d}function i(t,e){var n=0;return t>0&&e>=0&&(n=Math.atan(e/t)),t>0&&e<0&&(n=Math.atan(e/t)+2*Math.PI),t<0&&(n=Math.atan(e/t)+Math.PI),(t=0)&&(n=Math.PI/2),(t=0)&&(n=3*Math.PI/2),n}function o(t,e){return Math.sqrt(t*t+e*e)}var a,s,u,l=Math.round(e.x+e.style.width/2),c=Math.round(e.y+e.style.height/2),h=Math.round(this.endVertex.x+this.endVertex.style.width/2),d=Math.round(this.endVertex.y+this.endVertex.style.height/2),p=this.controlX,f=this.controlY;if(t.setStroke(this.style.width),t.setColor(this.style.color),this.curved){this.curved=!1;for(var g,v,y=0,m=l,x=c;y<.9;)y+=.1,g=n(y),v=r(y),t.drawLine(m,x,g,v),m=g,x=v;a=m,s=x,u=i(n(.8)-a,r(.8)-s)}else t.drawLine(l,c,h,d),a=h,s=d,u=i(l-a,c-s);this.style.showArrow&&function(e,n,r){var a=0,s=0,u=50,l=5,c=50,h=-5,d=o(u,l),p=o(c,h),f=i(u,l),g=i(c,h);f+=e,g+=e,u=d*Math.cos(f),l=d*Math.sin(f),c=p*Math.cos(g),h=p*Math.sin(g),a+=n,s+=r,u+=n,l+=r,c+=n,h+=r,t.fillPolygon(new Array(a,u,c),new Array(s,l,h))}(u,a,s),this.style.showLabel},foograph.RandomVertexLayout.prototype.layout=function(t){for(var e=0;e<t.vertices.length;e++){var n=t.vertices[e];n.x=Math.round(Math.random()*this.width),n.y=Math.round(Math.random()*this.height)}},foograph.ForceDirectedVertexLayout.prototype.__identifyComponents=function(t){var n=new Array,r=new Array;for(var i in t.vertices){var o=t.vertices[i];o.__dfsVisited=!1}for(var a in t.vertices){var o=t.vertices[a];o.__dfsVisited||o.hidden||function(t){function e(t){o.push(t),t.__dfsVisited=!0;for(var e in t.edges){var n=t.edges[e];n.hidden||i.push(n.endVertex)}for(var e in t.reverseEdges)t.reverseEdges[e].hidden||i.push(t.reverseEdges[e].endVertex)}var i=new Array,o=new Array,a=new foograph.Vertex("component_center",-1,-1);for(a.hidden=!0,n.push(a),r.push(o),e(t);i.length>0;){var s=i.pop();s.__dfsVisited||s.hidden||e(s)}}(o)}if(n.length>1){for(var i in n)t.insertVertex(n[i]);for(var i in r)for(var s in r[i])edge=t.insertEdge("",1,r[i][s],n[i]),edge.hidden=!0;for(var i in n)for(var s in n)i!=s&&(e=t.insertEdge("",3,n[i],n[s]),e.hidden=!0);return n}return null},foograph.ForceDirectedVertexLayout.prototype.layout=function(t){this.graph=t;var e=this.width*this.height,n=Math.sqrt(e/t.vertexCount),r=this.width/10,i=r/(this.iterations+1),o=this.eps;centers=this.__identifyComponents(t),this.randomize&&(randomLayout=new foograph.RandomVertexLayout(this.width,this.height),randomLayout.layout(t));for(var a=0;a<this.iterations;a++){for(var s in t.vertices){var u=t.vertices[s];if(u.dx=0,u.dy=0,!u.fixed)for(var l in t.vertices){var c=t.vertices[l];if(u!=c&&!c.fixed){var h=u.x-c.x,d=u.y-c.y,p=Math.max(o,Math.sqrt(h*h+d*d)),f=function(t){return foograph.R*n*n/t}(p);u.dx=u.dx+h/p*f,u.dy=u.dy+d/p*f}}}for(var g in t.vertices){var u=t.vertices[g];if(!u.fixed)for(var v in u.edges){var y=u.edges[v],c=y.endVertex,h=u.x-c.x,d=u.y-c.y,p=Math.max(o,Math.sqrt(h*h+d*d)),f=function(t){return foograph.A*t*t/n}(p),p=Math.max(o,Math.sqrt(h*h+d*d));u.dx=u.dx-h/p*f,u.dy=u.dy-d/p*f,c.dx=c.dx+h/p*f,c.dy=c.dy+d/p*f}}for(var m in t.vertices){var u=t.vertices[m];if(!u.fixed){var p=Math.max(o,Math.sqrt(u.dx*u.dx+u.dy*u.dy));u.x=u.x+u.dx/p*Math.min(p,r),u.y=u.y+u.dy/p*Math.min(p,r),u.x=Math.round(u.x),u.y=Math.round(u.y)}}r-=i,a%10==0&&this.callback()}if(centers)for(var x in centers)t.removeVertex(centers[x]);t.normalize(this.width,this.height,!0)},n.exports=foograph},{}],2:[function(t,e,n){"use strict";var r=t("./layout"),i=function(t){t("layout","spread",r(t))};"undefined"!=typeof cytoscape&&i(cytoscape),e.exports=i},{"./layout":3}],3:[function(t,e,n){function r(t){var e=this.options={};for(var n in s)e[n]=s[n];for(var n in t)e[n]=t[n]}var i,o=t("./foograph"),a=t("./rhill-voronoi-core"),s={animate:!0,ready:void 0,stop:void 0,fit:!0,minDist:20,padding:20,expandingFactor:-1,maxFruchtermanReingoldIterations:50,maxExpandIterations:4,boundingBox:void 0,randomize:!1};r.prototype.run=function(){function t(t){for(var e=t.vertices,i=[],o=0;o<e.length;++o){var a=e[o];i[a.id]={x:a.x,y:a.y}}u.positions(function(t,e){var n=e.id(),r=i[n];return{x:Math.round(g.x1+r.x),y:Math.round(g.y1+r.y)}}),n.fit&&r.fit(n.padding),r.nodes().rtrigger("position")}var e=this,n=this.options,r=n.cy,s=n.boundingBox||{x1:0,y1:0,w:r.width(),h:r.height()};void 0===s.x2&&(s.x2=s.x1+s.w),void 0===s.w&&(s.w=s.x2-s.x1),void 0===s.y2&&(s.y2=s.y1+s.h),void 0===s.h&&(s.h=s.y2-s.y1);var u=r.nodes(),l=r.edges(),c=r.width(),h=r.height(),d=s,p=n.padding,f=Math.max(1,.8*Math.log(u.length));u.length<100&&(f/=2),e.trigger({type:"layoutstart",layout:e});var g={x1:0,y1:0,x2:c*f,y2:h*f};d&&(g.x1=d.x1,g.y1=d.y1,g.x2=d.x2,g.y2=d.y2),g.x1+=p,g.y1+=p,g.x2-=p,g.y2-=p;var v=g.x2-g.x1,y=g.y2-g.y1,m=Date.now();if(u.size()<=1){u.positions({x:Math.round((g.x1+g.x2)/2),y:Math.round((g.y1+g.y2)/2)}),n.fit&&r.fit(n.padding);var x=Date.now();return console.info("Layout on "+u.size()+" nodes took "+(x-m)+" ms"),e.one("layoutready",n.ready),e.trigger("layoutready"),e.one("layoutstop",n.stop),void e.trigger("layoutstop")}var b={width:v,height:y,minDist:n.minDist,expFact:n.expandingFactor,expIt:0,maxExpIt:n.maxExpandIterations,vertices:[],edges:[],startTime:m,maxFruchtermanReingoldIterations:n.maxFruchtermanReingoldIterations};u.each(function(t,e){var r=e.id(),i=e.position();n.randomize&&(i={x:Math.round(g.x1+(g.x2-g.x1)*Math.random()),y:Math.round(g.y1+(g.y2-g.y1)*Math.random())}),b.vertices.push({id:r,x:i.x,y:i.y})}),l.each(function(){var t=this.source().id(),e=this.target().id();b.edges.push({src:t,tgt:e})});var w=e.thread;w&&!w.stopped()||(w=e.thread=i(),w.require(o,"foograph"),w.require(a,"Voronoi"));var _=!1;return w.on("message",function(r){var i=r.message;n.animate&&(t(i),_||(e.trigger("layoutready"),_=!0))}),e.one("layoutready",n.ready),w.pass(b).run(function(t){function e(t){for(var e,n,r,i=t.halfedges,o=0,a=0,s=0,u=0;u<i.length;++u)e=i[u].getEndpoint(),n=i[u].getStartpoint(),o+=e.x*n.y,o-=e.y*n.x,r=e.x*n.y-n.x*e.y,a+=(e.x+n.x)*r,s+=(e.y+n.y)*r;return o/=2,r=6*o,{x:a/r,y:s/r}}function n(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function r(t){for(var e=0,r=0;r<t.length;++r){var i=t[r];null!=i.lSite&&null!=i.rSite&&n(i.lSite,i.rSite)<u&&++e}return e}o=_ref_("foograph"),a=_ref_("Voronoi");for(var i=t.width,s=t.height,u=t.minDist,l=t.expFact,c=t.maxExpIt,h=t.maxFruchtermanReingoldIterations,d=function(){t.width=i,t.height=s,t.expIt=q,t.expFact=l,t.vertices=[];for(var e=0;e<k.length;++e)t.vertices.push({id:k[e].label,x:k[e].x,y:k[e].y})},p=function(){broadcast(t)},f=new o.Graph("FRgraph",!1),g={},v=t.vertices,y=0;y<v.length;++y){var m=v[y].id,x=new o.Vertex(m,Math.round(Math.random()*s),Math.round(Math.random()*s));g[m]=x,f.insertVertex(x)}for(var b=t.edges,w=0;w<b.length;++w){var _=b[w].src,E=b[w].tgt;f.insertEdge("",1,g[_],g[E])}var k=f.vertices,T=h,N=new o.ForceDirectedVertexLayout(i,s,T,!1,u);if(N.callback=function(){d(),p()},N.layout(f),d(),p(),c<=0)return t;for(var S=new a,L={xl:0,xr:i,yt:0,yb:s},C=[],D=0;D<k.length;++D)C[k[D].label]=k[D];for(var A=S.compute(k,L),M=A.cells,D=0;D<M.length;++D){var P=M[D],I=P.site,O=e(P),R=C[I.label];R.x=O.x,R.y=O.y}l<0&&(l=Math.max(.05,Math.min(.1,u/Math.sqrt(i*s/k.length)*.5)));for(var j=r(A.edges),B=j<=0||c<=0,F=0,q=0;!B;){++F;for(var z=0;z<=4;++z){S.recycle(A),A=S.compute(k,L);for(var D=0;D<M.length;++D){var P=M[D],I=P.site,O=e(P),R=C[I.label];R.x=O.x,R.y=O.y}}var V=r(A.edges);V<=0?B=!0:(V>=j||F>=4)&&(q>=c?B=!0:(i+=i*l,s+=s*l,L={xl:0,xr:i,yt:0,yb:s},++q,F=0)),j=V,d(),p()}return d(),t}).then(function(r){var i=r.vertices;t(r);var o=r.startTime,a=new Date;console.info("Layout on "+i.length+" nodes took "+(a-o)+" ms"),e.one("layoutstop",n.stop),n.animate||e.trigger("layoutready"),e.trigger("layoutstop"),w.stop()}),this},r.prototype.stop=function(){this.thread&&this.thread.stop(),this.trigger("layoutstop")},r.prototype.destroy=function(){this.thread&&this.thread.stop()},e.exports=function(t){return i=t.Thread,r}},{"./foograph":1,"./rhill-voronoi-core":4}],4:[function(t,e,n){function r(){this.vertices=null,this.edges=null,this.cells=null,this.toRecycle=null,this.beachsectionJunkyard=[],this.circleEventJunkyard=[],this.vertexJunkyard=[],this.edgeJunkyard=[],this.cellJunkyard=[]}r.prototype.reset=function(){if(this.beachline||(this.beachline=new this.RBTree),this.beachline.root)for(var t=this.beachline.getFirst(this.beachline.root);t;)this.beachsectionJunkyard.push(t),t=t.rbNext;this.beachline.root=null,this.circleEvents||(this.circleEvents=new this.RBTree),this.circleEvents.root=this.firstCircleEvent=null,this.vertices=[],this.edges=[],this.cells=[]},r.prototype.sqrt=function(t){return Math.sqrt(t)},r.prototype.abs=function(t){return Math.abs(t)},r.prototype.=r.=1e-9,r.prototype.inv=r.inv=1/r.,r.prototype.equalWithEpsilon=function(t,e){return this.abs(t-e)<1e-9},r.prototype.greaterThanWithEpsilon=function(t,e){return t-e>1e-9},r.prototype.greaterThanOrEqualWithEpsilon=function(t,e){return e-t<1e-9},r.prototype.lessThanWithEpsilon=function(t,e){return e-t>1e-9},r.prototype.lessThanOrEqualWithEpsilon=function(t,e){return t-e<1e-9},r.prototype.RBTree=function(){this.root=null},r.prototype.RBTree.prototype.rbInsertSuccessor=function(t,e){var n;if(t){if(e.rbPrevious=t,e.rbNext=t.rbNext,t.rbNext&&(t.rbNext.rbPrevious=e),t.rbNext=e,t.rbRight){for(t=t.rbRight;t.rbLeft;)t=t.rbLeft;t.rbLeft=e}else t.rbRight=e;n=t}else this.root?(t=this.getFirst(this.root),e.rbPrevious=null,e.rbNext=t,t.rbPrevious=e,t.rbLeft=e,n=t):(e.rbPrevious=e.rbNext=null,this.root=e,n=null);e.rbLeft=e.rbRight=null,e.rbParent=n,e.rbRed=!0;var r,i;for(t=e;n&&n.rbRed;)r=n.rbParent,n===r.rbLeft?(i=r.rbRight,i&&i.rbRed?(n.rbRed=i.rbRed=!1,r.rbRed=!0,t=r):(t===n.rbRight&&(this.rbRotateLeft(n),t=n,n=t.rbParent),n.rbRed=!1,r.rbRed=!0,this.rbRotateRight(r))):(i=r.rbLeft,i&&i.rbRed?(n.rbRed=i.rbRed=!1,r.rbRed=!0,t=r):(t===n.rbLeft&&(this.rbRotateRight(n),t=n,n=t.rbParent),n.rbRed=!1,r.rbRed=!0,this.rbRotateLeft(r))),n=t.rbParent;this.root.rbRed=!1},r.prototype.RBTree.prototype.rbRemoveNode=function(t){t.rbNext&&(t.rbNext.rbPrevious=t.rbPrevious),t.rbPrevious&&(t.rbPrevious.rbNext=t.rbNext),t.rbNext=t.rbPrevious=null;var e,n=t.rbParent,r=t.rbLeft,i=t.rbRight;e=r?i?this.getFirst(i):r:i,n?n.rbLeft===t?n.rbLeft=e:n.rbRight=e:this.root=e;var o;if(r&&i?(o=e.rbRed,e.rbRed=t.rbRed,e.rbLeft=r,r.rbParent=e,e!==i?(n=e.rbParent,e.rbParent=t.rbParent,t=e.rbRight,n.rbLeft=t,e.rbRight=i,i.rbParent=e):(e.rbParent=n,n=e,t=e.rbRight)):(o=t.rbRed,t=e),t&&(t.rbParent=n),!o){if(t&&t.rbRed)return void(t.rbRed=!1);var a;do{if(t===this.root)break;if(t===n.rbLeft){if(a=n.rbRight,a.rbRed&&(a.rbRed=!1,n.rbRed=!0,this.rbRotateLeft(n),a=n.rbRight),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbRight&&a.rbRight.rbRed||(a.rbLeft.rbRed=!1,a.rbRed=!0,this.rbRotateRight(a),a=n.rbRight),a.rbRed=n.rbRed,n.rbRed=a.rbRight.rbRed=!1,this.rbRotateLeft(n),t=this.root;break}}else if(a=n.rbLeft,a.rbRed&&(a.rbRed=!1,n.rbRed=!0,this.rbRotateRight(n),a=n.rbLeft),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbLeft&&a.rbLeft.rbRed||(a.rbRight.rbRed=!1,a.rbRed=!0,this.rbRotateLeft(a),a=n.rbLeft),a.rbRed=n.rbRed,n.rbRed=a.rbLeft.rbRed=!1,this.rbRotateRight(n),t=this.root;break}a.rbRed=!0,t=n,n=n.rbParent}while(!t.rbRed);t&&(t.rbRed=!1)}},r.prototype.RBTree.prototype.rbRotateLeft=function(t){var e=t,n=t.rbRight,r=e.rbParent;r?r.rbLeft===e?r.rbLeft=n:r.rbRight=n:this.root=n,n.rbParent=r,e.rbParent=n,e.rbRight=n.rbLeft,e.rbRight&&(e.rbRight.rbParent=e),n.rbLeft=e},r.prototype.RBTree.prototype.rbRotateRight=function(t){var e=t,n=t.rbLeft,r=e.rbParent;r?r.rbLeft===e?r.rbLeft=n:r.rbRight=n:this.root=n,n.rbParent=r,e.rbParent=n,e.rbLeft=n.rbRight,e.rbLeft&&(e.rbLeft.rbParent=e),n.rbRight=e},r.prototype.RBTree.prototype.getFirst=function(t){for(;t.rbLeft;)t=t.rbLeft;return t},r.prototype.RBTree.prototype.getLast=function(t){for(;t.rbRight;)t=t.rbRight;return t},r.prototype.Diagram=function(t){this.site=t},r.prototype.Cell=function(t){this.site=t,this.halfedges=[],this.closeMe=!1},r.prototype.Cell.prototype.init=function(t){return this.site=t,this.halfedges=[],this.closeMe=!1,this},r.prototype.createCell=function(t){var e=this.cellJunkyard.pop();return e?e.init(t):new this.Cell(t)},r.prototype.Cell.prototype.prepareHalfedges=function(){for(var t,e=this.halfedges,n=e.length;n--;)t=e[n].edge,t.vb&&t.va||e.splice(n,1);return e.sort(function(t,e){return e.angle-t.angle}),e.length},r.prototype.Cell.prototype.getNeighborIds=function(){for(var t,e=[],n=this.halfedges.length;n--;)t=this.halfedges[n].edge,null!==t.lSite&&t.lSite.voronoiId!=this.site.voronoiId?e.push(t.lSite.voronoiId):null!==t.rSite&&t.rSite.voronoiId!=this.site.voronoiId&&e.push(t.rSite.voronoiId);return e},r.prototype.Cell.prototype.getBbox=function(){for(var t,e,n,r=this.halfedges,i=r.length,o=1/0,a=1/0,s=-(1/0),u=-(1/0);i--;)t=r[i].getStartpoint(),e=t.x,n=t.y,e<o&&(o=e),n<a&&(a=n),e>s&&(s=e),n>u&&(u=n);return{x:o,y:a,width:s-o,height:u-a}},r.prototype.Cell.prototype.pointIntersection=function(t,e){for(var n,r,i,o,a=this.halfedges,s=a.length;s--;){if(n=a[s],r=n.getStartpoint(),i=n.getEndpoint(),!(o=(e-r.y)*(i.x-r.x)-(t-r.x)*(i.y-r.y)))return 0;if(o>0)return-1}return 1},r.prototype.Vertex=function(t,e){this.x=t,this.y=e},r.prototype.Edge=function(t,e){this.lSite=t,this.rSite=e,this.va=this.vb=null},r.prototype.Halfedge=function(t,e,n){if(this.site=e,this.edge=t,n)this.angle=Math.atan2(n.y-e.y,n.x-e.x);else{var r=t.va,i=t.vb;this.angle=t.lSite===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}},r.prototype.createHalfedge=function(t,e,n){return new this.Halfedge(t,e,n)},r.prototype.Halfedge.prototype.getStartpoint=function(){return this.edge.lSite===this.site?this.edge.va:this.edge.vb},r.prototype.Halfedge.prototype.getEndpoint=function(){return this.edge.lSite===this.site?this.edge.vb:this.edge.va},r.prototype.createVertex=function(t,e){var n=this.vertexJunkyard.pop();return n?(n.x=t,n.y=e):n=new this.Vertex(t,e),this.vertices.push(n),n},r.prototype.createEdge=function(t,e,n,r){var i=this.edgeJunkyard.pop();return i?(i.lSite=t,i.rSite=e,i.va=i.vb=null):i=new this.Edge(t,e),this.edges.push(i),n&&this.setEdgeStartpoint(i,t,e,n),r&&this.setEdgeEndpoint(i,t,e,r),this.cells[t.voronoiId].halfedges.push(this.createHalfedge(i,t,e)),this.cells[e.voronoiId].halfedges.push(this.createHalfedge(i,e,t)),i},r.prototype.createBorderEdge=function(t,e,n){var r=this.edgeJunkyard.pop();return r?(r.lSite=t,r.rSite=null):r=new this.Edge(t,null),r.va=e,r.vb=n,this.edges.push(r),r},r.prototype.setEdgeStartpoint=function(t,e,n,r){t.va||t.vb?t.lSite===n?t.vb=r:t.va=r:(t.va=r,t.lSite=e,t.rSite=n)},r.prototype.setEdgeEndpoint=function(t,e,n,r){this.setEdgeStartpoint(t,n,e,r)},r.prototype.Beachsection=function(){},r.prototype.createBeachsection=function(t){var e=this.beachsectionJunkyard.pop();return e||(e=new this.Beachsection),e.site=t,e},r.prototype.leftBreakPoint=function(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.rbPrevious;if(!a)return-(1/0);n=a.site;var s=n.x,u=n.y,l=u-e;if(!l)return s;var c=s-r,h=1/o-1/l,d=c/l;return h?(-d+this.sqrt(d*d-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+s)/2},r.prototype.rightBreakPoint=function(t,e){var n=t.rbNext;if(n)return this.leftBreakPoint(n,e);var r=t.site;return r.y===e?r.x:1/0},r.prototype.detachBeachsection=function(t){this.detachCircleEvent(t),this.beachline.rbRemoveNode(t),this.beachsectionJunkyard.push(t)},r.prototype.removeBeachsection=function(t){var e=t.circleEvent,n=e.x,r=e.ycenter,i=this.createVertex(n,r),o=t.rbPrevious,a=t.rbNext,s=[t],u=Math.abs;this.detachBeachsection(t);for(var l=o;l.circleEvent&&u(n-l.circleEvent.x)<1e-9&&u(r-l.circleEvent.ycenter)<1e-9;)o=l.rbPrevious,s.unshift(l),this.detachBeachsection(l),l=o;s.unshift(l),this.detachCircleEvent(l);for(var c=a;c.circleEvent&&u(n-c.circleEvent.x)<1e-9&&u(r-c.circleEvent.ycenter)<1e-9;)a=c.rbNext,s.push(c),this.detachBeachsection(c),c=a;s.push(c),this.detachCircleEvent(c);var h,d=s.length;for(h=1;h<d;h++)c=s[h],l=s[h-1],this.setEdgeStartpoint(c.edge,l.site,c.site,i);l=s[0],c=s[d-1],c.edge=this.createEdge(l.site,c.site,void 0,i),this.attachCircleEvent(l),this.attachCircleEvent(c)},r.prototype.addBeachsection=function(t){for(var e,n,r,i,o=t.x,a=t.y,s=this.beachline.root;s;)if((r=this.leftBreakPoint(s,a)-o)>1e-9)s=s.rbLeft;else{if(!((i=o-this.rightBreakPoint(s,a))>1e-9)){r>-1e-9?(e=s.rbPrevious,n=s):i>-1e-9?(e=s,n=s.rbNext):e=n=s;break}if(!s.rbRight){e=s;break}s=s.rbRight}var u=this.createBeachsection(t);if(this.beachline.rbInsertSuccessor(e,u),e||n){if(e===n)return this.detachCircleEvent(e),n=this.createBeachsection(e.site),this.beachline.rbInsertSuccessor(u,n),u.edge=n.edge=this.createEdge(e.site,u.site),this.attachCircleEvent(e),void this.attachCircleEvent(n);if(e&&!n)return void(u.edge=this.createEdge(e.site,u.site));if(e!==n){this.detachCircleEvent(e),this.detachCircleEvent(n);var l=e.site,c=l.x,h=l.y,d=t.x-c,p=t.y-h,f=n.site,g=f.x-c,v=f.y-h,y=2*(d*v-p*g),m=d*d+p*p,x=g*g+v*v,b=this.createVertex((v*m-p*x)/y+c,(d*x-g*m)/y+h);return this.setEdgeStartpoint(n.edge,l,f,b),u.edge=this.createEdge(l,t,void 0,b),n.edge=this.createEdge(t,f,void 0,b),this.attachCircleEvent(e),void this.attachCircleEvent(n)}}},r.prototype.CircleEvent=function(){this.arc=null,this.rbLeft=null,this.rbNext=null,this.rbParent=null,this.rbPrevious=null,this.rbRed=!1,this.rbRight=null,this.site=null,this.x=this.y=this.ycenter=0},r.prototype.attachCircleEvent=function(t){var e=t.rbPrevious,n=t.rbNext;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,u=r.x-a,l=r.y-s,c=o.x-a,h=o.y-s,d=2*(u*h-l*c);if(!(d>=-2e-12)){var p=u*u+l*l,f=c*c+h*h,g=(h*p-l*f)/d,v=(u*f-c*p)/d,y=v+s,m=this.circleEventJunkyard.pop();m||(m=new this.CircleEvent),m.arc=t,m.site=i,m.x=g+a,m.y=y+this.sqrt(g*g+v*v),m.ycenter=y,t.circleEvent=m;for(var x=null,b=this.circleEvents.root;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.rbLeft){x=b.rbPrevious;break}b=b.rbLeft}else{if(!b.rbRight){x=b;break}b=b.rbRight}this.circleEvents.rbInsertSuccessor(x,m),x||(this.firstCircleEvent=m)}}}},r.prototype.detachCircleEvent=function(t){var e=t.circleEvent;e&&(e.rbPrevious||(this.firstCircleEvent=e.rbNext),this.circleEvents.rbRemoveNode(e),this.circleEventJunkyard.push(e),t.circleEvent=null)},r.prototype.connectEdge=function(t,e){var n=t.vb;if(n)return!0;var r,i,o=t.va,a=e.xl,s=e.xr,u=e.yt,l=e.yb,c=t.lSite,h=t.rSite,d=c.x,p=c.y,f=h.x,g=h.y,v=(d+f)/2,y=(p+g)/2;if(this.cells[c.voronoiId].closeMe=!0,this.cells[h.voronoiId].closeMe=!0,g!==p&&(r=(d-f)/(g-p),i=y-r*v),void 0===r){if(v<a||v>=s)return!1;if(d>f){if(!o||o.y<u)o=this.createVertex(v,u);else if(o.y>=l)return!1;n=this.createVertex(v,l)}else{if(!o||o.y>l)o=this.createVertex(v,l);else if(o.y<u)return!1;n=this.createVertex(v,u)}}else if(r<-1||r>1)if(d>f){if(!o||o.y<u)o=this.createVertex((u-i)/r,u);else if(o.y>=l)return!1;n=this.createVertex((l-i)/r,l)}else{if(!o||o.y>l)o=this.createVertex((l-i)/r,l);else if(o.y<u)return!1;n=this.createVertex((u-i)/r,u)}else if(p<g){if(!o||o.x<a)o=this.createVertex(a,r*a+i);else if(o.x>=s)return!1;n=this.createVertex(s,r*s+i)}else{if(!o||o.x>s)o=this.createVertex(s,r*s+i);else if(o.x<a)return!1;n=this.createVertex(a,r*a+i)}return t.va=o,t.vb=n,!0},r.prototype.clipEdge=function(t,e){var n=t.va.x,r=t.va.y,i=t.vb.x,o=t.vb.y,a=0,s=1,u=i-n,l=o-r,c=n-e.xl;if(0===u&&c<0)return!1;var h=-c/u;if(u<0){if(h<a)return!1;h<s&&(s=h)}else if(u>0){if(h>s)return!1;h>a&&(a=h)}if(c=e.xr-n,0===u&&c<0)return!1;if(h=c/u,u<0){if(h>s)return!1;h>a&&(a=h)}else if(u>0){if(h<a)return!1;h<s&&(s=h)}if(c=r-e.yt,0===l&&c<0)return!1;if(h=-c/l,l<0){if(h<a)return!1;h<s&&(s=h)}else if(l>0){if(h>s)return!1;h>a&&(a=h)}if(c=e.yb-r,0===l&&c<0)return!1;if(h=c/l,l<0){if(h>s)return!1;h>a&&(a=h)}else if(l>0){if(h<a)return!1;h<s&&(s=h)}return a>0&&(t.va=this.createVertex(n+a*u,r+a*l)),s<1&&(t.vb=this.createVertex(n+s*u,r+s*l)),(a>0||s<1)&&(this.cells[t.lSite.voronoiId].closeMe=!0,this.cells[t.rSite.voronoiId].closeMe=!0),!0},r.prototype.clipEdges=function(t){for(var e,n=this.edges,r=n.length,i=Math.abs;r--;)e=n[r],(!this.connectEdge(e,t)||!this.clipEdge(e,t)||i(e.va.x-e.vb.x)<1e-9&&i(e.va.y-e.vb.y)<1e-9)&&(e.va=e.vb=null,n.splice(r,1))},r.prototype.closeCells=function(t){for(var e,n,r,i,o,a,s,u,l,c=t.xl,h=t.xr,d=t.yt,p=t.yb,f=this.cells,g=f.length,v=Math.abs;g--;)if(e=f[g],e.prepareHalfedges()&&e.closeMe){for(r=e.halfedges,i=r.length,n=0;n<i;){if(a=r[n].getEndpoint(),u=r[(n+1)%i].getStartpoint(),v(a.x-u.x)>=1e-9||v(a.y-u.y)>=1e-9)switch(!0){case this.equalWithEpsilon(a.x,c)&&this.lessThanWithEpsilon(a.y,p):if(l=this.equalWithEpsilon(u.x,c),s=this.createVertex(c,l?u.y:p),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,l)break;a=s;case this.equalWithEpsilon(a.y,p)&&this.lessThanWithEpsilon(a.x,h):if(l=this.equalWithEpsilon(u.y,p),s=this.createVertex(l?u.x:h,p),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,l)break;a=s;case this.equalWithEpsilon(a.x,h)&&this.greaterThanWithEpsilon(a.y,d):if(l=this.equalWithEpsilon(u.x,h),s=this.createVertex(h,l?u.y:d),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,l)break;a=s;case this.equalWithEpsilon(a.y,d)&&this.greaterThanWithEpsilon(a.x,c):if(l=this.equalWithEpsilon(u.y,d),s=this.createVertex(l?u.x:c,d),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,l)break;if(a=s,l=this.equalWithEpsilon(u.x,c),s=this.createVertex(c,l?u.y:p),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,l)break;if(a=s,l=this.equalWithEpsilon(u.y,p),s=this.createVertex(l?u.x:h,p),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,l)break;if(a=s,l=this.equalWithEpsilon(u.x,h),s=this.createVertex(h,l?u.y:d),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,l)break;default:throw"Voronoi.closeCells() > this makes no sense!"}n++}e.closeMe=!1}},r.prototype.quantizeSites=function(t){for(var e,n=this.,r=t.length;r--;)e=t[r],e.x=Math.floor(e.x/n)*n,e.y=Math.floor(e.y/n)*n},r.prototype.recycle=function(t){if(t){if(!(t instanceof this.Diagram))throw"Voronoi.recycleDiagram() > Need a Diagram object.";this.toRecycle=t}},r.prototype.compute=function(t,e){var n=new Date;this.reset(),this.toRecycle&&(this.vertexJunkyard=this.vertexJunkyard.concat(this.toRecycle.vertices),this.edgeJunkyard=this.edgeJunkyard.concat(this.toRecycle.edges),this.cellJunkyard=this.cellJunkyard.concat(this.toRecycle.cells),this.toRecycle=null);var r=t.slice(0);r.sort(function(t,e){var n=e.y-t.y;return n?n:e.x-t.x});for(var i,o,a,s=r.pop(),u=0,l=this.cells;;)if(a=this.firstCircleEvent,s&&(!a||s.y<a.y||s.y===a.y&&s.x<a.x))s.x===i&&s.y===o||(l[u]=this.createCell(s),s.voronoiId=u++,this.addBeachsection(s),o=s.y,i=s.x),s=r.pop();else{if(!a)break;this.removeBeachsection(a.arc)}this.clipEdges(e),this.closeCells(e);var c=new Date,h=new this.Diagram;return h.cells=this.cells,h.edges=this.edges,h.vertices=this.vertices,h.execTime=c.getTime()-n.getTime(),this.reset(),h},e.exports=r},{}]},{},[2])(2)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(t,e,n){!function(){"use strict";var n=function(t,e){function n(t){var e=this.options={};for(var n in r)e[n]=r[n];for(var n in t)e[n]=t[n]}if(t&&e){var r={animate:!0,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,randomize:!1,infinite:!1,ready:void 0,stop:void 0,stiffness:400,repulsion:400,damping:.5,edgeLength:function(t){var e=t.data("length");if(void 0!==e&&!isNaN(e))return e}};n.prototype.run=function(){function t(t){var e=t.scratch("springy").model.id,n=x.layout.nodePoints[e].p,r=t.position(),i=null!=r.x&&null!=r.y?g(t.position()):{x:4*Math.random()-2,y:4*Math.random()-2};n.x=i.x,n.y=i.y}var n=this,r=this,i=this.options;i.random=i.randomize;var o=!1,a=i.cy;n.trigger({type:"layoutstart",layout:n});var s=i.eles,u=s.nodes().not(":parent"),l=s.edges(),c=i.boundingBox||{x1:0,y1:0,w:a.width(),h:a.height()};void 0===c.x2&&(c.x2=c.x1+c.w),void 0===c.w&&(c.w=c.x2-c.x1),void 0===c.y2&&(c.y2=c.y1+c.h),void 0===c.h&&(c.h=c.y2-c.y1);var h=new e.Graph;u.each(function(t,e){e.scratch("springy",{model:h.newNode({element:e})})}),l.each(function(t,e){var n=e.source().scratch("springy").model,r=e.target().scratch("springy").model;e.scratch("springy",{model:h.newEdge(n,r,{element:e,length:i.edgeLength.call(e,e)})})});var d=window.sim=new e.Layout.ForceDirected(h,i.stiffness,i.repulsion,i.damping);i.infinite&&(d.minEnergyThreshold=-(1/0));var p=d.getBoundingBox(),f=function(t){p=d.getBoundingBox();var n=p.topright.subtract(p.bottomleft),r=t.subtract(p.bottomleft).divide(n.x).x*c.w+c.x1,i=t.subtract(p.bottomleft).divide(n.y).y*c.h+c.x1;return new e.Vector(r,i)},g=function(t){p=d.getBoundingBox();var n=p.topright.subtract(p.bottomleft),r=(t.x-c.x1)/c.w*n.x+p.bottomleft.x,i=(t.y-c.y1)/c.h*n.y+p.bottomleft.y;return new e.Vector(r,i)},v=a.collection(),y=a.nodes().size(),m=1,x=new e.Renderer(d,function(){r.stopped||v.length>0&&i.animate&&(o=!0,v.positions(function(t,e){return e.scratch("springy").position}),i.fit&&a.fit(i.padding),v=a.collection(),o=!1)},function(t,e,n){},function(t,e){if(!r.stopped){var o=f(e),a=t.data.element;a.locked()||a.grabbed()||(a.scratch("springy").position={x:o.x,y:o.y},v.merge(a)),m==y&&(n.one("layoutready",i.ready),n.trigger({type:"layoutready",layout:n})),m++}});u.each(function(e,n){i.random||t(n)});var b;u.on("position",b=function(){o||t(this)});var w=u.filter(":grabbable");return r.stopSystem=function(){r.stopped=!0,h.filterNodes(function(){return!1}),i.ungrabifyWhileSimulating&&w.grabify(),i.fit&&a.fit(i.padding),u.off("drag position",b),n.one("layoutstop",i.stop),n.trigger({type:"layoutstop",layout:n}),r.stopSystem=null},function(){r.stopped=!1,i.ungrabifyWhileSimulating&&w.ungrabify(),x.start()}(),i.infinite||setTimeout(function(){r.stop()},i.maxSimulationTime),this},n.prototype.stop=function(){return null!=this.stopSystem&&this.stopSystem(),this},t("layout","springy",n)}};void 0!==e&&e.exports&&(e.exports=function(e,r){n(e,r||t("springy"))}),"undefined"!=typeof define&&define.amd&&define("cytoscape-springy",function(){return n}),"undefined"!=typeof cytoscape&&"undefined"!=typeof Springy&&n(cytoscape,Springy)}()},{springy:207}],44:[function(t,e,n){"use strict"},{}],45:[function(t,e,n){"use strict";var r=t("./util"),i=t("./is"),o=t("./promise"),a=function(t,e,n){if(!(this instanceof a))return new a(t,e,n);var o=this._private=r.extend({duration:1e3},e,n);o.target=t,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&i.fn(o.complete)&&o.completes.push(o.complete),this.length=1,this[0]=this},s=a.prototype;r.extend(s,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e,n=t.target._private.animation;e=t.queue?n.queue:n.current,e.push(this),i.elementOrCollection(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];t[e]=t[n],t[n]=r};n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition");for(var r=0;r<t.style.length;r++){var i=t.style[r],o=i.name,a=t.startStyle[o];t.startStyle[o]=i,t.style[r]=a}return e&&this.play(),this},promise:function(t){var e,n=this._private;switch(t){case"frame":e=n.frames;break;default:case"complete":case"completed":e=n.completes}return new o(function(t,n){e.push(function(){t()})})}}),s.complete=s.completed,e.exports=a},{"./is":126,"./promise":129,"./util":143}],46:[function(t,e,n){"use strict";var r=t("../../is"),i={
aStar:function(t){var e=this;t=t||{};var n=function(t,e,r,o){if(t==e)return o.push(i.getElementById(e)),o;if(e in r){var a=r[e],s=p[e];return o.push(i.getElementById(e)),o.push(i.getElementById(s)),n(t,a,r,o)}},i=this._private.cy;if(null!=t&&null!=t.root){var o=r.string(t.root)?this.filter(t.root)[0]:t.root[0];if(null!=t.goal){var a=r.string(t.goal)?this.filter(t.goal)[0]:t.goal[0];if(null!=t.heuristic&&r.fn(t.heuristic))var s=t.heuristic;else var s=function(){return 0};if(null!=t.weight&&r.fn(t.weight))var u=t.weight;else var u=function(t){return 1};if(null!=t.directed)var l=t.directed;else var l=!1;var c=[],h=[o.id()],d={},p={},f={},g={};f[o.id()]=0,g[o.id()]=s(o);for(var v=this.edges().stdFilter(function(t){return!t.isLoop()}),y=this.nodes(),m=0;h.length>0;){var x=function(t,e){if(0!==t.length){for(var n=0,r=e[t[0]],i=1;i<t.length;i++){var o=e[t[i]];o<r&&(r=o,n=i)}return n}}(h,g),b=i.getElementById(h[x]);if(m++,b.id()==a.id()){var w=n(o.id(),a.id(),d,[]);return w.reverse(),{found:!0,distance:f[b.id()],path:e.spawn(w),steps:m}}c.push(b.id()),h.splice(x,1);var _=b.connectedEdges();l&&(_=_.stdFilter(function(t){return t.data("source")===b.id()})),_=_.intersect(v);for(var E=0;E<_.length;E++){var k=_[E],T=k.connectedNodes().stdFilter(function(t){return t.id()!==b.id()}).intersect(y);if(c.indexOf(T.id())==-1){var N=f[b.id()]+u.apply(k,[k]);h.indexOf(T.id())!=-1?N<f[T.id()]&&(f[T.id()]=N,g[T.id()]=N+s(T),d[T.id()]=b.id()):(f[T.id()]=N,g[T.id()]=N+s(T),h.push(T.id()),d[T.id()]=b.id(),p[T.id()]=k.id())}}}return{found:!1,distance:void 0,path:void 0,steps:m}}}}};e.exports=i},{"../../is":126}],47:[function(t,e,n){"use strict";var r=t("../../is"),i=t("../../util"),o={bellmanFord:function(t){var e=this;if(t=t||{},null!=t.weight&&r.fn(t.weight))var n=t.weight;else var n=function(t){return 1};if(null!=t.directed)var o=t.directed;else var o=!1;if(null!=t.root){if(r.string(t.root))var a=this.filter(t.root)[0];else var a=t.root[0];for(var s=this._private.cy,u=this.edges().stdFilter(function(t){return!t.isLoop()}),l=this.nodes(),c=l.length,h={},d=0;d<c;d++)h[l[d].id()]=d;for(var p=[],f=[],g=[],d=0;d<c;d++)l[d].id()===a.id()?p[d]=0:p[d]=1/0,f[d]=void 0;for(var v=!1,d=1;d<c;d++){v=!1;for(var y=0;y<u.length;y++){var m=h[u[y].source().id()],x=h[u[y].target().id()],b=n.apply(u[y],[u[y]]),w=p[m]+b;if(w<p[x]&&(p[x]=w,f[x]=m,g[x]=u[y],v=!0),!o){var w=p[x]+b;w<p[m]&&(p[m]=w,f[m]=x,g[m]=u[y],v=!0)}}if(!v)break}if(v)for(var y=0;y<u.length;y++){var m=h[u[y].source().id()],x=h[u[y].target().id()],b=n.apply(u[y],[u[y]]);if(p[m]+b<p[x])return i.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var _=[],d=0;d<c;d++)_.push(l[d].id());return{distanceTo:function(t){if(r.string(t))var e=s.filter(t)[0].id();else var e=t.id();return p[h[e]]},pathTo:function(t){if(r.string(t))var n=s.filter(t)[0].id();else var n=t.id();var i=[],o=function(t,e,n,r,i,o){for(;;){if(i.push(s.getElementById(r[n])),i.push(o[n]),e===n)return i;var a=t[n];if(void 0===a)return;n=a}}(f,h[a.id()],h[n],_,i,g);return null!=o&&o.reverse(),e.spawn(o)},hasNegativeWeightCycle:!1}}}};e.exports=o},{"../../is":126,"../../util":143}],48:[function(t,e,n){"use strict";var r=t("../../is"),i=t("../../heap"),o={betweennessCentrality:function(t){t=t||{};var e,n;r.fn(t.weight)?(n=t.weight,e=!0):e=!1;for(var o=null!=t.directed&&t.directed,a=this._private.cy,s=this.nodes(),u={},l={},c=0,h={set:function(t,e){l[t]=e,e>c&&(c=e)},get:function(t){return l[t]}},d=0;d<s.length;d++){var p=s[d],f=p.id();u[f]=o?p.outgoers().nodes():p.openNeighborhood().nodes(),h.set(f,0)}for(var g=0;g<s.length;g++){for(var v=s[g].id(),y=[],m={},x={},b={},w=new i(function(t,e){return b[t]-b[e]}),d=0;d<s.length;d++){var f=s[d].id();m[f]=[],x[f]=0,b[f]=1/0}for(x[v]=1,b[v]=0,w.push(v);!w.empty();){var p=w.pop();if(y.push(p),e)for(var _=0;_<u[p].length;_++){var E,k=u[p][_],T=a.getElementById(p);E=T.edgesTo(k).length>0?T.edgesTo(k)[0]:k.edgesTo(T)[0];var N=n.apply(E,[E]);k=k.id(),b[k]>b[p]+N&&(b[k]=b[p]+N,w.nodes.indexOf(k)<0?w.push(k):w.updateItem(k),x[k]=0,m[k]=[]),b[k]==b[p]+N&&(x[k]=x[k]+x[p],m[k].push(p))}else for(var _=0;_<u[p].length;_++){var k=u[p][_].id();b[k]==1/0&&(w.push(k),b[k]=b[p]+1),b[k]==b[p]+1&&(x[k]=x[k]+x[p],m[k].push(p))}}for(var S={},d=0;d<s.length;d++)S[s[d].id()]=0;for(;y.length>0;)for(var k=y.pop(),_=0;_<m[k].length;_++){var p=m[k][_];S[p]=S[p]+x[p]/x[k]*(1+S[k]),k!=s[g].id()&&h.set(k,h.get(k)+S[k])}}var L={betweenness:function(t){if(r.string(t))var t=a.filter(t).id();else var t=t.id();return h.get(t)},betweennessNormalized:function(t){if(0==c)return 0;if(r.string(t))var t=a.filter(t).id();else var t=t.id();return h.get(t)/c}};return L.betweennessNormalised=L.betweennessNormalized,L}};o.bc=o.betweennessCentrality,e.exports=o},{"../../heap":124,"../../is":126}],49:[function(t,e,n){"use strict";var r=t("../../is"),i=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,i){var o,a,s;r.plainObject(e)&&!r.elementOrCollection(e)&&(o=e,e=o.roots||o.root,n=o.visit,i=o.directed,a=o.std,s=o.thisArg),i=2!==arguments.length||r.fn(n)?i:n,n=r.fn(n)?n:function(){};for(var u,l=this._private.cy,c=e=r.string(e)?this.filter(e):e,h=[],d=[],p={},f={},g={},v=0,y=this.nodes(),m=this.edges(),x=0;x<c.length;x++)c[x].isNode()&&(h.unshift(c[x]),t.bfs&&(g[c[x].id()]=!0,d.push(c[x])),f[c[x].id()]=0);for(;0!==h.length;){var c=t.bfs?h.shift():h.pop();if(t.dfs){if(g[c.id()])continue;g[c.id()]=!0,d.push(c)}var b,w=f[c.id()],_=p[c.id()],E=null==_?void 0:_.connectedNodes().not(c)[0];if((b=a?n.call(s,c,_,E,v++,w):n.call(c,v++,w,c,_,E))===!0){u=c;break}if(b===!1)break;for(var k=c.connectedEdges(i?function(){return this.data("source")===c.id()}:void 0).intersect(m),x=0;x<k.length;x++){var T=k[x],N=T.connectedNodes(function(){return this.id()!==c.id()}).intersect(y);0===N.length||g[N.id()]||(N=N[0],h.push(N),t.bfs&&(g[N.id()]=!0,d.push(N)),p[N.id()]=T,f[N.id()]=f[c.id()]+1)}}for(var S=[],x=0;x<d.length;x++){var L=d[x],C=p[L.id()];C&&S.push(C),S.push(L)}return{path:l.collection(S,{unique:!0}),found:l.collection(u)}}},o={breadthFirstSearch:i({bfs:!0}),depthFirstSearch:i({dfs:!0})};o.bfs=o.breadthFirstSearch,o.dfs=o.depthFirstSearch,e.exports=o},{"../../is":126}],50:[function(t,e,n){"use strict";var r=t("../../is"),i={closenessCentralityNormalized:function(t){t=t||{};var e=this.cy(),n=t.harmonic;void 0===n&&(n=!0);for(var i={},o=0,a=this.nodes(),s=this.floydWarshall({weight:t.weight,directed:t.directed}),u=0;u<a.length;u++){for(var l=0,c=0;c<a.length;c++)if(u!=c){var h=s.distance(a[u],a[c]);l+=n?1/h:h}n||(l=1/l),o<l&&(o=l),i[a[u].id()]=l}return{closeness:function(t){if(0==o)return 0;if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return i[t]/o}}},closenessCentrality:function(t){if(t=t||{},null!=t.root){if(r.string(t.root))var e=this.filter(t.root)[0];else var e=t.root[0];if(null!=t.weight&&r.fn(t.weight))var n=t.weight;else var n=function(){return 1};if(null!=t.directed&&r.bool(t.directed))var i=t.directed;else var i=!1;var o=t.harmonic;void 0===o&&(o=!0);for(var a=this.dijkstra({root:e,weight:n,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++)if(u[l].id()!=e.id()){var c=a.distanceTo(u[l]);s+=o?1/c:c}return o?s:1/s}}};i.cc=i.closenessCentrality,i.ccn=i.closenessCentralityNormalised=i.closenessCentralityNormalized,e.exports=i},{"../../is":126}],51:[function(t,e,n){"use strict";var r=t("../../is"),i=t("../../util"),o={degreeCentralityNormalized:function(t){t=t||{};var e=this.cy();if(null!=t.directed)var n=t.directed;else var n=!1;var o=this.nodes(),a=o.length;if(n){for(var s={},u={},l=0,c=0,h=0;h<a;h++){var d=o[h],p=this.degreeCentrality(i.extend({},t,{root:d}));l<p.indegree&&(l=p.indegree),c<p.outdegree&&(c=p.outdegree),s[d.id()]=p.indegree,u[d.id()]=p.outdegree}return{indegree:function(t){if(0==l)return 0;if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return s[t]/l},outdegree:function(t){if(0==c)return 0;if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return u[t]/c}}}for(var f={},g=0,h=0;h<a;h++){var d=o[h],p=this.degreeCentrality(i.extend({},t,{root:d}));g<p.degree&&(g=p.degree),f[d.id()]=p.degree}return{degree:function(t){if(0==g)return 0;if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return f[t]/g}}},degreeCentrality:function(t){t=t||{};var e=this;if(null!=t&&null!=t.root){var n=r.string(t.root)?this.filter(t.root)[0]:t.root[0];if(null!=t.weight&&r.fn(t.weight))var i=t.weight;else var i=function(t){return 1};if(null!=t.directed)var o=t.directed;else var o=!1;if(null!=t.alpha&&r.number(t.alpha))var a=t.alpha;else a=0;if(o){for(var s=n.connectedEdges('edge[target = "'+n.id()+'"]').intersection(e),u=n.connectedEdges('edge[source = "'+n.id()+'"]').intersection(e),l=s.length,c=u.length,h=0,d=0,p=0;p<s.length;p++){var f=s[p];h+=i.apply(f,[f])}for(var p=0;p<u.length;p++){var f=u[p];d+=i.apply(f,[f])}return{indegree:Math.pow(l,1-a)*Math.pow(h,a),outdegree:Math.pow(c,1-a)*Math.pow(d,a)}}for(var g=n.connectedEdges().intersection(e),v=g.length,y=0,p=0;p<g.length;p++){var f=g[p];y+=i.apply(f,[f])}return{degree:Math.pow(v,1-a)*Math.pow(y,a)}}}};o.dc=o.degreeCentrality,o.dcn=o.degreeCentralityNormalised=o.degreeCentralityNormalized,e.exports=o},{"../../is":126,"../../util":143}],52:[function(t,e,n){"use strict";var r=t("../../is"),i=t("../../heap"),o={dijkstra:function(t,e,n){var o;r.plainObject(t)&&!r.elementOrCollection(t)&&(o=t,t=o.root,e=o.weight,n=o.directed);var a=this._private.cy;e=r.fn(e)?e:function(){return 1};for(var s=r.string(t)?this.filter(t)[0]:t[0],u={},l={},c={},h=this.edges().filter(function(){return!this.isLoop()}),d=this.nodes(),p=function(t){return u[t.id()]},f=new i(function(t,e){return p(t)-p(e)}),g=0;g<d.length;g++){var v=d[g];u[v.id()]=v.same(s)?0:1/0,f.push(v)}for(;f.size()>0;){var y=f.pop(),m=p(y);if(c[y.id()]=m,m===Math.Infinite)break;for(var x=y.neighborhood().intersect(d),g=0;g<x.length;g++){var b=x[g],w=b.id(),_=function(t,r){for(var i,o=(n?t.edgesTo(r):t.edgesWith(r)).intersect(h),a=1/0,s=0;s<o.length;s++){var u=o[s],l=e.apply(u,[u]);(l<a||!i)&&(a=l,i=u)}return{edge:i,dist:a}}(y,b),E=m+_.dist;E<p(b)&&(!function(t,e){u[t.id()]=e,f.updateItem(t)}(b,E),l[w]={node:y,edge:_.edge})}}return{distanceTo:function(t){return c[(r.string(t)?d.filter(t)[0]:t[0]).id()]},pathTo:function(t){var e=r.string(t)?d.filter(t)[0]:t[0],n=[],i=e;if(e.length>0)for(n.unshift(e);l[i.id()];){var o=l[i.id()];n.unshift(o.edge),n.unshift(o.node),i=o.node}return a.collection(n)}}}};e.exports=o},{"../../heap":124,"../../is":126}],53:[function(t,e,n){"use strict";var r=t("../../is"),i={floydWarshall:function(t){t=t||{};var e=this.cy();if(null!=t.weight&&r.fn(t.weight))var n=t.weight;else var n=function(t){return 1};if(null!=t.directed)var i=t.directed;else var i=!1;for(var o=this.edges().stdFilter(function(t){return!t.isLoop()}),a=this.nodes(),s=a.length,u={},l=0;l<s;l++)u[a[l].id()]=l;for(var c=[],l=0;l<s;l++){for(var h=new Array(s),d=0;d<s;d++)h[d]=l==d?0:1/0;c.push(h)}var p=[],f=[],g=function(t){for(var e=0;e<s;e++){for(var n=new Array(s),r=0;r<s;r++)n[r]=void 0;t.push(n)}};g(p),g(f);for(var l=0;l<o.length;l++){var v=u[o[l].source().id()],y=u[o[l].target().id()],m=n.apply(o[l],[o[l]]);c[v][y]>m&&(c[v][y]=m,p[v][y]=y,f[v][y]=o[l])}if(!i)for(var l=0;l<o.length;l++){var v=u[o[l].target().id()],y=u[o[l].source().id()],m=n.apply(o[l],[o[l]]);c[v][y]>m&&(c[v][y]=m,p[v][y]=y,f[v][y]=o[l])}for(var x=0;x<s;x++)for(var l=0;l<s;l++)for(var d=0;d<s;d++)c[l][x]+c[x][d]<c[l][d]&&(c[l][d]=c[l][x]+c[x][d],p[l][d]=p[l][x]);for(var b=[],l=0;l<s;l++)b.push(a[l].id());return{distance:function(t,n){if(r.string(t))var i=e.filter(t)[0].id();else var i=t.id();if(r.string(n))var o=e.filter(n)[0].id();else var o=n.id();return c[u[i]][u[o]]},path:function(t,n){if(r.string(t))var i=e.filter(t)[0].id();else var i=t.id();if(r.string(n))var o=e.filter(n)[0].id();else var o=n.id();var a=function(t,n,r,i,o){if(t===n)return e.getElementById(i[t]);if(void 0!==r[t][n]){for(var a=[e.getElementById(i[t])],s=t;t!==n;){s=t,t=r[t][n];var u=o[s][t];a.push(u),a.push(e.getElementById(i[t]))}return a}}(u[i],u[o],p,b,f);return e.collection(a)}}}};e.exports=i},{"../../is":126}],54:[function(t,e,n){"use strict";var r=t("../../util"),i={};[t("./bfs-dfs"),t("./dijkstra"),t("./kruskal"),t("./a-star"),t("./floyd-warshall"),t("./bellman-ford"),t("./kerger-stein"),t("./page-rank"),t("./degree-centrality"),t("./closeness-centrality"),t("./betweenness-centrality")].forEach(function(t){r.extend(i,t)}),e.exports=i},{"../../util":143,"./a-star":46,"./bellman-ford":47,"./betweenness-centrality":48,"./bfs-dfs":49,"./closeness-centrality":50,"./degree-centrality":51,"./dijkstra":52,"./floyd-warshall":53,"./kerger-stein":55,"./kruskal":56,"./page-rank":57}],55:[function(t,e,n){"use strict";var r=t("../../util"),i={kargerStein:function(t){var e=this;t=t||{};var n=function(t,e,n){for(var r=n[t],i=r[1],o=r[2],a=e[i],s=e[o],u=n.filter(function(t){return(e[t[1]]!==a||e[t[2]]!==s)&&(e[t[1]]!==s||e[t[2]]!==a)}),l=0;l<u.length;l++){var c=u[l];c[1]===s?(u[l]=c.slice(0),u[l][1]=a):c[2]===s&&(u[l]=c.slice(0),u[l][2]=a)}for(var l=0;l<e.length;l++)e[l]===s&&(e[l]=a);return u},i=function(t,e,r,o){return r<=o?e:i(t,n(Math.floor(Math.random()*e.length),t,e),r-1,o)},o=this._private.cy,a=this.edges().stdFilter(function(t){return!t.isLoop()}),s=this.nodes(),u=s.length,l=a.length,c=Math.ceil(Math.pow(Math.log(u)/Math.LN2,2)),h=Math.floor(u/Math.sqrt(2));if(u<2)return void r.error("At least 2 nodes are required for Karger-Stein algorithm");for(var d={},p=0;p<u;p++)d[s[p].id()]=p;for(var f=[],p=0;p<l;p++){var g=a[p];f.push([p,d[g.source().id()],d[g.target().id()]])}for(var v,y=1/0,m=[],p=0;p<u;p++)m.push(p);for(var x=0;x<=c;x++){var b=m.slice(0),w=i(b,f,u,h),_=b.slice(0),E=i(b,w,h,2),k=i(_,w,h,2);E.length<=k.length&&E.length<y?(y=E.length,v=[E,b]):k.length<=E.length&&k.length<y&&(y=k.length,v=[k,_])}for(var T=v[0].map(function(t){return a[t[0]]}),N=[],S=[],L=v[1][0],p=0;p<v[1].length;p++){v[1][p]===L?N.push(s[p]):S.push(s[p])}return{cut:e.spawn(o,T),partition1:e.spawn(N),partition2:e.spawn(S)}}};e.exports=i},{"../../util":143}],56:[function(t,e,n){"use strict";var r=t("../../is"),i={kruskal:function(t){function e(t){for(var e=0;e<o.length;e++){var n=o[e];if(n.anySame(t))return{eles:n,index:e}}}var n=this.cy();t=r.fn(t)?t:function(){return 1};for(var i=n.collection(n,[]),o=[],a=this.nodes(),s=0;s<a.length;s++)o.push(a[s].collection());for(var u=this.edges(),l=u.toArray().sort(function(e,n){return t.call(e,e)-t.call(n,n)}),s=0;s<l.length;s++){var c=l[s],h=c.source()[0],d=c.target()[0],p=e(h),f=e(d);p.index!==f.index&&(i=i.add(c),o[p.index]=p.eles.add(f.eles),o.splice(f.index,1))}return a.add(i)}};e.exports=i},{"../../is":126}],57:[function(t,e,n){"use strict";var r=t("../../is"),i={pageRank:function(t){t=t||{};if(null!=t&&null!=t.dampingFactor)var e=t.dampingFactor;else var e=.8;if(null!=t&&null!=t.precision)var n=t.precision;else var n=1e-6;if(null!=t&&null!=t.iterations)var i=t.iterations;else var i=200;if(null!=t&&null!=t.weight&&r.fn(t.weight))var o=t.weight;else var o=function(t){return 1};for(var a=this._private.cy,s=this.edges().stdFilter(function(t){return!t.isLoop()}),u=this.nodes(),l=u.length,c=s.length,h={},d=0;d<l;d++)h[u[d].id()]=d;for(var p=[],f=[],g=(1-e)/l,d=0;d<l;d++){for(var v=[],y=0;y<l;y++)v.push(0);p.push(v),f.push(0)}for(var d=0;d<c;d++){var m=s[d],x=h[m.source().id()],b=h[m.target().id()],w=o.apply(m,[m]);p[b][x]+=w,f[x]+=w}for(var _=1/l+g,y=0;y<l;y++)if(0===f[y])for(var d=0;d<l;d++)p[d][y]=_;else for(var d=0;d<l;d++)p[d][y]=p[d][y]/f[y]+g;for(var E,k=[],T=[],d=0;d<l;d++)k.push(1),T.push(0);for(var N=0;N<i;N++){for(var S=T.slice(0),d=0;d<l;d++)for(var y=0;y<l;y++)S[d]+=p[d][y]*k[y];!function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var r=0;r<e;r++)t[r]=t[r]/n}(S),E=k,k=S;for(var L=0,d=0;d<l;d++)L+=Math.pow(E[d]-k[d],2);if(L<n)break}return{rank:function(t){if(r.string(t))var e=a.filter(t)[0].id();else var e=t.id();return k[h[e]]}}}};e.exports=i},{"../../is":126}],58:[function(t,e,n){"use strict";var r=t("../define"),i={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop()};e.exports=i},{"../define":87}],59:[function(t,e,n){"use strict";var r=t("../util"),i={classes:function(t){t=(t||"").match(/\S+/g)||[];for(var e=this,n=[],i={},o=0;o<t.length;o++){var a=t[o];i[a]=!0}for(var s=0;s<e.length;s++){for(var u=e[s],l=u._private,c=l.classes,h=!1,o=0;o<t.length;o++){var a=t[o],d=c[a];if(!d){h=!0;break}}if(!h)for(var t=Object.keys(c),o=0;o<t.length;o++){var p=t[o],d=c[p],f=i[p];if(d&&!f){h=!0;break}}h&&(l.classes=r.copy(i),n.push(u))}return n.length>0&&this.spawn(n).updateStyle().trigger("class"),e},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return!(null==e||!e._private.classes[t])},toggleClass:function(t,e){for(var n=t.match(/\S+/g)||[],r=this,i=[],o=0,a=r.length;o<a;o++)for(var s=r[o],u=!1,l=0;l<n.length;l++){var c=n[l],h=s._private.classes,d=h[c],p=e||void 0===e&&!d;p?(h[c]=!0,d||u||(i.push(s),u=!0)):(h[c]=!1,d&&!u&&(i.push(s),u=!0))}return i.length>0&&this.spawn(i).updateStyle().trigger("class"),r},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},e),n}};e.exports=i},{"../util":143}],60:[function(t,e,n){"use strict";var r={allAre:function(t){return this.filter(t).length===this.length},is:function(t){return this.filter(t).length>0},some:function(t,e){for(var n=0;n<this.length;n++){if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0}return!1},every:function(t,e){for(var n=0;n<this.length;n++){if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1}return!0},same:function(t){return t=this.cy().collection(t),this.length===t.length&&this.intersect(t).length===this.length},anySame:function(t){return t=this.cy().collection(t),this.intersect(t).length>0},allAreNeighbors:function(t){return t=this.cy().collection(t),this.neighborhood().intersect(t).length===t.length}};r.allAreNeighbours=r.allAreNeighbors,e.exports=r},{}],61:[function(t,e,n){"use strict";var r={parent:function(t){for(var e=[],n=this._private.cy,r=0;r<this.length;r++){var i=this[r],o=n.getElementById(i._private.data.parent);o.size()>0&&e.push(o)}return this.spawn(e,{unique:!0}).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}n=n.parent()}return this.spawn(e,{unique:!0}).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n],i=r.parents();e=e||i,e=e.intersect(i)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().empty()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().nonempty()}).filter(t)},children:function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];e=e.concat(r._private.children)}return this.spawn(e,{unique:!0}).filter(t)},siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return 0!==t._private.children.length},isChild:function(){var t=this[0];if(t)return void 0!==t._private.data.parent&&0!==t.parent().length},descendants:function(t){function e(t){for(var r=0;r<t.length;r++){var i=t[r];n.push(i),i.children().nonempty()&&e(i.children())}}var n=[];return e(this.children()),this.spawn(n,{unique:!0}).filter(t)}};r.ancestors=r.parents,e.exports=r},{}],62:[function(t,e,n){"use strict";var r,i,o=t("../define");r=i={data:o.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:o.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:o.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:o.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:o.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:o.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}},r.attr=r.data,r.removeAttr=r.removeData,e.exports=i},{"../define":87}],63:[function(t,e,n){"use strict";function r(t){return function(e){var n=this;if(void 0===e&&(e=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!e&&s.isLoop()||(r+=t(i,s))}return r}}}function i(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[t](n);void 0===s||void 0!==r&&!e(s,r)||(r=s)}return r}}var o=t("../util"),a={};o.extend(a,{degree:r(function(t,e){return e.source().same(e.target())?2:1}),indegree:r(function(t,e){return e.target().same(t)?1:0}),outdegree:r(function(t,e){return e.source().same(t)?1:0})}),o.extend(a,{minDegree:i("degree",function(t,e){return t<e}),maxDegree:i("degree",function(t,e){return t>e}),minIndegree:i("indegree",function(t,e){return t<e}),maxIndegree:i("indegree",function(t,e){return t>e}),minOutdegree:i("outdegree",function(t,e){return t<e}),maxOutdegree:i("outdegree",function(t,e){return t>e})}),o.extend(a,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}}),e.exports=a},{"../util":143}],64:[function(t,e,n){"use strict";function r(t){return{includeNodes:u.default(t.includeNodes,b.includeNodes),includeEdges:u.default(t.includeEdges,b.includeEdges),includeLabels:u.default(t.includeLabels,b.includeLabels),includeShadows:u.default(t.includeShadows,b.includeShadows),includeOverlays:u.default(t.includeOverlays,b.includeOverlays),useCache:u.default(t.useCache,b.useCache)}}var i,o,a=t("../define"),s=t("../is"),u=t("../util"),l=t("../math");i=o={position:a.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){t.updateCompoundBounds().rtrigger("position")},canSet:function(t){return!t.locked()&&!t.isParent()}}),silentPosition:a.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){t.updateCompoundBounds()},canSet:function(t){return!t.locked()&&!t.isParent()}}),positions:function(t,e){if(s.plainObject(t))this.position(t);else if(s.fn(t)){for(var n=t,r=0;r<this.length;r++){var i=this[r],t=n.apply(i,[r,i]);if(t&&!i.locked()&&!i.isParent()){var o=i._private.position;o.x=t.x,o.y=t.y}}var a=this.updateCompoundBounds(),u=a.length>0?this.add(a):this;e?u.trigger("position"):u.rtrigger("position")}return this},silentPositions:function(t){return this.positions(t,!0)},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),a=s.plainObject(t)?t:void 0,u=void 0!==a||void 0!==e&&s.string(t);if(n&&n.isNode()){if(!u){var l=n._private.position;return a={x:l.x*i+o.x,y:l.y*i+o.y},void 0===t?a:a[t]}for(var c=0;c<this.length;c++){var n=this[c];void 0!==e?n._private.position[t]=(e-o[t])/i:void 0!==a&&(n._private.position={x:(a.x-o.x)/i,y:(a.y-o.y)/i})}this.rtrigger("position")}else if(!u)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=s.plainObject(t)?t:void 0,o=void 0!==i||void 0!==e&&s.string(t),a=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var u=n._private.position,l=a?n.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var d=h?l._private.position:{x:0,y:0};return i={x:u.x-d.x,y:u.y-d.y},void 0===t?i:i[t]}for(var p=0;p<this.length;p++){var n=this[p],l=a?n.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var d=h?l._private.position:{x:0,y:0};void 0!==e?n._private.position[t]=e+d[t]:void 0!==i&&(n._private.position={x:i.x+d.x,y:i.y+d.y})}this.rtrigger("position")}else if(!o)return;return this},renderedBoundingBox:function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,u=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}},updateCompoundBounds:function(){var t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return t.collection();for(var e=[],n=this;n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];!function(t){if(t.isParent()){var n=t._private,r=t.children(),i="include"===t.pstyle("compound-sizing-wrt-labels").value,o=r.boundingBox({includeLabels:i,includeShadows:!1,includeOverlays:!1,useCache:!1}),a=n.position;n.autoWidth=o.w,a.x=(o.x1+o.x2)/2,n.autoHeight=o.h,a.y=(o.y1+o.y2)/2,e.push(t)}}(i)}n=n.parent()}return this.spawn(e)}};var c=function(t){return t===1/0||t===-(1/0)?0:t},h=function(t,e,n,r,i){r-e!=0&&i-n!=0&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2)},d=function(t,e){return h(t,e.x1,e.y1,e.x2,e.y2)},p=function(t,e,n){return u.getPrefixedProperty(t,e,n)},f=function(t,e,n,r){var i,o,a=e._private,s=a.rstyle,u=s.arrowWidth/2,l=e.pstyle(n+"-arrow-shape").value;"none"!==l&&("source"===n?(i=s.srcX,o=s.srcY):"target"===n?(i=s.tgtX,o=s.tgtY):(i=s.midX,o=s.midY),h(t,i-u,o-u,i+u,o+u))},g=function(t,e,n,r){var i;i=n?n+"-":"";var o=e._private,a=o.rstyle;if(e.pstyle(i+"label").strValue){var s,u,l,c,d=e.pstyle("text-halign"),f=e.pstyle("text-valign"),g=p(a,"labelWidth",n),v=p(a,"labelHeight",n),y=p(a,"labelX",n),m=p(a,"labelY",n),x=e.pstyle(i+"text-margin-x").pfValue,b=e.pstyle(i+"text-margin-y").pfValue,w=e.isEdge(),_=e.pstyle(i+"text-rotation"),E=e.pstyle("text-shadow-blur").pfValue/2,k=e.pstyle("text-shadow-offset-x").pfValue,T=e.pstyle("text-shadow-offset-y").pfValue,N=e.pstyle("text-shadow-opacity").value,S=e.pstyle("text-outline-width").pfValue,L=e.pstyle("text-border-width").pfValue,C=L/2,D=v,A=g,M=A/2,P=D/2;if(w)s=y-M,u=y+M,l=m-P,c=m+P;else{switch(d.value){case"left":s=y-A,u=y;break;case"center":s=y-M,u=y+M;break;case"right":s=y,u=y+A}switch(f.value){case"top":l=m-D,c=m;break;case"center":l=m-P,c=m+P;break;case"bottom":l=m,c=m+D}}var I=w&&"autorotate"===_.strValue,O=null!=_.pfValue&&0!==_.pfValue;if(I||O){var R=I?p(o.rstyle,"labelAngle",n):_.pfValue,j=Math.cos(R),B=Math.sin(R),F=function(t,e){return t-=y,e-=m,{x:t*j-e*B+y,y:t*B+e*j+m}},q=F(s,l),z=F(s,c),V=F(u,l),G=F(u,c);s=Math.min(q.x,z.x,V.x,G.x),u=Math.max(q.x,z.x,V.x,G.x),l=Math.min(q.y,z.y,V.y,G.y),c=Math.max(q.y,z.y,V.y,G.y)}s+=x-Math.max(S,C),u+=x+Math.max(S,C),l+=b-Math.max(S,C),c+=b+Math.max(S,C),h(t,s,l,u,c),r.includeShadows&&N>0&&(s+=-E+k,u+=+E+k,l+=-E+T,c+=+E+T,h(t,s,l,u,c))}return t},v=function(t,e){var n,r,i,o,a,s,u=t._private.cy,d=u._private,p=d.styleEnabled,v={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)},y=t._private,m=p?t.pstyle("display").value:"element",x=t.isNode(),b=t.isEdge(),w="none"!==m;if(w){var _=0;p&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(_=t.pstyle("overlay-padding").value);var E=0,k=0;if(p&&(E=t.pstyle("width").pfValue,k=E/2),x&&e.includeNodes){var T=y.position;a=T.x,s=T.y;var E=t.outerWidth(),N=E/2,S=t.outerHeight(),L=S/2;n=a-N-_,r=a+N+_,i=s-L-_,o=s+L+_,h(v,n,i,r,o)}else if(b&&e.includeEdges){var C=y.rstyle||{};if(p&&(n=Math.min(C.srcX,C.midX,C.tgtX),r=Math.max(C.srcX,C.midX,C.tgtX),i=Math.min(C.srcY,C.midY,C.tgtY),o=Math.max(C.srcY,C.midY,C.tgtY),n-=k,r+=k,i-=k,o+=k,h(v,n,i,r,o)),p&&"haystack"===t.pstyle("curve-style").strValue){var D=C.haystackPts;if(n=D[0].x,i=D[0].y,r=D[1].x,o=D[1].y,n>r){var A=n;n=r,r=A}if(i>o){var A=i;i=o,o=A}h(v,n-k,i-k,r+k,o+k)}else{for(var M=C.bezierPts||C.linePts||[],P=0;P<M.length;P++){var I=M[P];n=I.x-k,r=I.x+k,i=I.y-k,o=I.y+k,h(v,n,i,r,o)}if(0===M.length){var O=y.source,R=O._private,j=R.position,B=y.target,F=B._private,q=F.position;if(n=j.x,r=q.x,i=j.y,o=q.y,n>r){var A=n;n=r,r=A}if(i>o){var A=i;i=o,o=A}n-=k,r+=k,i-=k,o+=k,h(v,n,i,r,o)}}}if(p){if(n=v.x1,r=v.x2,i=v.y1,o=v.y2,e.includeShadows&&t.pstyle("shadow-opacity").value>0){var z=t.pstyle("shadow-blur").pfValue/2,V=t.pstyle("shadow-offset-x").pfValue,G=t.pstyle("shadow-offset-y").pfValue;h(v,n-z+V,i-z+G,r+z+V,o+z+G)}h(v,n-_,i-_,r+_,o+_)}p&&e.includeEdges&&b&&(f(v,t,"mid-source",e),f(v,t,"mid-target",e),f(v,t,"source",e),f(v,t,"target",e)),p&&e.includeLabels&&(g(v,t,null,e),b&&(g(v,t,"source",e),g(v,t,"target",e)))}return v.x1=c(v.x1),v.y1=c(v.y1),v.x2=c(v.x2),v.y2=c(v.y2),v.w=c(v.x2-v.x1),v.h=c(v.y2-v.y1),v.w>0&&v.h>0&&w&&l.expandBoundingBox(v,1),v},y=function(t){return t?"t":"f"},m=function(t){var e="";return e+=y(t.incudeNodes),e+=y(t.includeEdges),e+=y(t.includeLabels),e+=y(t.includeShadows),e+=y(t.includeOverlays)},x=function(t,e){var n,r=t._private,i=t.cy().headless(),o=e===b?w:m(e);return e.useCache&&!i&&r.bbCache&&r.bbCache[o]?n=r.bbCache[o]:(n=v(t,e),i||(r.bbCache=r.bbCache||{},r.bbCache[o]=n)),n},b={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeShadows:!0,includeOverlays:!0,useCache:!0},w=m(b);o.recalculateRenderedStyle=function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},o.boundingBox=function(t){if(1===this.length&&this[0]._private.bbCache&&(void 0===t||void 0===t.useCache||t.useCache===!0))return t=void 0===t?b:r(t),x(this[0],t);var e={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)};t=t||u.staticEmptyObject();var n=r(t),i=this,o=i.cy(),a=o.styleEnabled();a&&this.recalculateRenderedStyle(n.useCache);for(var s=0;s<i.length;s++){var l=i[s];a&&l.isEdge()&&"bezier"===l.pstyle("curve-style").strValue&&l.parallelEdges().recalculateRenderedStyle(n.useCache),d(e,x(l,n))}return e.x1=c(e.x1),e.y1=c(e.y1),e.x2=c(e.x2),e.y2=c(e.y2),e.w=c(e.x2-e.x1),e.h=c(e.y2-e.y1),e};var _=function(t){t.uppercaseName=u.capitalize(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=u.capitalize(t.outerName),i[t.name]=function(){var e=this[0],n=e._private,r=n.cy,i=r._private.styleEnabled;if(e){if(!i)return 1;if(e.isParent())return n[t.autoName]||0;var o=e.pstyle(t.name);switch(o.strValue){case"label":return n.rstyle[t.labelName]||0;default:return o.pfValue}}},i["outer"+t.uppercaseName]=function(){var e=this[0],n=e._private,r=n.cy,i=r._private.styleEnabled;if(e){if(i){return e[t.name]()+e.pstyle("border-width").pfValue+2*e.pstyle("padding").pfValue}return 1}},i["rendered"+t.uppercaseName]=function(){var e=this[0];if(e){return e[t.name]()*this.cy().zoom()}},i["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e){return e[t.outerName]()*this.cy().zoom()}}};_({name:"width"}),_({name:"height"}),i.modelPosition=i.point=i.position,i.modelPositions=i.points=i.positions,i.renderedPoint=i.renderedPosition,i.relativePoint=i.relativePosition,i.boundingbox=i.boundingBox,i.renderedBoundingbox=i.renderedBoundingBox,e.exports=o},{"../define":87,"../is":126,"../math":128,"../util":143}],65:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o=function(t,e,n){var o=this;if(n=!(void 0!==n&&!n),void 0===t||void 0===e||!i.core(t))return void r.error("An element must have a core reference and parameters set");var a=e.group;if(null==a&&(a=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"!==a&&"edges"!==a)return void r.error("An element must be of type `nodes` or `edges`; you specified `"+a+"`");if(this.length=1,this[0]=this,this._private={cy:t,single:!0,data:e.data||{},position:e.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],
children:[],traversalCache:{}},e.renderedPosition){var s=e.renderedPosition,u=t.pan(),l=t.zoom();this._private.position={x:(s.x-u.x)/l,y:(s.y-u.y)/l}}if(i.string(e.classes))for(var c=e.classes.split(/\s+/),h=0,d=c.length;h<d;h++){var p=c[h];p&&""!==p&&(o._private.classes[p]=!0)}(e.style||e.css)&&t.style().applyBypass(this,e.style||e.css),(void 0===n||n)&&this.restore()};e.exports=o},{"../is":126,"../util":143}],66:[function(t,e,n){"use strict";var r=t("../define"),i={on:r.on(),one:r.on({unbindSelfOnTrigger:!0}),once:r.on({unbindAllBindersOnTrigger:!0}),off:r.off(),trigger:r.trigger(),rtrigger:function(t,e){if(0!==this.length)return this.cy().notify({type:t,eles:this}),this.trigger(t,e),this}};r.eventAliasesOn(i),e.exports=i},{"../define":87}],67:[function(t,e,n){"use strict";var r=t("../is"),i=t("../selector"),o={nodes:function(t){return this.filter(function(t,e){return e.isNode()}).filter(t)},edges:function(t){return this.filter(function(t,e){return e.isEdge()}).filter(t)},filter:function(t){if(void 0===t)return this;if(r.string(t)||r.elementOrCollection(t))return i(t).filter(this);if(r.fn(t)){for(var e=[],n=0;n<this.length;n++){var o=this[n];t.apply(o,[n,o])&&e.push(o)}return this.spawn(e)}return this.spawn()},not:function(t){if(t){r.string(t)&&(t=this.filter(t));for(var e=[],n=0;n<this.length;n++){var i=this[n];t._private.ids[i.id()]||e.push(i)}return this.spawn(e)}return this},absoluteComplement:function(){return this._private.cy.mutableElements().not(this)},intersect:function(t){if(r.string(t)){var e=t;return this.filter(e)}for(var n=[],i=this,o=t,a=this.length<t.length,s=a?o._private.ids:i._private.ids,u=a?i:o,l=0;l<u.length;l++){var c=u[l]._private.data.id,h=s[c];h&&n.push(h)}return this.spawn(n)},xor:function(t){var e=this._private.cy;r.string(t)&&(t=e.$(t));var n=[],i=this,o=t,a=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],o=i._private.data.id;e._private.ids[o]||n.push(i)}};return a(i,o),a(o,i),this.spawn(n)},diff:function(t){var e=this._private.cy;r.string(t)&&(t=e.$(t));var n=[],i=[],o=[],a=this,s=t,u=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r],a=i._private.data.id;e._private.ids[a]?o.push(i):n.push(i)}};return u(a,s,n),u(s,a,i),{left:this.spawn(n,{unique:!0}),right:this.spawn(i,{unique:!0}),both:this.spawn(o,{unique:!0})}},add:function(t){var e=this._private.cy;if(!t)return this;if(r.string(t)){var n=t;t=e.mutableElements().filter(n)}for(var i=[],o=0;o<this.length;o++)i.push(this[o]);for(var o=0;o<t.length;o++){!this._private.ids[t[o].id()]&&i.push(t[o])}return this.spawn(i)},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&r.string(t)){var i=t;t=n.mutableElements().filter(i)}for(var o=0;o<t.length;o++){var a=t[o],s=a._private.data.id;if(!e.ids[s]){var u=this.length++;this[u]=a,e.ids[s]=a,e.indexes[s]=u}else{var u=e.indexes[s];this[u]=a,e.ids[s]=a}}return this},unmergeOne:function(t){t=t[0];var e=this._private,n=t._private.data.id,r=e.indexes[n];if(null==r)return this;this[r]=void 0,e.ids[n]=void 0,e.indexes[n]=void 0;var i=r===this.length-1;if(this.length>1&&!i){var o=this.length-1,a=this[o],s=a._private.data.id;this[o]=void 0,this[r]=a,e.indexes[s]=r}return this.length--,this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&r.string(t)){var n=t;t=e.mutableElements().filter(n)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},map:function(t,e){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=e?t.apply(e,[o,i,r]):t(o,i,r);n.push(a)}return n},stdFilter:function(t,e){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i];(e?t.apply(e,[o,i,r]):t(o,i,r))&&n.push(o)}return this.spawn(n)},max:function(t,e){for(var n,r=-(1/0),i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);s>r&&(r=s,n=a)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);s<r&&(r=s,n=a)}return{value:r,ele:n}}},a=o;a.u=a["|"]=a["+"]=a.union=a.or=a.add,a["\\"]=a["!"]=a["-"]=a.difference=a.relativeComplement=a.subtract=a.not,a.n=a["&"]=a["."]=a.and=a.intersection=a.intersect,a["^"]=a["(+)"]=a["(-)"]=a.symmetricDifference=a.symdiff=a.xor,a.fnFilter=a.filterFn=a.stdFilter,a.complement=a.abscomp=a.absoluteComplement,e.exports=o},{"../is":126,"../selector":130}],68:[function(t,e,n){"use strict";var r={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var t=this[0];if(t)return t._private.group}};e.exports=r},{}],69:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o=t("./element"),a={generate:function(t,e,n){for(var i=null!=n?n:r.uuid();t.hasElementWithId(i);)i=r.uuid();return i}},s=function(t,e,n){if(void 0===t||!i.core(t))return void r.error("A collection must have a reference to the core");var s={},u={},l=!1;if(e){if(e.length>0&&i.plainObject(e[0])&&!i.element(e[0])){l=!0;for(var c=[],h={},d=0,p=e.length;d<p;d++){var f=e[d];null==f.data&&(f.data={});var g=f.data;if(null==g.id)g.id=a.generate(t,f);else if(t.hasElementWithId(g.id)||h[g.id])continue;var v=new o(t,f,!1);c.push(v),h[g.id]=!0}e=c}}else e=[];this.length=0;for(var d=0,p=e.length;d<p;d++){var y=e[d];if(y){var m=y._private.data.id;(!n||n.unique&&!s[m])&&(s[m]=y,u[m]=this.length,this[this.length]=y,this.length++)}}this._private={cy:t,ids:s,indexes:u},l&&this.restore()},u=o.prototype=s.prototype;u.instanceString=function(){return"collection"},u.spawn=function(t,e,n){return i.core(t)||(n=e,e=t,t=this.cy()),new s(t,e,n)},u.spawnSelf=function(){return this.spawn(this)},u.cy=function(){return this._private.cy},u.element=function(){return this[0]},u.collection=function(){return i.collection(this)?this:new s(this._private.cy,[this])},u.unique=function(){return new s(this._private.cy,this,{unique:!0})},u.hasElementWithId=function(t){return!!this._private.ids[t]},u.getElementById=function(t){var e=this._private.cy,n=this._private.ids[t];return n?n:new s(e)},u.poolIndex=function(){var t=this._private.cy,e=t._private.elements,n=this._private.data.id;return e._private.indexes[n]},u.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var o=e._private;if(i.plainObject(t)){n.startBatch(),t.data&&e.data(t.data),t.position&&e.position(t.position);var a=function(n,r,i){var a=t[n];null!=a&&a!==o[n]&&(a?e[r]():e[i]())};return a("removed","remove","restore"),a("selected","select","unselect"),a("selectable","selectify","unselectify"),a("locked","lock","unlock"),a("grabbable","grabify","ungrabify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var s={data:r.copy(o.data),position:r.copy(o.position),group:o.group,removed:o.removed,selected:o.selected,selectable:o.selectable,locked:o.locked,grabbable:o.grabbable,classes:null};return s.classes=Object.keys(o.classes).filter(function(t){return o.classes[t]}).join(" "),s}}},u.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e],r=n.json();t.push(r)}return t},u.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),a=new o(t,i,!1);e.push(a)}return new s(t,e)},u.copy=u.clone,u.restore=function(t){var e=this,n=e.cy(),o=n._private;void 0===t&&(t=!0);for(var u,l=[],c=[],h=0,d=e.length;h<d;h++){var p=e[h];p.removed()&&(p.isNode()?l.push(p):c.push(p))}u=l.concat(c);var h,f=function(){u.splice(h,1),h--};for(h=0;h<u.length;h++){var p=u[h],g=p._private,v=g.data;if(g.traversalCache=null,void 0===v.id)v.id=a.generate(n,p);else if(i.number(v.id))v.id=""+v.id;else{if(i.emptyString(v.id)||!i.string(v.id)){r.error("Can not create element with invalid string ID `"+v.id+"`"),f();continue}if(n.hasElementWithId(v.id)){r.error("Can not create second element with ID `"+v.id+"`"),f();continue}}var y=v.id;if(p.isNode()){var m=p,x=g.position;null==x.x&&(x.x=0),null==x.y&&(x.y=0)}if(p.isEdge()){for(var b=p,w=["source","target"],_=w.length,E=!1,k=0;k<_;k++){var T=w[k],N=v[T];i.number(N)&&(N=v[T]=""+v[T]),null==N||""===N?(r.error("Can not create edge `"+y+"` with unspecified "+T),E=!0):n.hasElementWithId(N)||(r.error("Can not create edge `"+y+"` with nonexistant "+T+" `"+N+"`"),E=!0)}if(E){f();continue}var S=n.getElementById(v.source),L=n.getElementById(v.target);S._private.edges.push(b),L._private.edges.push(b),b._private.source=S,b._private.target=L}g.ids={},g.ids[y]=p,g.indexes={},g.indexes[y]=p,g.removed=!1,n.addToPool(p)}for(var h=0;h<l.length;h++){var m=l[h],v=m._private.data;i.number(v.parent)&&(v.parent=""+v.parent);var C=v.parent;if(null!=C){var D=n.getElementById(C);if(D.empty())v.parent=void 0;else{for(var A=!1,M=D;!M.empty();){if(m.same(M)){A=!0,v.parent=void 0;break}M=M.parent()}A||(D[0]._private.children.push(m),m._private.parent=D[0],o.hasCompoundNodes=!0)}}}if(u.length>0){for(var P=new s(n,u),h=0;h<P.length;h++){var p=P[h];if(!p.isNode()){for(var I=p.parallelEdges(),k=0;k<I.length;k++)I[k]._private.traversalCache=null;p.source()[0]._private.traversalCache=null,p.target()[0]._private.traversalCache=null}}var O;O=o.hasCompoundNodes?P.add(P.connectedNodes()).add(P.parent()):P,O.updateStyle(t),t?P.rtrigger("add"):P.trigger("add")}return e},u.removed=function(){var t=this[0];return t&&t._private.removed},u.inside=function(){var t=this[0];return t&&!t._private.removed},u.remove=function(t){function e(t){for(var e=t._private.edges,n=0;n<e.length;n++)i(e[n])}function n(t){for(var e=t._private.children,n=0;n<e.length;n++)i(e[n])}function i(t){c[t.id()]||(c[t.id()]=!0,t.isNode()?(l.push(t),e(t),n(t)):l.unshift(t))}function o(t,e){var n=t._private.edges;r.removeFromArray(n,e),t._private.traversalCache=null}var a=this,u=[],l=[],c={},h=a._private.cy;void 0===t&&(t=!0);for(var d=0,p=a.length;d<p;d++){var f=a[d];i(f)}var g=[];g.ids={},h.removeFromPool(l);for(var d=0;d<l.length;d++){var f=l[d];if(f._private.removed=!0,u.push(f),f.isEdge()){var v=f.source()[0],y=f.target()[0];o(v,f),o(y,f),function(t){for(var e=t.parallelEdges(),n=0;n<e.length;n++)e[n]._private.traversalCache=null}(f)}else{var m=f.parent();0!==m.length&&function(t,e){e=e[0],t=t[0];var n=t._private.children,i=t.id();r.removeFromArray(n,e),g.ids[i]||(g.ids[i]=!0,g.push(t))}(m,f)}}var x=h._private.elements;h._private.hasCompoundNodes=!1;for(var d=0;d<x.length;d++){var f=x[d];if(f.isParent()){h._private.hasCompoundNodes=!0;break}}var b=new s(this.cy(),u);b.size()>0&&(t&&this.cy().notify({type:"remove",eles:b}),b.trigger("remove"));for(var d=0;d<g.length;d++){var f=g[d];f.removed()||f.updateStyle()}return new s(h,u)},u.move=function(t){var e=this._private.cy;if(void 0!==t.source||void 0!==t.target){var n=t.source,r=t.target,i=e.hasElementWithId(n),o=e.hasElementWithId(r);if(i||o){var a=this.jsons();this.remove();for(var s=0;s<a.length;s++){var u=a[s],l=this[s];"edges"===u.group&&(i&&(u.data.source=n),o&&(u.data.target=r),u.scratch=l._private.scratch)}return e.add(a)}}else if(void 0!==t.parent){var c=t.parent,h=null===c||e.hasElementWithId(c);if(h){var a=this.jsons(),d=this.descendants(),p=d.union(d.union(this).connectedEdges()).jsons();this.remove();for(var s=0;s<a.length;s++){var u=a[s],l=this[s];"nodes"===u.group&&(u.data.parent=null===c?void 0:c,u.scratch=l._private.scratch)}return e.add(a.concat(p))}}return this},[t("./algorithms"),t("./animation"),t("./class"),t("./comparators"),t("./compounds"),t("./data"),t("./degree"),t("./dimensions"),t("./events"),t("./filter"),t("./group"),t("./index"),t("./iteration"),t("./layout"),t("./style"),t("./switch-functions"),t("./traversing")].forEach(function(t){r.extend(u,t)}),e.exports=s},{"../is":126,"../util":143,"./algorithms":54,"./animation":58,"./class":59,"./comparators":60,"./compounds":61,"./data":62,"./degree":63,"./dimensions":64,"./element":65,"./events":66,"./filter":67,"./group":68,"./index":69,"./iteration":70,"./layout":71,"./style":72,"./switch-functions":73,"./traversing":74}],70:[function(t,e,n){"use strict";var r=t("../is"),i=t("./zsort"),o={each:function(t){if(r.fn(t))for(var e=0;e<this.length;e++){var n=this[e],i=t.apply(n,[e,n]);if(i===!1)break}return this},forEach:function(t,e){if(r.fn(t))for(var n=0;n<this.length;n++){var i=this[n],o=e?t.apply(e,[i,n,this]):t(i,n,this);if(o===!1)break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!r.fn(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(i)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:Number.MAX_VALUE}var r=e.source,i=e.target,o=r.zDepth(),a=i.zDepth();return Math.max(o,a,0)}}};e.exports=o},{"../is":126,"./zsort":75}],71:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),o=t("../promise"),a={layoutPositions:function(t,e,n){var i=this.nodes(),a=this.cy();if(t.trigger({type:"layoutstart",layout:t}),t.animations=[],e.animate){for(var s=0;s<i.length;s++){var u=i[s],l=n.call(u,s,u),c=u.position();r.number(c.x)&&r.number(c.y)||u.silentPosition({x:0,y:0});var h=u.animation({position:l,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(h),h.play()}var d;a.on("step.*",d=function(){e.fit&&a.fit(e.eles,e.padding)}),t.one("layoutstop",function(){a.off("step.*",d)}),t.one("layoutready",e.ready),t.trigger({type:"layoutready",layout:t}),o.all(t.animations.map(function(t){return t.promise()})).then(function(){a.off("step.*",d),null!=e.zoom&&a.zoom(e.zoom),e.pan&&a.pan(e.pan),e.fit&&a.fit(e.eles,e.padding),t.one("layoutstop",e.stop),t.trigger({type:"layoutstop",layout:t})})}else i.positions(n),e.fit&&a.fit(e.eles,e.padding),null!=e.zoom&&a.zoom(e.zoom),e.pan&&a.pan(e.pan),t.one("layoutready",e.ready),t.trigger({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.trigger({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().layout(i.extend({},t,{eles:this})),this},makeLayout:function(t){return this.cy().makeLayout(i.extend({},t,{eles:this}))}};a.createLayout=a.makeLayout,e.exports=a},{"../is":126,"../promise":129,"../util":143}],72:[function(t,e,n){"use strict";var r=t("../is"),i={updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e._private.batchingStyle){return e._private.batchStyleEles.merge(this),this}var n=e.hasCompoundNodes(),r=e.style(),i=this;if(t=!(!t&&void 0!==t),n&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents())),r.apply(i),n){i.updateCompoundBounds()}return t?i.rtrigger("style"):i.trigger("style"),this},updateMappers:function(t){var e=this._private.cy,n=e.style();if(t=!(!t&&void 0!==t),!e.styleEnabled())return this;n.updateMappers(this);var r=this.updateCompoundBounds(),i=r.length>0?this.add(r):this;return t?i.rtrigger("style"):i.trigger("style"),this},parsedStyle:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e._private.style[t]||e.cy().style().getDefaultProperty(t):void 0},renderedStyle:function(t){if(!this.cy().styleEnabled())return this;var e=this[0];if(e){var n=e.cy().style().getRenderedStyle(e);return void 0===t?n:n[t]}},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var i=n.style();if(r.plainObject(t)){var o=t;i.applyBypass(this,o,!1);var a=this.updateCompoundBounds(),s=a.length>0?this.add(a):this;s.rtrigger("style")}else if(r.string(t)){if(void 0===e){var u=this[0];return u?i.getStylePropertyValue(u,t):void 0}i.applyBypass(this,t,e,!1);var a=this.updateCompoundBounds(),s=a.length>0?this.add(a):this;s.rtrigger("style")}else if(void 0===t){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style(),r=this;if(void 0===t)for(var i=0;i<r.length;i++){var o=r[i];n.removeAllBypasses(o,!1)}else{t=t.split(/\s+/);for(var i=0;i<r.length;i++){var o=r[i];n.removeBypasses(o,t,!1)}}var a=this.updateCompoundBounds();return(a.length>0?this.add(a):this).rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var t=this.cy();if(!t.styleEnabled())return!0;var e=this[0],n=t.hasCompoundNodes();if(e){if("visible"!==e.pstyle("visibility").value||"element"!==e.pstyle("display").value||0===e.pstyle("width").pfValue)return!1;if("nodes"===e._private.group){if(0===e.pstyle("height").pfValue)return!1;if(!n)return!0;var r=e._private.data.parent?e.parents():null;if(r)for(var i=0;i<r.length;i++){var o=r[i],a=o.pstyle("visibility").value,s=o.pstyle("display").value;if("visible"!==a||"element"!==s)return!1}return!0}var u=e._private.source,l=e._private.target;return u.visible()&&l.visible()}},hidden:function(){var t=this[0];if(t)return!t.visible()},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.pstyle("opacity").value;i*=u}return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};i.bypass=i.css=i.style,i.renderedCss=i.renderedStyle,i.removeBypass=i.removeCss=i.removeStyle,i.pstyle=i.parsedStyle,e.exports=i},{"../is":126}],73:[function(t,e,n){"use strict";function r(t){return function(){var e=arguments,n=[];if(2===e.length){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(1===e.length){var i=e[0];this.on(t.event,i)}else if(0===e.length){for(var o=0;o<this.length;o++){var a=this[o],s=!t.ableField||a._private[t.ableField],u=a._private[t.field]!=t.value;if(t.overrideAble){var l=t.overrideAble(a);if(void 0!==l&&(s=l,!l))return this}s&&(a._private[t.field]=t.value,u&&n.push(a))}var c=this.spawn(n);c.updateStyle(),c.trigger(t.event)}return this}}function i(t){o[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},o[t.on]=r({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),o[t.off]=r({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}var o={};i({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),i({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),i({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),i({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),o.deselect=o.unselect,o.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},i({field:"active",on:"activate",off:"unactivate"}),o.inactive=function(){var t=this[0];if(t)return!t._private.active},e.exports=o},{}],74:[function(t,e,n){"use strict";function r(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=i._private[t.attr];o&&n.push(o)}return this.spawn(n,{unique:!0}).filter(e)}}function i(t){return function(e){var n=[],r=this._private.cy,i=t||{};s.string(e)&&(e=r.$(e));for(var o=this._private.ids,a=e._private.ids,u=0;u<e.length;u++)for(var l=e[u]._private.edges,c=0;c<l.length;c++){var h=l[c],d=h._private.data,p=o[d.source]&&a[d.target],f=a[d.source]&&o[d.target],g=p||f;if(g){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!p)continue;if(i.thisIsTgt&&!f)continue}n.push(h)}}return this.spawn(n,{unique:!0})}}function o(t){var e={codirected:!1};return t=a.extend({},e,t),function(e){for(var n=[],r=this.edges(),i=t,o=0;o<r.length;o++)for(var a=r[o],s=a._private,u=s.source,l=u._private.data.id,c=s.data.target,h=u._private.edges,d=0;d<h.length;d++){var p=h[d],f=p._private.data,g=f.target,v=f.source,y=g===c&&v===l,m=l===g&&c===v;(i.codirected&&y||!i.codirected&&(y||m))&&n.push(p)}return this.spawn(n,{unique:!0}).filter(e)}}var a=t("../util"),s=t("../is"),u={},l=function(t,e){return function(n,r,i,o){var a,u=n,l=this;if(null==u?a="null":s.elementOrCollection(u)&&1===u.length&&(a="#"+u.id()),1===l.length&&a){var c=l[0]._private,h=c.traversalCache=c.traversalCache||{},d=h[e]=h[e]||{},p=d[a];return p?p:d[a]=t.call(l,n,r,i,o)}return t.call(l,n,r,i,o)}},c=function(t){return function(e){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode()){for(var a=!1,s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),h=l.target();if(t.noIncomingEdges&&h===o&&c!==o||t.noOutgoingEdges&&c===o&&h!==o){a=!0;break}}a||r.push(o)}}return this.spawn(r,{unique:!0}).filter(e)}},h=function(t){return function(e){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var a=o.connectedEdges(),s=0;s<a.length;s++){var u=a[s],l=u.source(),c=u.target();t.outgoing&&l===o?(r.push(u),r.push(c)):t.incoming&&c===o&&(r.push(u),r.push(l))}}return this.spawn(r,{unique:!0}).filter(e)}},d=function(t){return function(e){for(var n=this,r=[],i={};;){var o=t.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],l=u.id();i[l]||(i[l]=!0,r.push(u),a=!0)}if(!a)break;n=o}return this.spawn(r,{unique:!0}).filter(e)}};a.extend(u,{roots:c({noIncomingEdges:!0}),leaves:c({noOutgoingEdges:!0}),outgoers:l(h({outgoing:!0}),"outgoers"),successors:d({outgoing:!0}),incomers:l(h({incoming:!0}),"incomers"),predecessors:d({incoming:!0})}),a.extend(u,{neighborhood:l(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,{unique:!0}).filter(t)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),u.neighbourhood=u.neighborhood,u.closedNeighbourhood=u.closedNeighborhood,u.openNeighbourhood=u.openNeighborhood,a.extend(u,{source:l(function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e},"source"),target:l(function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e},"target"),sources:r({attr:"source"}),targets:r({attr:"target"})}),a.extend(u,{edgesWith:l(i(),"edgesWith"),edgesTo:l(i({thisIsSrc:!0}),"edgesTo")}),a.extend(u,{connectedEdges:l(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];e.push(s)}}return this.spawn(e,{unique:!0}).filter(t)},"connectedEdges"),connectedNodes:l(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,{unique:!0}).filter(t)},"connectedNodes"),parallelEdges:l(o(),"parallelEdges"),codirectedEdges:l(o({codirected:!0}),"codirectedEdges")}),a.extend(u,{components:function(){var t=this,e=t.cy(),n=t.spawn(),r=t.nodes().spawnSelf(),i=[],o=function(t,e){n.merge(t),r.unmerge(t),e.merge(t)};if(r.empty())return t.spawn();do{var a=e.collection();i.push(a);var s=r[0];o(s,a),t.bfs({directed:!1,roots:s,visit:function(t,e,n,r,i){o(n,a)}})}while(r.length>0);return i.map(function(t){var e=t.connectedEdges().stdFilter(function(e){return t.anySame(e.source())&&t.anySame(e.target())});return t.union(e)})}}),e.exports=u},{"../is":126,"../util":143}],75:[function(t,e,n){"use strict";var r=function(t,e){var n=t.cy(),r=t.pstyle("z-index").value-e.pstyle("z-index").value,i=0,o=0,a=n.hasCompoundNodes(),s=t.isNode(),u=!s,l=e.isNode(),c=!l;a&&(i=t.zDepth(),o=e.zDepth());var h=i-o;return 0===h?s&&c?1:u&&l?-1:0===r?t.poolIndex()-e.poolIndex():r:h};e.exports=r},{}],76:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),o=t("../collection"),a=t("../collection/element"),s={add:function(t){var e,n=this;if(r.elementOrCollection(t)){var s=t;if(s._private.cy===n)e=s.restore();else{for(var u=[],l=0;l<s.length;l++){var c=s[l];u.push(c.json())}e=new o(n,u)}}else if(r.array(t)){var u=t;e=new o(n,u)}else if(r.plainObject(t)&&(r.array(t.nodes)||r.array(t.edges))){for(var h=t,u=[],d=["nodes","edges"],l=0,p=d.length;l<p;l++){var f=d[l],g=h[f];if(r.array(g))for(var v=0,y=g.length;v<y;v++){var m=i.extend({group:f},g[v]);u.push(m)}}e=new o(n,u)}else{var m=t;e=new a(n,m).collection()}return e},remove:function(t){if(r.elementOrCollection(t));else if(r.string(t)){var e=t;t=this.$(e)}return t.remove()},load:function(t,e,n){var o=this;o.notifications(!1);var a=o.mutableElements();a.length>0&&a.remove(),null!=t&&(r.plainObject(t)||r.array(t))&&o.add(t),o.one("layoutready",function(t){o.notifications(!0),o.trigger(t),o.notify({type:"load",eles:o.mutableElements()}),o.one("load",e),o.trigger("load")}).one("layoutstop",function(){o.one("done",n),o.trigger("done")});var s=i.extend({},o._private.options.layout);return s.eles=o.elements(),o.layout(s),this}};e.exports=s},{"../collection":69,"../collection/element":65,"../is":126,"../util":143}],77:[function(t,e,n){"use strict";var r=t("../define"),i=t("../util"),o=t("../is"),a={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop(),addToAnimationPool:function(t){var e=this;e.styleEnabled()&&e._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function t(){c._private.animationsRunning&&i.requestAnimationFrame(function(n){e(n),t()})}function e(t){function e(e,i){var s=e._private,u=s.animation.current,l=s.animation.queue,c=!1;if(0===u.length){var h=l.shift();h&&u.push(h)}for(var d=function(t){for(var e=t.length-1;e>=0;e--){(0,t[e])()}t.splice(0,t.length)},p=u.length-1;p>=0;p--){var f=u[p],g=f._private;g.stopped?(u.splice(p,1),g.hooked=!1,g.playing=!1,g.started=!1,d(g.frames)):(g.playing||g.applying)&&(g.playing&&g.applying&&(g.applying=!1),g.started||n(e,f,t),r(e,f,t,i),o.fn(g.step)&&g.step.call(e,t),g.applying&&(g.applying=!1),d(g.frames),f.completed()&&(u.splice(p,1),g.hooked=!1,g.playing=!1,g.started=!1,d(g.completes)),c=!0)}return i||0!==u.length||0!==l.length||a.push(e),c}for(var i=c._private.aniEles,a=[],s=!1,u=0;u<i.length;u++){var l=i[u],h=e(l);s=s||h}var d=e(c,!0);if(s||d)if(i.length>0){var p=i.updateCompoundBounds().spawnSelf().merge(i);c.notify({type:"draw",eles:p})}else c.notify({type:"draw"});i.unmerge(a),c.trigger("step")}function n(t,e,n){var r=o.core(t),i=!r,a=t,s=c._private.style,u=e._private;if(i){var l=a._private.position;u.startPosition=u.startPosition||{x:l.x,y:l.y},u.startStyle=u.startStyle||s.getAnimationStartStyle(a,u.style)}if(r){var h=c._private.pan;u.startPan=u.startPan||{x:h.x,y:h.y},u.startZoom=null!=u.startZoom?u.startZoom:c._private.zoom}u.started=!0,u.startTime=n-u.progress*u.duration}function r(t,e,n,r){var i=c._private.style,s=!r,u=t._private,h=e._private,d=h.easing,f=h.startTime;if(!h.easingImpl)if(null==d)h.easingImpl=p.linear;else{var g;if(o.string(d)){var v=i.parse("transition-timing-function",d);g=v.value}else g=d;var y,m;o.string(g)?(y=g,m=[]):(y=g[1],m=g.slice(2).map(function(t){return+t})),m.length>0?("spring"===y&&m.push(h.duration),h.easingImpl=p[y].apply(null,m)):h.easingImpl=p[y]}var x,b=h.easingImpl;if(x=0===h.duration?1:(n-f)/h.duration,h.applying&&(x=h.progress),x<0?x=0:x>1&&(x=1),null==h.delay){var w=h.startPosition,_=h.position,E=u.position;_&&s&&(a(w.x,_.x)&&(E.x=l(w.x,_.x,x,b)),a(w.y,_.y)&&(E.y=l(w.y,_.y,x,b)),t.trigger("position"));var k=h.startPan,T=h.pan,N=u.pan,S=null!=T&&r;S&&(a(k.x,T.x)&&(N.x=l(k.x,T.x,x,b)),a(k.y,T.y)&&(N.y=l(k.y,T.y,x,b)),t.trigger("pan"));var L=h.startZoom,C=h.zoom,D=null!=C&&r;D&&(a(L,C)&&(u.zoom=l(L,C,x,b)),t.trigger("zoom")),(S||D)&&t.trigger("viewport");var A=h.style;if(A&&A.length>0&&s){for(var M=0;M<A.length;M++){var P=A[M],y=P.name,I=P,O=h.startStyle[y],R=l(O,I,x,b);i.overrideBypass(t,y,R)}t.trigger("style")}}return h.progress=x,x}function a(t,e){return null!=t&&null!=e&&(!(!o.number(t)||!o.number(e))||!(!t||!e))}function s(t,e,n){var r=1-n,i=n*n;return 3*r*r*n*t+3*r*i*e+i*n}function u(t,e){return function(n,r,i){return n+(r-n)*s(t,e,i)}}function l(t,e,n,r){n<0?n=0:n>1&&(n=1);var i,a;if(i=null!=t.pfValue||null!=t.value?null!=t.pfValue?t.pfValue:t.value:t,a=null!=e.pfValue||null!=e.value?null!=e.pfValue?e.pfValue:e.value:e,o.number(i)&&o.number(a))return r(i,a,n);if(o.array(i)&&o.array(a)){for(var s=[],u=0;u<a.length;u++){var l=i[u],c=a[u];if(null!=l&&null!=c){var h=r(l,c,n);t.roundValue&&(h=Math.round(h)),s.push(h)}else s.push(c)}return s}}var c=this;if(c._private.animationsRunning=!0,c.styleEnabled()){var h=c.renderer();h&&h.beforeRender?h.beforeRender(function(t,n){e(n)},h.beforeRenderPriorities.animations):t();var d=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),u=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),l=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+l*r,n}return function t(e,r,i){var o,a,s,u={x:-1,v:0,tension:null,friction:null},l=[0],c=0;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,u.tension=e,u.friction=r,o=null!==i,o?(c=t(e,r),a=c/i*.016):a=.016;;)if(s=n(s||u,a),l.push(1+s.x),c+=16,!(Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4))break;return o?function(t){return l[t*(l.length-1)|0]}:c}}(),p={linear:function(t,e,n){return t+(e-t)*n},ease:u(.25,.1),"ease-in":u(.42,0),"ease-out":u(0,0),"ease-in-out":u(.42,0),"ease-in-sine":u(.47,0),"ease-out-sine":u(.39,.575),"ease-in-out-sine":u(.445,.05),"ease-in-quad":u(.55,.085),"ease-out-quad":u(.25,.46),"ease-in-out-quad":u(.455,.03),"ease-in-cubic":u(.55,.055),"ease-out-cubic":u(.215,.61),"ease-in-out-cubic":u(.645,.045),"ease-in-quart":u(.895,.03),"ease-out-quart":u(.165,.84),"ease-in-out-quart":u(.77,0),"ease-in-quint":u(.755,.05),"ease-out-quint":u(.23,1),"ease-in-out-quint":u(.86,0),"ease-in-expo":u(.95,.05),"ease-out-expo":u(.19,1),"ease-in-out-expo":u(1,0),"ease-in-circ":u(.6,.04),"ease-out-circ":u(.075,.82),"ease-in-out-circ":u(.785,.135),spring:function(t,e,n){if(0===n)return p.linear;var r=d(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":function(t,e,n,r){return u(t,e)}}}}};e.exports=a},{"../define":87,"../is":126,"../util":143}],78:[function(t,e,n){"use strict";var r=t("../define"),i={on:r.on(),one:r.on({unbindSelfOnTrigger:!0}),once:r.on({unbindAllBindersOnTrigger:!0}),off:r.off(),trigger:r.trigger()};r.eventAliasesOn(i),e.exports=i},{"../define":87}],79:[function(t,e,n){"use strict";var r={png:function(t){var e=this._private.renderer;return t=t||{},e.png(t)},jpg:function(t){var e=this._private.renderer;return t=t||{},t.bg=t.bg||"#fff",e.jpg(t)}};r.jpeg=r.jpg,e.exports=r},{}],80:[function(t,e,n){"use strict";var r=t("../window"),i=t("../util"),o=t("../collection"),a=t("../is"),s=t("../promise"),u=t("../define"),l=function(t){var e=this;t=i.extend({},t);var n=t.container;n&&!a.htmlElement(n)&&a.htmlElement(n[0])&&(n=n[0]);var u=n?n._cyreg:null;(u=u||{})&&u.cy&&(u.cy.destroy(),u={});var l=u.readies=u.readies||[];n&&(n._cyreg=u),u.cy=e;var c=void 0!==r&&void 0!==n&&!t.headless,h=t;h.layout=i.extend({name:c?"grid":"null"},h.layout),h.renderer=i.extend({name:c?"canvas":"null"},h.renderer);var d=function(t,e,n){return void 0!==e?e:void 0!==n?n:t
},p=this._private={container:n,ready:!1,initrender:!1,options:h,elements:new o(this),listeners:[],aniEles:new o(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:d(!0,h.zoomingEnabled),userZoomingEnabled:d(!0,h.userZoomingEnabled),panningEnabled:d(!0,h.panningEnabled),userPanningEnabled:d(!0,h.userPanningEnabled),boxSelectionEnabled:d(!0,h.boxSelectionEnabled),autolock:d(!1,h.autolock,h.autolockNodes),autoungrabify:d(!1,h.autoungrabify,h.autoungrabifyNodes),autounselectify:d(!1,h.autounselectify),styleEnabled:void 0===h.styleEnabled?c:h.styleEnabled,zoom:a.number(h.zoom)?h.zoom:1,pan:{x:a.plainObject(h.pan)&&a.number(h.pan.x)?h.pan.x:0,y:a.plainObject(h.pan)&&a.number(h.pan.y)?h.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1},f=h.selectionType;p.selectionType=void 0===f||"additive"!==f&&"single"!==f?"single":f,a.number(h.minZoom)&&a.number(h.maxZoom)&&h.minZoom<h.maxZoom?(p.minZoom=h.minZoom,p.maxZoom=h.maxZoom):a.number(h.minZoom)&&void 0===h.maxZoom?p.minZoom=h.minZoom:a.number(h.maxZoom)&&void 0===h.minZoom&&(p.maxZoom=h.maxZoom);e.initRenderer(i.extend({hideEdgesOnViewport:h.hideEdgesOnViewport,textureOnViewport:h.textureOnViewport,wheelSensitivity:a.number(h.wheelSensitivity)&&h.wheelSensitivity>0?h.wheelSensitivity:1,motionBlur:void 0!==h.motionBlur&&h.motionBlur,motionBlurOpacity:void 0===h.motionBlurOpacity?.05:h.motionBlurOpacity,pixelRatio:a.number(h.pixelRatio)&&h.pixelRatio>0?h.pixelRatio:void 0,desktopTapThreshold:void 0===h.desktopTapThreshold?4:h.desktopTapThreshold,touchTapThreshold:void 0===h.touchTapThreshold?8:h.touchTapThreshold},h.renderer)),function(t,e){if(t.some(a.promise))return s.all(t).then(e);e(t)}([h.style,h.elements],function(t){var n=t[0],r=t[1];p.styleEnabled&&e.setStyle(n),h.initrender&&(e.on("initrender",h.initrender),e.on("initrender",function(){p.initrender=!0})),e.load(r,function(){e.startAnimationLoop(),p.ready=!0,a.fn(h.ready)&&e.on("ready",h.ready);for(var t=0;t<l.length;t++){var n=l[t];e.on("ready",n)}u&&(u.readies=[]),e.trigger("ready")},h.done)})},c=l.prototype;i.extend(c,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},ready:function(t){return this.isReady()?this.trigger("ready",[],t):this.on("ready",t),this},initrender:function(){return this._private.initrender},destroy:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return"null"===this._private.options.renderer.name},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container},options:function(){return i.copy(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(a.plainObject(t)){if(e.startBatch(),t.elements){var o={},s=function(t,n){for(var r=0;r<t.length;r++){var a=t[r],s=a.data.id,u=e.getElementById(s);o[s]=!0,0!==u.length?u.json(a):n?e.add(i.extend({group:n},a)):e.add(a)}};if(a.array(t.elements))s(t.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],h=t.elements[c];a.array(h)&&s(h,c)}r.stdFilter(function(t){return!o[t.id()]}).remove()}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan));for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],l=0;l<d.length;l++){var p=d[l];null!=t[p]&&e[p](t[p])}return e.endBatch(),this}if(void 0===t){var f={};return f.elements={},r.forEach(function(t){var e=t.group();f.elements[e]||(f.elements[e]=[]),f.elements[e].push(t.json())}),this._private.styleEnabled&&(f.style=e.style().json()),f.zoomingEnabled=e._private.zoomingEnabled,f.userZoomingEnabled=e._private.userZoomingEnabled,f.zoom=e._private.zoom,f.minZoom=e._private.minZoom,f.maxZoom=e._private.maxZoom,f.panningEnabled=e._private.panningEnabled,f.userPanningEnabled=e._private.userPanningEnabled,f.pan=i.copy(e._private.pan),f.boxSelectionEnabled=e._private.boxSelectionEnabled,f.renderer=i.copy(e._private.options.renderer),f.hideEdgesOnViewport=e._private.options.hideEdgesOnViewport,f.textureOnViewport=e._private.options.textureOnViewport,f.wheelSensitivity=e._private.options.wheelSensitivity,f.motionBlur=e._private.options.motionBlur,f}},scratch:u.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:u.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),[t("./add-remove"),t("./animation"),t("./events"),t("./export"),t("./layout"),t("./notification"),t("./renderer"),t("./search"),t("./style"),t("./viewport")].forEach(function(t){i.extend(c,t)}),e.exports=l},{"../collection":69,"../define":87,"../is":126,"../promise":129,"../util":143,"../window":150,"./add-remove":76,"./animation":77,"./events":78,"./export":79,"./layout":81,"./notification":82,"./renderer":83,"./search":84,"./style":85,"./viewport":86}],81:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o={layout:function(t){return(this._private.prevLayout=null==t?this._private.prevLayout:this.makeLayout(t)).run(),this},makeLayout:function(t){var e=this;if(null==t)return void r.error("Layout options must be specified to make a layout");if(null==t.name)return void r.error("A `name` must be specified to make a layout");var n=t.name,o=e.extension("layout",n);if(null==o)return void r.error("Can not apply layout: No such layout `"+n+"` found; did you include its JS file?");var a;return a=i.string(t.eles)?e.$(t.eles):null!=t.eles?t.eles:e.$(),new o(r.extend({},t,{cy:e,eles:a}))}};o.createLayout=o.makeLayout,e.exports=o},{"../is":126,"../util":143}],82:[function(t,e,n){"use strict";var r={notify:function(t){var e=this._private;if(e.batchingNotify){var n=e.batchNotifyEles,r=e.batchNotifyTypes;return t.eles&&n.merge(t.eles),void(r.ids[t.type]||(r.push(t.type),r.ids[t.type]=!0))}if(e.notificationsEnabled){var i=this.renderer();i&&i.notify(t)}},notifications:function(t){var e=this._private;if(void 0===t)return e.notificationsEnabled;e.notificationsEnabled=!!t},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchingStyle=t.batchingNotify=!0,t.batchStyleEles=this.collection(),t.batchNotifyEles=this.collection(),t.batchNotifyTypes=[],t.batchNotifyTypes.ids={}),t.batchCount++,this},endBatch:function(){var t=this._private;return t.batchCount--,0===t.batchCount&&(t.batchingStyle=!1,t.batchStyleEles.updateStyle(),t.batchingNotify=!1,this.notify({type:t.batchNotifyTypes,eles:t.batchNotifyEles})),this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.getElementById(i).data(o)}})}};e.exports=r},{}],83:[function(t,e,n){"use strict";var r=t("../util"),i={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.invalidateSize(),this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(t){var e=this,n=e.extension("renderer",t.name);if(null==n)return void r.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name);var i=r.extend({},t,{cy:e});e._private.renderer=new n(i)},destroyRenderer:function(){var t=this;t.notify({type:"destroy"});var e=t.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);t._private.renderer=null},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};i.invalidateDimensions=i.resize,e.exports=i},{"../util":143}],84:[function(t,e,n){"use strict";var r=t("../is"),i=t("../collection"),o={collection:function(t,e){return r.string(t)?this.$(t):r.elementOrCollection(t)?t.collection():r.array(t)?new i(this,t,e):new i(this)},nodes:function(t){var e=this.$(function(){return this.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(){return this.isEdge()});return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};o.elements=o.filter=o.$,e.exports=o},{"../collection":69,"../is":126}],85:[function(t,e,n){"use strict";var r=t("../is"),i=t("../style"),o={style:function(t){if(t){this.setStyle(t).update()}return this._private.style},setStyle:function(t){var e=this._private;return r.stylesheet(t)?e.style=t.generateStyle(this):r.array(t)?e.style=i.fromJson(this,t):r.string(t)?e.style=i.fromString(this,t):e.style=i(this),e.style}};e.exports=o},{"../is":126,"../style":135}],86:[function(t,e,n){"use strict";var r=t("../is"),i=t("../window"),o={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,i,o,a=arguments,s=this._private.pan;switch(a.length){case 0:return s;case 1:if(r.string(a[0]))return t=a[0],s[t];if(r.plainObject(a[0])){if(!this._private.panningEnabled)return this;n=a[0],i=n.x,o=n.y,r.number(i)&&(s.x=i),r.number(o)&&(s.y=o),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=a[0],e=a[1],"x"!==t&&"y"!==t||!r.number(e)||(s[t]=e),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(t){var e,n,i,o,a,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:r.plainObject(s[0])&&(i=s[0],o=i.x,a=i.y,r.number(o)&&(u.x+=o),r.number(a)&&(u.y+=a),this.trigger("pan viewport"));break;case 2:e=s[0],n=s[1],"x"!==e&&"y"!==e||!r.number(n)||(u[e]+=n),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(t,e){if(r.number(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n;if(r.string(t)){var i=t;t=this.$(i)}else if(r.boundingBox(t)){var o=t;n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else r.elementOrCollection(t)||(t=this.mutableElements());n=n||t.boundingBox();var a,s=this.width(),u=this.height();if(e=r.number(e)?e:0,!isNaN(s)&&!isNaN(u)&&s>0&&u>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){a=Math.min((s-2*e)/n.w,(u-2*e)/n.h),a=a>this._private.maxZoom?this._private.maxZoom:a,a=a<this._private.minZoom?this._private.minZoom:a;return{zoom:a,pan:{x:(s-a*(n.x1+n.x2))/2,y:(u-a*(n.y1+n.y2))/2}}}}},minZoom:function(t){return void 0===t?this._private.minZoom:(r.number(t)&&(this._private.minZoom=t),this)},maxZoom:function(t){return void 0===t?this._private.maxZoom:(r.number(t)&&(this._private.maxZoom=t),this)},zoom:function(t){var e,n;if(void 0===t)return this._private.zoom;if(r.number(t))n=t;else if(r.plainObject(t)){if(n=t.level,t.position){var i=t.position,o=this._private.pan,a=this._private.zoom;e={x:i.x*a+o.x,y:i.y*a+o.y}}else t.renderedPosition&&(e=t.renderedPosition);if(e&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!r.number(n)||e&&(!r.number(e.x)||!r.number(e.y)))return this;if(n=n>this._private.maxZoom?this._private.maxZoom:n,n=n<this._private.minZoom?this._private.minZoom:n,e){var s=this._private.pan,u=this._private.zoom,l=n,c={x:-l/u*(e.x-s.x)+e.x,y:-l/u*(e.y-s.y)+e.y};this._private.zoom=n,this._private.pan=c;var h=s.x!==c.x||s.y!==c.y;this.trigger(" zoom "+(h?" pan ":"")+" viewport ")}else this._private.zoom=n,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(t){var e=this._private,n=!0,i=!0,o=[],a=!1,s=!1;if(!t)return this;if(r.number(t.zoom)||(n=!1),r.plainObject(t.pan)||(i=!1),!n&&!i)return this;if(n){var u=t.zoom;u<e.minZoom||u>e.maxZoom||!e.zoomingEnabled?a=!0:(e.zoom=u,o.push("zoom"))}if(i&&(!a||!t.cancelOnFailedZoom)&&e.panningEnabled){var l=t.pan;r.number(l.x)&&(e.pan.x=l.x,s=!1),r.number(l.y)&&(e.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.trigger(o.join(" ")),this.notify({type:"viewport"})),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(r.string(t)){var n=t;t=this.mutableElements().filter(n)}else r.elementOrCollection(t)||(t=this.mutableElements());var i=t.boundingBox(),o=this.width(),a=this.height();e=void 0===e?this._private.zoom:e;return{x:(o-e*(i.x1+i.x2))/2,y:(a-e*(i.y1+i.y2))/2}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t=this._private,e=t.container;return t.sizeCache=t.sizeCache||(e?function(){var t=e.getBoundingClientRect(),n=i.getComputedStyle(e),r=function(t){return parseFloat(n.getPropertyValue(t))};return{width:t.width-r("padding-left")-r("padding-right")-r("border-left-width")-r("border-right-width"),height:t.height-r("padding-top")-r("padding-bottom")-r("border-top-width")-r("border-bottom-width")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}};o.centre=o.center,o.autolockNodes=o.autolock,o.autoungrabifyNodes=o.autoungrabify,e.exports=o},{"../is":126,"../window":150}],87:[function(t,e,n){"use strict";var r=t("./util"),i=t("./is"),o=t("./selector"),a=t("./promise"),s=t("./event"),u=t("./animation"),l={data:function(t){var e={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(t){},canSet:function(t){return!0}};return t=r.extend({},e,t),function(e,n){var r=t,o=this,a=void 0!==o.length,s=a?o:[o],u=a?o[0]:o;if(i.string(e)){if(r.allowGetting&&void 0===n){var l;return u&&(l=u._private[r.field][e]),l}if(r.allowSetting&&void 0!==n){var c=!r.immutableKeys[e];if(c){for(var h=0,d=s.length;h<d;h++)r.canSet(s[h])&&(s[h]._private[r.field][e]=n);r.updateStyle&&o.updateStyle(),r.onSet(o),r.settingTriggersEvent&&o[r.triggerFnName](r.settingEvent)}}}else if(r.allowSetting&&i.plainObject(e)){for(var p,f,g=e,v=Object.keys(g),h=0;h<v.length;h++){p=v[h],f=g[p];var c=!r.immutableKeys[p];if(c)for(var y=0;y<s.length;y++){var m=s[y];r.canSet(m)&&(m._private[r.field][p]=f)}}r.updateStyle&&o.updateStyle(),r.onSet(o),r.settingTriggersEvent&&o[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&i.fn(e)){var x=e;o.on(r.bindingEvent,x)}else if(r.allowGetting&&void 0===e){var l;return u&&(l=u._private[r.field]),l}return o}},removeData:function(t){var e={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=r.extend({},e,t),function(e){var n=t,r=this,o=void 0!==r.length,a=o?r:[r];if(i.string(e)){for(var s=e.split(/\s+/),u=s.length,l=0;l<u;l++){var c=s[l];if(!i.emptyString(c)){if(!n.immutableKeys[c])for(var h=0,d=a.length;h<d;h++)a[h]._private[n.field][c]=void 0}}n.triggerEvent&&r[n.triggerFnName](n.event)}else if(void 0===e){for(var h=0,d=a.length;h<d;h++)for(var p=a[h]._private[n.field],s=Object.keys(p),l=0;l<s.length;l++){var c=s[l],f=!n.immutableKeys[c];f&&(p[c]=void 0)}n.triggerEvent&&r[n.triggerFnName](n.event)}return r}},event:{regex:/(\w+)(\.(?:\w+|\*))?/,universalNamespace:".*",optionalTypeRegex:/(\w+)?(\.(?:\w+|\*))?/,falseCallback:function(){return!1}},on:function(t){var e={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return t=r.extend({},e,t),function(e,n,r,a){var s=this,u=void 0!==s.length,c=u?s:[s],h=i.string(e),d=t;if(i.plainObject(n)?(a=r,r=n,n=void 0):(i.fn(n)||n===!1)&&(a=n,r=void 0,n=void 0),(i.fn(r)||r===!1)&&(a=r,r=void 0),!i.fn(a)&&a!==!1&&h)return s;if(h){var p={};p[e]=a,e=p}for(var f=Object.keys(e),g=0;g<f.length;g++){var v=f[g];if(a=e[v],a===!1&&(a=l.event.falseCallback),i.fn(a)){v=v.split(/\s+/);for(var y=0;y<v.length;y++){var m=v[y];if(!i.emptyString(m)){var x=m.match(l.event.regex);if(x)for(var b=x[1],w=x[2]?x[2]:void 0,_={callback:a,data:r,delegated:!!n,selector:n,selObj:new o(n),type:b,namespace:w,unbindSelfOnTrigger:d.unbindSelfOnTrigger,unbindAllBindersOnTrigger:d.unbindAllBindersOnTrigger,binders:c},E=0;E<c.length;E++){var k=c[E]._private=c[E]._private||{};k.listeners=k.listeners||[],k.listeners.push(_)}}}}}return s}},eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.removeListener=e.unlisten=e.unbind=e.off,e.emit=e.trigger,e.pon=e.promiseOn=function(t,e){var n=this,r=Array.prototype.slice.call(arguments,0);return new a(function(t,e){var i=function(e){n.off.apply(n,a),t(e)},o=r.concat([i]),a=o.concat([]);n.on.apply(n,o)})}},off:function(t){var e={};return t=r.extend({},e,t),function(t,e,n){var r=this,o=void 0!==r.length,a=o?r:[r],s=i.string(t);if(0===arguments.length){for(var u=0;u<a.length;u++)a[u]._private=a[u]._private||{},x.listeners=[];return r}if((i.fn(e)||e===!1)&&(n=e,e=void 0),s){var c={};c[t]=n,t=c}for(var h=Object.keys(t),d=0;d<h.length;d++){var p=h[d];n=t[p],n===!1&&(n=l.event.falseCallback),p=p.split(/\s+/);for(var f=0;f<p.length;f++){var g=p[f];if(!i.emptyString(g)){var v=g.match(l.event.optionalTypeRegex);if(v)for(var y=v[1]?v[1]:void 0,m=v[2]?v[2]:void 0,u=0;u<a.length;u++)for(var x=a[u]._private=a[u]._private||{},b=x.listeners=x.listeners||[],w=0;w<b.length;w++){var _=b[w],E=!m||m===_.namespace,k=!y||_.type===y,T=!n||n===_.callback,N=E&&k&&T;N&&(b.splice(w,1),w--)}}}}return r}},trigger:function(t){var e={};return t=r.extend({},e,t),function(e,n,r){var o=this,a=void 0!==o.length,u=a?o:[o],c=i.string(e),h=i.plainObject(e),d=i.event(e),p=this._private=this._private||{},f=p.cy||(i.core(this)?this:null),g=!!f&&f.hasCompoundNodes();if(c){var v=e.split(/\s+/);e=[];for(var y=0;y<v.length;y++){var m=v[y];if(!i.emptyString(m)){var x=m.match(l.event.regex),b=x[1],w=x[2]?x[2]:void 0;e.push({type:b,namespace:w})}}}else if(h){var _=e;e=[_]}n?i.array(n)||(n=[n]):n=[];for(var y=0;y<e.length;y++)for(var E=e[y],k=0;k<u.length;k++){var m,T=u[k],p=T._private=T._private||{},N=p.listeners=p.listeners||[],S=i.element(T),L=S||t.layout;if(d?(m=E,m.cyTarget=m.cyTarget||T,m.cy=m.cy||f):m=new s(E,{cyTarget:T,cy:f,namespace:E.namespace}),E.layout&&(m.layout=E.layout),t.layout&&(m.layout=T),m.cyPosition){var C=m.cyPosition,D=f.zoom(),A=f.pan();m.cyRenderedPosition={x:C.x*D+A.x,y:C.y*D+A.y}}r&&(N=[{namespace:m.namespace,type:m.type,callback:r}]);for(var M=0;M<N.length;M++){var P=N[M],I=!P.namespace||P.namespace===m.namespace||P.namespace===l.event.universalNamespace,O=P.type===m.type,R=!P.delegated||T!==m.cyTarget&&i.element(m.cyTarget)&&P.selObj.matches(m.cyTarget),j=I&&O&&R;if(j){var B=[m];if(B=B.concat(n),P.data?m.data=P.data:m.data=void 0,(P.unbindSelfOnTrigger||P.unbindAllBindersOnTrigger)&&(N.splice(M,1),M--),P.unbindAllBindersOnTrigger)for(var F=P.binders,q=0;q<F.length;q++){var z=F[q];if(z&&z!==T)for(var V=z._private.listeners,G=0;G<V.length;G++){var X=V[G];X===P&&(V.splice(G,1),G--)}}var Y=P.delegated?m.cyTarget:T,U=P.callback.apply(Y,B);(U===!1||m.isPropagationStopped())&&(L=!1,U===!1&&(m.stopPropagation(),m.preventDefault()))}}if(L){var H=g?T._private.parent:null,W=null!=H&&0!==H.length;W?(H=H[0],H.trigger(m)):f.trigger(m)}}return o}},animated:function(t){var e={};return t=r.extend({},e,t),function(){var t=this,e=void 0!==t.length,n=e?t:[t];if(!(this._private.cy||this).styleEnabled())return!1;var r=n[0];return r?r._private.animation.current.length>0:void 0}},clearQueue:function(t){var e={};return t=r.extend({},e,t),function(){var t=this,e=void 0!==t.length,n=e?t:[t];if(!(this._private.cy||this).styleEnabled())return this;for(var r=0;r<n.length;r++){n[r]._private.animation.queue=[]}return this}},delay:function(t){var e={};return t=r.extend({},e,t),function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(t){var e={};return t=r.extend({},e,t),function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(t){var e={};return t=r.extend({},e,t),function(t,e){var n=this,i=void 0!==n.length,o=i?n:[n],a=this._private.cy||this,s=!i,l=!s;if(!a.styleEnabled())return this;var c=a.style();switch(t=r.extend({},t,e),void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(0===Object.keys(t).length)return new u(o[0],t);if(l&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),t.renderedPosition&&l){var h=t.renderedPosition,d=a.pan(),p=a.zoom();t.position={x:(h.x-d.x)/p,y:(h.y-d.y)/p}}if(t.panBy&&s){var f=t.panBy,g=a.pan();t.pan={x:g.x+f.x,y:g.y+f.y}}var v=t.center||t.centre;if(v&&s){var y=a.getCenterPan(v.eles,t.zoom);y&&(t.pan=y)}if(t.fit&&s){var m=t.fit,x=a.getFitViewport(m.eles||m.boundingBox,m.padding);x&&(t.pan=x.pan,t.zoom=x.zoom)}return new u(o[0],t)}},animate:function(t){var e={};return t=r.extend({},e,t),function(t,e){var n=this,i=void 0!==n.length,o=i?n:[n];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=r.extend({},t,e));for(var a=0;a<o.length;a++){var s=o[a],u=s.animated()&&(void 0===t.queue||t.queue);s.animation(t,u?{queue:!0}:void 0).play()}return this}},stop:function(t){var e={};return t=r.extend({},e,t),function(t,e){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){for(var s=i[a],u=s._private,l=u.animation.current,c=0;c<l.length;c++){var h=l[c],d=h._private;e&&(d.duration=0)}t&&(u.animation.queue=[]),e||(u.animation.current=[])}return o.notify({eles:this,type:"draw"}),this}}};e.exports=l},{"./animation":45,"./event":88,"./is":126,"./promise":129,"./selector":130,"./util":143}],88:[function(t,e,n){"use strict";function r(){return!1}function i(){return!0}var o=function(t,e){if(!(this instanceof o))return new o(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?i:r):this.type=t,e&&(this.type=void 0!==e.type?e.type:this.type,this.cy=e.cy,this.cyTarget=e.cyTarget,this.cyPosition=e.cyPosition,this.cyRenderedPosition=e.cyRenderedPosition,this.namespace=e.namespace,this.layout=e.layout,this.data=e.data,this.message=e.message),this.timeStamp=t&&t.timeStamp||Date.now()};o.prototype={instanceString:function(){return"event"},preventDefault:function(){this.isDefaultPrevented=i;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=i;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r},e.exports=o},{}],89:[function(t,e,n){"use strict";function r(t,e,n){var r=n,o=function(n){s.error("Can not register `"+e+"` for `"+t+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===t){if(c.prototype[e])return o(e);c.prototype[e]=n}else if("collection"===t){if(l.prototype[e])return o(e);l.prototype[e]=n}else if("layout"===t){for(var a=function(t){this.options=t,n.call(this,t),d.plainObject(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[]},h=a.prototype=Object.create(n.prototype),f=[],g=0;g<f.length;g++){var v=f[g];h[v]=h[v]||function(){return this}}h.start&&!h.run?h.run=function(){return this.start(),this}:!h.start&&h.run&&(h.start=function(){return this.run(),this});var y=n.prototype.stop;h.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var n=0;n<e.length;n++)e[n].stop()}return y?y.call(this):this.trigger("layoutstop"),this},h.destroy||(h.destroy=function(){return this}),h.on=u.on({layout:!0}),h.one=u.on({layout:!0,unbindSelfOnTrigger:!0}),h.once=u.on({layout:!0,unbindAllBindersOnTrigger:!0}),h.off=u.off({layout:!0}),h.trigger=u.trigger({layout:!0}),u.eventAliasesOn(h),r=a}else if("renderer"===t&&"null"!==e&&"base"!==e){var m=i("renderer","base"),x=m.prototype,b=n,w=n.prototype,_=function(){m.apply(this,arguments),b.apply(this,arguments)},E=_.prototype;for(var k in x){var T=x[k],N=null!=w[k];if(N)return o(k);E[k]=T}for(var k in w)E[k]=w[k];x.clientFunctions.forEach(function(t){E[t]=E[t]||function(){s.error("Renderer does not implement `renderer."+t+"()` on its prototype")}}),r=_}return s.setMap({map:p,keys:[t,e],value:r})}function i(t,e){return s.getMap({map:p,keys:[t,e]})}function o(t,e,n,r,i){return s.setMap({map:f,keys:[t,e,n,r],value:i})}function a(t,e,n,r){return s.getMap({map:f,keys:[t,e,n,r]})}var s=t("./util"),u=t("./define"),l=t("./collection"),c=t("./core"),h=t("./extensions"),d=t("./is"),p={},f={},g=function(){return 2===arguments.length?i.apply(null,arguments):3===arguments.length?r.apply(null,arguments):4===arguments.length?a.apply(null,arguments):5===arguments.length?o.apply(null,arguments):void s.error("Invalid extension access syntax")};c.prototype.extension=g,h.forEach(function(t){t.extensions.forEach(function(e){r(t.type,e.name,e.impl)})}),e.exports=g},{"./collection":69,"./core":80,"./define":87,"./extensions":90,"./is":126,"./util":143}],90:[function(t,e,n){"use strict";e.exports=[{type:"layout",extensions:t("./layout")},{type:"renderer",extensions:t("./renderer")}]},{"./layout":96,"./renderer":121}],91:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},s,t)}var i=t("../../util"),o=t("../../math"),a=t("../../is"),s={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,s=i.nodes().not(":parent"),u=i,l=o.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(a.elementOrCollection(n.roots))t=n.roots;else if(a.array(n.roots)){for(var c=[],h=0;h<n.roots.length;h++){var d=n.roots[h],p=r.getElementById(d);c.push(p)}t=r.collection(c)}else if(a.string(n.roots))t=r.$(n.roots);else if(n.directed)t=s.roots();else{for(var f=[],g=s;g.length>0;){var v=r.collection();i.bfs({roots:g[0],visit:function(t,e,n,r,i){v=v.add(n)},directed:!1}),g=g.not(v),f.push(v)}t=r.collection();for(var h=0;h<f.length;h++){var y=f[h],m=y.maxDegree(!1),x=y.filter(function(){return this.degree(!1)===m});t=t.add(x)}}var b=[],w={},_={},E={},k={},T={};u.bfs({roots:t,directed:n.directed,visit:function(t,e,n,r,i){var o=this[0],a=o.id();if(b[e]||(b[e]=[]),b[e].push(o),w[a]=!0,_[a]=e,E[a]=i,k[a]=r,i){var s=i.id();(T[s]=T[s]||[]).push(n)}}});for(var N=[],h=0;h<s.length;h++){var p=s[h];w[p.id()]||N.push(p)}for(var S=3*N.length,L=0;0!==N.length&&L<S;){for(var C=N.shift(),D=C.neighborhood().nodes(),A=!1,h=0;h<D.length;h++){var M=_[D[h].id()];if(void 0!==M){b[M].push(C),A=!0;break}}A||N.push(C),L++}for(;0!==N.length;){var C=N.shift(),A=!1;A||(0===b.length&&b.push([]),b[0].push(C))}var P=function(){for(var t=0;t<b.length;t++)for(var e=b[t],n=0;n<e.length;n++){var r=e[n];r._private.scratch.breadthfirst={depth:t,index:n}}};P();for(var I=0;I<n.maximalAdjustments;I++){for(var O=b.length,R=[],h=0;h<O;h++)for(var M=b[h],j=M.length,B=0;B<j;B++){var p=M[B],F=p._private.scratch.breadthfirst,q=function(t){for(var e,n=t.connectedEdges(function(){return this.data("target")===t.id()}),r=t._private.scratch.breadthfirst,i=0,o=0;o<n.length;o++){var a=n[o],s=a.source()[0],u=s._private.scratch.breadthfirst;r.depth<=u.depth&&i<u.depth&&(i=u.depth,e=s)}return e}(p);q&&(F.intEle=q,R.push(p))}for(var h=0;h<R.length;h++){var p=R[h],F=p._private.scratch.breadthfirst,q=F.intEle,z=q._private.scratch.breadthfirst;b[F.depth].splice(F.index,1);for(var V=z.depth+1;V>b.length-1;)b.push([]);b[V].push(p),F.depth=V,F.index=b[V].length-1}P()}var G=0;if(n.avoidOverlap){for(var h=0;h<s.length;h++){var X=s[h],Y=X.boundingBox(),U=Y.w,H=Y.h;G=Math.max(G,U,H)}G*=n.spacingFactor}for(var W={},$=function(t){if(W[t.id()])return W[t.id()];for(var e=t._private.scratch.breadthfirst.depth,n=t.neighborhood().nodes().not(":parent").intersection(s),r=0,i=0,o=0;o<n.length;o++){var a=n[o],u=a._private.scratch.breadthfirst,l=u.index,c=u.depth,h=b[c].length;(e>c||0===e)&&(r+=l/h,i++)}return i=Math.max(1,i),r/=i,0===i&&(r=void 0),W[t.id()]=r,r},Z=function(t,e){return $(t)-$(e)},Q=0;Q<3;Q++){for(var h=0;h<b.length;h++)b[h]=b[h].sort(Z);P()}for(var K=0,h=0;h<b.length;h++)K=Math.max(b[h].length,K);for(var J={x:l.x1+l.w/2,y:l.x1+l.h/2},tt={},h=b.length-1;h>=0;h--)for(var M=b[h],B=0;B<M.length;B++){var C=M[B];tt[C.id()]=function(t,e){var r=t._private.scratch.breadthfirst,i=r.depth,o=r.index,a=b[i].length,s=Math.max(l.w/(a+1),G),u=Math.max(l.h/(b.length+1),G),c=Math.min(l.w/2/b.length,l.h/2/b.length);if(c=Math.max(c,G),n.circle){if(n.circle){var h=c*i+c-(b.length>0&&b[0].length<=3?c/2:0),d=2*Math.PI/b[i].length*o;return 0===i&&1===b[0].length&&(h=1),{x:J.x+h*Math.cos(d),y:J.y+h*Math.sin(d)}}return{x:J.x+(o+1-(a+1)/2)*s,y:(i+1)*u}}var p={x:J.x+(o+1-(a+1)/2)*s,y:(i+1)*u};return p}(C,h===b.length-1)}return s.layoutPositions(this,n,function(){return tt[this.id()]}),this},e.exports=r},{"../../is":126,"../../math":128,"../../util":143}],92:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},s,t)}var i=t("../../util"),o=t("../../math"),a=t("../../is"),s={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,s=r.nodes().not(":parent");e.sort&&(s=s.sort(e.sort));for(var u,l=o.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),c={x:l.x1+l.w/2,y:l.y1+l.h/2},h=void 0===e.sweep?2*Math.PI-2*Math.PI/s.length:e.sweep,d=h/Math.max(1,s.length-1),p=0,f=0;f<s.length;f++){var g=s[f],v=g.boundingBox(),y=v.w,m=v.h;p=Math.max(p,y,m)}
if(u=a.number(e.radius)?e.radius:s.length<=1?0:Math.min(l.h,l.w)/2-p,s.length>1&&e.avoidOverlap){p*=1.75;var x=Math.cos(d)-Math.cos(0),b=Math.sin(d)-Math.sin(0),w=Math.sqrt(p*p/(x*x+b*b));u=Math.max(w,u)}var _=function(t,n){var r=e.startAngle+t*d*(i?1:-1),o=u*Math.cos(r),a=u*Math.sin(r);return{x:c.x+o,y:c.y+a}};return s.layoutPositions(this,e,_),this},e.exports=r},{"../../is":126,"../../math":128,"../../util":143}],93:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},a,t)}var i=t("../../util"),o=t("../../math"),a={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,a=i.nodes().not(":parent"),s=o.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},l=[],c=e.startAngle,h=0,d=0;d<a.length;d++){var p,f=a[d];p=e.concentric.apply(f,[f]),l.push({value:p,node:f}),f._private.scratch.concentric=p}a.updateStyle();for(var d=0;d<a.length;d++){var f=a[d],g=f.boundingBox();h=Math.max(h,g.w,g.h)}l.sort(function(t,e){return e.value-t.value});for(var v=e.levelWidth(a),y=[[]],m=y[0],d=0;d<l.length;d++){var x=l[d];if(m.length>0){Math.abs(m[0].value-x.value)>=v&&(m=[],y.push(m))}m.push(x)}var b=h+e.minNodeSpacing;if(!e.avoidOverlap){var w=y.length>0&&y[0].length>1,_=Math.min(s.w,s.h)/2-b,E=_/(y.length+w?1:0);b=Math.min(b,E)}for(var k=0,d=0;d<y.length;d++){var T=y[d],N=void 0===e.sweep?2*Math.PI-2*Math.PI/T.length:e.sweep,S=T.dTheta=N/Math.max(1,T.length-1);if(T.length>1&&e.avoidOverlap){var L=Math.cos(S)-Math.cos(0),C=Math.sin(S)-Math.sin(0),D=Math.sqrt(b*b/(L*L+C*C));k=Math.max(D,k)}T.r=k,k+=b}if(e.equidistant){for(var A=0,k=0,d=0;d<y.length;d++){var T=y[d],M=T.r-k;A=Math.max(A,M)}k=0;for(var d=0;d<y.length;d++){var T=y[d];0===d&&(k=T.r),T.r=k,k+=A}}for(var P={},d=0;d<y.length;d++)for(var T=y[d],S=T.dTheta,k=T.r,I=0;I<T.length;I++){var x=T[I],c=e.startAngle+(n?1:-1)*S*I,O={x:u.x+k*Math.cos(c),y:u.y+k*Math.sin(c)};P[x.node.id()]=O}return a.layoutPositions(this,e,function(){return P[this.id()]}),this},e.exports=r},{"../../math":128,"../../util":143}],94:[function(t,e,n){"use strict";function r(t){this.options=o.extend({},l,t),this.options.layout=this}var i,o=t("../../util"),a=t("../../math"),s=t("../../thread"),u=t("../../is"),l={ready:function(){},stop:function(){},animate:!0,animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,randomize:!1,componentSpacing:100,nodeRepulsion:function(t){return 4e5},nodeOverlap:10,idealEdgeLength:function(t){return 10},edgeElasticity:function(t){return 100},nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1,useMultitasking:!0};r.prototype.run=function(){var t=this.options,e=t.cy,n=this,r=this.thread;r&&!r.stopped()||(r=this.thread=s({disabled:!t.useMultitasking})),n.stopped=!1,n.trigger({type:"layoutstart",layout:n}),i=!0===t.debug;var a=c(e,n,t);i&&p(a),t.randomize&&f(a,e);var u=Date.now(),l=!1,h=function(n){n=n||{},l&&!n.next||!n.force&&Date.now()-u<t.animationThreshold||(l=!0,o.requestAnimationFrame(function(){g(a,e,t),!0===t.fit&&e.fit(t.padding),l=!1,n.next&&n.next()}))};r.on("message",function(t){var e=t.message;a.layoutNodes=e,h()}),r.pass({layoutInfo:a,options:{animate:t.animate,refresh:t.refresh,componentSpacing:t.componentSpacing,nodeOverlap:t.nodeOverlap,nestingFactor:t.nestingFactor,gravity:t.gravity,numIter:t.numIter,initialTemp:t.initialTemp,coolingFactor:t.coolingFactor,minTemp:t.minTemp}}).run(function(t){var e,n=t.layoutInfo,r=t.options,i=function(t,e,n){o(t,e),l(t,e),c(t,e),h(t,e),d(t,e)},o=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,o=0;o<i;o++)for(var s=t.layoutNodes[t.idToIndex[r[o]]],u=o+1;u<i;u++){var l=t.layoutNodes[t.idToIndex[r[u]]];a(s,l,t,e)}},a=function(t,e,n,r){if(t.cmptId===e.cmptId||n.isCompound){var i=e.positionX-t.positionX,o=e.positionY-t.positionY;if(0!==i||0!==o){var a=s(t,e,i,o);if(a>0)var l=r.nodeOverlap*a,c=Math.sqrt(i*i+o*o),h=l*i/c,d=l*o/c;else var p=u(t,i,o),f=u(e,-1*i,-1*o),g=f.x-p.x,v=f.y-p.y,y=g*g+v*v,c=Math.sqrt(y),l=(t.nodeRepulsion+e.nodeRepulsion)/y,h=l*g/c,d=l*v/c;t.isLocked||(t.offsetX-=h,t.offsetY-=d),e.isLocked||(e.offsetX+=h,e.offsetY+=d)}}},s=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else var i=e.maxX-t.minX;if(r>0)var o=t.maxY-e.minY;else var o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},u=function(t,e,n){var r=t.positionX,i=t.positionY,o=t.height||1,a=t.width||1,s=n/e,u=o/a,l={};do{if(0===e&&0<n){l.x=r,l.y=i+o/2;break}if(0===e&&0>n){l.x=r,l.y=i+o/2;break}if(0<e&&-1*u<=s&&s<=u){l.x=r+a/2,l.y=i+a*n/2/e;break}if(0>e&&-1*u<=s&&s<=u){l.x=r-a/2,l.y=i-a*n/2/e;break}if(0<n&&(s<=-1*u||s>=u)){l.x=r+o*e/2/n,l.y=i+o/2;break}if(0>n&&(s<=-1*u||s>=u)){l.x=r-o*e/2/n,l.y=i-o/2;break}}while(!1);return l},l=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.idToIndex[r.sourceId],o=t.layoutNodes[i],a=t.idToIndex[r.targetId],s=t.layoutNodes[a],l=s.positionX-o.positionX,c=s.positionY-o.positionY;if(0===l&&0===c)return;var h=u(o,l,c),d=u(s,-1*l,-1*c),p=d.x-h.x,f=d.y-h.y,g=Math.sqrt(p*p+f*f),v=Math.pow(r.idealLength-g,2)/r.elasticity;if(0!==g)var y=v*p/g,m=v*f/g;else var y=0,m=0;o.isLocked||(o.offsetX+=y,o.offsetY+=m),s.isLocked||(s.offsetX-=y,s.offsetY-=m)}},c=function(t,e){for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var o=t.clientHeight/2,a=t.clientWidth/2;else var s=t.layoutNodes[t.idToIndex[r[0]]],u=t.layoutNodes[t.idToIndex[s.parentId]],o=u.positionX,a=u.positionY;for(var l=0;l<i;l++){var c=t.layoutNodes[t.idToIndex[r[l]]];if(!c.isLocked){var h=o-c.positionX,d=a-c.positionY,p=Math.sqrt(h*h+d*d);if(p>1){var f=e.gravity*h/p,g=e.gravity*d/p;c.offsetX+=f,c.offsetY+=g}}}}},h=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var o=n[r++],a=t.idToIndex[o],s=t.layoutNodes[a],u=s.children;if(0<u.length&&!s.isLocked){for(var l=s.offsetX,c=s.offsetY,h=0;h<u.length;h++){var d=t.layoutNodes[t.idToIndex[u[h]]];d.offsetX+=l,d.offsetY+=c,n[++i]=u[h]}s.offsetX=0,s.offsetY=0}}},d=function(t,e){for(var n=0;n<t.nodeSize;n++){var r=t.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<t.nodeSize;n++){var r=t.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var i=p(r.offsetX,r.offsetY,t.temperature);r.positionX+=i.x,r.positionY+=i.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,f(r,t)}}for(var n=0;n<t.nodeSize;n++){var r=t.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},p=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else var i={x:t,y:e};return i},f=function(t,e){var n=t.parentId;if(null!=n){var r=e.layoutNodes[e.idToIndex[n]],i=!1;return(null==r.maxX||t.maxX+r.padRight>r.maxX)&&(r.maxX=t.maxX+r.padRight,i=!0),(null==r.minX||t.minX-r.padLeft<r.minX)&&(r.minX=t.minX-r.padLeft,i=!0),(null==r.maxY||t.maxY+r.padBottom>r.maxY)&&(r.maxY=t.maxY+r.padBottom,i=!0),(null==r.minY||t.minY-r.padTop<r.minY)&&(r.minY=t.minY-r.padTop,i=!0),i?f(r,e):void 0}},g=0;do{for(var v=0;v<r.refresh&&g<r.numIter;){var e=function(t){return i(n,r,t),n.temperature=n.temperature*r.coolingFactor,!(n.temperature<r.minTemp)}(g);if(!e)break;v++,g++}r.animate&&broadcast(n.layoutNodes)}while(e&&g+1<r.numIter);return function(t,e){for(var r=n.layoutNodes,i=[],o=0;o<r.length;o++){var a=r[o],s=a.cmptId;(i[s]=i[s]||[]).push(a)}for(var u=0,o=0;o<i.length;o++){var l=i[o];if(l){l.x1=1/0,l.x2=-(1/0),l.y1=1/0,l.y2=-(1/0);for(var c=0;c<l.length;c++){var h=l[c];l.x1=Math.min(l.x1,h.positionX-h.width/2),l.x2=Math.max(l.x2,h.positionX+h.width/2),l.y1=Math.min(l.y1,h.positionY-h.height/2),l.y2=Math.max(l.y2,h.positionY+h.height/2)}l.w=l.x2-l.x1,l.h=l.y2-l.y1,u+=l.w*l.h}}i.sort(function(t,e){return e.w*e.h-t.w*t.h});for(var d=0,p=0,f=0,g=0,v=Math.sqrt(u)*n.clientWidth/n.clientHeight,o=0;o<i.length;o++){var l=i[o];if(l){for(var c=0;c<l.length;c++){var h=l[c];h.isLocked||(h.positionX+=d,h.positionY+=p)}d+=l.w+e.componentSpacing,f+=l.w+e.componentSpacing,g=Math.max(g,l.h),f>v&&(p+=g+e.componentSpacing,d=0,f=0,g=0)}}}(n,r),n}).then(function(t){a.layoutNodes=t.layoutNodes,r.stop(),d()});var d=function(){h({force:!0,next:function(){n.one("layoutstop",t.stop),n.trigger({type:"layoutstop",layout:n})}})};return this},r.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},r.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var c=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:a.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},s=n.eles.components(),l={},c=0;c<s.length;c++)for(var d=s[c],p=0;p<d.length;p++){var f=d[p];l[f.id()]=c}for(var c=0;c<o.nodeSize;c++){var g=i[c],v=g.boundingBox(),y={};y.isLocked=g.locked(),y.id=g.data("id"),y.parentId=g.data("parent"),y.cmptId=l[g.id()],y.children=[],y.positionX=g.position("x"),y.positionY=g.position("y"),y.offsetX=0,y.offsetY=0,y.height=v.w,y.width=v.h,y.maxX=y.positionX+y.width/2,y.minX=y.positionX-y.width/2,y.maxY=y.positionY+y.height/2,y.minY=y.positionY-y.height/2,y.padLeft=parseFloat(g.style("padding")),y.padRight=parseFloat(g.style("padding")),y.padTop=parseFloat(g.style("padding")),y.padBottom=parseFloat(g.style("padding")),y.nodeRepulsion=u.fn(n.nodeRepulsion)?n.nodeRepulsion.call(g,g):n.nodeRepulsion,o.layoutNodes.push(y),o.idToIndex[y.id]=c}for(var m=[],x=0,b=-1,w=[],c=0;c<o.nodeSize;c++){var g=o.layoutNodes[c],_=g.parentId;null!=_?o.layoutNodes[o.idToIndex[_]].children.push(g.id):(m[++b]=g.id,w.push(g.id))}for(o.graphSet.push(w);x<=b;){var E=m[x++],k=o.idToIndex[E],f=o.layoutNodes[k],T=f.children;if(T.length>0){o.graphSet.push(T);for(var c=0;c<T.length;c++)m[++b]=T[c]}}for(var c=0;c<o.graphSet.length;c++)for(var N=o.graphSet[c],p=0;p<N.length;p++){var S=o.idToIndex[N[p]];o.indexToGraph[S]=c}for(var c=0;c<o.edgeSize;c++){var L=r[c],C={};C.id=L.data("id"),C.sourceId=L.data("source"),C.targetId=L.data("target");var D=u.fn(n.idealEdgeLength)?n.idealEdgeLength.call(L,L):n.idealEdgeLength,A=u.fn(n.edgeElasticity)?n.edgeElasticity.call(L,L):n.edgeElasticity,M=o.idToIndex[C.sourceId],P=o.idToIndex[C.targetId];if(o.indexToGraph[M]!=o.indexToGraph[P]){for(var I=h(C.sourceId,C.targetId,o),O=o.graphSet[I],R=0,y=o.layoutNodes[M];-1===O.indexOf(y.id);)y=o.layoutNodes[o.idToIndex[y.parentId]],R++;for(y=o.layoutNodes[P];-1===O.indexOf(y.id);)y=o.layoutNodes[o.idToIndex[y.parentId]],R++;D*=R*n.nestingFactor}C.idealLength=D,C.elasticity=A,o.layoutEdges.push(C)}return o},h=function(t,e,n){var r=d(t,e,0,n);return 2>r.count?0:r.graph},d=function(t,e,n,r){var i=r.graphSet[n];if(-1<i.indexOf(t)&&-1<i.indexOf(e))return{count:2,graph:n};for(var o=0,a=0;a<i.length;a++){var s=i[a],u=r.idToIndex[s],l=r.layoutNodes[u].children;if(0!==l.length){var c=r.indexToGraph[r.idToIndex[l[0]]],h=d(t,e,c,r);if(0!==h.count){if(1!==h.count)return h;if(2===++o)break}}}return{count:o,graph:n}},p=function(t){if(i){console.debug("layoutNodes:");for(var e=0;e<t.nodeSize;e++){var n=t.layoutNodes[e],r="\nindex: "+e+"\nId: "+n.id+"\nChildren: "+n.children.toString()+"\nparentId: "+n.parentId+"\npositionX: "+n.positionX+"\npositionY: "+n.positionY+"\nOffsetX: "+n.offsetX+"\nOffsetY: "+n.offsetY+"\npadLeft: "+n.padLeft+"\npadRight: "+n.padRight+"\npadTop: "+n.padTop+"\npadBottom: "+n.padBottom;console.debug(r)}console.debug("idToIndex");for(var e in t.idToIndex)console.debug("Id: "+e+"\nIndex: "+t.idToIndex[e]);console.debug("Graph Set");for(var o=t.graphSet,e=0;e<o.length;e++)console.debug("Set : "+e+": "+o[e].toString());for(var r="IndexToGraph",e=0;e<t.indexToGraph.length;e++)r+="\nIndex : "+e+" Graph: "+t.indexToGraph[e];console.debug(r),r="Layout Edges";for(var e=0;e<t.layoutEdges.length;e++){var a=t.layoutEdges[e];r+="\nEdge Index: "+e+" ID: "+a.id+" SouceID: "+a.sourceId+" TargetId: "+a.targetId+" Ideal Length: "+a.idealLength}console.debug(r),r="nodeSize: "+t.nodeSize,r+="\nedgeSize: "+t.edgeSize,r+="\ntemperature: "+t.temperature,console.debug(r)}},f=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},g=function(t,e,n){var r=n.layout,i=n.eles.nodes(),o=t.boundingBox,a={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};n.boundingBox&&(i.forEach(function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions(function(e,r){var i=t.layoutNodes[t.idToIndex[r.data("id")]];if(n.boundingBox){var s=(i.positionX-a.x1)/a.w,u=(i.positionY-a.y1)/a.h;return{x:o.x1+s*o.w,y:o.y1+u*o.h}}return{x:i.positionX,y:i.positionY}}),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.trigger({type:"layoutready",layout:this}))};e.exports=r},{"../../is":126,"../../math":128,"../../thread":141,"../../util":143}],95:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},a,t)}var i=t("../../util"),o=t("../../math"),a={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=o.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===a.h||0===a.w)i.layoutPositions(this,e,function(){return{x:a.x1,y:a.y1}});else{var s=i.size(),u=Math.sqrt(s*a.h/a.w),l=Math.round(u),c=Math.round(a.w/a.h*u),h=function(t){if(null==t)return Math.min(l,c);Math.min(l,c)==l?l=t:c=t},d=function(t){if(null==t)return Math.max(l,c);Math.max(l,c)==l?l=t:c=t},p=e.rows,f=null!=e.cols?e.cols:e.columns;if(null!=p&&null!=f)l=p,c=f;else if(null!=p&&null==f)l=p,c=Math.ceil(s/l);else if(null==p&&null!=f)c=f,l=Math.ceil(s/c);else if(c*l>s){var g=h(),v=d();(g-1)*v>=s?h(g-1):(v-1)*g>=s&&d(v-1)}else for(;c*l<s;){var g=h(),v=d();(v+1)*g>=s?d(v+1):h(g+1)}var y=a.w/c,m=a.h/l;if(e.condense&&(y=0,m=0),e.avoidOverlap)for(var x=0;x<i.length;x++){var b=i[x],w=b._private.position;null!=w.x&&null!=w.y||(w.x=0,w.y=0);var _=b.boundingBox(),E=e.avoidOverlapPadding,k=_.w+E,T=_.h+E;y=Math.max(y,k),m=Math.max(m,T)}for(var N={},S=function(t,e){return!!N["c-"+t+"-"+e]},L=function(t,e){N["c-"+t+"-"+e]=!0},C=0,D=0,A=function(){++D>=c&&(D=0,C++)},M={},x=0;x<i.length;x++){var b=i[x],P=e.position(b);if(P&&(void 0!==P.row||void 0!==P.col)){var w={row:P.row,col:P.col};if(void 0===w.col)for(w.col=0;S(w.row,w.col);)w.col++;else if(void 0===w.row)for(w.row=0;S(w.row,w.col);)w.row++;M[b.id()]=w,L(w.row,w.col)}}var I=function(t,e){var n,r;if(e.locked()||e.isParent())return!1;var i=M[e.id()];if(i)n=i.col*y+y/2+a.x1,r=i.row*m+m/2+a.y1;else{for(;S(C,D);)A();n=D*y+y/2+a.x1,r=C*m+m/2+a.y1,L(C,D),A()}return{x:n,y:r}};i.layoutPositions(this,e,I)}return this},e.exports=r},{"../../math":128,"../../util":143}],96:[function(t,e,n){"use strict";e.exports=[{name:"breadthfirst",impl:t("./breadthfirst")},{name:"circle",impl:t("./circle")},{name:"concentric",impl:t("./concentric")},{name:"cose",impl:t("./cose")},{name:"grid",impl:t("./grid")},{name:"null",impl:t("./null")},{name:"preset",impl:t("./preset")},{name:"random",impl:t("./random")}]},{"./breadthfirst":91,"./circle":92,"./concentric":93,"./cose":94,"./grid":95,"./null":97,"./preset":98,"./random":99}],97:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},o,t)}var i=t("../../util"),o={ready:function(){},stop:function(){}};r.prototype.run=function(){var t=this.options,e=t.eles,n=this;t.cy;return n.trigger("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",t.ready),n.trigger("layoutready"),n.one("layoutstop",t.stop),n.trigger("layoutstop"),this},r.prototype.stop=function(){return this},e.exports=r},{"../../util":143}],98:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},a,t)}var i=t("../../util"),o=t("../../is"),a={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){function t(t){if(null==e.positions)return null;if(i)return e.positions.apply(t,[t]);var n=e.positions[t._private.data.id];return null==n?null:n}var e=this.options,n=e.eles,r=n.nodes(),i=o.fn(e.positions);return r.layoutPositions(this,e,function(e,n){var r=t(n);return!n.locked()&&null!=r&&r}),this},e.exports=r},{"../../is":126,"../../util":143}],99:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},a,t)}var i=t("../../util"),o=t("../../math"),a={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=n.nodes().not(":parent"),i=o.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(t,e){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}};return r.layoutPositions(this,t,a),this},e.exports=r},{"../../math":128,"../../util":143}],100:[function(t,e,n){"use strict";var r=t("../../../math"),i=t("../../../is"),o=t("../../../util"),a={};a.arrowShapeWidth=.3,a.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,o){var a=i.x-n/2-o,s=i.x+n/2+o,u=i.y-n/2-o,l=i.y+n/2+o;return a<=t&&t<=s&&u<=e&&e<=l},a=function(t,e,n,r,i){var o=t*Math.cos(r)-e*Math.sin(r),a=t*Math.sin(r)+e*Math.cos(r),s=o*n,u=a*n;return{x:s+i.x,y:u+i.y}},s=function(t,e,n,r){for(var i=[],o=0;o<t.length;o+=2){var s=t[o],u=t[o+1];i.push(a(s,u,e,n,r))}return i},u=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},l=function(a,l){i.string(l)&&(l=t[l]),t[a]=o.extend({name:a,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,i,o,a){var l=u(s(this.points,n+2*a,i,o));return r.pointInsidePolygonPoints(t,e,l)},roughCollide:n,draw:function(t,n,r,i){var o=s(this.points,n,r,i);e.arrowShapeImpl("polygon")(t,o)},spacing:function(t){return 0},gap:function(t){return 2*t.pstyle("width").pfValue}},l)};l("none",{collide:o.falsify,roughCollide:o.falsify,draw:o.noop,spacing:o.zeroify,gap:o.zeroify}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,r,i){var o=s(this.points,n,r,i),u=this.controlPoint,l=a(u[0],u[1],n,r,i);e.arrowShapeImpl(this.name)(t,o,l)},gap:function(t){return t.pstyle("width").pfValue}}),l("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,i,o,a){var l=u(s(this.points,n+2*a,i,o)),c=u(s(this.pointsTee,n+2*a,i,o));return r.pointInsidePolygonPoints(t,e,l)||r.pointInsidePolygonPoints(t,e,c)},draw:function(t,n,r,i){var o=s(this.points,n,r,i),a=s(this.pointsTee,n,r,i);e.arrowShapeImpl(this.name)(t,o,a)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return t.pstyle("width").pfValue}}),l("circle",{radius:.15,collide:function(t,e,n,r,i,o){var a=i;return Math.pow(a.x-t,2)+Math.pow(a.y-e,2)<=Math.pow((n+2*o)*this.radius,2)},draw:function(t,n,r,i){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue)*this.radius}}),l("inhibitor",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),l("tee","inhibitor"),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue}})},e.exports=a},{"../../../is":126,"../../../math":128,"../../../util":143}],101:[function(t,e,n){"use strict";function r(t,e,n){for(var r=function(t,e,n,r){return i.qbezierAt(t,e,n,r)},o=e._private,a=o.rstyle.bezierPts,s=0;s<t.bezierProjPcts.length;s++){var u=t.bezierProjPcts[s];a.push({x:r(n[0],n[2],n[4],u),y:r(n[1],n[3],n[5],u)})}}var i=t("../../../math"),o=t("../../../is"),a=t("../../../util"),s=t("../../../collection/zsort"),u=t("../../../window"),l={};l.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),n=this,r=function(t,n){e.merge(t);for(var r=0;r<t.length;r++){var i=t[r],o=i._private,a=o.rstyle;a.clean=!1,o.bbCache=null;var s=a.dirtyEvents=a.dirtyEvents||{length:0};s[n.type]||(s[n.type]=!0,s.length++)}};n.binder(t).on("position.* style.* free.*","node",function(e){var n=e.cyTarget;if(r(n,e),r(n.connectedEdges(),e),t.hasCompoundNodes()){var i=n.parents();r(i,e),r(i.connectedEdges(),e)}}).on("add.* background.*","node",function(t){r(t.cyTarget,t)}).on("add.* style.*","edge",function(t){var e=t.cyTarget;r(e,t),r(e.parallelEdges(),t)}).on("remove.*","edge",function(t){for(var e=t.cyTarget,n=e.parallelEdges(),i=0;i<n.length;i++){var o=n[i];o.removed()||r(o,t)}});var i=function(r){if(r){var i=n.onUpdateEleCalcsFns;if(i)for(var o=0;o<i.length;o++){var a=i[o];a(r,e)}n.recalculateRenderedStyle(e,!1);for(var o=0;o<e.length;o++)e[o]._private.rstyle.dirtyEvents=null;e=t.collection()}};n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},l.onUpdateEleCalcs=function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},l.recalculateRenderedStyle=function(t,e){var n=[],r=[];if(!this.destroyed){void 0===e&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],a=o._private,s=a.rstyle;e&&s.clean||o.removed()||("nodes"===a.group?r.push(o):n.push(o),s.clean=!0)}for(var i=0;i<r.length;i++){var o=r[i],a=o._private,s=a.rstyle,u=a.position;this.recalculateNodeLabelProjection(o),s.nodeX=u.x,s.nodeY=u.y,s.nodeW=o.pstyle("width").pfValue,s.nodeH=o.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var i=0;i<n.length;i++){var o=n[i],a=o._private,s=a.rstyle,l=a.rscratch;this.recalculateEdgeLabelProjections(o),s.srcX=l.arrowStartX,s.srcY=l.arrowStartY,s.tgtX=l.arrowEndX,s.tgtY=l.arrowEndY,s.midX=l.midX,s.midY=l.midY,s.labelAngle=l.labelAngle,s.sourceLabelAngle=l.sourceLabelAngle,s.targetLabelAngle=l.targetLabelAngle}}},l.projectIntoViewport=function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=n.pan(),s=n.zoom();return[(t-i-a.x)/s,(e-o-a.y)/s]},l.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=u.getComputedStyle(t),r=function(t){return parseFloat(n.getPropertyValue(t))},i={left:r("padding-left")+r("border-left-width"),right:r("padding-right")+r("border-right-width"),top:r("padding-top")+r("border-top-width"),bottom:r("padding-bottom")+r("border-bottom-width")};return this.containerBB=[e.left+i.left,e.top+i.top,e.right-e.left-i.left-i.right,e.bottom-e.top-i.top-i.bottom]},l.invalidateContainerClientCoordsCache=function(){this.containerBB=null},l.findNearestElement=function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},l.findNearestElements=function(t,e,n,r){function o(t,e){if(t.isNode()){if(h)return;h=t,g.push(t)}if(t.isEdge()&&(null==e||e<w))if(c){if(c.pstyle("z-index").value===t.pstyle("z-index").value)for(var n=0;n<g.length;n++)if(g[n].isEdge()){g[n]=t,c=t,w=null!=e?e:w;break}}else g.push(t),c=t,w=null!=e?e:w}function s(r){var i=r._private;if("no"!==r.pstyle("events").strValue){var a=r.outerWidth()+2*x,s=r.outerHeight()+2*x,u=a/2,l=s/2,c=i.position;if(c.x-u<=t&&t<=c.x+u&&c.y-l<=e&&e<=c.y+l){var h=!n||r.visible()&&!r.transparent();if(n&&!h)return;if(p.nodeShapes[d.getNodeShape(r)].checkPoint(t,e,0,a,s,c.x,c.y))return o(r,0),!0}}}function u(t,e,n){return a.getPrefixedProperty(t,e,n)}function l(n,r){var a,s=n._private,l=b;a=r?r+"-":"";var c=n.pstyle(a+"label").value;if("yes"===n.pstyle("text-events").strValue&&c){var h=s.rstyle,d=n.pstyle("text-border-width").pfValue,p=u(h,"labelWidth",r)+d/2+2*l,f=u(h,"labelHeight",r)+d/2+2*l,g=u(h,"labelX",r),v=u(h,"labelY",r),y=u(s.rscratch,"labelAngle",r),m=g-p/2,x=g+p/2,w=v-f/2,_=v+f/2;if(y){var E=Math.cos(y),k=Math.sin(y),T=function(t,e){return t-=g,e-=v,{x:t*E-e*k+g,y:t*k+e*E+v}},N=T(m,w),S=T(m,_),L=T(x,w),C=T(x,_),D=[N.x,N.y,L.x,L.y,C.x,C.y,S.x,S.y];if(i.pointInsidePolygonPoints(t,e,D))return o(n),!0}else{var A={w:p,h:f,x1:m,x2:x,y1:w,y2:_};if(i.inBoundingBox(A,t,e))return o(n),!0}}}for(var c,h,d=this,p=this,f=p.getCachedZSortedEles(),g=[],v=p.cy.zoom(),y=p.cy.hasCompoundNodes(),m=(r?24:8)/v,x=(r?8:2)/v,b=(r?8:2)/v,w=1/0,_=f.length-1;_>=0;_--){var E=f[_];E.isNode()?s(E)||l(E):function(r){var a=r._private;if("no"!==r.pstyle("events").strValue){var u,l,c=a.rscratch,h=r.pstyle("width").pfValue,f=h/2+m,v=f*f,x=2*f,b=a.source,w=a.target,_=function(){return void 0!==l?l:n?r.visible()&&!r.transparent()?(l=!0,!0):(l=!1,!1):(l=!0,!0)};if("segments"===c.edgeType||"straight"===c.edgeType||"haystack"===c.edgeType){for(var E=c.allpts,k=0;k+3<E.length;k+=2)if(i.inLineVicinity(t,e,E[k],E[k+1],E[k+2],E[k+3],x)&&_()&&v>(u=i.sqdistToFiniteLine(t,e,E[k],E[k+1],E[k+2],E[k+3])))return o(r,u),!0}else if("bezier"===c.edgeType||"multibezier"===c.edgeType||"self"===c.edgeType||"compound"===c.edgeType)for(var E=c.allpts,k=0;k+5<c.allpts.length;k+=4)if(i.inBezierVicinity(t,e,E[k],E[k+1],E[k+2],E[k+3],E[k+4],E[k+5],x)&&_()&&v>(u=i.sqdistToQuadraticBezier(t,e,E[k],E[k+1],E[k+2],E[k+3],E[k+4],E[k+5])))return o(r,u),!0;if(_())for(var b=b||a.source,w=w||a.target,T=d.getArrowWidth(h),N=[{name:"source",x:c.arrowStartX,y:c.arrowStartY,angle:c.srcArrowAngle},{name:"target",x:c.arrowEndX,y:c.arrowEndY,angle:c.tgtArrowAngle},{name:"mid-source",x:c.midX,y:c.midY,angle:c.midsrcArrowAngle},{name:"mid-target",x:c.midX,y:c.midY,angle:c.midtgtArrowAngle}],k=0;k<N.length;k++){var S=N[k],L=p.arrowShapes[r.pstyle(S.name+"-arrow-shape").value];if(L.roughCollide(t,e,T,S.angle,{x:S.x,y:S.y},m)&&L.collide(t,e,T,S.angle,{x:S.x,y:S.y},m))return o(r),!0}y&&g.length>0&&(s(b),s(w))}}(E)||l(E)||l(E,"source")||l(E,"target")}return g},l.getAllInBox=function(t,e,n,r){var o=this.getCachedZSortedEles(),a=o.nodes,s=o.edges,u=[],l=Math.min(t,n),c=Math.max(t,n),h=Math.min(e,r),d=Math.max(e,r);t=l,n=c,e=h,r=d;for(var p=i.makeBoundingBox({x1:t,y1:e,x2:n,y2:r}),f=0;f<a.length;f++){var g=a[f],v=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1,includeShadows:!1});i.boundingBoxesIntersect(p,v)&&u.push(a[f])}for(var y=0;y<s.length;y++){var m=s[y],x=m._private,b=x.rscratch;if((null==b.startX||null==b.startY||i.inBoundingBox(p,b.startX,b.startY))&&(null==b.endX||null==b.endY||i.inBoundingBox(p,b.endX,b.endY)))if("bezier"===b.edgeType||"multibezier"===b.edgeType||"self"===b.edgeType||"compound"===b.edgeType||"segments"===b.edgeType||"haystack"===b.edgeType){for(var w=x.rstyle.bezierPts||x.rstyle.linePts||x.rstyle.haystackPts,_=!0,f=0;f<w.length;f++)if(!i.pointInBoundingBox(p,w[f])){_=!1;break}_&&u.push(m)}else"haystack"!==b.edgeType&&"straight"!==b.edgeType||u.push(m)}return u},l.getNodeShape=function(t){var e=this,n=t.pstyle("shape").value;if(t.isParent())return"rectangle"===n||"roundrectangle"===n?n:"rectangle";if("polygon"===n){var r=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(r).name}return n},l.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},l.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=t[n],i=r._private.rscratch;r.grabbed()&&!r.isParent()?e.push(r):i.inDragLayer?t.drag.push(r):t.nondrag.push(r)}for(var n=0;n<e.length;n++){var r=e[n];t.drag.push(r)}},l.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements(),n=[];n.nodes=[],n.edges=[];for(var r=0;r<e.length;r++){var i=e[r];(i.animated()||i.visible()&&!i.transparent())&&(n.push(i),i.isNode()?n.nodes.push(i):n.edges.push(i))}n.sort(s),this.cachedZSortedEles=n,this.updateCachedGrabbedEles()}else n=this.cachedZSortedEles;return n},l.projectLines=function(t){var e=t._private,n=e.rscratch,i=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===i||"bezier"===i||"self"===i||"compound"===i)for(var o=(e.rstyle.bezierPts=[],0);o+5<n.allpts.length;o+=4)r(this,t,n.allpts.slice(o,o+6));else if("segments"===i)for(var a=e.rstyle.linePts=[],o=0;o+1<n.allpts.length;o+=2)a.push({x:n.allpts[o],y:n.allpts[o+1]});else if("haystack"===i){var s=n.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue)*this.arrowShapeWidth},l.projectBezier=l.projectLines,l.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!o.emptyString(e)){var n,r,i=t._private,a=t.width(),s=t.height(),u=t.pstyle("padding").pfValue,l=i.position,c=t.pstyle("text-halign").strValue,h=t.pstyle("text-valign").strValue,d=i.rscratch,p=i.rstyle;switch(c){case"left":n=l.x-a/2-u;break;case"right":n=l.x+a/2+u;break;default:n=l.x}switch(h){case"top":r=l.y-s/2-u;break;case"bottom":r=l.y+s/2+u;break;default:r=l.y}d.labelX=n,d.labelY=r,p.labelX=n,p.labelY=r,this.applyLabelDimensions(t)}},l.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,o=this,s={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(s.mid||s.source||s.target){e={x:r.midX,y:r.midY};var u=function(t,e,r){a.setPrefixedProperty(n.rscratch,t,e,r),a.setPrefixedProperty(n.rstyle,t,e,r)};u("labelX",null,e.x),u("labelY",null,e.y);var l=function(){function t(t,e,n,r,o){var a=i.dist(e,n),s=t.segments[t.segments.length-1],u={p0:e,p1:n,t0:r,t1:o,startDist:s?s.startDist+s.length:0,length:a};t.segments.push(u),t.length+=a}if(l.cache)return l.cache;for(var e=[],a=0;a+5<r.allpts.length;a+=4){var s={x:r.allpts[a],y:r.allpts[a+1]},u={x:r.allpts[a+2],y:r.allpts[a+3]},c={x:r.allpts[a+4],y:r.allpts[a+5]};e.push({p0:s,p1:u,p2:c,startDist:0,length:0,segments:[]})}for(var h=n.rstyle.bezierPts,d=o.bezierProjPcts.length,a=0;a<e.length;a++){var p=e[a],f=e[a-1];f&&(p.startDist=f.startDist+f.length),t(p,p.p0,h[a*d],0,o.bezierProjPcts[0]);for(var g=0;g<d-1;g++)t(p,h[a*d+g],h[a*d+g+1],o.bezierProjPcts[g],o.bezierProjPcts[g+1]);t(p,h[a*d+d-1],p.p2,o.bezierProjPcts[d-1],1)}return l.cache=e},c=function(n){var o,a="source"===n;if(s[n]){var c=t.pstyle(n+"-text-offset").pfValue,h=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.atan(r/n)};switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var d,p=l(),f=0,g=0,v=0;v<p.length;v++){for(var y=p[a?v:p.length-1-v],m=0;m<y.segments.length;m++){var x=y.segments[a?m:y.segments.length-1-m],b=v===p.length-1&&m===y.segments.length-1;if(f=g,(g+=x.length)>=c||b){d={cp:y,segment:x};break}}if(d)break}var y=d.cp,x=d.segment,w=(c-f)/x.length,_=x.t1-x.t0,E=a?x.t0+_*w:x.t1-_*w;E=i.bound(0,E,1),e=i.qbezierPtAt(y.p0,y.p1,y.p2,E),o=function(t,e,n,r){var o=i.bound(0,r-.001,1),a=i.bound(0,r+.001,1);return h(i.qbezierPtAt(t,e,n,o),i.qbezierPtAt(t,e,n,a))}(y.p0,y.p1,y.p2,E);break;case"straight":case"segments":case"haystack":for(var k,T,N,S,L=0,C=r.allpts.length,v=0;v+3<C&&(a?(N={x:r.allpts[v],y:r.allpts[v+1]},S={x:r.allpts[v+2],y:r.allpts[v+3]}):(N={x:r.allpts[C-2-v],y:r.allpts[C-1-v]},S={x:r.allpts[C-4-v],y:r.allpts[C-3-v]}),k=i.dist(N,S),T=L,!((L+=k)>=c));v+=2);var D=c-T,E=D/k;E=i.bound(0,E,1),
e=i.lineAt(N,S,E),o=h(N,S)}u("labelX",n,e.x),u("labelY",n,e.y),u("labelAutoAngle",n,o)}};c("source"),c("target"),this.applyLabelDimensions(t)}},l.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},l.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r);a.setPrefixedProperty(n.rstyle,"labelWidth",e,i.width),a.setPrefixedProperty(n.rscratch,"labelWidth",e,i.width),a.setPrefixedProperty(n.rstyle,"labelHeight",e,i.height),a.setPrefixedProperty(n.rscratch,"labelHeight",e,i.height)},l.getLabelText=function(t,e){var n=t._private,r=e?e+"-":"",i=t.pstyle(r+"label").strValue,o=t.pstyle("text-transform").value,s=function(t,r){return r?(a.setPrefixedProperty(n.rscratch,t,e,r),r):a.getPrefixedProperty(n.rscratch,t,e)};if("none"==o||("uppercase"==o?i=i.toUpperCase():"lowercase"==o&&(i=i.toLowerCase())),"wrap"===t.pstyle("text-wrap").value){var u=s("labelKey");if(u&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var l=i.split("\n"),c=t.pstyle("text-max-width").pfValue,h=[],d=0;d<l.length;d++){var p=l[d];if(this.calculateLabelDimensions(t,p,"line="+p).width>c){for(var f=p.split(/\s+/),g="",v=0;v<f.length;v++){var y=f[v],m=0===g.length?y:g+" "+y;this.calculateLabelDimensions(t,m,"testLine="+m).width<=c?g+=y+" ":(h.push(g),g=y+" ")}g.match(/^\s+$/)||h.push(g)}else h.push(p)}s("labelWrapCachedLines",h),i=s("labelWrapCachedText",h.join("\n")),s("labelWrapKey",u)}return i},l.calculateLabelDimensions=function(t,e,n){var r=this,i=t._private.labelStyleKey+"$@$"+e;n&&(i+="$@$"+n);var o=r.labelDimCache||(r.labelDimCache={});if(o[i])return o[i];var a=t.pstyle("font-style").strValue,s=1*t.pstyle("font-size").pfValue+"px",u=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,c=this.labelCalcDiv;c||(c=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(c));var h=c.style;return h.fontFamily=u,h.fontStyle=a,h.fontSize=s,h.fontWeight=l,h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none",h.padding="0",h.lineHeight="1","wrap"===t.pstyle("text-wrap").value?h.whiteSpace="pre":h.whiteSpace="normal",c.textContent=e,o[i]={width:Math.ceil(c.clientWidth/1),height:Math.ceil(c.clientHeight/1)},o[i]},l.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)},l.findEdgeControlPoints=function(t){if(t&&0!==t.length){for(var e,n=this,r=n.cy,a=r.hasCompoundNodes(),s={},u=[],l=[],c=0;c<t.length;c++){var h=t[c],d=h._private,p=d.data,f=h.pstyle("curve-style").value,g="unbundled-bezier"===f||"segments"===f;if("none"!==h.pstyle("display").value)if("haystack"!==f){var v=p.source,y=p.target;e=v>y?y+"$-$"+v:v+"$-$"+y,g&&(e="unbundled$-$"+p.id),null==s[e]&&(s[e]=[],u.push(e)),s[e].push(h),g&&(s[e].hasUnbundled=!0)}else l.push(h)}for(var m,x,b,w,_,E,k,T,N,S,L,C,D,A,M=0;M<u.length;M++){e=u[M];var P=s[e];if(P.sort(function(t,e){return t.poolIndex()-e.poolIndex()}),m=P[0]._private.source,x=P[0]._private.target,!P.hasUnbundled&&m.id()>x.id()){var I=m;m=x,x=I}if(b=m._private,w=x._private,_=b.position,E=w.position,k=m.outerWidth(),T=m.outerHeight(),N=x.outerWidth(),S=x.outerHeight(),L=n.nodeShapes[this.getNodeShape(m)],C=n.nodeShapes[this.getNodeShape(x)],A=!1,P.length>1&&m!==x||P.hasUnbundled){var O=L.intersectLine(_.x,_.y,k,T,E.x,E.y,0),R=C.intersectLine(E.x,E.y,N,S,_.x,_.y,0),j={x1:O[0],x2:R[0],y1:O[1],y2:R[1]},B={x1:_.x,x2:E.x,y1:_.y,y2:E.y},F=R[1]-O[1],q=R[0]-O[0],z=Math.sqrt(q*q+F*F),V={x:q,y:F},G={x:V.x/z,y:V.y/z};D={x:-G.y,y:G.x},C.checkPoint(O[0],O[1],0,N,S,E.x,E.y)&&L.checkPoint(R[0],R[1],0,k,T,_.x,_.y)&&(D={},A=!0)}for(var h,X,Y,c=0;c<P.length;c++){h=P[c],X=h._private,Y=X.rscratch;var U=Y.lastEdgeIndex,H=c,W=Y.lastNumEdges,$=P.length,f=h.pstyle("curve-style").value,Z=h.pstyle("control-point-distances"),Q=h.pstyle("control-point-weights"),K=Z&&Q?Math.min(Z.value.length,Q.value.length):1,J=h.pstyle("control-point-step-size").pfValue,tt=Z?Z.pfValue[0]:void 0,et=Q.value[0],g="unbundled-bezier"===f||"segments"===f,nt=Y.lastSrcCtlPtX,rt=_.x,it=Y.lastSrcCtlPtY,ot=_.y,at=Y.lastSrcCtlPtW,st=m.outerWidth(),ut=Y.lastSrcCtlPtH,lt=m.outerHeight(),ct=Y.lastTgtCtlPtX,ht=E.x,dt=Y.lastTgtCtlPtY,pt=E.y,ft=Y.lastTgtCtlPtW,gt=x.outerWidth(),vt=Y.lastTgtCtlPtH,yt=x.outerHeight(),mt=Y.lastW,xt=h.pstyle("control-point-step-size").pfValue,bt=h.pstyle("edge-distances").value;if(Y.badBezier=!!A,nt!==rt||it!==ot||at!==st||ut!==lt||ct!==ht||dt!==pt||ft!==gt||vt!==yt||mt!==xt||!(U===H&&W===$||g)){if(Y.lastSrcCtlPtX=rt,Y.lastSrcCtlPtY=ot,Y.lastSrcCtlPtW=st,Y.lastSrcCtlPtH=lt,Y.lastTgtCtlPtX=ht,Y.lastTgtCtlPtY=pt,Y.lastTgtCtlPtW=gt,Y.lastTgtCtlPtH=yt,Y.lastEdgeIndex=H,Y.lastNumEdges=$,Y.lastWidth=xt,m===x){Y.edgeType="self";var wt=c,_t=J;g&&(wt=0,_t=tt),Y.ctrlpts=[_.x,_.y-(1+Math.pow(T,1.12)/100)*_t*(wt/3+1),_.x-(1+Math.pow(k,1.12)/100)*_t*(wt/3+1),_.y]}else if(a&&(m.isParent()||m.isChild()||x.isParent()||x.isChild())&&(m.parents().anySame(x)||x.parents().anySame(m))){Y.edgeType="compound",Y.badBezier=!1;var wt=c,_t=J;g&&(wt=0,_t=tt);var Et={x:_.x-k/2,y:_.y-T/2},kt={x:E.x-N/2,y:E.y-S/2},Tt={x:Math.min(Et.x,kt.x),y:Math.min(Et.y,kt.y)},Nt=Math.max(.5,Math.log(.01*k)),St=Math.max(.5,Math.log(.01*N));Y.ctrlpts=[Tt.x,Tt.y-(1+Math.pow(50,1.12)/100)*_t*(wt/3+1)*Nt,Tt.x-(1+Math.pow(50,1.12)/100)*_t*(wt/3+1)*St,Tt.y]}else if("segments"===f){Y.edgeType="segments",Y.segpts=[];for(var Lt=h.pstyle("segment-weights").pfValue,Ct=h.pstyle("segment-distances").pfValue,Dt=Math.min(Lt.length,Ct.length),At=0;At<Dt;At++){var Mt=Lt[At],Pt=Ct[At],It=1-Mt,Ot=Mt,Rt="node-position"===bt?B:j,jt={x:Rt.x1*It+Rt.x2*Ot,y:Rt.y1*It+Rt.y2*Ot};Y.segpts.push(jt.x+D.x*Pt,jt.y+D.y*Pt)}}else if(P.length%2!=1||c!==Math.floor(P.length/2)||g){var Bt=g;Y.edgeType=Bt?"multibezier":"bezier",Y.ctrlpts=[];for(var Ft=0;Ft<K;Ft++){var qt,zt=(.5-P.length/2+c)*J,Vt=i.signum(zt);Bt&&(tt=Z?Z.pfValue[Ft]:J,et=Q.value[Ft]),qt=g?tt:void 0!==tt?Vt*tt:void 0;var Gt=void 0!==qt?qt:zt,It=1-et,Ot=et,Rt="node-position"===bt?B:j,jt={x:Rt.x1*It+Rt.x2*Ot,y:Rt.y1*It+Rt.y2*Ot};Y.ctrlpts.push(jt.x+D.x*Gt,jt.y+D.y*Gt)}}else Y.edgeType="straight";this.findEndpoints(h);var Xt=!o.number(Y.startX)||!o.number(Y.startY),Yt=!o.number(Y.arrowStartX)||!o.number(Y.arrowStartY),Ut=!o.number(Y.endX)||!o.number(Y.endY),Ht=!o.number(Y.arrowEndX)||!o.number(Y.arrowEndY),Wt=this.getArrowWidth(h.pstyle("width").pfValue)*this.arrowShapeWidth,$t=3*Wt;if("bezier"===Y.edgeType){var Zt=i.dist({x:Y.ctrlpts[0],y:Y.ctrlpts[1]},{x:Y.startX,y:Y.startY}),Qt=Zt<$t,Kt=i.dist({x:Y.ctrlpts[0],y:Y.ctrlpts[1]},{x:Y.endX,y:Y.endY}),Jt=Kt<$t,te=!1;if(Xt||Yt||Qt){te=!0;var ee={x:Y.ctrlpts[0]-_.x,y:Y.ctrlpts[1]-_.y},ne=Math.sqrt(ee.x*ee.x+ee.y*ee.y),re={x:ee.x/ne,y:ee.y/ne},ie=Math.max(k,T),oe={x:Y.ctrlpts[0]+2*re.x*ie,y:Y.ctrlpts[1]+2*re.y*ie},ae=L.intersectLine(_.x,_.y,k,T,oe.x,oe.y,0);Qt?(Y.ctrlpts[0]=Y.ctrlpts[0]+re.x*($t-Zt),Y.ctrlpts[1]=Y.ctrlpts[1]+re.y*($t-Zt)):(Y.ctrlpts[0]=ae[0]+re.x*$t,Y.ctrlpts[1]=ae[1]+re.y*$t)}if(Ut||Ht||Jt){te=!0;var ee={x:Y.ctrlpts[0]-E.x,y:Y.ctrlpts[1]-E.y},ne=Math.sqrt(ee.x*ee.x+ee.y*ee.y),re={x:ee.x/ne,y:ee.y/ne},ie=Math.max(k,T),oe={x:Y.ctrlpts[0]+2*re.x*ie,y:Y.ctrlpts[1]+2*re.y*ie},se=C.intersectLine(E.x,E.y,N,S,oe.x,oe.y,0);Jt?(Y.ctrlpts[0]=Y.ctrlpts[0]+re.x*($t-Kt),Y.ctrlpts[1]=Y.ctrlpts[1]+re.y*($t-Kt)):(Y.ctrlpts[0]=se[0]+re.x*$t,Y.ctrlpts[1]=se[1]+re.y*$t)}te&&this.findEndpoints(h)}if("multibezier"===Y.edgeType||"bezier"===Y.edgeType||"self"===Y.edgeType||"compound"===Y.edgeType){Y.allpts=[],Y.allpts.push(Y.startX,Y.startY);for(var Ft=0;Ft+1<Y.ctrlpts.length;Ft+=2)Y.allpts.push(Y.ctrlpts[Ft],Y.ctrlpts[Ft+1]),Ft+3<Y.ctrlpts.length&&Y.allpts.push((Y.ctrlpts[Ft]+Y.ctrlpts[Ft+2])/2,(Y.ctrlpts[Ft+1]+Y.ctrlpts[Ft+3])/2);Y.allpts.push(Y.endX,Y.endY);var ue,le;Y.ctrlpts.length/2%2==0?(ue=Y.allpts.length/2-1,Y.midX=Y.allpts[ue],Y.midY=Y.allpts[ue+1]):(ue=Y.allpts.length/2-3,le=.5,Y.midX=i.qbezierAt(Y.allpts[ue],Y.allpts[ue+2],Y.allpts[ue+4],le),Y.midY=i.qbezierAt(Y.allpts[ue+1],Y.allpts[ue+3],Y.allpts[ue+5],le))}else if("straight"===Y.edgeType)Y.allpts=[Y.startX,Y.startY,Y.endX,Y.endY],Y.midX=(Y.startX+Y.endX+Y.arrowStartX+Y.arrowEndX)/4,Y.midY=(Y.startY+Y.endY+Y.arrowStartY+Y.arrowEndY)/4;else if("segments"===Y.edgeType)if(Y.allpts=[],Y.allpts.push(Y.startX,Y.startY),Y.allpts.push.apply(Y.allpts,Y.segpts),Y.allpts.push(Y.endX,Y.endY),Y.segpts.length%4==0){var ce=Y.segpts.length/2,he=ce-2;Y.midX=(Y.segpts[he]+Y.segpts[ce])/2,Y.midY=(Y.segpts[he+1]+Y.segpts[ce+1])/2}else{var he=Y.segpts.length/2-1;Y.midX=Y.segpts[he],Y.midY=Y.segpts[he+1]}this.projectLines(h),this.calculateArrowAngles(h),this.recalculateEdgeLabelProjections(h),this.calculateLabelAngles(h)}}}for(var c=0;c<l.length;c++){var h=l[c],d=h._private,de=d.rscratch,Y=de;if(!de.haystack){var pe=2*Math.random()*Math.PI;de.source={x:Math.cos(pe),y:Math.sin(pe)};var pe=2*Math.random()*Math.PI;de.target={x:Math.cos(pe),y:Math.sin(pe)}}var m=d.source,x=d.target,_=m._private.position,E=x._private.position,k=m.width(),N=x.width(),T=m.height(),S=x.height(),ie=h.pstyle("haystack-radius").value,fe=ie/2;Y.haystackPts=Y.allpts=[Y.source.x*k*fe+_.x,Y.source.y*T*fe+_.y,Y.target.x*N*fe+E.x,Y.target.y*S*fe+E.y],Y.midX=(Y.allpts[0]+Y.allpts[2])/2,Y.midY=(Y.allpts[1]+Y.allpts[3])/2,de.edgeType="haystack",de.haystack=!0,this.projectLines(h),this.calculateArrowAngles(h),this.recalculateEdgeLabelProjections(h),this.calculateLabelAngles(h)}return s}};var c=function(t,e){return Math.atan2(e,t)-Math.PI/2};l.calculateArrowAngles=function(t){var e,n,r,o,a,s,u=t._private.rscratch,l="haystack"===u.edgeType,h="multibezier"===u.edgeType,d="segments"===u.edgeType,p="compound"===u.edgeType,f="self"===u.edgeType,g=t._private.source._private.position,v=t._private.target._private.position;l?(r=u.haystackPts[0],o=u.haystackPts[1],a=u.haystackPts[2],s=u.haystackPts[3]):(r=u.arrowStartX,o=u.arrowStartY,a=u.arrowEndX,s=u.arrowEndY),e=g.x-r,n=g.y-o,u.srcArrowAngle=c(e,n);u.midX,u.midY;if(l&&((r+a)/2,(o+s)/2),e=a-r,n=s-o,f)e=-1,n=1;else if(d){var y=u.allpts;if(y.length/2%2==0){var m=y.length/2,x=m-2;e=y[m]-y[x],n=y[m+1]-y[x+1]}else{var m=y.length/2-1,x=m-2,b=m+2;e=y[m]-y[x],n=y[m+1]-y[x+1]}}else if(h||p){var w,_,E,k,y=u.allpts,T=u.ctrlpts;if(T.length/2%2==0){var N=y.length/2-1,S=N+2,L=S+2;w=i.qbezierAt(y[N],y[S],y[L],0),_=i.qbezierAt(y[N+1],y[S+1],y[L+1],0),E=i.qbezierAt(y[N],y[S],y[L],1e-4),k=i.qbezierAt(y[N+1],y[S+1],y[L+1],1e-4)}else{var S=y.length/2-1,N=S-2,L=S+2;w=i.qbezierAt(y[N],y[S],y[L],.4999),_=i.qbezierAt(y[N+1],y[S+1],y[L+1],.4999),E=i.qbezierAt(y[N],y[S],y[L],.5),k=i.qbezierAt(y[N+1],y[S+1],y[L+1],.5)}e=E-w,n=k-_}if(u.midtgtArrowAngle=c(e,n),u.midDispX=e,u.midDispY=n,e*=-1,n*=-1,d){var y=u.allpts;if(y.length/2%2==0);else{var m=y.length/2-1,b=m+2;e=-(y[b]-y[m]),n=-(y[b+1]-y[m+1])}}u.midsrcArrowAngle=c(e,n),e=v.x-a,n=v.y-s,u.tgtArrowAngle=c(e,n)},l.calculateLabelAngles=function(t){var e=t._private,n=e.rscratch,r=t.isEdge(),i=t.pstyle("text-rotation"),o=i.strValue;"none"===o?n.labelAngle=n.sourceLabelAngle=n.targetLabelAngle=0:r&&"autorotate"===o?(n.labelAngle=Math.atan(n.midDispY/n.midDispX),n.sourceLabelAngle=n.sourceLabelAutoAngle,n.targetLabelAngle=n.targetLabelAutoAngle):n.labelAngle=n.sourceLabelAngle=n.targetLabelAngle="autorotate"===o?0:i.pfValue},l.findEndpoints=function(t){var e,n,r,a=this,s=t.source()[0],u=t.target()[0],l=s._private,c=u._private,h=l.position,d=c.position,p=t.pstyle("target-arrow-shape").value,f=t.pstyle("source-arrow-shape").value,g=t._private.rscratch,v=g.edgeType,y="bezier"===v||"multibezier"===v||"self"===v||"compound"===v,m="bezier"!==v,x="straight"===v||"segments"===v,b="segments"===v,w=y||m||x;if(y){var _=[g.ctrlpts[0],g.ctrlpts[1]];n=m?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:_,r=_}else if(x){var E=b?g.segpts.slice(0,2):[d.x,d.y],k=b?g.segpts.slice(g.segpts.length-2):[h.x,h.y];n=k,r=E}e=a.nodeShapes[this.getNodeShape(u)].intersectLine(d.x,d.y,u.outerWidth(),u.outerHeight(),n[0],n[1],0);var T=i.shortenIntersection(e,n,a.arrowShapes[p].spacing(t)),N=i.shortenIntersection(e,n,a.arrowShapes[p].gap(t));g.endX=N[0],g.endY=N[1],g.arrowEndX=T[0],g.arrowEndY=T[1],e=a.nodeShapes[this.getNodeShape(s)].intersectLine(h.x,h.y,s.outerWidth(),s.outerHeight(),r[0],r[1],0);var S=i.shortenIntersection(e,r,a.arrowShapes[f].spacing(t)),L=i.shortenIntersection(e,r,a.arrowShapes[f].gap(t));g.startX=L[0],g.startY=L[1],g.arrowStartX=S[0],g.arrowStartY=S[1],w&&(o.number(g.startX)&&o.number(g.startY)&&o.number(g.endX)&&o.number(g.endY)?g.badLine=!1:g.badLine=!0)},l.getArrowWidth=l.getArrowHeight=function(t){var e=this.arrowWidthCache=this.arrowWidthCache||{},n=e[t];return n?n:(n=Math.max(Math.pow(13.37*t,.9),29),e[t]=n,n)},e.exports=l},{"../../../collection/zsort":75,"../../../is":126,"../../../math":128,"../../../util":143,"../../../window":150}],102:[function(t,e,n){"use strict";var r={};r.getCachedImage=function(t,e,n){var r=this,i=r.imageCache=r.imageCache||{},o=i[t];if(o)return o.image.complete||o.image.addEventListener("load",n),o.image;o=i[t]=i[t]||{};var a=o.image=new Image;a.addEventListener("load",n);return"data:"===t.substring(0,"data:".length).toLowerCase()||(a.crossOrigin=e),a.src=t,a},e.exports=r},{}],103:[function(t,e,n){"use strict";var r=t("../../../is"),i=t("../../../util"),o=function(t){this.init(t)},a=o,s=a.prototype;s.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],s.init=function(t){var e=this;e.options=t,e.cy=t.cy,e.container=t.cy.container(),e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.hideLabelsOnViewport=t.hideLabelsOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=t.pixelRatio,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners(),e.load()},s.notify=function(t){var e,n=this;if(!this.destroyed){e=r.array(t.type)?t.type:[t.type];for(var i={},o=0;o<e.length;o++){i[e[o]]=!0}if(i.destroy)return void n.destroy();(i.add||i.remove||i.load||i.style)&&n.updateCachedZSortedEles(),i.viewport&&n.redrawHint("select",!0),(i.load||i.resize)&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},s.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n,i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(t){}},[t("./arrow-shapes"),t("./coord-ele-math"),t("./images"),t("./load-listeners"),t("./node-shapes"),t("./redraw")].forEach(function(t){i.extend(s,t)}),e.exports=a},{"../../../is":126,"../../../util":143,"./arrow-shapes":100,"./coord-ele-math":101,"./images":102,"./load-listeners":104,"./node-shapes":105,"./redraw":106}],104:[function(t,e,n){"use strict";var r=t("../../../is"),i=t("../../../util"),o=t("../../../math"),a=t("../../../event"),s={};s.registerBinding=function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,i)},s.binder=function(t){var e=this,n=t===window||t===document||t===document.body||r.domElement(t);if(null==e.supportsPassiveEvents){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,o)}catch(t){}e.supportsPassiveEvents=i}var a=function(r,i,o){var a=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),e.bindings.push({target:t,args:a}),(t.addEventListener||t.on).apply(t,a),this};return{on:a,addEventListener:a,addListener:a,bind:a}},s.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},s.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&0!==t.pstyle("opacity").value&&"visible"===t.pstyle("visibility").value&&"element"===t.pstyle("display").value},s.load=function(){var t=this,e=function(e,n,r,o){null==e&&(e=t.cy);for(var s=0;s<n.length;s++){var u=n[s],l=new a(r,i.extend({type:u},o));e.trigger(l)}},n=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},s=function(e,n){var r=!0;if(t.cy.hasCompoundNodes()&&e&&e.isEdge())for(var i=0;n&&i<n.length;i++){var e=n[i];if(e.isNode()&&e.isParent()){r=!1;break}}else r=!0;return r},u=function(e){var n;if(e.addToList&&t.cy.hasCompoundNodes()){if(!e.addToList.hasId){e.addToList.hasId={};for(var r=0;r<e.addToList.length;r++){var i=e.addToList[r];e.addToList.hasId[i.id()]=!0}}n=e.addToList.hasId}return n||{}},l=function(t){t[0]._private.grabbed=!0},c=function(t){t[0]._private.grabbed=!1},h=function(t){t[0]._private.rscratch.inDragLayer=!0},d=function(t){t[0]._private.rscratch.inDragLayer=!1},p=function(t){t[0]._private.rscratch.isGrabTarget=!0},f=function(t){t[0]._private.rscratch.isGrabTarget=!1},g=function(t,e){var n=u(e);n[t.id()]||(e.addToList.push(t),n[t.id()]=!0,l(t))},v=function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var n=t.descendants();e.inDragLayer&&(n.forEach(h),n.connectedEdges().forEach(h)),e.addToList&&n.forEach(function(t){g(t,e)})}},y=function(e,n){n=n||{};var r=e.cy().hasCompoundNodes();n.inDragLayer&&(e.forEach(h),e.neighborhood().stdFilter(function(t){return!r||t.isEdge()}).forEach(h)),n.addToList&&e.forEach(function(t){g(t,n)}),v(e,n),b(e,{inDragLayer:n.inDragLayer}),t.updateCachedGrabbedEles()},m=y,x=function(e){e&&(e.hasId={},t.getCachedZSortedEles().forEach(function(t){c(t),d(t),f(t)}),t.updateCachedGrabbedEles())},b=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var n=t.ancestors().orphans();if(!n.same(t)){var r=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges();e.inDragLayer&&(i.forEach(h),r.forEach(h)),e.addToList&&r.forEach(function(t){g(t,e)})}}},w="undefined"!=typeof MutationObserver;w?(t.removeObserver=new MutationObserver(function(e){for(var n=0;n<e.length;n++){var r=e[n],i=r.removedNodes;if(i)for(var o=0;o<i.length;o++){var a=i[o];if(a===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(e){t.destroy()});var _=i.debounce(function(){t.cy.invalidateSize(),t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);w&&(t.styleObserver=new MutationObserver(_),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",_);for(var E=t.cy.container();function(e){t.registerBinding(e,"scroll",function(e){t.invalidateContainerClientCoordsCache()})}(E),E.parentNode;)E=E.parentNode;t.registerBinding(t.container,"contextmenu",function(t){t.preventDefault()});var k=function(){return 0!==t.selection[4]},T=function(e){for(var n=t.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=e.touches?e.touches:[e],u=!1,l=0;l<s.length;l++){var c=s[l];if(r<=c.clientX&&c.clientX<=r+o&&i<=c.clientY&&c.clientY<=i+a){u=!0;break}}if(!u)return!1;for(var h=t.container,d=e.target,p=d.parentNode,f=!1;p;){if(p===h){f=!0;break}p=p.parentNode}return!!f};t.registerBinding(t.container,"mousedown",function(n){if(T(n)){n.preventDefault(),t.hoverData.capture=!0,t.hoverData.which=n.which;var r=t.cy,i=[n.clientX,n.clientY],o=t.projectIntoViewport(i[0],i[1]),s=t.selection,u=t.findNearestElements(o[0],o[1],!0,!1),l=u[0],c=t.dragData.possibleDragElements;t.hoverData.mdownPos=o,t.hoverData.mdownGPos=i;if(3==n.which){t.hoverData.cxtStarted=!0;var h=new a(n,{type:"cxttapstart",cyPosition:{x:o[0],y:o[1]}});l?(l.activate(),l.trigger(h),t.hoverData.down=l):r.trigger(h),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==n.which){if(l&&l.activate(),null!=l&&t.nodeIsGrabbable(l)){var d=new a(n,{type:"grab",cyPosition:{x:o[0],y:o[1]}});if(p(l),l.selected()){if(l.selected()){c=t.dragData.possibleDragElements=[];var f=r.$(function(){return this.isNode()&&this.selected()&&t.nodeIsGrabbable(this)});y(f,{addToList:c}),l.trigger(d)}}else c=t.dragData.possibleDragElements=[],m(l,{addToList:c}),l.trigger(d);t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=l,t.hoverData.downs=u,t.hoverData.downTime=(new Date).getTime(),e(l,["mousedown","tapstart","vmousedown"],n,{cyPosition:{x:o[0],y:o[1]}}),null==l?(s[4]=1,t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()):l.isEdge()&&(s[4]=1),function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var e=t.hoverData.down;e?e.trigger(new a(n,{type:"taphold",cyPosition:{x:o[0],y:o[1]}})):r.trigger(new a(n,{type:"taphold",cyPosition:{x:o[0],y:o[1]}}))}},t.tapholdDuration)}()}s[0]=s[2]=o[0],s[1]=s[3]=o[1]}},!1),t.registerBinding(window,"mousemove",function(i){if(t.hoverData.capture||T(i)){var u=!1,l=t.cy,c=l.zoom(),h=[i.clientX,i.clientY],d=t.projectIntoViewport(h[0],h[1]),p=t.hoverData.mdownPos,f=t.hoverData.mdownGPos,g=t.selection,v=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(v=t.findNearestElement(d[0],d[1],!0,!1));var m,x=t.hoverData.last,b=t.hoverData.down,w=[d[0]-g[2],d[1]-g[3]],_=t.dragData.possibleDragElements;if(f){var E=h[0]-f[0],k=E*E,N=h[1]-f[1];m=k+N*N>=t.desktopTapThreshold2}var S=n(i);if(m&&(t.hoverData.tapholdCancelled=!0),u=!0,e(v,["mousemove","vmousemove","tapdrag"],i,{cyPosition:{x:d[0],y:d[1]}}),3===t.hoverData.which){if(m){var L=new a(i,{type:"cxtdrag",cyPosition:{x:d[0],y:d[1]}});b?b.trigger(L):l.trigger(L),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&v===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.trigger(new a(i,{type:"cxtdragout",cyPosition:{x:d[0],y:d[1]}})),t.hoverData.cxtOver=v,v&&v.trigger(new a(i,{type:"cxtdragover",cyPosition:{x:d[0],y:d[1]}})))}}else if(t.hoverData.dragging){if(u=!0,l.panningEnabled()&&l.userPanningEnabled()){var C;if(t.hoverData.justStartedPan){var D=t.hoverData.mdownPos;C={x:(d[0]-D[0])*c,y:(d[1]-D[1])*c},t.hoverData.justStartedPan=!1}else C={x:w[0]*c,y:w[1]*c};l.panBy(C),t.hoverData.dragged=!0}d=t.projectIntoViewport(i.clientX,i.clientY)}else if(1!=g[4]||null!=b&&!b.isEdge()){if(b&&b.isEdge()&&b.active()&&b.unactivate(),b&&b.grabbed()||v==x||(x&&e(x,["mouseout","tapdragout"],i,{cyPosition:{x:d[0],y:d[1]}}),v&&e(v,["mouseover","tapdragover"],i,{cyPosition:{x:d[0],y:d[1]}}),t.hoverData.last=v),b&&t.nodeIsDraggable(b))if(m){var A=!t.dragData.didDrag;A&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var M=[];t.hoverData.draggingEles||y(l.collection(_),{inDragLayer:!0});for(var P=0;P<_.length;P++){var I=_[P];if(t.nodeIsDraggable(I)&&I.grabbed()){var O=I._private.position;if(M.push(I),r.number(w[0])&&r.number(w[1])){var R=!I.isParent();if(R&&(O.x+=w[0],O.y+=w[1]),A){var j=t.hoverData.dragDelta;R&&j&&r.number(j[0])&&r.number(j[1])&&(O.x+=j[0],O.y+=j[1])}}}}t.hoverData.draggingEles=!0;var B=l.collection(M);B.updateCompoundBounds(),B.trigger("position drag"),t.redrawHint("drag",!0),t.redraw()}else!function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(w[0]),e.push(w[1])):(e[0]+=w[0],e[1]+=w[1])}();u=!0}else if(m){if(t.hoverData.dragging||!l.boxSelectionEnabled()||!S&&l.panningEnabled()&&l.userPanningEnabled()){if(!t.hoverData.selecting&&l.panningEnabled()&&l.userPanningEnabled()){var F=s(b,t.hoverData.downs);F&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,g[4]=0,t.data.bgActivePosistion=o.array2point(p),t.redrawHint("select",!0),t.redraw())}}else t.data.bgActivePosistion=void 0,t.hoverData.selecting||l.trigger("boxstart"),t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw();b&&b.isEdge()&&b.active()&&b.unactivate()}return g[2]=d[0],g[3]=d[1],u?(i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),!1):void 0}},!1),t.registerBinding(window,"mouseup",function(r){if(t.hoverData.capture){t.hoverData.capture=!1;var i=t.cy,o=t.projectIntoViewport(r.clientX,r.clientY),s=t.selection,u=t.findNearestElement(o[0],o[1],!0,!1),l=t.dragData.possibleDragElements,c=t.hoverData.down,h=n(r);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,c&&c.unactivate(),3===t.hoverData.which){var d=new a(r,{type:"cxttapend",cyPosition:{x:o[0],y:o[1]}});if(c?c.trigger(d):i.trigger(d),!t.hoverData.cxtDragged){var p=new a(r,{type:"cxttap",cyPosition:{x:o[0],y:o[1]}});c?c.trigger(p):i.trigger(p)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(null!=c||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||n(r)||(i.$(function(){return this.selected()}).unselect(),l.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=l=[]),e(u,["mouseup","tapend","vmouseup"],r,{cyPosition:{x:o[0],y:o[1]}}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||e(c,["click","tap","vclick"],r,{cyPosition:{x:o[0],y:o[1]}}),u!=c||t.dragData.didDrag||t.hoverData.selecting||null!=u&&u._private.selectable&&(t.hoverData.dragging||("additive"===i.selectionType()||h?u.selected()?u.unselect():u.select():h||(i.$(":selected").unmerge(u).unselect(),u.select())),t.redrawHint("eles",!0)),t.hoverData.selecting){var f=i.collection(t.getAllInBox(s[0],s[1],s[2],s[3]));t.redrawHint("select",!0),f.length>0&&t.redrawHint("eles",!0),i.trigger("boxend");var g=function(t){return t.selectable()&&!t.selected()};"additive"===i.selectionType()?f.trigger("box").stdFilter(g).select().trigger("boxselect"):(h||i.$(":selected").unmerge(f).unselect(),f.trigger("box").stdFilter(g).select().trigger("boxselect")),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!s[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var v=c&&c.grabbed();x(l),v&&c.trigger("free")}}s[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var N=function(e){if(!t.scrollingPage){var n=t.cy,r=t.projectIntoViewport(e.clientX,e.clientY),i=[r[0]*n.zoom()+n.pan().x,r[1]*n.zoom()+n.pan().y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||k())return void e.preventDefault();if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var o;o=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,o*=t.wheelSensitivity;1===e.deltaMode&&(o*=33),n.zoom({level:n.zoom()*Math.pow(10,o),renderedPosition:{x:i[0],y:i[1]}})}}};t.registerBinding(t.container,"wheel",N,!0),t.registerBinding(window,"scroll",function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"mouseout",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.trigger(new a(e,{type:"mouseout",cyPosition:{x:n[0],y:n[1]}}))},!1),t.registerBinding(t.container,"mouseover",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.trigger(new a(e,{type:"mouseover",cyPosition:{x:n[0],y:n[1]}}))},!1);var S,L,C,D,A,M,P,I,O,R,j,B,F,q,z=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},V=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};t.registerBinding(t.container,"touchstart",q=function(n){if(T(n)){t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.touchData.now,o=t.touchData.earlier;if(n.touches[0]){var s=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);i[0]=s[0],i[1]=s[1]}if(n.touches[1]){var s=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);i[2]=s[0],i[3]=s[1]}if(n.touches[2]){var s=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);i[4]=s[0],i[5]=s[1]}if(n.touches[1]){x(t.dragData.touchDragEles);var u=t.findContainerClientCoords();O=u[0],R=u[1],j=u[2],B=u[3],S=n.touches[0].clientX-O,L=n.touches[0].clientY-R,C=n.touches[1].clientX-O,D=n.touches[1].clientY-R,F=0<=S&&S<=j&&0<=C&&C<=j&&0<=L&&L<=B&&0<=D&&D<=B;var l=r.pan(),c=r.zoom();A=z(S,L,C,D),M=V(S,L,C,D),P=[(S+C)/2,(L+D)/2],I=[(P[0]-l.x)/c,(P[1]-l.y)/c];if(M<4e4&&!n.touches[2]){var h=t.findNearestElement(i[0],i[1],!0,!0),d=t.findNearestElement(i[2],i[3],!0,!0);return h&&h.isNode()?(h.activate().trigger(new a(n,{type:"cxttapstart",cyPosition:{x:i[0],y:i[1]}})),t.touchData.start=h):d&&d.isNode()?(d.activate().trigger(new a(n,{type:"cxttapstart",cyPosition:{x:i[0],y:i[1]}})),t.touchData.start=d):r.trigger(new a(n,{type:"cxttapstart",cyPosition:{x:i[0],y:i[1]}})),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(n.touches[2]);else if(n.touches[1]);else if(n.touches[0]){var f=t.findNearestElements(i[0],i[1],!0,!0),g=f[0];if(null!=g&&(g.activate(),t.touchData.start=g,t.touchData.starts=f,t.nodeIsGrabbable(g))){var v=t.dragData.touchDragEles=[];if(t.redrawHint("eles",!0),t.redrawHint("drag",!0),g.selected()){var b=r.$(function(){return this.selected()&&t.nodeIsGrabbable(this)});y(b,{addToList:v})}else m(g,{addToList:v});p(g),g.trigger(new a(n,{type:"grab",cyPosition:{x:i[0],y:i[1]}}))}e(g,["touchstart","tapstart","vmousedown"],n,{cyPosition:{x:i[0],y:i[1]}}),null==g&&(t.data.bgActivePosistion={x:s[0],y:s[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved!==!1||t.pinching||t.touchData.selecting||(e(t.touchData.start,["taphold"],n,{cyPosition:{x:i[0],y:i[1]}}),t.touchData.start||r.$(":selected").unselect())},t.tapholdDuration)}if(n.touches.length>=1){for(var w=t.touchData.startPosition=[],_=0;_<i.length;_++)w[_]=o[_]=i[_];var E=n.touches[0];t.touchData.startGPosition=[E.clientX,E.clientY]}}},!1);var G;t.registerBinding(window,"touchmove",G=function(n){var i=t.touchData.capture;if(i||T(n)){var u=t.selection,l=t.cy,c=t.touchData.now,h=t.touchData.earlier,d=l.zoom();if(n.touches[0]){var p=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=p[0],c[1]=p[1]}if(n.touches[1]){var p=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=p[0],c[3]=p[1]}if(n.touches[2]){var p=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=p[0],c[5]=p[1]}
var f,g=t.touchData.startGPosition;if(i&&n.touches[0]&&g){for(var v=[],m=0;m<c.length;m++)v[m]=c[m]-h[m];var b=n.touches[0].clientX-g[0],w=b*b,_=n.touches[0].clientY-g[1];f=w+_*_>=t.touchTapThreshold2}if(i&&t.touchData.cxt){n.preventDefault();var E=n.touches[0].clientX-O,k=n.touches[0].clientY-R,N=n.touches[1].clientX-O,P=n.touches[1].clientY-R,j=V(E,k,N,P),B=j/M;if(B>=2.25||j>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var q=new a(n,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}});t.touchData.start?(t.touchData.start.unactivate().trigger(q),t.touchData.start=null):l.trigger(q)}}if(i&&t.touchData.cxt){var q=new a(n,{type:"cxtdrag",cyPosition:{x:c[0],y:c[1]}});t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.trigger(q):l.trigger(q),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var G=t.findNearestElement(c[0],c[1],!0,!0);t.touchData.cxtOver&&G===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.trigger(new a(n,{type:"cxtdragout",cyPosition:{x:c[0],y:c[1]}})),t.touchData.cxtOver=G,G&&G.trigger(new a(n,{type:"cxtdragover",cyPosition:{x:c[0],y:c[1]}})))}else if(i&&n.touches[2]&&l.boxSelectionEnabled())n.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||l.trigger("boxstart"),t.touchData.selecting=!0,t.redrawHint("select",!0),u&&0!==u.length&&void 0!==u[0]?(u[2]=(c[0]+c[2]+c[4])/3,u[3]=(c[1]+c[3]+c[5])/3):(u[0]=(c[0]+c[2]+c[4])/3,u[1]=(c[1]+c[3]+c[5])/3,u[2]=(c[0]+c[2]+c[4])/3+1,u[3]=(c[1]+c[3]+c[5])/3+1),u[4]=1,t.touchData.selecting=!0,t.redraw();else if(i&&n.touches[1]&&l.zoomingEnabled()&&l.panningEnabled()&&l.userZoomingEnabled()&&l.userPanningEnabled()){n.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var X=t.dragData.touchDragEles;if(X){t.redrawHint("drag",!0);for(var Y=0;Y<X.length;Y++){var U=X[Y]._private;U.grabbed=!1,U.rscratch.inDragLayer=!1}}var E=n.touches[0].clientX-O,k=n.touches[0].clientY-R,N=n.touches[1].clientX-O,P=n.touches[1].clientY-R,H=z(E,k,N,P),W=H/A;if(F){var $=E-S,Z=k-L,Q=N-C,K=P-D,J=($+Q)/2,tt=(Z+K)/2,et=l.zoom(),nt=et*W,rt=l.pan(),it=I[0]*et+rt.x,ot=I[1]*et+rt.y,at={x:-nt/et*(it-rt.x-J)+it,y:-nt/et*(ot-rt.y-tt)+ot};if(t.touchData.start&&t.touchData.start.active()){var X=t.dragData.touchDragEles;x(X),t.redrawHint("drag",!0),t.redrawHint("eles",!0),t.touchData.start.unactivate().trigger("free")}l.viewport({zoom:nt,pan:at,cancelOnFailedZoom:!0}),A=H,S=E,L=k,C=N,D=P,t.pinching=!0}if(n.touches[0]){var p=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=p[0],c[1]=p[1]}if(n.touches[1]){var p=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=p[0],c[3]=p[1]}if(n.touches[2]){var p=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=p[0],c[5]=p[1]}}else if(n.touches[0]){var G,st=t.touchData.start,ut=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(G=t.findNearestElement(c[0],c[1],!0,!0)),i&&null!=st&&n.preventDefault(),i&&null!=st&&t.nodeIsDraggable(st))if(f){var X=t.dragData.touchDragEles,lt=!t.dragData.didDrag;lt&&y(l.collection(X),{inDragLayer:!0});for(var ct=0;ct<X.length;ct++){var ht=X[ct];if(t.nodeIsDraggable(ht)&&ht.grabbed()){t.dragData.didDrag=!0;var dt=ht._private.position,pt=!ht.isParent();if(pt&&r.number(v[0])&&r.number(v[1])&&(dt.x+=v[0],dt.y+=v[1]),lt){t.redrawHint("eles",!0);var ft=t.touchData.dragDelta;pt&&ft&&r.number(ft[0])&&r.number(ft[1])&&(dt.x+=ft[0],dt.y+=ft[1])}}}var gt=l.collection(X);gt.updateCompoundBounds(),gt.trigger("position drag"),t.hoverData.draggingEles=!0,t.redrawHint("drag",!0),t.touchData.startPosition[0]==h[0]&&t.touchData.startPosition[1]==h[1]&&t.redrawHint("eles",!0),t.redraw()}else{var ft=t.touchData.dragDelta=t.touchData.dragDelta||[];0===ft.length?(ft.push(v[0]),ft.push(v[1])):(ft[0]+=v[0],ft[1]+=v[1])}if(e(st||G,["touchmove","tapdrag","vmousemove"],n,{cyPosition:{x:c[0],y:c[1]}}),st&&st.grabbed()||G==ut||(ut&&ut.trigger(new a(n,{type:"tapdragout",cyPosition:{x:c[0],y:c[1]}})),G&&G.trigger(new a(n,{type:"tapdragover",cyPosition:{x:c[0],y:c[1]}}))),t.touchData.last=G,i)for(var Y=0;Y<c.length;Y++)c[Y]&&t.touchData.startPosition[Y]&&f&&(t.touchData.singleTouchMoved=!0);if(i&&(null==st||st.isEdge())&&l.panningEnabled()&&l.userPanningEnabled()){var vt=s(st,t.touchData.starts);vt&&(n.preventDefault(),t.swipePanning?l.panBy({x:v[0]*d,y:v[1]*d}):f&&(t.swipePanning=!0,l.panBy({x:b*d,y:_*d}),st&&(st.unactivate(),t.data.bgActivePosistion||(t.data.bgActivePosistion=o.array2point(t.touchData.startPosition)),t.redrawHint("select",!0),t.touchData.start=null)));var p=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=p[0],c[1]=p[1]}}for(var m=0;m<c.length;m++)h[m]=c[m]}},!1);var X;t.registerBinding(window,"touchcancel",X=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()});var Y;if(t.registerBinding(window,"touchend",Y=function(n){var r=t.touchData.start;if(t.touchData.capture){t.touchData.capture=!1,n.preventDefault();var i=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var o=t.cy,s=o.zoom(),u=t.touchData.now,l=t.touchData.earlier;if(n.touches[0]){var c=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=c[0],u[1]=c[1]}if(n.touches[1]){var c=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=c[0],u[3]=c[1]}if(n.touches[2]){var c=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=c[0],u[5]=c[1]}r&&r.unactivate();var h;if(t.touchData.cxt){if(h=new a(n,{type:"cxttapend",cyPosition:{x:u[0],y:u[1]}}),r?r.trigger(h):o.trigger(h),!t.touchData.cxtDragged){var d=new a(n,{type:"cxttap",cyPosition:{x:u[0],y:u[1]}});r?r.trigger(d):o.trigger(d)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!n.touches[2]&&o.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var p=o.collection(t.getAllInBox(i[0],i[1],i[2],i[3]));i[0]=void 0,i[1]=void 0,i[2]=void 0,i[3]=void 0,i[4]=0,t.redrawHint("select",!0),o.trigger("boxend");var f=function(t){return t.selectable()&&!t.selected()};p.trigger("box").stdFilter(f).select().trigger("boxselect"),p.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=r&&r.unactivate(),n.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var g=t.dragData.touchDragEles;if(null!=r){var v=r._private.grabbed;x(g),t.redrawHint("drag",!0),t.redrawHint("eles",!0),v&&r.trigger("free"),e(r,["touchend","tapend","vmouseup","tapdragout"],n,{cyPosition:{x:u[0],y:u[1]}}),r.unactivate(),t.touchData.start=null}else{var y=t.findNearestElement(u[0],u[1],!0,!0);e(y,["touchend","tapend","vmouseup","tapdragout"],n,{cyPosition:{x:u[0],y:u[1]}})}var m=t.touchData.startPosition[0]-u[0],b=m*m,w=t.touchData.startPosition[1]-u[1],_=w*w,E=b+_,k=E*s*s;null!=r&&!t.dragData.didDrag&&r._private.selectable&&k<t.touchTapThreshold2&&!t.pinching&&("single"===o.selectionType()?(o.$(":selected").unmerge(r).unselect(),r.select()):r.selected()?r.unselect():r.select(),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved||e(r,["tap","vclick"],n,{cyPosition:{x:u[0],y:u[1]}}),t.touchData.singleTouchMoved=!0}for(var T=0;T<u.length;T++)l[T]=u[T];t.dragData.didDrag=!1,0===n.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null),n.touches.length<2&&(t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var U=[],H=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},W=function(t){return{event:t,touch:H(t)}},$=function(t){U.push(W(t))},Z=function(t){for(var e=0;e<U.length;e++){if(U[e].event.pointerId===t.pointerId)return void U.splice(e,1)}},Q=function(t){var e=U.filter(function(e){return e.event.pointerId===t.pointerId})[0];e.event=t,e.touch=H(t)},K=function(t){t.touches=U.map(function(t){return t.touch})};t.registerBinding(t.container,"pointerdown",function(t){"mouse"!==t.pointerType&&(t.preventDefault(),$(t),K(t),q(t))}),t.registerBinding(t.container,"pointerup",function(t){"mouse"!==t.pointerType&&(Z(t),K(t),Y(t))}),t.registerBinding(t.container,"pointercancel",function(t){"mouse"!==t.pointerType&&(Z(t),K(t),X(t))}),t.registerBinding(t.container,"pointermove",function(t){"mouse"!==t.pointerType&&(t.preventDefault(),Q(t),K(t),G(t))})}},e.exports=s},{"../../../event":88,"../../../is":126,"../../../math":128,"../../../util":143}],105:[function(t,e,n){"use strict";var r=t("../../../math"),i={};i.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,i,o,a,s){return r.polygonIntersectLine(o,a,this.points,t,e,n/2,i/2,s)},checkPoint:function(t,e,n,i,o,a,s){return r.pointInsidePolygon(t,e,this.points,a,s,i,o,[0,-1],n)}}},i.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,i,o,a,s){return r.intersectLineEllipse(o,a,t,e,n/2+s,i/2+s)},checkPoint:function(t,e,n,r,i,o,a){return t-=o,e-=a,t/=r/2+n,e/=i/2+n,t*t+e*e<=1}}},i.generateRoundRectangle=function(){return this.nodeShapes.roundrectangle={renderer:this,name:"roundrectangle",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,i,o,a,s){return r.roundRectangleIntersectLine(o,a,t,e,n,i,s)},checkPoint:function(t,e,n,i,o,a,s){var u=r.getRoundRectangleRadius(i,o);if(r.pointInsidePolygon(t,e,this.points,a,s,i,o-2*u,[0,-1],n))return!0;if(r.pointInsidePolygon(t,e,this.points,a,s,i-2*u,o,[0,-1],n))return!0;var l=function(t,e,n,r,i,o,a){return t-=n,e-=r,t/=i/2+a,e/=o/2+a,t*t+e*e<=1};return!!l(t,e,a-i/2+u,s-o/2+u,2*u,2*u,n)||(!!l(t,e,a+i/2-u,s-o/2+u,2*u,2*u,n)||(!!l(t,e,a+i/2-u,s+o/2-u,2*u,2*u,n)||!!l(t,e,a-i/2+u,s+o/2-u,2*u,2*u,n)))}}},i.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",r.generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",r.generateUnitNgonPointsFitToSquare(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]),this.generatePolygon("pentagon",r.generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",r.generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",r.generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",r.generateUnitNgonPointsFitToSquare(8,0));var n=new Array(20),i=r.generateUnitNgonPoints(5,0),o=r.generateUnitNgonPoints(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=a,o[2*s+1]*=a;for(var s=0;s<5;s++)n[4*s]=i[2*s],n[4*s+1]=i[2*s+1],n[4*s+2]=o[2*s],n[4*s+3]=o[2*s+1];n=r.fitPolygonToSquare(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),t.makePolygon=function(t){var n,r=t.join("$"),i="polygon-"+r;return(n=this[i])?n:e.generatePolygon(i,t)}},e.exports=i},{"../../../math":128}],106:[function(t,e,n){"use strict";var r=t("../../../util"),i={};i.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},i.redraw=function(t){t=t||r.staticEmptyObject();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},i.beforeRender=function(t,e){if(!this.destroyed){e=e||0;var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(t,e){return e.priority-t.priority})}};var o=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};i.startRenderLoop=function(){var t=this;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var e=function(n){if(!t.destroyed){if(t.requestedFrame&&!t.skipFrame){o(t,!0,n);var i=r.performanceNow();t.render(t.renderOptions);var a=t.lastDrawTime=r.performanceNow();void 0===t.averageRedrawTime&&(t.averageRedrawTime=a-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var s=a-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else o(t,!1,n);t.skipFrame=!1,r.requestAnimationFrame(e)}};r.requestAnimationFrame(e)}},e.exports=i},{"../../../util":143}],107:[function(t,e,n){"use strict";var r,i={};i.arrowShapeImpl=function(t){return(r||(r={polygon:function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}},"triangle-backcurve":function(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];0===i&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)},"triangle-tee":function(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath(),t.beginPath&&t.beginPath();var a=n,s=n[0];t.moveTo(s.x,s.y);for(var i=0;i<a.length;i++){var o=a[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath()},circle:function(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}}))[t]},e.exports=i},{}],108:[function(t,e,n){"use strict";var r={};r.drawEdge=function(t,e,n,r,i){var o=e._private.rscratch,a=this.usePaths();if(!o.badLine&&!isNaN(o.allpts[0])&&e.visible()){var s;n&&(s=n,t.translate(-s.x1,-s.y1));var u=e.pstyle("overlay-padding").pfValue,l=e.pstyle("overlay-opacity").value,c=e.pstyle("overlay-color").value;if(i){if(0===l)return;this.strokeStyle(t,c[0],c[1],c[2],l),t.lineCap="round","self"!=o.edgeType||a||(t.lineCap="butt")}else{var h=e.pstyle("line-color").value;this.strokeStyle(t,h[0],h[1],h[2],e.pstyle("opacity").value),t.lineCap="butt"}t.lineJoin="round";var d=e.pstyle("width").pfValue+(i?2*u:0),p=i?"solid":e.pstyle("line-style").value;t.lineWidth=d;var f=e.pstyle("shadow-blur").pfValue,g=e.pstyle("shadow-opacity").value,v=e.pstyle("shadow-color").value,y=e.pstyle("shadow-offset-x").pfValue,m=e.pstyle("shadow-offset-y").pfValue;this.shadowStyle(t,v,i?0:g,f,y,m),this.drawEdgePath(e,t,o.allpts,p,d),this.drawArrowheads(t,e,i),this.shadowStyle(t,"transparent",0),i||this.drawEdge(t,e,!1,r,!0),this.drawElementText(t,e,r),n&&t.translate(s.x1,s.y1)}},r.drawEdgePath=function(t,e,n,r,i){var o,a=t._private.rscratch,s=e,u=!1,l=this.usePaths();if(l){var c=n.join("$");a.pathCacheKey&&a.pathCacheKey===c?(o=e=a.pathCache,u=!0):(o=e=new Path2D,a.pathCacheKey=c,a.pathCache=o)}if(s.setLineDash)switch(r){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash([6,3]);break;case"solid":s.setLineDash([])}if(!u&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<n.length;h+=4)e.quadraticCurveTo(n[h],n[h+1],n[h+2],n[h+3]);break;case"straight":case"segments":case"haystack":for(var h=2;h+1<n.length;h+=2)e.lineTo(n[h],n[h+1])}e=s,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])},r.drawArrowheads=function(t,e,n){if(!n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle)}},r.drawArrowhead=function(t,e,n,r,i,o){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var a=this,s=e.pstyle(n+"-arrow-shape").value;if("none"!==s){var u=t.globalCompositeOperation,l="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",c=e.pstyle(n+"-arrow-fill").value,h=e.pstyle("opacity").value;"half-triangle-overshot"===s&&(c="hollow",l="hollow"),1===h&&"hollow"!==c||(t.globalCompositeOperation="destination-out",a.fillStyle(t,255,255,255,1),a.strokeStyle(t,255,255,255,1),a.drawArrowShape(e,n,t,l,e.pstyle("width").pfValue,e.pstyle(n+"-arrow-shape").value,r,i,o),t.globalCompositeOperation=u);var d=e.pstyle(n+"-arrow-color").value;a.fillStyle(t,d[0],d[1],d[2],h),a.strokeStyle(t,d[0],d[1],d[2],h),a.drawArrowShape(e,n,t,c,e.pstyle("width").pfValue,e.pstyle(n+"-arrow-shape").value,r,i,o)}}},r.drawArrowShape=function(t,e,n,r,i,o,a,s,u){var l,c=this,h=this.usePaths(),d=t._private.rscratch,p=!1,f=n,g={x:a,y:s},v=this.getArrowWidth(i),y=c.arrowShapes[o];if(h){var m=v+"$"+o+"$"+u+"$"+a+"$"+s;d.arrowPathCacheKey=d.arrowPathCacheKey||{},d.arrowPathCache=d.arrowPathCache||{};d.arrowPathCacheKey[e]===m?(l=n=d.arrowPathCache[e],p=!0):(l=n=new Path2D,d.arrowPathCacheKey[e]=m,d.arrowPathCache[e]=l)}n.beginPath&&n.beginPath(),p||y.draw(n,v,u,g),!y.leavePathOpen&&n.closePath&&n.closePath(),n=f,"filled"!==r&&"both"!==r||(h?n.fill(l):n.fill()),"hollow"!==r&&"both"!==r||(n.lineWidth=y.matchEdgeWidth?i:1,n.lineJoin="miter",h?n.stroke(l):n.stroke())},e.exports=r},{}],109:[function(t,e,n){"use strict";var r=t("../../../math"),i={};i.drawElement=function(t,e,n,r){var i=this;e.isNode()?i.drawNode(t,e,n,r):i.drawEdge(t,e,n,r)},i.drawCachedElement=function(t,e,n,i){var o=this,a=e.boundingBox();if(0!==a.w&&0!==a.h&&(!i||r.boundingBoxesIntersect(a,i))){var s=o.data.eleTxrCache.getElement(e,a,n);s?t.drawImage(s.texture.canvas,s.x,0,s.width,s.height,a.x1,a.y1,a.w,a.h):o.drawElement(t,e)}},i.drawElements=function(t,e){for(var n=this,r=0;r<e.length;r++){var i=e[r];n.drawElement(t,i)}},i.drawCachedElements=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];i.drawCachedElement(t,a,n,r)}},i.drawCachedNodes=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];a.isNode()&&i.drawCachedElement(t,a,n,r)}},i.drawLayeredElements=function(t,e,n,r){var i=this,o=i.data.lyrTxrCache.getLayers(e,n);if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.bb;0!==u.w&&0!==u.h&&t.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(t,e,n,r)},e.exports=i},{"../../../math":128}],110:[function(t,e,n){"use strict";var r={};r.safeDrawImage=function(t,e,n,r,i,o,a,s,u,l){var c=this;try{t.drawImage(e,n,r,i,o,a,s,u,l)}catch(t){c.redrawHint("eles",!0),c.redrawHint("drag",!0),c.drawingImage=!0,c.redraw()}},r.drawInscribedImage=function(t,e,n){var r=this,i=n._private.position.x,o=n._private.position.y,a=n.pstyle("background-fit").value,s=n.pstyle("background-position-x"),u=n.pstyle("background-position-y"),l=n.pstyle("background-repeat").value,c=n.width(),h=n.height(),d=n._private.rscratch,p=n.pstyle("background-clip").value,f="node"===p,g=n.pstyle("background-image-opacity").value,v=e.width||e.cachedW,y=e.height||e.cachedH;null!=v&&null!=y||(document.body.appendChild(e),v=e.cachedW=e.width||e.offsetWidth,y=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var m=v,x=y,b=n.pstyle("background-width");"auto"!==b.value&&(m="%"===b.units?b.value/100*c:b.pfValue);var w=n.pstyle("background-height");if("auto"!==w.value&&(x="%"===w.units?w.value/100*h:w.pfValue),0!==m&&0!==x){if("contain"===a){var _=Math.min(c/m,h/x);m*=_,x*=_}else if("cover"===a){var _=Math.max(c/m,h/x);m*=_,x*=_}var E=i-c/2;E+="%"===s.units?(c-m)*s.value/100:s.pfValue;var k=o-h/2;k+="%"===u.units?(h-x)*u.value/100:u.pfValue,d.pathCache&&(E-=i,k-=o,i=0,o=0);var T=t.globalAlpha;if(t.globalAlpha=g,"no-repeat"===l)f&&(t.save(),d.pathCache?t.clip(d.pathCache):(r.nodeShapes[r.getNodeShape(n)].draw(t,i,o,c,h),t.clip())),r.safeDrawImage(t,e,0,0,v,y,E,k,m,x),f&&t.restore();else{var N=t.createPattern(e,l);t.fillStyle=N,r.nodeShapes[r.getNodeShape(n)].draw(t,i,o,c,h),t.translate(E,k),t.fill(),t.translate(-E,-k)}t.globalAlpha=T}},e.exports=r},{}],111:[function(t,e,n){"use strict";function r(t,e,n,r,i,o){var o=o||5;t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fill()}var i=t("../../../util"),o=t("../../../math"),a={};a.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(o.log2(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},a.drawElementText=function(t,e,n){var r=this;if(void 0===n){if(!r.eleTextBiggerThanMin(e))return}else if(!n)return;if(e.isNode()){var i=e.pstyle("label");if(!i||!i.value)return;var o=e.pstyle("text-halign").strValue;e.pstyle("text-valign").strValue;switch(o){case"left":t.textAlign="right";break;case"right":t.textAlign="left";break;default:t.textAlign="center"}t.textBaseline="bottom"}else{var i=e.pstyle("label"),a=e.pstyle("source-label"),s=e.pstyle("target-label");if(!(i&&i.value||a&&a.value||s&&s.value))return;t.textAlign="center",t.textBaseline="bottom"}r.drawText(t,e),e.isEdge()&&(r.drawText(t,e,"source"),r.drawText(t,e,"target"))},a.drawNodeText=a.drawEdgeText=a.drawElementText,a.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(e=this.fontCaches[n],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e},a.setupTextStyle=function(t,e){var n=e.effectiveOpacity(),r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=e.pstyle("text-opacity").value*e.pstyle("opacity").value*n,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value,h=e.pstyle("text-shadow-blur").pfValue,d=e.pstyle("text-shadow-opacity").value,p=e.pstyle("text-shadow-color").value,f=e.pstyle("text-shadow-offset-x").pfValue,g=e.pstyle("text-shadow-offset-y").pfValue,v=e._private.fontKey,y=this.getFontCache(t);y.key!==v&&(t.font=r+" "+a+" "+i+" "+o,y.key=v),t.lineJoin="round",this.fillStyle(t,l[0],l[1],l[2],s),this.strokeStyle(t,c[0],c[1],c[2],u),this.shadowStyle(t,p,d,h,f,g)},a.drawText=function(t,e,n){var o=e._private,a=o.rscratch,s=e.effectiveOpacity();if(0!==s&&0!==e.pstyle("text-opacity").value){var u=i.getPrefixedProperty(a,"labelX",n),l=i.getPrefixedProperty(a,"labelY",n),c=this.getLabelText(e,n);if(null!=c&&""!==c&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e);var h=n?n+"-":"",d=i.getPrefixedProperty(a,"labelWidth",n),p=i.getPrefixedProperty(a,"labelHeight",n),f=i.getPrefixedProperty(a,"labelAngle",n),g=e.pstyle(h+"text-margin-x").pfValue,v=e.pstyle(h+"text-margin-y").pfValue,y=e.isEdge(),m=(e.isNode(),e.pstyle("text-halign").value),x=e.pstyle("text-valign").value;y&&(m="center",x="center"),u+=g,l+=v;var b,w=e.pstyle("text-rotation");if(0!==(b="autorotate"===w.strValue?y?f:0:"none"===w.strValue?0:w.pfValue)){var _=u,E=l;t.translate(_,E),t.rotate(b),u=0,l=0}switch(x){case"top":break;case"center":l+=p/2;break;case"bottom":l+=p}var k=e.pstyle("text-background-opacity").value,T=e.pstyle("text-border-opacity").value,N=e.pstyle("text-border-width").pfValue;if(k>0||N>0&&T>0){var S=u;switch(m){case"left":S-=d;break;case"center":S-=d/2;break;case"right":}var L=l-p;if(k>0){var C=t.fillStyle,D=e.pstyle("text-background-color").value;t.fillStyle="rgba("+D[0]+","+D[1]+","+D[2]+","+k*s+")";"roundrectangle"==e.pstyle("text-background-shape").strValue?r(t,S,L,d,p,2):t.fillRect(S,L,d,p),t.fillStyle=C}if(N>0&&T>0){var A=t.strokeStyle,M=t.lineWidth,P=e.pstyle("text-border-color").value,I=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+P[0]+","+P[1]+","+P[2]+","+T*s+")",t.lineWidth=N,t.setLineDash)switch(I){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=N/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(S,L,d,p),"double"===I){var O=N/2;t.strokeRect(S+O,L+O,d-2*O,p-2*O)}t.setLineDash&&t.setLineDash([]),t.lineWidth=M,t.strokeStyle=A}}var R=2*e.pstyle("text-outline-width").pfValue;if(R>0&&(t.lineWidth=R),"wrap"===e.pstyle("text-wrap").value){var j=i.getPrefixedProperty(a,"labelWrapCachedLines",n),B=p/j.length;switch(x){case"top":l-=(j.length-1)*B;break;case"center":case"bottom":l-=(j.length-1)*B}for(var F=0;F<j.length;F++)R>0&&t.strokeText(j[F],u,l),t.fillText(j[F],u,l),l+=B}else R>0&&t.strokeText(c,u,l),t.fillText(c,u,l);0!==b&&(t.rotate(-b),t.translate(-_,-E)),this.shadowStyle(t,"transparent",0)}}},e.exports=a},{"../../../math":128,"../../../util":143}],112:[function(t,e,n){"use strict";var r=t("../../../is"),i={};i.drawNode=function(t,e,n,i){var o,a,s=this,u=e._private.rscratch,l=e._private,c=c||l.position;if(r.number(c.x)&&r.number(c.y)&&e.visible()){var h,d=e.effectiveOpacity(),p=this.usePaths(),f=!1,g=e.pstyle("padding").pfValue;o=e.width()+2*g,a=e.height()+2*g,t.lineWidth=e.pstyle("border-width").pfValue;var v;n&&(v=n,t.translate(-v.x1,-v.y1));var y,m=e.pstyle("background-image"),x=m.value[2]||m.value[1];if(void 0!==x){var b=e.pstyle("background-image-crossorigin");y=this.getCachedImage(x,b,function(){e.trigger("background"),s.redrawHint("eles",!0),s.redrawHint("drag",!0),s.drawingImage=!0,s.redraw()});var w=l.backgrounding;l.backgrounding=!y.complete,w!==l.backgrounding&&e.updateStyle(!1)}var _=e.pstyle("background-color").value,E=e.pstyle("border-color").value,k=e.pstyle("border-style").value;this.fillStyle(t,_[0],_[1],_[2],e.pstyle("background-opacity").value*d),this.strokeStyle(t,E[0],E[1],E[2],e.pstyle("border-opacity").value*d);var T=e.pstyle("shadow-blur").pfValue,N=e.pstyle("shadow-opacity").value,S=e.pstyle("shadow-color").value,L=e.pstyle("shadow-offset-x").pfValue,C=e.pstyle("shadow-offset-y").pfValue;if(this.shadowStyle(t,S,N,T,L,C),t.lineJoin="miter",t.setLineDash)switch(k){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}var D=e.pstyle("shape").strValue,A=e.pstyle("shape-polygon-points").pfValue;if(p){var M=D+"$"+o+"$"+a+("polygon"===D?"$"+A.join("$"):"");t.translate(c.x,c.y),u.pathCacheKey===M?(h=u.pathCache,f=!0):(h=new Path2D,u.pathCacheKey=M,u.pathCache=h)}if(!f){var P=c;p&&(P={x:0,y:0}),s.nodeShapes[this.getNodeShape(e)].draw(h||t,P.x,P.y,o,a)}p?t.fill(h):t.fill(),this.shadowStyle(t,"transparent",0),void 0!==x&&y.complete&&this.drawInscribedImage(t,y,e);var I=e.pstyle("background-blacken").value,O=e.pstyle("border-width").pfValue;if(this.hasPie(e)&&(this.drawPie(t,e,d),0===I&&0===O||p||s.nodeShapes[this.getNodeShape(e)].draw(t,c.x,c.y,o,a)),I>0?(this.fillStyle(t,0,0,0,I),p?t.fill(h):t.fill()):I<0&&(this.fillStyle(t,255,255,255,-I),p?t.fill(h):t.fill()),O>0&&(p?t.stroke(h):t.stroke(),"double"===k)){t.lineWidth=e.pstyle("border-width").pfValue/3;var R=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",p?t.stroke(h):t.stroke(),t.globalCompositeOperation=R}p&&t.translate(-c.x,-c.y),t.setLineDash&&t.setLineDash([]),s.drawElementText(t,e,i);var j=e.pstyle("overlay-padding").pfValue,B=e.pstyle("overlay-opacity").value,F=e.pstyle("overlay-color").value;B>0&&(this.fillStyle(t,F[0],F[1],F[2],B),s.nodeShapes.roundrectangle.draw(t,e._private.position.x,e._private.position.y,o+2*j,a+2*j),t.fill()),n&&t.translate(v.x1,v.y1)}},i.hasPie=function(t){return t=t[0],t._private.hasPie},i.drawPie=function(t,e,n,r){e=e[0];var i=e._private,o=e.cy().style(),a=e.pstyle("pie-size"),s=e.width(),u=e.height(),r=r||i.position,l=r.x,c=r.y,h=Math.min(s,u)/2,d=0;this.usePaths()&&(l=0,c=0),"%"===a.units?h=h*a.value/100:void 0!==a.pfValue&&(h=a.pfValue/2);for(var p=1;p<=o.pieBackgroundN;p++){var f=e.pstyle("pie-"+p+"-background-size").value,g=e.pstyle("pie-"+p+"-background-color").value,v=e.pstyle("pie-"+p+"-background-opacity").value*n,y=f/100;y+d>1&&(y=1-d);var m=1.5*Math.PI+2*Math.PI*d,x=2*Math.PI*y,b=m+x;0===f||d>=1||d+y>1||(t.beginPath(),t.moveTo(l,c),t.arc(l,c,h,m,b),t.closePath(),this.fillStyle(t,g[0],g[1],g[2],v),t.fill(),d+=y)}},e.exports=i},{"../../../is":126}],113:[function(t,e,n){"use strict";var r={},i=t("../../../util");r.getPixelRatio=function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},r.paintCache=function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if(e=n[i],e.context===t){r=!1;break}return r&&(e={context:t},n.push(e)),e},r.fillStyle=function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},r.strokeStyle=function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},r.shadowStyle=function(t,e,n,r,i,o){var a=this.cy.zoom();n>0?(t.shadowBlur=r*a,t.shadowColor="rgba("+e[0]+","+e[1]+","+e[2]+","+n+")",t.shadowOffsetX=i*a,t.shadowOffsetY=o*a):(t.shadowBlur=0,t.shadowColor="transparent",t.shadowOffsetX=0,t.shadowOffsetY=0)},r.matchCanvasSize=function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(a=s);var u,l=i*a,c=o*a;if(l!==e.canvasWidth||c!==e.canvasHeight){e.fontCaches=null;var h=n.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)u=n.canvases[d],u.width===l&&u.height===c||(u.width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px");for(var d=0;d<e.BUFFER_COUNT;d++)u=n.bufferCanvases[d],u.width===l&&u.height===c||(u.width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px");e.textureMult=1,a<=1&&(u=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,u.width=l*e.textureMult,u.height=c*e.textureMult),e.canvasWidth=l,e.canvasHeight=c}},r.renderTo=function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},r.render=function(t){function e(t,e,n,r,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",l.fillStyle(t,255,255,255,l.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=o}function n(t,n){var i,a,c,h;l.clearingMotionBlur||t!==d.bufferContexts[l.MOTIONBLUR_BUFFER_NODE]&&t!==d.bufferContexts[l.MOTIONBLUR_BUFFER_DRAG]?(i=T,a=E,c=l.canvasWidth,h=l.canvasHeight):(i={x:k.x*v,y:k.y*v},a=_*v,c=l.canvasWidth*v,h=l.canvasHeight*v),t.setTransform(1,0,0,1,0,0),"motionBlur"===n?e(t,0,0,c,h):r||void 0!==n&&!n||t.clearRect(0,0,c,h),o||(t.translate(i.x,i.y),t.scale(a,a)),u&&t.translate(u.x,u.y),s&&t.scale(s,s)}t=t||i.staticEmptyObject();var r=t.forcedContext,o=t.drawAllLayers,a=t.drawOnlyNodeLayer,s=t.forcedZoom,u=t.forcedPan,l=this,c=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,h=l.cy,d=l.data,p=d.canvasNeedsRedraw,f=l.textureOnViewport&&!r&&(l.pinching||l.hoverData.dragging||l.swipePanning||l.data.wheelZooming),g=void 0!==t.motionBlur?t.motionBlur:l.motionBlur,v=l.motionBlurPxRatio,y=h.hasCompoundNodes(),m=l.hoverData.draggingEles,x=!(!l.hoverData.selecting&&!l.touchData.selecting);g=g&&!r&&l.motionBlurEnabled&&!x;var b=g;r||(l.prevPxRatio!==c&&(l.invalidateContainerClientCoordsCache(),l.matchCanvasSize(l.container),l.redrawHint("eles",!0),l.redrawHint("drag",!0)),l.prevPxRatio=c),!r&&l.motionBlurTimeout&&clearTimeout(l.motionBlurTimeout),g&&(null==l.mbFrames&&(l.mbFrames=0),l.drawingImage||l.mbFrames++,l.mbFrames<3&&(b=!1),l.mbFrames>l.minMbLowQualFrames&&(l.motionBlurPxRatio=l.mbPxRBlurry)),l.clearingMotionBlur&&(l.motionBlurPxRatio=1),l.textureDrawLastFrame&&!f&&(p[l.NODE]=!0,p[l.SELECT_BOX]=!0);var w=h.style()._private.coreStyle,_=h.zoom(),E=void 0!==s?s:_,k=h.pan(),T={x:k.x,y:k.y},N={zoom:_,pan:{x:k.x,y:k.y}},S=l.prevViewport;void 0===S||N.zoom!==S.zoom||N.pan.x!==S.pan.x||N.pan.y!==S.pan.y||m&&!y||(l.motionBlurPxRatio=1),u&&(T=u),E*=c,T.x*=c,T.y*=c;var L=l.getCachedZSortedEles();if(f||(l.textureDrawLastFrame=!1),f){l.textureDrawLastFrame=!0
;if(!l.textureCache){l.textureCache={},l.textureCache.bb=h.mutableElements().boundingBox(),l.textureCache.texture=l.data.bufferCanvases[l.TEXTURE_BUFFER];var C=l.data.bufferContexts[l.TEXTURE_BUFFER];C.setTransform(1,0,0,1,0,0),C.clearRect(0,0,l.canvasWidth*l.textureMult,l.canvasHeight*l.textureMult),l.render({forcedContext:C,drawOnlyNodeLayer:!0,forcedPxRatio:c*l.textureMult});var N=l.textureCache.viewport={zoom:h.zoom(),pan:h.pan(),width:l.canvasWidth,height:l.canvasHeight};N.mpan={x:(0-N.pan.x)/N.zoom,y:(0-N.pan.y)/N.zoom}}p[l.DRAG]=!1,p[l.NODE]=!1;var D=d.contexts[l.NODE],A=l.textureCache.texture,N=l.textureCache.viewport;l.textureCache.bb,D.setTransform(1,0,0,1,0,0),g?e(D,0,0,N.width,N.height):D.clearRect(0,0,N.width,N.height);var M=w["outside-texture-bg-color"].value,P=w["outside-texture-bg-opacity"].value;l.fillStyle(D,M[0],M[1],M[2],P),D.fillRect(0,0,N.width,N.height);var _=h.zoom();n(D,!1),D.clearRect(N.mpan.x,N.mpan.y,N.width/N.zoom/c,N.height/N.zoom/c),D.drawImage(A,N.mpan.x,N.mpan.y,N.width/N.zoom/c,N.height/N.zoom/c)}else l.textureOnViewport&&!r&&(l.textureCache=null);var I=h.extent(),O=l.pinching||l.hoverData.dragging||l.swipePanning||l.data.wheelZooming||l.hoverData.draggingEles,R=l.hideEdgesOnViewport&&O,j=[];if(j[l.NODE]=!p[l.NODE]&&g&&!l.clearedForMotionBlur[l.NODE]||l.clearingMotionBlur,j[l.NODE]&&(l.clearedForMotionBlur[l.NODE]=!0),j[l.DRAG]=!p[l.DRAG]&&g&&!l.clearedForMotionBlur[l.DRAG]||l.clearingMotionBlur,j[l.DRAG]&&(l.clearedForMotionBlur[l.DRAG]=!0),p[l.NODE]||o||a||j[l.NODE]){var B=g&&!j[l.NODE]&&1!==v,D=r||(B?l.data.bufferContexts[l.MOTIONBLUR_BUFFER_NODE]:d.contexts[l.NODE]);n(D,g&&!B?"motionBlur":void 0),R?l.drawCachedNodes(D,L.nondrag,c,I):l.drawLayeredElements(D,L.nondrag,c,I),o||g||(p[l.NODE]=!1)}if(!a&&(p[l.DRAG]||o||j[l.DRAG])){var B=g&&!j[l.DRAG]&&1!==v,D=r||(B?l.data.bufferContexts[l.MOTIONBLUR_BUFFER_DRAG]:d.contexts[l.DRAG]);n(D,g&&!B?"motionBlur":void 0),R?l.drawCachedNodes(D,L.drag,c,I):l.drawCachedElements(D,L.drag,c,I),o||g||(p[l.DRAG]=!1)}if(l.showFps||!a&&p[l.SELECT_BOX]&&!o){var D=r||d.contexts[l.SELECT_BOX];if(n(D),1==l.selection[4]&&(l.hoverData.selecting||l.touchData.selecting)){var _=l.cy.zoom(),F=w["selection-box-border-width"].value/_;D.lineWidth=F,D.fillStyle="rgba("+w["selection-box-color"].value[0]+","+w["selection-box-color"].value[1]+","+w["selection-box-color"].value[2]+","+w["selection-box-opacity"].value+")",D.fillRect(l.selection[0],l.selection[1],l.selection[2]-l.selection[0],l.selection[3]-l.selection[1]),F>0&&(D.strokeStyle="rgba("+w["selection-box-border-color"].value[0]+","+w["selection-box-border-color"].value[1]+","+w["selection-box-border-color"].value[2]+","+w["selection-box-opacity"].value+")",D.strokeRect(l.selection[0],l.selection[1],l.selection[2]-l.selection[0],l.selection[3]-l.selection[1]))}if(d.bgActivePosistion&&!l.hoverData.selecting){var _=l.cy.zoom(),q=d.bgActivePosistion;D.fillStyle="rgba("+w["active-bg-color"].value[0]+","+w["active-bg-color"].value[1]+","+w["active-bg-color"].value[2]+","+w["active-bg-opacity"].value+")",D.beginPath(),D.arc(q.x,q.y,w["active-bg-size"].pfValue/_,0,2*Math.PI),D.fill()}var z=l.lastRedrawTime;if(l.showFps&&z){z=Math.round(z);var V=Math.round(1e3/z);D.setTransform(1,0,0,1,0,0),D.fillStyle="rgba(255, 0, 0, 0.75)",D.strokeStyle="rgba(255, 0, 0, 0.75)",D.lineWidth=1,D.fillText("1 frame = "+z+" ms = "+V+" fps",0,20);D.strokeRect(0,30,250,20),D.fillRect(0,30,250*Math.min(V/60,1),20)}o||(p[l.SELECT_BOX]=!1)}if(g&&1!==v){var G=d.contexts[l.NODE],X=l.data.bufferCanvases[l.MOTIONBLUR_BUFFER_NODE],Y=d.contexts[l.DRAG],U=l.data.bufferCanvases[l.MOTIONBLUR_BUFFER_DRAG],H=function(t,n,r){t.setTransform(1,0,0,1,0,0),r||!b?t.clearRect(0,0,l.canvasWidth,l.canvasHeight):e(t,0,0,l.canvasWidth,l.canvasHeight);var i=v;t.drawImage(n,0,0,l.canvasWidth*i,l.canvasHeight*i,0,0,l.canvasWidth,l.canvasHeight)};(p[l.NODE]||j[l.NODE])&&(H(G,X,j[l.NODE]),p[l.NODE]=!1),(p[l.DRAG]||j[l.DRAG])&&(H(Y,U,j[l.DRAG]),p[l.DRAG]=!1)}l.prevViewport=N,l.clearingMotionBlur&&(l.clearingMotionBlur=!1,l.motionBlurCleared=!0,l.motionBlur=!0),g&&(l.motionBlurTimeout=setTimeout(function(){l.motionBlurTimeout=null,l.clearedForMotionBlur[l.NODE]=!1,l.clearedForMotionBlur[l.DRAG]=!1,l.motionBlur=!1,l.clearingMotionBlur=!f,l.mbFrames=0,p[l.NODE]=!0,p[l.DRAG]=!0,l.redraw()},100)),l.drawingImage=!1,r||l.initrender||(l.initrender=!0,h.trigger("initrender")),r||h.trigger("render")},e.exports=r},{"../../../util":143}],114:[function(t,e,n){"use strict";var r=t("../../../math"),i={};i.drawPolygonPath=function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)t.lineTo(e+a*o[2*u],n+s*o[2*u+1]);t.closePath()},i.drawRoundRectanglePath=function(t,e,n,i,o){var a=i/2,s=o/2,u=r.getRoundRectangleRadius(i,o);t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.arcTo(e+a,n-s,e+a,n,u),t.arcTo(e+a,n+s,e,n+s,u),t.arcTo(e-a,n+s,e-a,n,u),t.arcTo(e-a,n-s,e,n-s,u),t.lineTo(e,n-s),t.closePath()};for(var o=Math.sin(0),a=Math.cos(0),s={},u={},l=Math.PI/40,c=0*Math.PI;c<2*Math.PI;c+=l)s[c]=Math.sin(c),u[c]=Math.cos(c);i.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var c,h,d=r/2,p=i/2,f=0*Math.PI;f<2*Math.PI;f+=l)c=e-d*s[f]*o+d*u[f]*a,h=n+p*u[f]*o+p*s[f]*a,0===f?t.moveTo(c,h):t.lineTo(c,h);t.closePath()},e.exports=i},{"../../../math":128}],115:[function(t,e,n){"use strict";var r=t("../../../math"),i=t("../../../util"),o=t("../../../heap"),a=t("./texture-cache-defs"),s={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},u=function(t){var e=this;e.renderer=t,e.onDequeues=[],e.setupDequeueing()},l=u.prototype;l.reasons=s,l.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]},l.getRetiredTextureQueue=function(t){var e=this,n=e.eleImgCaches.retired=e.eleImgCaches.retired||{};return n[t]=n[t]||[]},l.getElementQueue=function(){var t=this;return t.eleCacheQueue=t.eleCacheQueue||new o(function(t,e){return e.reqs-t.reqs})},l.getElementIdToQueue=function(){var t=this;return t.eleIdToCacheQueue=t.eleIdToCacheQueue||{}},l.getElement=function(t,e,n,i,o){var a=this,u=this.renderer,l=t._private.rscratch,c=u.cy.zoom();if(0===e.w||0===e.h)return null;if(null==i&&(i=Math.ceil(r.log2(c*n))),i<-4)i=-4;else if(c>=3.99||i>2)return null;var h=Math.pow(2,i),d=e.h*h,p=e.w*h,f=l.imgCaches=l.imgCaches||{},g=f[i];if(g)return g;var v;if(v=d<=25?25:d<=50?50:50*Math.ceil(d/50),d>1024||p>1024||t.isEdge()||t.isParent())return null;var y=a.getTextureQueue(v),m=y[y.length-2],x=function(){return a.recycleTexture(v,p)||a.addTexture(v,p)};m||(m=y[y.length-1]),m||(m=x()),m.width-m.usedWidth<p&&(m=x());for(var b,w=u.eleTextBiggerThanMin(t,h),_=function(t){return t&&t.scaledLabelShown===w},E=o&&o===s.dequeue,k=o&&o===s.highQuality,T=o&&o===s.downscale,N=i+1;N<=2;N++){var S=f[N];if(S){b=S;break}}var L=b&&b.level===i+1?b:null,C=function(){m.context.drawImage(L.texture.canvas,L.x,0,L.width,L.height,m.usedWidth,0,p,d)};if(_(L))C();else if(_(b)){if(!k)return a.queueElement(t,e,b.level-1),b;for(var N=b.level;N>i;N--)L=a.getElement(t,e,n,N,s.downscale);C()}else{var D;if(!E&&!k&&!T)for(var N=i-1;N>=-4;N--){var S=f[N];if(S){D=S;break}}if(_(D))return a.queueElement(t,e,i),D;m.context.translate(m.usedWidth,0),m.context.scale(h,h),u.drawElement(m.context,t,e,w),m.context.scale(1/h,1/h),m.context.translate(-m.usedWidth,0)}return g=f[i]={ele:t,x:m.usedWidth,texture:m,level:i,scale:h,width:p,height:d,scaledLabelShown:w},m.usedWidth+=Math.ceil(p+8),m.eleCaches.push(g),a.checkTextureFullness(m),g},l.invalidateElement=function(t){var e=this,n=t._private.rscratch.imgCaches;if(n)for(var r=-4;r<=2;r++){var o=n[r];if(o){var a=o.texture;a.invalidatedWidth+=o.width,n[r]=null,i.removeFromArray(a.eleCaches,o),e.checkTextureUtility(a)}}},l.checkTextureUtility=function(t){t.invalidatedWidth>=.5*t.width&&this.retireTexture(t)},l.checkTextureFullness=function(t){var e=this,n=e.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?i.removeFromArray(n,t):t.fullnessChecks++},l.retireTexture=function(t){var e=this,n=t.height,r=e.getTextureQueue(n);i.removeFromArray(r,t),t.retired=!0;for(var o=t.eleCaches,a=0;a<o.length;a++){var s=o[a],u=s.ele,l=s.level,c=u._private.rscratch.imgCaches;c&&(c[l]=null)}i.clearArray(o),e.getRetiredTextureQueue(n).push(t)},l.addTexture=function(t,e){var n=this,r=n.getTextureQueue(t),i={};return r.push(i),i.eleCaches=[],i.height=t,i.width=Math.max(1024,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=document.createElement("canvas"),i.canvas.width=i.width,i.canvas.height=i.height,i.context=i.canvas.getContext("2d"),i},l.recycleTexture=function(t,e){for(var n=this,r=n.getTextureQueue(t),o=n.getRetiredTextureQueue(t),a=0;a<o.length;a++){var s=o[a];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,i.clearArray(s.eleCaches),s.context.clearRect(0,0,s.width,s.height),i.removeFromArray(o,s),r.push(s),s}},l.queueElement=function(t,e,n){var i=this,o=i.getElementQueue(),a=i.getElementIdToQueue(),s=t.id(),u=a[s];if(u)u.level=Math.max(u.level,n),u.reqs++,o.updateItem(u);else{var l={ele:t,bb:e,position:r.copyPosition(t.position()),level:n,reqs:1};t.isEdge()&&(l.positions={source:r.copyPosition(t.source().position()),target:r.copyPosition(t.target().position())}),o.push(l),a[s]=l}},l.dequeue=function(t,e){for(var n=this,i=n.getElementQueue(),o=n.getElementIdToQueue(),a=[],u=0;u<1&&i.size()>0;u++){var l=i.pop();o[l.ele.id()]=null,a.push(l);var c,h=l.ele;c=(!h.isEdge()||r.arePositionsSame(h.source().position(),l.positions.source)&&r.arePositionsSame(h.target().position(),l.positions.target))&&r.arePositionsSame(h.position(),l.position)?l.bb:h.boundingBox(),n.getElement(l.ele,c,t,l.level,s.dequeue)}return a},l.onDequeue=function(t){this.onDequeues.push(t)},l.offDequeue=function(t){i.removeFromArray(this.onDequeues,t)},l.setupDequeueing=a.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++){(0,t.onDequeues[n])(e)}},shouldRedraw:function(t,e,n,i){for(var o=0;o<e.length;o++){var a=e[o].bb;if(r.boundingBoxesIntersect(a,i))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}}),e.exports=u},{"../../../heap":124,"../../../math":128,"../../../util":143,"./texture-cache-defs":120}],116:[function(t,e,n){"use strict";var r=t("../../../is"),i={};i.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},i.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements(),i=n.boundingBox(),o=this.findContainerClientCoords(),a=t.full?Math.ceil(i.w):o[2],s=t.full?Math.ceil(i.h):o[3],u=r.number(t.maxWidth)||r.number(t.maxHeight),l=this.getPixelRatio(),c=1;if(void 0!==t.scale)a*=t.scale,s*=t.scale,c=t.scale;else if(u){var h=1/0,d=1/0;r.number(t.maxWidth)&&(h=c*t.maxWidth/a),r.number(t.maxHeight)&&(d=c*t.maxHeight/s),c=Math.min(h,d),a*=c,s*=c}u||(a*=l,s*=l,c*=l);var p=document.createElement("canvas");p.width=a,p.height=s,p.style.width=a+"px",p.style.height=s+"px";var f=p.getContext("2d");if(a>0&&s>0){f.clearRect(0,0,a,s),t.bg&&(f.fillStyle=t.bg,f.rect(0,0,a,s),f.fill()),f.globalCompositeOperation="source-over";var g=this.getCachedZSortedEles();if(t.full)f.translate(-i.x1*c,-i.y1*c),f.scale(c,c),this.drawElements(f,g);else{var v=e.pan(),y={x:v.x*c,y:v.y*c};c*=e.zoom(),f.translate(y.x,y.y),f.scale(c,c),this.drawElements(f,g)}}return p},i.png=function(t){return this.bufferCanvasImage(t).toDataURL("image/png")},i.jpg=function(t){return this.bufferCanvasImage(t).toDataURL("image/jpeg")},e.exports=i},{"../../../is":126}],117:[function(t,e,n){"use strict";function r(t){var e=this;e.data={canvases:new Array(l.CANVAS_LAYERS),contexts:new Array(l.CANVAS_LAYERS),canvasNeedsRedraw:new Array(l.CANVAS_LAYERS),bufferCanvases:new Array(l.BUFFER_COUNT),bufferContexts:new Array(l.CANVAS_LAYERS)},e.data.canvasContainer=document.createElement("div");var n=e.data.canvasContainer.style;e.data.canvasContainer.setAttribute("style","-webkit-tap-highlight-color: rgba(0,0,0,0);"),n.position="relative",n.zIndex="0",n.overflow="hidden";var r=t.cy.container();r.appendChild(e.data.canvasContainer),r.setAttribute("style",(r.getAttribute("style")||"")+"-webkit-tap-highlight-color: rgba(0,0,0,0);");for(var i=0;i<l.CANVAS_LAYERS;i++){var u=e.data.canvases[i]=document.createElement("canvas");e.data.contexts[i]=u.getContext("2d"),u.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(o.ms()?" -ms-touch-action: none; touch-action: none; ":"")),u.style.position="absolute",u.setAttribute("data-id","layer"+i),u.style.zIndex=String(l.CANVAS_LAYERS-i),e.data.canvasContainer.appendChild(u),e.data.canvasNeedsRedraw[i]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[l.NODE].setAttribute("data-id","layer"+l.NODE+"-node"),e.data.canvases[l.SELECT_BOX].setAttribute("data-id","layer"+l.SELECT_BOX+"-selectbox"),e.data.canvases[l.DRAG].setAttribute("data-id","layer"+l.DRAG+"-drag");for(var i=0;i<l.BUFFER_COUNT;i++)e.data.bufferCanvases[i]=document.createElement("canvas"),e.data.bufferContexts[i]=e.data.bufferCanvases[i].getContext("2d"),e.data.bufferCanvases[i].style.position="absolute",e.data.bufferCanvases[i].setAttribute("data-id","buffer"+i),e.data.bufferCanvases[i].style.zIndex=String(-i-1),e.data.bufferCanvases[i].style.visibility="hidden";e.pathsEnabled=!0,e.data.eleTxrCache=new a(e),e.data.lyrTxrCache=new s(e,e.data.eleTxrCache),e.onUpdateEleCalcs(function(t,n){for(var r=0;r<n.length;r++){var i=n[r],o=i._private.rstyle,a=o.dirtyEvents;i.isNode()&&a&&1===a.length&&a.position||e.data.eleTxrCache.invalidateElement(i)}n.length>0&&e.data.lyrTxrCache.invalidateElements(n)})}var i=t("../../../util"),o=t("../../../is"),a=t("./ele-texture-cache"),s=t("./layered-texture-cache"),u=r,l=r.prototype;l.CANVAS_LAYERS=3,l.SELECT_BOX=0,l.DRAG=1,l.NODE=2,l.BUFFER_COUNT=3,l.TEXTURE_BUFFER=0,l.MOTIONBLUR_BUFFER_NODE=1,l.MOTIONBLUR_BUFFER_DRAG=2,l.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[l.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[l.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[l.SELECT_BOX]=e}};var c="undefined"!=typeof Path2D;l.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},l.usePaths=function(){return c&&this.pathsEnabled},[t("./arrow-shapes"),t("./drawing-elements"),t("./drawing-edges"),t("./drawing-images"),t("./drawing-label-text"),t("./drawing-nodes"),t("./drawing-redraw"),t("./drawing-shapes"),t("./export-image"),t("./node-shapes")].forEach(function(t){i.extend(l,t)}),e.exports=u},{"../../../is":126,"../../../util":143,"./arrow-shapes":107,"./drawing-edges":108,"./drawing-elements":109,"./drawing-images":110,"./drawing-label-text":111,"./drawing-nodes":112,"./drawing-redraw":113,"./drawing-shapes":114,"./ele-texture-cache":115,"./export-image":116,"./layered-texture-cache":118,"./node-shapes":119}],118:[function(t,e,n){"use strict";function r(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)}var i=t("../../../util"),o=t("../../../math"),a=t("../../../heap"),s=t("../../../is"),u=t("./texture-cache-defs"),l=function(t,e){var n=this,r=n.renderer=t;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=i.performanceNow()-500,n.skipping=!1,r.beforeRender(function(t,e){e-n.lastInvalidationTime<=250?n.skipping=!0:n.skipping=!1});var o=function(t,e){return e.reqs-t.reqs};n.layersQueue=new a(o),n.eleTxrCache=e,n.setupEleCacheInvalidation(),n.setupDequeueing()},c=l.prototype,h=0,d=Math.pow(2,53)-1;c.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=document.createElement("canvas");o.width=r,o.height=i;var a={id:h=++h%d,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(n,n),s.translate(u,l),a},c.getLayers=function(t,e,n){var r=this,a=r.renderer,s=a.cy,u=s.zoom(),l=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(o.log2(u*e)))<-4)n=-4;else if(u>=3.99||n>2)return null;r.validateLayersElesOrdering(n,t);var c,h,d=r.layersByLevel,p=Math.pow(2,n),f=d[n]=d[n]||[],g=r.levelIsComplete(n,t);if(g)return f;!function(){var e=function(e){if(r.validateLayersElesOrdering(e,t),r.levelIsComplete(e,t))return h=d[e],!0},o=function(t){if(!h)for(var r=n+t;-4<=r&&r<=2&&!e(r);r+=t);};o(1),o(-1);for(var a=f.length-1;a>=0;a--){var s=f[a];s.invalid&&i.removeFromArray(f,s)}}();var v=function(){if(!c){c=o.makeBoundingBox();for(var e=0;e<t.length;e++)o.updateBoundingBox(c,t[e].boundingBox())}return c};if(r.skipping&&!l)return null;for(var y=null,m=t.length/1,x=!l,b=0;b<t.length;b++){var w=t[b],_=w._private.rscratch,E=_.imgLayerCaches=_.imgLayerCaches||{},k=E[n];if(k)y=k;else{if((!y||y.eles.length>=m||!o.boundingBoxInBoundingBox(y.bb,w.boundingBox()))&&!(y=function(t){t=t||{};var e=t.after;if(v(),c.w*p*(c.h*p)>16e6)return null;var i=r.makeLayer(c,n);if(null!=e){var o=f.indexOf(e)+1;f.splice(o,0,i)}else(void 0===t.insert||t.insert)&&f.unshift(i);return i}({insert:!0,after:y})))return null;h||x?r.queueLayer(y,w):r.drawEleInLayer(y,w,n,e),y.eles.push(w),E[n]=y}}return h?h:x?null:f},c.getEleLevelForLayerLevel=function(t,e){return t},c.drawEleInLayer=function(t,e,n,i){var o=this,a=this.renderer,s=t.context,u=e.boundingBox();if(0!==u.w&&0!==u.h){var l=o.eleTxrCache,c=l.reasons.highQuality;n=o.getEleLevelForLayerLevel(n,i);var h=l.getElement(e,u,null,n,c);h?(r(s,!1),s.drawImage(h.texture.canvas,h.x,0,h.width,h.height,u.x1,u.y1,u.w,u.h),r(s,!0)):a.drawElement(s,e)}},c.levelIsComplete=function(t,e){var n=this,r=n.layersByLevel[t];if(!r||0===r.length)return!1;for(var i=0,o=0;o<r.length;o++){var a=r[o];if(a.reqs>0)return!1;if(a.invalid)return!1;i+=a.eles.length}return i===e.length},c.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0)this.invalidateLayer(i);else for(var s=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}},c.updateElementsInLayers=function(t,e){for(var n=this,r=s.element(t[0]),i=0;i<t.length;i++)for(var o=r?null:t[i],a=r?t[i]:t[i].ele,u=a._private.rscratch,l=u.imgLayerCaches=u.imgLayerCaches||{},c=-4;c<=2;c++){var h=l[c];h&&(o&&n.getEleLevelForLayerLevel(h.level)!==o.level||e(h,a,o))}},c.haveLayers=function(){for(var t=this,e=!1,n=-4;n<=2;n++){var r=t.layersByLevel[n];if(r&&r.length>0){e=!0;break}}return e},c.invalidateElements=function(t){var e=this;e.lastInvalidationTime=i.performanceNow(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,function(t,n,r){e.invalidateLayer(t)})},c.invalidateLayer=function(t){if(this.lastInvalidationTime=i.performanceNow(),!t.invalid){var e=t.level,n=t.eles,r=this.layersByLevel[e];i.removeFromArray(r,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var o=0;o<n.length;o++){var a=n[o]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}},c.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(t,n,r){var i=t.replacement;if(i||(i=t.replacement=e.makeLayer(t.bb,t.level),i.replaces=t,i.eles=t.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)e.queueLayer(i,i.eles[o])})},c.setupEleCacheInvalidation=function(){var t=this,e=[],n=i.debounce(function(){t.refineElementTextures(e),e=[]},50);t.eleTxrCache.onDequeue(function(t){for(var r=0;r<t.length;r++)e.push(t[r]);n()})},c.queueLayer=function(t,e){var n=this,r=n.layersQueue,i=t.elesQueue,o=i.hasId=i.hasId||{};if(!t.replacement){if(e){if(o[e.id()])return;i.push(e),o[e.id()]=!0}t.reqs?(t.reqs++,r.updateItem(t)):(t.reqs=1,r.push(t))}},c.dequeue=function(t){for(var e=this,n=e.layersQueue,r=[],i=0;i<1&&0!==n.size();){var o=n.peek();if(o.replacement)n.pop();else if(o.replaces&&o!==o.replaces.replacement)n.pop();else if(o.invalid)n.pop();else{var a=o.elesQueue.shift();a&&(e.drawEleInLayer(o,a,o.level,t),i++),0===r.length&&r.push(!0),0===o.elesQueue.length&&(n.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}}return r},c.applyLayerReplacement=function(t){var e=this,n=e.layersByLevel[t.level],r=t.replaces,i=n.indexOf(r);if(!(i<0||r.invalid)){n[i]=t;for(var o=0;o<t.eles.length;o++){var a=t.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}},c.requestRedraw=i.debounce(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100),c.setupDequeueing=u.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:i.noop,shouldRedraw:i.trueify,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}}),e.exports=l},{"../../../heap":124,"../../../is":126,"../../../math":128,"../../../util":143,"./texture-cache-defs":120}],119:[function(t,e,n){"use strict";var r={};r.nodeShapeImpl=function(t,e,n,r,i,o,a){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"roundrectangle":return this.drawRoundRectanglePath(e,n,r,i,o)}},e.exports=r},{}],120:[function(t,e,n){"use strict";var r=t("../../../util");e.exports={setupDequeueing:function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var i=r.debounce(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},t.deqRedrawThreshold),o=function(o,a){for(var s=r.performanceNow(),u=n.averageRedrawTime,l=n.lastRedrawTime,c=[],h=n.cy.extent(),d=n.getPixelRatio();;){var p=r.performanceNow(),f=p-s,g=p-a;if(l<1e3/60){var v=1e3/60-(o?u:0);if(g>=t.deqFastCost*v)break}else if(o){if(f>=t.deqCost*l||f>=t.deqAvgCost*u)break}else if(g>=t.deqNoDrawCost*(1e3/60))break;var y=t.deq(e,d,h);if(!(y.length>0))break;for(var m=0;m<y.length;m++)c.push(y[m])}c.length>0&&(t.onDeqd(e,c),!o&&t.shouldRedraw(e,c,d,h)&&i())},a=t.priority||r.noop;n.beforeRender(o,a(e))}}}}},{"../../../util":143}],121:[function(t,e,n){"use strict";e.exports=[{name:"null",impl:t("./null")},{name:"base",impl:t("./base")},{name:"canvas",impl:t("./canvas")}]},{"./base":103,"./canvas":117,"./null":122}],122:[function(t,e,n){"use strict";function r(t){this.options=t,this.notifications=0}var i=function(){};r.prototype={recalculateRenderedStyle:i,notify:function(){this.notifications++},init:i},e.exports=r},{}],123:[function(t,e,n){"use strict";var r=t("./is"),i=t("./util"),o=t("./thread"),a=t("./promise"),s=t("./define"),u=function(e){if(!(this instanceof u))return new u(e);this._private={pass:[]};if(r.number(e),"undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency)e=navigator.hardwareConcurrency;else try{e=t("os").cpus().length}catch(t){e=4}for(var n=0;n<e;n++)this[n]=new o;this.length=e},l=u.prototype;i.extend(l,{instanceString:function(){return"fabric"},require:function(t,e){for(var n=0;n<this.length;n++){this[n].require(t,e)}return this},random:function(){return this[Math.round((this.length-1)*Math.random())]},run:function(t){var e=this._private.pass.shift();return this.random().pass(e).run(t)},message:function(t){return this.random().message(t)},broadcast:function(t){for(var e=0;e<this.length;e++){this[e].message(t)}return this},stop:function(){for(var t=0;t<this.length;t++){this[t].stop()}return this},pass:function(t){var e=this._private.pass;if(!r.array(t))throw"Only arrays may be used with fabric.pass()";return e.push(t),this},spreadSize:function(){var t=Math.ceil(this._private.pass[0].length/this.length);return t=Math.max(1,t)},spread:function(t){for(var e=this,n=e._private,r=e.spreadSize(),i=n.pass.shift().concat([]),o=[],s=0;s<this.length;s++){var u=this[s],l=i.splice(0,r),c=u.pass(l).run(t);o.push(c);if(0===i.length)break}return a.all(o).then(function(t){for(var e=[],n=0,r=0;r<t.length;r++)for(var i=t[r],o=0;o<i.length;o++){var a=i[o];e[n++]=a}return e})},map:function(t){var e=this;return e.require(t,"_$_$_fabmap"),e.spread(function(t){var e=[],n=resolve;resolve=function(t){e.push(t)};for(var r=0;r<t.length;r++){var i=e.length,o=_$_$_fabmap(t[r]);i===e.length&&e.push(o)}return resolve=n,e})},filter:function(t){var e=this._private,n=e.pass[0];return this.map(t).then(function(t){for(var e=[],r=0;r<n.length;r++){var i=n[r];t[r]&&e.push(i)}return e})},sort:function(t){var e=this,n=this._private.pass[0].length,r=this.spreadSize();return t=t||function(t,e){return t<e?-1:t>e?1:0},e.require(t,"_$_$_cmp"),e.spread(function(t){var e=t.sort(_$_$_cmp);resolve(e)}).then(function(e){for(var i=r;i<n;i*=2)for(var o=0;o<n;o+=2*i)!function(r,i,o){i=Math.min(i,n),o=Math.min(o,n);for(var a=r,s=i,u=[],l=a;l<o;l++){var c=e[r],h=e[i];r<s&&(i>=o||t(c,h)<=0)?(u.push(c),r++):(u.push(h),i++)}for(var l=0;l<u.length;l++){e[a+l]=u[l]}}(o,o+i,o+2*i);return e})}});var c=function(t){return t=t||{},function(e,n){var r=this._private.pass.shift();return this.random().pass(r)[t.threadFn](e,n)}};i.extend(l,{randomMap:c({threadFn:"map"}),reduce:c({threadFn:"reduce"}),reduceRight:c({threadFn:"reduceRight"})});var h=l;h.promise=h.run,h.terminate=h.halt=h.stop,h.include=h.require,i.extend(l,{on:s.on(),one:s.on({unbindSelfOnTrigger:!0}),off:s.off(),trigger:s.trigger()}),s.eventAliasesOn(l),e.exports=u},{"./define":87,"./is":126,"./promise":129,"./thread":141,"./util":143,os:203}],124:[function(t,e,n){"use strict";var r,i,o,a,s,u,l,c,h,d,p,f,g,v,y;o=Math.floor,d=Math.min,i=function(t,e){return t<e?-1:t>e?1:0},h=function(t,e,n,r,a){var s;if(null==n&&(n=0),null==a&&(a=i),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=t.length);n<r;)s=o((n+r)/2),a(e,t[s])<0?r=s:n=s+1;return[].splice.apply(t,[n,n-n].concat(e)),e},u=function(t,e,n){return null==n&&(n=i),t.push(e),v(t,0,t.length-1,n)},s=function(t,e){var n,r;return null==e&&(e=i),n=t.pop(),t.length?(r=t[0],t[0]=n,y(t,0,e)):r=n,r},c=function(t,e,n){var r;return null==n&&(n=i),r=t[0],t[0]=e,y(t,0,n),r},l=function(t,e,n){var r;return null==n&&(n=i),t.length&&n(t[0],e)<0&&(r=[t[0],e],e=r[0],t[0]=r[1],y(t,0,n)),e},a=function(t,e){var n,r,a,s,u,l;for(null==e&&(e=i),s=function(){l=[];for(var e=0,n=o(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)l.push(e);return l}.apply(this).reverse(),u=[],r=0,a=s.length;r<a;r++)n=s[r],u.push(y(t,n,e));return u},g=function(t,e,n){var r;if(null==n&&(n=i),(r=t.indexOf(e))!==-1)return v(t,0,r,n),y(t,r,n)},p=function(t,e,n){var r,o,s,u,c;if(null==n&&(n=i),o=t.slice(0,e),!o.length)return o;for(a(o,n),c=t.slice(e),s=0,u=c.length;s<u;s++)r=c[s],l(o,r,n);return o.sort(n).reverse()},f=function(t,e,n){var r,o,u,l,c,p,f,g,v;if(null==n&&(n=i),10*e<=t.length){if(u=t.slice(0,e).sort(n),!u.length)return u;for(o=u[u.length-1],f=t.slice(e),l=0,p=f.length;l<p;l++)r=f[l],n(r,o)<0&&(h(u,r,0,null,n),u.pop(),o=u[u.length-1]);return u}for(a(t,n),v=[],c=0,g=d(e,t.length);0<=g?c<g:c>g;0<=g?++c:--c)v.push(s(t,n));return v},v=function(t,e,n,r){var o,a,s;for(null==r&&(r=i),o=t[n];n>e&&(s=n-1>>1,a=t[s],r(o,a)<0);)t[n]=a,n=s;return t[n]=o},y=function(t,e,n){var r,o,a,s,u;for(null==n&&(n=i),o=t.length,u=e,a=t[e],r=2*e+1;r<o;)s=r+1,s<o&&!(n(t[r],t[s])<0)&&(r=s),t[e]=t[r],e=r,r=2*e+1;return t[e]=a,v(t,u,e,n)},r=function(){function t(t){this.cmp=null!=t?t:i,this.nodes=[]}return t.push=u,t.pop=s,t.replace=c,t.pushpop=l,t.heapify=a,t.updateItem=g,t.nlargest=p,t.nsmallest=f,t.prototype.push=function(t){return u(this.nodes,t,this.cmp)},t.prototype.pop=function(){return s(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return this.nodes.indexOf(t)!==-1},t.prototype.replace=function(t){return c(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return l(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return a(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return g(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),e.exports=r},{}],125:[function(t,e,n){"use strict";t("./-preamble");var r=t("./window"),i=t("./is"),o=t("./core"),a=t("./extension"),s=t("./jquery-plugin"),u=t("./stylesheet"),l=t("./thread"),c=t("./fabric"),h=function(t){return void 0===t&&(t={}),i.plainObject(t)?new o(t):i.string(t)?a.apply(a,arguments):void 0};h.version=t("./version"),r&&r.jQuery&&s(r.jQuery,h),h.registerJquery=function(t){s(t,h)},h.stylesheet=h.Stylesheet=u,h.thread=h.Thread=l,h.fabric=h.Fabric=c,e.exports=h},{"./-preamble":44,"./core":80,"./extension":89,"./fabric":123,"./is":126,"./jquery-plugin":127,"./stylesheet":140,"./thread":141,"./version":149,"./window":150}],126:[function(t,e,n){"use strict";var r=t("./window"),i=r?r.navigator:null,o=r?r.document:null,a=typeof{},s=typeof HTMLElement,u=function(t){return t&&t.instanceString&&l.fn(t.instanceString)?t.instanceString():null},l={defined:function(t){return null!=t},string:function(t){return null!=t&&"string"==typeof t},fn:function(t){return null!=t&&"function"==typeof t},array:function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},plainObject:function(t){return null!=t&&typeof t===a&&!l.array(t)&&t.constructor===Object},object:function(t){return null!=t&&typeof t===a},number:function(t){return null!=t&&"number"==typeof t&&!isNaN(t)},integer:function(t){return l.number(t)&&Math.floor(t)===t},bool:function(t){return null!=t&&typeof t==typeof!0},htmlElement:function(t){return"undefined"===s?void 0:null!=t&&t instanceof HTMLElement},elementOrCollection:function(t){return l.element(t)||l.collection(t)},element:function(t){return"collection"===u(t)&&t._private.single},collection:function(t){return"collection"===u(t)&&!t._private.single},core:function(t){return"core"===u(t)},style:function(t){return"style"===u(t)},stylesheet:function(t){return"stylesheet"===u(t)},event:function(t){return"event"===u(t)},thread:function(t){return"thread"===u(t)},fabric:function(t){return"fabric"===u(t)},emptyString:function(t){return void 0===t||null===t||!(""!==t&&!t.match(/^\s+$/))},nonemptyString:function(t){return!(!t||!l.string(t)||""===t||t.match(/^\s+$/))},domElement:function(t){return"undefined"!=typeof HTMLElement&&t instanceof HTMLElement},boundingBox:function(t){return l.plainObject(t)&&l.number(t.x1)&&l.number(t.x2)&&l.number(t.y1)&&l.number(t.y2)},promise:function(t){return l.object(t)&&l.fn(t.then)},touch:function(){return r&&("ontouchstart"in r||r.DocumentTouch&&o instanceof DocumentTouch)},gecko:function(){return r&&("undefined"!=typeof InstallTrigger||"MozAppearance"in o.documentElement.style)},webkit:function(){return r&&("undefined"!=typeof webkitURL||"WebkitAppearance"in o.documentElement.style)},chromium:function(){return r&&"undefined"!=typeof chrome},khtml:function(){return i&&i.vendor.match(/kde/i)},khtmlEtc:function(){return l.khtml()||l.webkit()||l.chromium()},ms:function(){return i&&i.userAgent.match(/msie|trident|edge/i)},windows:function(){return i&&i.appVersion.match(/Win/i)},mac:function(){return i&&i.appVersion.match(/Mac/i)},linux:function(){return i&&i.appVersion.match(/Linux/i)},unix:function(){return i&&i.appVersion.match(/X11/i)}};e.exports=l},{"./window":150}],127:[function(t,e,n){"use strict";var r=t("./is"),i=function(t){return t[0]._cyreg=t[0]._cyreg||{}},o=function(t,e){t&&(t.fn.cytoscape||(t.fn.cytoscape=function(n){var o=t(this);if("get"===n)return i(o).cy;if(r.fn(n)){
var a=n,s=i(o).cy;if(s&&s.isReady())s.trigger("ready",[],a);else{var u=i(o);(u.readies=u.readies||[]).push(a)}}else if(r.plainObject(n))return o.each(function(){e(t.extend({},n,{container:t(this)[0]}))})},t.cytoscape=e,null==t.fn.cy&&null==t.cy&&(t.fn.cy=t.fn.cytoscape,t.cy=t.cytoscape)))};e.exports=o},{"./is":126}],128:[function(t,e,n){"use strict";var r={};r.arePositionsSame=function(t,e){return t.x===e.x&&t.y===e.y},r.copyPosition=function(t){return{x:t.x,y:t.y}},r.array2point=function(t){return{x:t[0],y:t[1]}},r.deg2rad=function(t){return Math.PI*t/180},r.log2=Math.log2||function(t){return Math.log(t)/Math.log(2)},r.signum=function(t){return t>0?1:t<0?-1:0},r.dist=function(t,e){return Math.sqrt(r.sqdist(t,e))},r.sqdist=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},r.qbezierAt=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},r.qbezierPtAt=function(t,e,n,i){return{x:r.qbezierAt(t.x,e.x,n.x,i),y:r.qbezierAt(t.y,e.y,n.y,i)}},r.lineAt=function(t,e,n,i){var o={x:e.x-t.x,y:e.y-t.y},a=r.dist(t,e),s={x:o.x/a,y:o.y/a};n=null==n?0:n;var i=null!=i?i:n*a;return{x:t.x+s.x*i,y:t.y+s.y*i}},r.lineAtDist=function(t,e,n){return r.lineAt(t,e,void 0,n)},r.triangleAngle=function(t,e,n){var i=r.dist(e,n),o=r.dist(t,n),a=r.dist(t,e);return Math.acos((i*i+o*o-a*a)/(2*i*o))},r.bound=function(t,e,n){return Math.max(t,Math.min(n,e))},r.makeBoundingBox=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0),w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},r.updateBoundingBox=function(t,e){t.x1=Math.min(t.x1,e.x1),t.x2=Math.max(t.x2,e.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,e.y1),t.y2=Math.max(t.y2,e.y2),t.h=t.y2-t.y1},r.expandBoundingBox=function(t,e){return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},r.boundingBoxesIntersect=function(t,e){return!(t.x1>e.x2)&&(!(e.x1>t.x2)&&(!(t.x2<e.x1)&&(!(e.x2<t.x1)&&(!(t.y2<e.y1)&&(!(e.y2<t.y1)&&(!(t.y1>e.y2)&&!(e.y1>t.y2)))))))},r.inBoundingBox=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},r.pointInBoundingBox=function(t,e){return this.inBoundingBox(t,e.x,e.y)},r.boundingBoxInBoundingBox=function(t,e){return r.inBoundingBox(t,e.x1,e.y1)&&r.inBoundingBox(t,e.x2,e.y2)},r.roundRectangleIntersectLine=function(t,e,n,r,i,o,a){var s,u=this.getRoundRectangleRadius(i,o),l=i/2,c=o/2,h=n-l+u-a,d=r-c-a,p=n+l-u+a,f=d;if(s=this.finiteLinesIntersect(t,e,n,r,h,d,p,f,!1),s.length>0)return s;var g=n+l+a,v=r-c+u-a,y=g,m=r+c-u+a;if(s=this.finiteLinesIntersect(t,e,n,r,g,v,y,m,!1),s.length>0)return s;var x=n-l+u-a,b=r+c+a,w=n+l-u+a,_=b;if(s=this.finiteLinesIntersect(t,e,n,r,x,b,w,_,!1),s.length>0)return s;var E=n-l-a,k=r-c+u-a,T=E,N=r+c-u+a;if(s=this.finiteLinesIntersect(t,e,n,r,E,k,T,N,!1),s.length>0)return s;var S,L=n-l+u,C=r-c+u;if(S=this.intersectLineCircle(t,e,n,r,L,C,u+a),S.length>0&&S[0]<=L&&S[1]<=C)return[S[0],S[1]];var D=n+l-u,A=r-c+u;if(S=this.intersectLineCircle(t,e,n,r,D,A,u+a),S.length>0&&S[0]>=D&&S[1]<=A)return[S[0],S[1]];var M=n+l-u,P=r+c-u;if(S=this.intersectLineCircle(t,e,n,r,M,P,u+a),S.length>0&&S[0]>=M&&S[1]>=P)return[S[0],S[1]];var I=n-l+u,O=r+c-u;return S=this.intersectLineCircle(t,e,n,r,I,O,u+a),S.length>0&&S[0]<=I&&S[1]>=O?[S[0],S[1]]:[]},r.inLineVicinity=function(t,e,n,r,i,o,a){var s=a,u=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return u-s<=t&&t<=l+s&&c-s<=e&&e<=h+s},r.inBezierVicinity=function(t,e,n,r,i,o,a,s,u){var l={x1:Math.min(n,a,i)-u,x2:Math.max(n,a,i)+u,y1:Math.min(r,s,o)-u,y2:Math.max(r,s,o)+u};return!(t<l.x1||t>l.x2||e<l.y1||e>l.y2)},r.solveCubic=function(t,e,n,r,i){e/=t,n/=t,r/=t;var o,a,s,u,l,c,h,d;return a=(3*n-e*e)/9,s=e*(9*n-e*e*2)-27*r,s/=54,o=a*a*a+s*s,i[1]=0,h=e/3,o>0?(l=s+Math.sqrt(o),l=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),c=s-Math.sqrt(o),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+l+c,h+=(l+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+l)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===o?(d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*d-h,void(i[4]=i[2]=-(d+h))):(a=-a,u=a*a*a,u=Math.acos(s/Math.sqrt(u)),d=2*Math.sqrt(a),i[0]=-h+d*Math.cos(u/3),i[2]=-h+d*Math.cos((u+2*Math.PI)/3),void(i[4]=-h+d*Math.cos((u+4*Math.PI)/3))))},r.sqdistToQuadraticBezier=function(t,e,n,r,i,o,a,s){var u=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,l=9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,c=3*n*n-6*n*i+n*a-n*t+2*i*i+2*i*t-a*t+3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e,h=1*n*i-n*n+n*t-i*t+r*o-r*r+r*e-o*e,d=[];this.solveCubic(u,l,c,h,d);for(var p=[],f=0;f<6;f+=2)Math.abs(d[f+1])<1e-7&&d[f]>=0&&d[f]<=1&&p.push(d[f]);p.push(1),p.push(0);for(var g,v,y,m=-1,x=0;x<p.length;x++)g=Math.pow(1-p[x],2)*n+2*(1-p[x])*p[x]*i+p[x]*p[x]*a,v=Math.pow(1-p[x],2)*r+2*(1-p[x])*p[x]*o+p[x]*p[x]*s,y=Math.pow(g-t,2)+Math.pow(v-e,2),m>=0?y<m&&(m=y,p[x]):(m=y,p[x]);return m},r.sqdistToFiniteLine=function(t,e,n,r,i,o){var a=[t-n,e-r],s=[i-n,o-r],u=s[0]*s[0]+s[1]*s[1],l=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/u;return c<0?l:h>u?(t-i)*(t-i)+(e-o)*(e-o):l-h},r.pointInsidePolygonPoints=function(t,e,n){for(var r,i,o,a,s,u=0,l=0,c=0;c<n.length/2;c++)if(r=n[2*c],i=n[2*c+1],c+1<n.length/2?(o=n[2*(c+1)],a=n[2*(c+1)+1]):(o=n[2*(c+1-n.length/2)],a=n[2*(c+1-n.length/2)+1]),r==t&&o==t);else{if(!(r>=t&&t>=o||r<=t&&t<=o))continue;s=(t-r)/(o-r)*(a-i)+i,s>e&&u++,s<e&&l++}return u%2!=0},r.pointInsidePolygon=function(t,e,n,i,o,a,s,u,l){var c,h=new Array(n.length);null!=u[0]?(c=Math.atan(u[1]/u[0]),u[0]<0?c+=Math.PI/2:c=-c-Math.PI/2):c=u;for(var d=Math.cos(-c),p=Math.sin(-c),f=0;f<h.length/2;f++)h[2*f]=a/2*(n[2*f]*d-n[2*f+1]*p),h[2*f+1]=s/2*(n[2*f+1]*d+n[2*f]*p),h[2*f]+=i,h[2*f+1]+=o;var g;if(l>0){var v=this.expandPolygon(h,-l);g=this.joinLines(v)}else g=h;return r.pointInsidePolygonPoints(t,e,g)},r.joinLines=function(t){for(var e,n,r,i,o,a,s,u,l=new Array(t.length/2),c=0;c<t.length/4;c++){e=t[4*c],n=t[4*c+1],r=t[4*c+2],i=t[4*c+3],c<t.length/4-1?(o=t[4*(c+1)],a=t[4*(c+1)+1],s=t[4*(c+1)+2],u=t[4*(c+1)+3]):(o=t[0],a=t[1],s=t[2],u=t[3]);var h=this.finiteLinesIntersect(e,n,r,i,o,a,s,u,!0);l[2*c]=h[0],l[2*c+1]=h[1]}return l},r.expandPolygon=function(t,e){for(var n,r,i,o,a=new Array(2*t.length),s=0;s<t.length/2;s++){n=t[2*s],r=t[2*s+1],s<t.length/2-1?(i=t[2*(s+1)],o=t[2*(s+1)+1]):(i=t[0],o=t[1]);var u=o-r,l=-(i-n),c=Math.sqrt(u*u+l*l),h=u/c,d=l/c;a[4*s]=n+h*e,a[4*s+1]=r+d*e,a[4*s+2]=i+h*e,a[4*s+3]=o+d*e}return a},r.intersectLineEllipse=function(t,e,n,r,i,o){var a=n-t,s=r-e;a/=i,s/=o;var u=Math.sqrt(a*a+s*s),l=u-1;if(l<0)return[];var c=l/u;return[(n-t)*c+t,(r-e)*c+e]},r.intersectLineCircle=function(t,e,n,r,i,o,a){var s=[n-t,r-e],u=[i,o],l=[t-i,e-o],c=s[0]*s[0]+s[1]*s[1],h=2*(l[0]*s[0]+l[1]*s[1]),u=l[0]*l[0]+l[1]*l[1]-a*a,d=h*h-4*c*u;if(d<0)return[];var p=(-h+Math.sqrt(d))/(2*c),f=(-h-Math.sqrt(d))/(2*c),g=Math.min(p,f),v=Math.max(p,f),y=[];if(g>=0&&g<=1&&y.push(g),v>=0&&v<=1&&y.push(v),0===y.length)return[];var m=y[0]*s[0]+t,x=y[0]*s[1]+e;if(y.length>1){if(y[0]==y[1])return[m,x];return[m,x,y[1]*s[0]+t,y[1]*s[1]+e]}return[m,x]},r.findCircleNearPoint=function(t,e,n,r,i){var o=r-t,a=i-e,s=Math.sqrt(o*o+a*a);return[t+o/s*n,e+a/s*n]},r.findMaxSqDistanceToOrigin=function(t){for(var e,n=1e-6,r=0;r<t.length/2;r++)(e=t[2*r]*t[2*r]+t[2*r+1]*t[2*r+1])>n&&(n=e);return n},r.midOfThree=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},r.finiteLinesIntersect=function(t,e,n,r,i,o,a,s,u){var l=t-i,c=n-t,h=a-i,d=e-o,p=r-e,f=s-o,g=h*d-f*l,v=c*d-p*l,y=f*c-h*p;if(0!==y){var m=g/y,x=v/y;return-.001<=m&&m<=1.001&&-.001<=x&&x<=1.001?[t+m*c,e+m*p]:u?[t+m*c,e+m*p]:[]}return 0===g||0===v?this.midOfThree(t,n,a)===a?[a,s]:this.midOfThree(t,n,i)===i?[i,o]:this.midOfThree(i,a,n)===n?[n,r]:[]:[]},r.polygonIntersectLine=function(t,e,n,i,o,a,s,u){for(var l,c=[],h=new Array(n.length),d=0;d<h.length/2;d++)h[2*d]=n[2*d]*a+i,h[2*d+1]=n[2*d+1]*s+o;var p;if(u>0){var f=r.expandPolygon(h,-u);p=r.joinLines(f)}else p=h;for(var g,v,y,m,d=0;d<p.length/2;d++)g=p[2*d],v=p[2*d+1],d<p.length/2-1?(y=p[2*(d+1)],m=p[2*(d+1)+1]):(y=p[0],m=p[1]),l=this.finiteLinesIntersect(t,e,i,o,g,v,y,m),0!==l.length&&c.push(l[0],l[1]);return c},r.shortenIntersection=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[e[0]+o*r[0],e[1]+o*r[1]]},r.generateUnitNgonPointsFitToSquare=function(t,e){var n=r.generateUnitNgonPoints(t,e);return n=r.fitPolygonToSquare(n)},r.fitPolygonToSquare=function(t){for(var e,n,r=t.length/2,i=1/0,o=1/0,a=-(1/0),s=-(1/0),u=0;u<r;u++)e=t[2*u],n=t[2*u+1],i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);for(var l=2/(a-i),c=2/(s-o),u=0;u<r;u++)e=t[2*u]=t[2*u]*l,n=t[2*u+1]=t[2*u+1]*c,i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var u=0;u<r;u++)n=t[2*u+1]=t[2*u+1]+(-1-o);return t},r.generateUnitNgonPoints=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,o=new Array(2*t),a=0;a<t;a++)i=a*n+r,o[2*a]=Math.cos(i),o[2*a+1]=Math.sin(-i);return o},r.getRoundRectangleRadius=function(t,e){return Math.min(t/4,e/4,8)},e.exports=r},{}],129:[function(t,e,n){"use strict";var r=function(t){if(!(this instanceof r))return new r(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};r.prototype={fulfill:function(t){return i(this,1,"fulfillValue",t)},reject:function(t){return i(this,2,"rejectReason",t)},then:function(t,e){var n=this,i=new r;return n.onFulfilled.push(s(t,i,"fulfill")),n.onRejected.push(s(e,i,"reject")),o(n),i.proxy}};var i=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,o(t)),t},o=function(t){1===t.state?a(t,"onFulfilled",t.fulfillValue):2===t.state&&a(t,"onRejected",t.rejectReason)},a=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},s=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(t){return void e.reject(t)}u(e,i)}}},u=function(t,e){if(t===e||t.proxy===e)return void t.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof e&&null!==e||"function"==typeof e)try{n=e.then}catch(e){return void t.reject(e)}if("function"!=typeof n)t.fulfill(e);else{var r=!1;try{n.call(e,function(n){r||(r=!0,n===e?t.reject(new TypeError("circular thenable chain")):u(t,n))},function(e){r||(r=!0,t.reject(e))})}catch(e){r||t.reject(e)}}};r.all=function(t){return new r(function(e,n){for(var r=new Array(t.length),i=0,o=function(n,o){r[n]=o,++i===t.length&&e(r)},a=0;a<t.length;a++)!function(e){var r=t[e];null!=r&&null!=r.then?r.then(function(t){o(e,t)},function(t){n(t)}):o(e,r)}(a)})},r.resolve=function(t){return new r(function(e,n){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},e.exports="undefined"!=typeof Promise?Promise:r},{}],130:[function(t,e,n){"use strict";var r=t("./is"),i=t("./util"),o=function(t){if(!(this instanceof o))return new o(t);var e=this;e._private={selectorText:null,invalid:!0};var n=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}};if(!t||r.string(t)&&t.match(/^\s*$/))e.length=0;else if("*"===t||"edge"===t||"node"===t)e[0]=n(),e[0].group="*"===t?t:t+"s",e[0].groupOnly=!0,e._private.invalid=!1,e._private.selectorText=t,e.length=1;else if(r.elementOrCollection(t)){var a=t.collection();e[0]=n(),e[0].collection=a,e.length=1}else if(r.fn(t))e[0]=n(),e[0].filter=t,e.length=1;else{if(!r.string(t))return void i.error("A selector must be created from a string; found "+t);var s=null,u={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:i.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};u.variable="(?:[\\w-]|(?:\\\\"+u.metaChar+"))+",u.value=u.string+"|"+u.number,u.className=u.variable,u.id=u.variable;for(var l=function(t){return t.replace(new RegExp("\\\\("+u.metaChar+")","g"),function(t,e,n,r){return e})},c=u.comparatorOp.split("|"),h=0;h<c.length;h++){var d=c[h];u.comparatorOp+="|@"+d}for(var c=u.comparatorOp.split("|"),h=0;h<c.length;h++){var d=c[h];d.indexOf("!")>=0||"="!==d&&(u.comparatorOp+="|\\!"+d)}var p=[{name:"group",query:!0,regex:"(node|edge|\\*)",populate:function(t){this.group="*"===t?t:t+"s"}},{name:"state",query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(t){this.colonSelectors.push(t)}},{name:"id",query:!0,regex:"\\#("+u.id+")",populate:function(t){this.ids.push(l(t))}},{name:"className",query:!0,regex:"\\.("+u.className+")",populate:function(t){this.classes.push(l(t))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+u.variable+")\\s*\\]",populate:function(t){this.data.push({field:l(t)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+u.variable+")\\s*("+u.comparatorOp+")\\s*("+u.value+")\\s*\\]",populate:function(t,e,n){n=null!=new RegExp("^"+u.string+"$").exec(n)?n.substring(1,n.length-1):parseFloat(n),this.data.push({field:l(t),operator:e,value:n})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+u.boolOp+")\\s*("+u.variable+")\\s*\\]",populate:function(t,e){this.data.push({field:l(e),operator:t})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+u.meta+")\\s*("+u.comparatorOp+")\\s*("+u.number+")\\s*\\]\\]",populate:function(t,e,n){this.meta.push({field:l(t),operator:e,value:parseFloat(n)})}},{name:"nextQuery",separator:!0,regex:u.separator,populate:function(){e[++h]=n(),s=null}},{name:"child",separator:!0,regex:u.child,populate:function(){var t=n();t.parent=this,t.subject=s,e[h]=t}},{name:"descendant",separator:!0,regex:u.descendant,populate:function(){var t=n();t.ancestor=this,t.subject=s,e[h]=t}},{name:"subject",modifier:!0,regex:u.subject,populate:function(){if(null!=s&&this.subject!=this)return i.error("Redefinition of subject in selector `"+t+"`"),!1;s=this,this.subject=this}}];e._private.selectorText=t;var f=t,h=0;for(e[0]=n(),function(){var t=f.match(/^\s+/);if(t){var e=t[0];f=f.substring(e.length)}}();;){var g=function(t){for(var e,n,i,o=0;o<p.length;o++){var a=p[o],s=a.name;if(!r.fn(t)||t(s,a)){var u=f.match(new RegExp("^"+a.regex));if(null!=u){n=u,e=a,i=s;var l=u[0];f=f.substring(l.length);break}}}return{expr:e,match:n,name:i}}();if(null==g.expr)return void i.error("The selector `"+t+"`is invalid");for(var v=[],y=1;y<g.match.length;y++)v.push(g.match[y]);var m=g.expr.populate.apply(e[h],v);if(m===!1)return;if(f.match(/^\s*$/))break}e.length=h+1;for(var y=0;y<e.length;y++){var x=e[y];if(null!=x.subject){for(;x.subject!=x;)if(null!=x.parent){var b=x.parent,w=x;w.parent=null,b.child=w,x=b}else{if(null==x.ancestor){i.error("When adjusting references for the selector `"+x+"`, neither parent nor ancestor was found");break}var _=x.ancestor,E=x;E.ancestor=null,_.descendant=E,x=_}e[y]=x.subject}}}e._private.invalid=!1},a=o.prototype;a.size=function(){return this.length},a.eq=function(t){return this[t]};var s=function(t,e){var n=e._private;if(t.groupOnly)return"*"===t.group||t.group===n.group;if(null!=t.group&&"*"!=t.group&&t.group!=n.group)return!1;for(var i=e.cy(),o=!0,a=0;a<t.colonSelectors.length;a++){switch(t.colonSelectors[a]){case":selected":o=e.selected();break;case":unselected":o=!e.selected();break;case":selectable":o=e.selectable();break;case":unselectable":o=!e.selectable();break;case":locked":o=e.locked();break;case":unlocked":o=!e.locked();break;case":visible":o=e.visible();break;case":hidden":o=!e.visible();break;case":transparent":o=e.transparent();break;case":grabbed":o=e.grabbed();break;case":free":o=!e.grabbed();break;case":removed":o=e.removed();break;case":inside":o=!e.removed();break;case":grabbable":o=e.grabbable();break;case":ungrabbable":o=!e.grabbable();break;case":animated":o=e.animated();break;case":unanimated":o=!e.animated();break;case":parent":o=e.isNode()&&e.children().nonempty();break;case":child":case":nonorphan":o=e.isNode()&&e.parent().nonempty();break;case":orphan":o=e.isNode()&&e.parent().empty();break;case":loop":o=e.isEdge()&&e.data("source")===e.data("target");break;case":simple":o=e.isEdge()&&e.data("source")!==e.data("target");break;case":active":o=e.active();break;case":inactive":o=!e.active();break;case":touch":o=r.touch();break;case":backgrounding":o=e.backgrounding();break;case":nonbackgrounding":o=!e.backgrounding()}if(!o)break}if(!o)return!1;for(var u=!0,a=0;a<t.ids.length;a++){var l=t.ids[a],c=n.data.id;if(!(u=u&&l==c))break}if(!u)return!1;for(var h=!0,a=0;a<t.classes.length;a++){var d=t.classes[a];if(!(h=h&&e.hasClass(d)))break}if(!h)return!1;var p=function(e){for(var n=!0,i=0;i<t[e.name].length;i++){var o,a=t[e.name][i],s=a.operator,u=a.value,l=a.field;if(null!=s&&null!=u){var c=e.fieldValue(l),h=r.string(c)||r.number(c)?""+c:"",d=""+u,p=!1;s.indexOf("@")>=0&&(h=h.toLowerCase(),d=d.toLowerCase(),s=s.replace("@",""),p=!0);var f=!1;s.indexOf("!")>=0&&(s=s.replace("!",""),f=!0),p&&(u=d.toLowerCase(),c=h.toLowerCase());var g=!1;switch(s){case"*=":o=h.indexOf(d)>=0;break;case"$=":o=h.indexOf(d,h.length-d.length)>=0;break;case"^=":o=0===h.indexOf(d);break;case"=":o=c===u;break;case">":g=!0,o=c>u;break;case">=":g=!0,o=c>=u;break;case"<":g=!0,o=c<u;break;case"<=":g=!0,o=c<=u;break;default:o=!1}!f||null==c&&g||(o=!o)}else if(null!=s)switch(s){case"?":o=e.fieldTruthy(l);break;case"!":o=!e.fieldTruthy(l);break;case"^":o=e.fieldUndefined(l)}else o=!e.fieldUndefined(l);if(!o){n=!1;break}}return n};if(!p({name:"data",fieldValue:function(t){return n.data[t]},fieldUndefined:function(t){return void 0===n.data[t]},fieldTruthy:function(t){return!!n.data[t]}}))return!1;if(!p({name:"meta",fieldValue:function(t){return e[t]()},fieldUndefined:function(t){return null==e[t]()},fieldTruthy:function(t){return!!e[t]()}}))return!1;if(null!=t.collection){if(!t.collection.hasElementWithId(e.id()))return!1}if(null!=t.filter&&0===e.collection().filter(t.filter).size())return!1;var f=function(t,e){if(null!=t){var n=!1;if(!i.hasCompoundNodes())return!1;e=e();for(var r=0;r<e.length;r++)if(s(t,e[r])){n=!0;break}return n}return!0};return!!f(t.parent,function(){return e.parent()})&&(!!f(t.ancestor,function(){return e.parents()})&&(!!f(t.child,function(){return e.children()})&&!!f(t.descendant,function(){return e.descendants()})))};a.filter=function(t){var e=this,n=t.cy();if(e._private.invalid)return n.collection();var r=function(t,n){for(var r=0;r<e.length;r++){if(s(e[r],n))return!0}return!1};return null==e._private.selectorText&&(r=function(){return!0}),t.filter(r)},a.matches=function(t){var e=this;if(e._private.invalid)return!1;for(var n=0;n<e.length;n++){if(s(e[n],t))return!0}return!1},a.toString=a.selector=function(){for(var t="",e=function(t){return null==t?"":t},n=function(t){return r.string(t)?'"'+t+'"':e(t)},i=function(t){return" "+t+" "},o=function(t){var r="";t.subject===t&&(r+="$");var s=e(t.group);r+=s.substring(0,s.length-1);for(var u=0;u<t.data.length;u++){var l=t.data[u];r+=l.value?"["+l.field+i(e(l.operator))+n(l.value)+"]":"["+e(l.operator)+l.field+"]"}for(var u=0;u<t.meta.length;u++){var c=t.meta[u];r+="[["+c.field+i(e(c.operator))+n(c.value)+"]]"}for(var u=0;u<t.colonSelectors.length;u++){var h=t.colonSelectors[a];r+=h}for(var u=0;u<t.ids.length;u++){var h="#"+t.ids[a];r+=h}for(var u=0;u<t.classes.length;u++){var h="."+t.classes[u];r+=h}return null!=t.parent&&(r=o(t.parent)+" > "+r),null!=t.ancestor&&(r=o(t.ancestor)+" "+r),null!=t.child&&(r+=" > "+o(t.child)),null!=t.descendant&&(r+=" "+o(t.descendant)),r},a=0;a<this.length;a++){t+=o(this[a]),this.length>1&&a<this.length-1&&(t+=", ")}return t},e.exports=o},{"./is":126,"./util":143}],131:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o={};o.apply=function(t){var e=this,n=e._private;n.newStyle&&(n.contextStyles={},n.propDiffs={},e.cleanElements(t,!0));for(var r=0;r<t.length;r++){var i=t[r],o=e.getContextMeta(i),a=e.getContextStyle(o),s=e.applyContextStyle(o,a,i);e.updateTransitions(i,s.diffProps),e.updateStyleHints(i)}n.newStyle=!1},o.getPropertiesDiff=function(t,e){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=t+"-"+e,o=r[i];if(o)return o;for(var a=[],s={},u=0;u<n.length;u++){var l=n[u],c="t"===t[u],h="t"===e[u],d=c!==h,p=l.mappedProperties.length>0;if(d||p){var f;d&&p?f=l.properties:d?f=l.properties:p&&(f=l.mappedProperties);for(var g=0;g<f.length;g++){for(var v=f[g],y=v.name,m=!1,x=u+1;x<n.length;x++){var b=n[x];if("t"===e[x]&&(m=null!=b.properties[v.name]))break}s[y]||m||(s[y]=!0,a.push(y))}}}return r[i]=a,a},o.getContextMeta=function(t){var e,n=this,r="",i=t._private.styleCxtKey||"";n._private.newStyle&&(i="");for(var o=0;o<n.length;o++){var a=n[o];r+=a.selector&&a.selector.matches(t)?"t":"f"}return e=n.getPropertiesDiff(i,r),t._private.styleCxtKey=r,{key:r,diffPropNames:e}},o.getContextStyle=function(t){var e=t.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[e])return r[e];for(var i={_private:{key:e}},o=0;o<n.length;o++){var a=n[o];if("t"===e[o])for(var s=0;s<a.properties.length;s++){var u=a.properties[s],l=i[u.name]=u;l.context=a}}return r[e]=i,i},o.applyContextStyle=function(t,e,n){for(var r=this,i=t.diffPropNames,o={},a=0;a<i.length;a++){var s=i[a],u=e[s],l=n.pstyle(s);if(!u){if(!l)continue;u=l.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(l!==u){var c=o[s]={prev:l};r.applyParsedProperty(n,u),c.next=n.pstyle(s),c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:o}},o.updateStyleHints=function(t){var e=t._private,n=this;if(!t.removed()){var r=!1;if("nodes"===e.group)for(var i=1;i<=n.pieBackgroundN;i++){var o=t.pstyle("pie-"+i+"-background-size").value;if(o>0){r=!0;break}}e.hasPie=r;var a=t.pstyle("text-transform").strValue,s=t.pstyle("label").strValue,u=t.pstyle("source-label").strValue,l=t.pstyle("target-label").strValue,c=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue+"px",h=t.pstyle("font-family").strValue,d=t.pstyle("font-weight").strValue,p=t.pstyle("text-valign").strValue,f=t.pstyle("text-valign").strValue,g=t.pstyle("text-outline-width").pfValue,v=t.pstyle("text-wrap").strValue,y=t.pstyle("text-max-width").pfValue,m=c+"$"+o+"$"+h+"$"+d+"$"+a+"$"+p+"$"+f+"$"+g+"$"+v+"$"+y;e.labelStyleKey=m,e.sourceLabelKey=m+"$"+u,e.targetLabelKey=m+"$"+l,e.labelKey=m+"$"+s,e.fontKey=c+"$"+d+"$"+o+"$"+h,e.styleKey=Date.now()}},o.applyParsedProperty=function(t,e){var n,o,a=this,s=e,u=t._private.style,l=a.types,c=a.properties[s.name].type,h=s.bypass,d=u[s.name],p=d&&d.bypass,f=t._private;if("curve-style"===e.name&&"haystack"===e.value&&t.isEdge()&&(t.isLoop()||t.source().isParent()||t.target().isParent())&&(s=e=this.parse(e.name,"bezier",h)),s.delete)return u[s.name]=void 0,!0;if(s.deleteBypassed)return!d||!!d.bypass&&(d.bypassed=void 0,!0);if(s.deleteBypass)return!d||!!d.bypass&&(u[s.name]=d.bypassed,!0);var g=function(){r.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+t.id()+"` for property `"+s.name+"` with data field `"+s.field+"`); try a `["+s.field+"]` selector to limit scope to elements with `"+s.field+"` defined")};switch(s.mapped){case l.mapData:case l.mapLayoutData:case l.mapScratch:var n,v=s.mapped===l.mapLayoutData,y=s.mapped===l.mapScratch,m=s.field.split(".");n=y||v?f.scratch:f.data;for(var x=0;x<m.length&&n;x++){var b=m[x];n=n[b]}var w;if(w=i.number(n)?(n-s.fieldMin)/(s.fieldMax-s.fieldMin):0,w<0?w=0:w>1&&(w=1),c.color){var _=s.valueMin[0],E=s.valueMax[0],k=s.valueMin[1],T=s.valueMax[1],N=s.valueMin[2],S=s.valueMax[2],L=null==s.valueMin[3]?1:s.valueMin[3],C=null==s.valueMax[3]?1:s.valueMax[3],D=[Math.round(_+(E-_)*w),Math.round(k+(T-k)*w),Math.round(N+(S-N)*w),Math.round(L+(C-L)*w)];o={bypass:s.bypass,name:s.name,value:D,strValue:"rgb("+D[0]+", "+D[1]+", "+D[2]+")"}}else{if(!c.number)return!1;var A=s.valueMin+(s.valueMax-s.valueMin)*w;o=this.parse(s.name,A,s.bypass,!0)}o||(o=this.parse(s.name,d.strValue,s.bypass,!0)),o||g(),o.mapping=s,s=o;break;case l.data:case l.layoutData:case l.scratch:var n,v=s.mapped===l.layoutData,y=s.mapped===l.scratch,m=s.field.split(".");if(n=y||v?f.scratch:f.data)for(var x=0;x<m.length;x++){var b=m[x];n=n[b]}if(!(o=this.parse(s.name,n,s.bypass,!0))){var M=d?d.strValue:"";o=this.parse(s.name,M,s.bypass,!0)}o||g(),o.mapping=s,s=o;break;case l.fn:var P=s.value,I=P(t);o=this.parse(s.name,I,s.bypass,!0),o.mapping=s,s=o;break;case void 0:break;default:return!1}return h?(s.bypassed=p?d.bypassed:d,u[s.name]=s):p?d.bypassed=s:u[s.name]=s,!0},o.cleanElements=function(t,e){for(var n=this,r=n.properties,i=0;i<t.length;i++){var o=t[i];if(e)for(var a=o._private.style,s=0;s<r.length;s++){var u=r[s],l=a[u.name];l&&(l.bypass?l.bypassed=null:a[u.name]=null)}else o._private.style={}}},o.update=function(){this._private.cy.mutableElements().updateStyle()},o.updateMappers=function(t){for(var e=this,n=0;n<t.length;n++){for(var r=t[n],i=r._private.style,o=0;o<e.properties.length;o++){var a=e.properties[o],s=i[a.name];if(s&&s.mapping){var u=s.mapping;this.applyParsedProperty(r,u)}}this.updateStyleHints(r)}},o.updateTransitions=function(t,e,n){var r=this,o=t._private,a=t.pstyle("transition-property").value,s=t.pstyle("transition-duration").pfValue,u=t.pstyle("transition-delay").pfValue;if(a.length>0&&s>0){for(var l={},c=!1,h=0;h<a.length;h++){var d=a[h],p=t.pstyle(d),f=e[d];if(f){var g,v=f.prev,y=v,m=null!=f.next?f.next:p,x=!1;y&&(i.number(y.pfValue)&&i.number(m.pfValue)?(x=m.pfValue-y.pfValue,g=y.pfValue+1e-6*x):i.number(y.value)&&i.number(m.value)?(x=m.value-y.value,g=y.value+1e-6*x):i.array(y.value)&&i.array(m.value)&&(x=y.value[0]!==m.value[0]||y.value[1]!==m.value[1]||y.value[2]!==m.value[2],g=y.strValue),x&&(l[d]=m.strValue,this.applyBypass(t,d,g),c=!0))}}if(!c)return;o.transitioning=!0,t.stop(),u>0&&t.delay(u),t.animate({css:l},{duration:s,easing:t.pstyle("transition-timing-function").value,queue:!1,complete:function(){n||r.removeBypasses(t,a),o.transitioning=!1}})}else o.transitioning&&(t.stop(),this.removeBypasses(t,a),o.transitioning=!1)},e.exports=o},{"../is":126,"../util":143}],132:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),o={};o.applyBypass=function(t,e,n,o){var a=this,s=[];if("*"===e||"**"===e){if(void 0!==n)for(var u=0;u<a.properties.length;u++){var l=a.properties[u],e=l.name,c=this.parse(e,n,!0);c&&s.push(c)}}else if(r.string(e)){var c=this.parse(e,n,!0);c&&s.push(c)}else{if(!r.plainObject(e))return!1;var h=e;o=n;for(var u=0;u<a.properties.length;u++){var l=a.properties[u],e=l.name,n=h[e];if(void 0===n&&(n=h[i.dash2camel(e)]),void 0!==n){var c=this.parse(e,n,!0);c&&s.push(c)}}}if(0===s.length)return!1;for(var d=!1,u=0;u<t.length;u++){for(var p,f=t[u],g={},v=0;v<s.length;v++){var l=s[v];if(o){var y=f.pstyle(l.name);p=g[l.name]={prev:y}}d=this.applyParsedProperty(f,l)||d,o&&(p.next=f.pstyle(l.name))}d&&this.updateStyleHints(f),o&&this.updateTransitions(f,g,!0)}return d},o.overrideBypass=function(t,e,n){e=i.camel2dash(e);for(var r=0;r<t.length;r++){var o=t[r],a=o._private.style[e],s=this.properties[e].type,u=s.color,l=s.mutiple;a&&a.bypass?(a.value=n,null!=a.pfValue&&(a.pfValue=n),a.strValue=u?"rgb("+n.join(",")+")":l?n.join(" "):""+n):this.applyBypass(o,e,n)}},o.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)},o.removeBypasses=function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],o={},a=0;a<e.length;a++){var s=e[a],u=this.properties[s],l=i.pstyle(u.name);if(l&&l.bypass){var c=this.parse(s,"",!0),h=o[u.name]={prev:l};this.applyParsedProperty(i,c),h.next=i.pstyle(u.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,!0)}},e.exports=o},{"../is":126,"../util":143}],133:[function(t,e,n){"use strict";var r=t("../window"),i={};i.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},i.containerCss=function(t){var e=this._private.cy,n=e.container();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(t)},e.exports=i},{"../window":150}],134:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o={};o.getRenderedStyle=function(t){return this.getRawStyle(t,!0)},o.getRawStyle=function(t,e){var n=this,t=t[0];if(t){for(var i={},o=0;o<n.properties.length;o++){var a=n.properties[o],s=n.getStylePropertyValue(t,a.name,e);s&&(i[a.name]=s,i[r.dash2camel(a.name)]=s)}return i}},o.getStylePropertyValue=function(t,e,n){var r=this,t=t[0];if(t){var i=r.properties[e];i.alias&&(i=i.pointsTo);var o=i.type,a=t.pstyle(i.name),s=t.cy().zoom();if(a){var u=a.units?o.implicitUnits||"px":null;return u?[].concat(a.pfValue).map(function(t){return t*(n?s:1)+u}).join(" "):a.strValue}}},o.getAnimationStartStyle=function(t,e){for(var n={},r=0;r<e.length;r++){var o=e[r],a=o.name,s=t.pstyle(a);void 0!==s&&(s=i.plainObject(s)?this.parse(a,s.strValue):this.parse(a,s)),s&&(n[a]=s)}return n},o.getPropsList=function(t){var e=this,n=[],i=t,o=e.properties;if(i)for(var a=Object.keys(i),s=0;s<a.length;s++){var u=a[s],l=i[u],c=o[u]||o[r.camel2dash(u)],h=this.parse(c.name,l);n.push(h)}return n},e.exports=o},{"../is":126,"../util":143}],135:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),o=t("../selector"),a=function(t){return this instanceof a?r.core(t)?(this._private={cy:t,coreStyle:{}},this.length=0,void this.resetToDefault()):void i.error("A style must have a core reference"):new a(t)},s=a.prototype;s.instanceString=function(){return"style"},s.clear=function(){for(var t=0;t<this.length;t++)this[t]=void 0;return this.length=0,this._private.newStyle=!0,this},s.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},s.core=function(){return this._private.coreStyle},s.selector=function(t){var e="core"===t?null:new o(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},s.css=function(){var t=this,e=arguments;switch(e.length){case 1:for(var n=e[0],r=0;r<t.properties.length;r++){var o=t.properties[r],a=n[o.name];void 0===a&&(a=n[i.dash2camel(o.name)]),void 0!==a&&this.cssRule(o.name,a)}break;case 2:this.cssRule(e[0],e[1])}return this},s.style=s.css,s.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},a.fromJson=function(t,e){var n=new a(t);return n.fromJson(e),n},a.fromString=function(t,e){return new a(t).fromString(e)},[t("./apply"),t("./bypass"),t("./container"),t("./get-for-ele"),t("./json"),t("./string-sheet"),t("./properties"),t("./parse")].forEach(function(t){i.extend(s,t)}),a.types=s.types,a.properties=s.properties,e.exports=a},{"../is":126,"../selector":130,"../util":143,"./apply":131,"./bypass":132,"./container":133,"./get-for-ele":134,"./json":136,"./parse":137,"./properties":138,"./string-sheet":139}],136:[function(t,e,n){"use strict";var r={};r.applyFromJson=function(t){for(var e=this,n=0;n<t.length;n++){var r=t[n],i=r.selector,o=r.style||r.css,a=Object.keys(o);e.selector(i);for(var s=0;s<a.length;s++){var u=a[s],l=o[u];e.css(u,l)}}return e},r.fromJson=function(t){var e=this;return e.resetToDefault(),e.applyFromJson(t),e},r.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a]
;o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t},e.exports=r},{}],137:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o=t("../math"),a={};a.parse=function(t,e,n,o){var a=this;if(i.fn(e))return a.parseImpl(t,e,n,o);var s,u=[t,e,n,o].join("$"),l=a.propCache=a.propCache||{};return(s=l[u])||(s=l[u]=a.parseImpl(t,e,n,o)),s=r.copy(s),s&&(s.value=r.copy(s.value)),s};var s=function(t,e,n,a){var s=this;t=r.camel2dash(t);var u=s.properties[t],l=e,c=s.types;if(!u)return null;if(void 0===e||null===e)return null;u.alias&&(u=u.pointsTo,t=u.name);var h=i.string(e);h&&(e=e.trim());var d=u.type;if(!d)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(i.fn(e))return{name:t,value:e,strValue:"fn",mapped:c.fn,bypass:n};var p,f,g,v,y,m;if(!h||a);else{if((p=new RegExp(c.data.regex).exec(e))||(g=new RegExp(c.layoutData.regex).exec(e))||(y=new RegExp(c.scratch.regex).exec(e))){if(n)return!1;var x;return x=p?c.data:g?c.layoutData:c.scratch,p=p||g||y,{name:t,value:p,strValue:""+e,mapped:x,field:p[1],bypass:n}}if((f=new RegExp(c.mapData.regex).exec(e))||(v=new RegExp(c.mapLayoutData.regex).exec(e))||(m=new RegExp(c.mapScratch.regex).exec(e))){if(n)return!1;if(d.multiple)return!1;var x;if(x=f?c.mapData:v?c.mapLayoutData:c.mapScratch,f=f||v||m,!d.color&&!d.number)return!1;var b=this.parse(t,f[4]);if(!b||b.mapped)return!1;var w=this.parse(t,f[5]);if(!w||w.mapped)return!1;if(b.value===w.value)return!1;if(d.color){var _=b.value,E=w.value;if(!(_[0]!==E[0]||_[1]!==E[1]||_[2]!==E[2]||_[3]!==E[3]&&(null!=_[3]&&1!==_[3]||null!=E[3]&&1!==E[3])))return!1}return{name:t,value:f,strValue:""+e,mapped:x,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:b.value,valueMax:w.value,bypass:n}}}if(d.multiple&&"multiple"!==a){var k;if(k=h?e.split(/\s+/):i.array(e)?e:[e],d.evenMultiple&&k.length%2!=0)return null;var T=k.map(function(e){var r=s.parse(t,e,n,"multiple");return null!=r.pfValue?r.pfValue:r.value});return{name:t,value:T,pfValue:T,strValue:T.join(" "),bypass:n,units:d.number&&!d.unitless?d.implicitUnits||"px":void 0}}var N=function(){for(var r=0;r<d.enums.length;r++){if(d.enums[r]===e)return{name:t,value:e,strValue:""+e,bypass:n}}return null};if(d.number){var S,L="px";if(d.units&&(S=d.units),d.implicitUnits&&(L=d.implicitUnits),!d.unitless)if(h){var C="px|em"+(d.allowPercent?"|\\%":"");S&&(C=S);var D=e.match("^("+r.regex.number+")("+C+")?$");D&&(e=D[1],S=D[2]||L)}else S&&!d.implicitUnits||(S=L);if(e=parseFloat(e),isNaN(e)&&void 0===d.enums)return null;if(isNaN(e)&&void 0!==d.enums)return e=l,N();if(d.integer&&!i.integer(e))return null;if(void 0!==d.min&&e<d.min||void 0!==d.max&&e>d.max)return null;var A={name:t,value:e,strValue:""+e+(S?S:""),units:S,bypass:n};return d.unitless||"px"!==S&&"em"!==S?A.pfValue=e:A.pfValue="px"!==S&&S?this.getEmSizeInPixels()*e:e,"ms"!==S&&"s"!==S||(A.pfValue="ms"===S?e:1e3*e),"deg"!==S&&"rad"!==S||(A.pfValue="rad"===S?e:o.deg2rad(e)),A}if(d.propList){var M=[],P=""+e;if("none"===P);else{for(var I=P.split(","),O=0;O<I.length;O++){var R=I[O].trim();s.properties[R]&&M.push(R)}if(0===M.length)return null}return{name:t,value:M,strValue:0===M.length?"none":M.join(", "),bypass:n}}if(d.color){var j=r.color2tuple(e);return j?{name:t,value:j,strValue:""+e,bypass:n,roundValue:!0}:null}if(d.regex||d.regexes){if(d.enums){var B=N();if(B)return B}for(var F=d.regexes?d.regexes:[d.regex],O=0;O<F.length;O++){var q=new RegExp(F[O]),z=q.exec(e);if(z)return{name:t,value:z,strValue:""+e,bypass:n}}return null}return d.string?{name:t,value:""+e,strValue:""+e,bypass:n}:d.enums?N():null};a.parseImpl=s,e.exports=a},{"../is":126,"../math":128,"../util":143}],138:[function(t,e,n){"use strict";var r=t("../util"),i={};!function(){var t=r.regex.number,e=r.regex.rgbaNoBackRefs,n=r.regex.hslaNoBackRefs,o=r.regex.hex3,a=r.regex.hex6,s=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},u=function(r){var i=t+"|\\w+|"+e+"|"+n+"|"+o+"|"+a;return"^"+r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"};i.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgCrossOrigin:{enums:["anonymous","use-credentials"]},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:s("data")},layoutData:{mapping:!0,regex:s("layoutData")},scratch:{mapping:!0,regex:s("scratch")},mapData:{mapping:!0,regex:u("mapData")},mapLayoutData:{mapping:!0,regex:u("mapLayoutData")},mapScratch:{mapping:!0,regex:u("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var l=i.types,c=i.properties=[{name:"label",type:l.text},{name:"text-rotation",type:l.textRotation},{name:"text-margin-x",type:l.bidirectionalSize},{name:"text-margin-y",type:l.bidirectionalSize},{name:"source-label",type:l.text},{name:"source-text-rotation",type:l.textRotation},{name:"source-text-margin-x",type:l.bidirectionalSize},{name:"source-text-margin-y",type:l.bidirectionalSize},{name:"source-text-offset",type:l.size},{name:"target-label",type:l.text},{name:"target-text-rotation",type:l.textRotation},{name:"target-text-margin-x",type:l.bidirectionalSize},{name:"target-text-margin-y",type:l.bidirectionalSize},{name:"target-text-offset",type:l.size},{name:"text-valign",type:l.valign},{name:"text-halign",type:l.halign},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-width",type:l.size},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-margin",type:l.size},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size},{name:"text-border-style",type:l.borderStyle},{name:"text-background-shape",type:l.textBackgroundShape},{name:"text-transform",type:l.textTransform},{name:"text-wrap",type:l.textWrap},{name:"text-max-width",type:l.size},{name:"text-events",type:l.bool},{name:"font-family",type:l.fontFamily},{name:"font-style",type:l.fontStyle},{name:"font-weight",type:l.fontWeight},{name:"font-size",type:l.size},{name:"min-zoomed-font-size",type:l.size},{name:"events",type:l.bool},{name:"display",type:l.display},{name:"visibility",type:l.visibility},{name:"opacity",type:l.zeroOneNumber},{name:"z-index",type:l.nonNegativeInt},{name:"overlay-padding",type:l.size},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber},{name:"shadow-blur",type:l.size},{name:"shadow-color",type:l.color},{name:"shadow-opacity",type:l.zeroOneNumber},{name:"shadow-offset-x",type:l.bidirectionalSize},{name:"shadow-offset-y",type:l.bidirectionalSize},{name:"text-shadow-blur",type:l.size},{name:"text-shadow-color",type:l.color},{name:"text-shadow-opacity",type:l.zeroOneNumber},{name:"text-shadow-offset-x",type:l.bidirectionalSize},{name:"text-shadow-offset-y",type:l.bidirectionalSize},{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing},{name:"height",type:l.nodeSize},{name:"width",type:l.nodeSize},{name:"shape",type:l.nodeShape},{name:"shape-polygon-points",type:l.polygonPointList},{name:"background-color",type:l.color},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"padding",type:l.size},{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size},{name:"border-style",type:l.borderStyle},{name:"background-image",type:l.url},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumber},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"position",type:l.position},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels},{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"curve-style",type:l.curveStyle},{name:"haystack-radius",type:l.zeroOneNumber},{name:"control-point-step-size",type:l.size},{name:"control-point-distances",type:l.bidirectionalSizes},{name:"control-point-weights",type:l.numbers},{name:"segment-distances",type:l.bidirectionalSizes},{name:"segment-weights",type:l.numbers},{name:"edge-distances",type:l.edgeDistances},{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],h=i.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];i.pieBackgroundN=16,c.push({name:"pie-size",type:l.bgSize});for(var d=1;d<=i.pieBackgroundN;d++)c.push({name:"pie-"+d+"-background-color",type:l.color}),c.push({name:"pie-"+d+"-background-size",type:l.percent}),c.push({name:"pie-"+d+"-background-opacity",type:l.zeroOneNumber});var p=i.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill}].forEach(function(t){p.forEach(function(e){var n=e+"-"+t.name,r=t.type;c.push({name:n,type:r})})},{}),i.propertyNames=c.map(function(t){return t.name});for(var d=0;d<c.length;d++){var f=c[d];c[f.name]=f}for(var d=0;d<h.length;d++){var g=h[d],v=c[g.pointsTo],y={name:g.name,alias:!0,pointsTo:v};c.push(y),c[g.name]=y}}(),i.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},i.getDefaultProperties=r.memoize(function(){for(var t=r.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-margin":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1",padding:0,position:"origin","compound-sizing-wrt-labels":"include"},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(t,e){for(var n=1;n<=i.pieBackgroundN;n++){var r=e.name.replace("{{i}}",n),o=e.value;t[r]=o}return t},{}),{"line-style":"solid","line-color":"#999","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"edge-distances":"intersection","curve-style":"bezier","haystack-radius":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(t,e){return i.arrowPrefixes.forEach(function(n){var r=n+"-"+e.name,i=e.value;t[r]=i}),t},{})),e={},n=0;n<this.properties.length;n++){var o=this.properties[n];if(!o.pointsTo){var a=o.name,s=t[a],u=this.parse(a,s);e[a]=u}}return e}),i.addDefaultStylesheet=function(){this.selector("$node > node").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3,"curve-style":"haystack"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector("node:parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},e.exports=i},{"../util":143}],139:[function(t,e,n){"use strict";var r=t("../util"),i=t("../selector"),o={};o.applyFromString=function(t){function e(){c=c.length>o.length?c.substr(o.length):""}function n(){a=a.length>s.length?a.substr(s.length):""}var o,a,s,u=this,l=this,c=""+t;for(c=c.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){var h=c.match(/^\s*$/);if(h)break;var d=c.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!d){r.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+c);break}o=d[0];var p=d[1];if("core"!==p){if(new i(p)._private.invalid){r.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+p),e();continue}}var f=d[2],g=!1;a=f;for(var v=[];;){var h=a.match(/^\s*$/);if(h)break;var y=a.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!y){r.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+f),g=!0;break}s=y[0];var m=y[1],x=y[2],b=u.properties[m];if(b){l.parse(m,x)?(v.push({name:m,val:x}),n()):(r.error("Skipping property: Invalid property definition in: "+s),n())}else r.error("Skipping property: Invalid property name in: "+s),n()}if(g){e();break}l.selector(p);for(var w=0;w<v.length;w++){var b=v[w];l.css(b.name,b.val)}e()}return l},o.fromString=function(t){var e=this;return e.resetToDefault(),e.applyFromString(t),e},e.exports=o},{"../selector":130,"../util":143}],140:[function(t,e,n){"use strict";var r=t("./is"),i=t("./util"),o=t("./style"),a=function(){if(!(this instanceof a))return new a;this.length=0},s=a.prototype;s.instanceString=function(){return"stylesheet"},s.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},s.css=function(t,e){var n=this.length-1;if(r.string(t))this[n].properties.push({name:t,value:e});else if(r.plainObject(t))for(var a=t,s=0;s<o.properties.length;s++){var u=o.properties[s],l=a[u.name];if(void 0===l&&(l=a[i.dash2camel(u.name)]),void 0!==l){var t=u.name,e=l;this[n].properties.push({name:t,value:e})}}return this},s.style=s.css,s.generateStyle=function(t){for(var e=new o(t),n=0;n<this.length;n++){var r=this[n],i=r.selector,a=r.properties;e.selector(i);for(var s=0;s<a.length;s++){var u=a[s];e.css(u.name,u.value)}}return e},e.exports=a},{"./is":126,"./style":135,"./util":143}],141:[function(require,module,exports){(function(__dirname){"use strict";var window=require("./window"),util=require("./util"),Promise=require("./promise"),Event=require("./event"),define=require("./define"),is=require("./is"),Thread=function(t){if(!(this instanceof Thread))return new Thread(t);var e=this._private={requires:[],files:[],queue:null,pass:[],disabled:!1};is.plainObject(t)&&null!=t.disabled&&(e.disabled=!!t.disabled)},thdfn=Thread.prototype,stringifyFieldVal=function(t){return is.fn(t)?t.toString():"JSON.parse('"+JSON.stringify(t)+"')"},fnAsRequire=function(t){var e,n;is.object(t)&&t.fn?(e=fnAs(t.fn,t.name),n=t.name,t=t.fn):is.fn(t)?(e=t.toString(),n=t.name):is.string(t)?e=t:is.object(t)&&(e=t.proto?"":t.name+" = {};",n=t.name,t=t.obj),e+="\n";var r=function(t,n){if(t.prototype){var r=!1;for(var i in t.prototype){r=!0;break}r&&(e+=fnAsRequire({name:n,obj:t,proto:!0}))}};if(t.prototype&&null!=n)for(var i in t.prototype){var o="",a=t.prototype[i],s=stringifyFieldVal(a),u=n+".prototype."+i;o+=u+" = "+s+";\n",o&&(e+=o),r(a,u)}if(!is.string(t))for(var i in t){var l="";if(t.hasOwnProperty(i)){var a=t[i],s=stringifyFieldVal(a),u=n+'["'+i+'"]';l+=u+" = "+s+";\n"}l&&(e+=l),r(a,u)}return e},isPathStr=function(t){return is.string(t)&&t.match(/\.js$/)};util.extend(thdfn,{instanceString:function(){return"thread"},require:function(t,e){var n=this._private.requires;if(isPathStr(t))return this._private.files.push(t),this;if(e)t=is.fn(t)?{name:e,fn:t}:{name:e,obj:t};else if(is.fn(t)){if(!t.name)throw'The function name could not be automatically determined.  Use thread.require( someFunction, "someFunction" )';t={name:t.name,fn:t}}return n.push(t),this},pass:function(t){return this._private.pass.push(t),this},run:function(fn,pass){var self=this,_p=this._private;if(pass=pass||_p.pass.shift(),_p.stopped)throw"Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.";if(_p.running)return _p.queue=_p.queue.then(function(){return self.run(fn,pass)});var useWW=null!=window&&!_p.disabled,useNode=!window&&void 0!==module&&!_p.disabled;self.trigger("run");var runP=new Promise(function(resolve,reject){_p.running=!0;var threadTechAlreadyExists=_p.ran,fnImplStr=is.string(fn)?fn:fn.toString(),fnStr="\n"+_p.requires.map(function(t){return fnAsRequire(t)}).concat(_p.files.map(function(t){if(useWW){return'importScripts("'+function(t){return t.match(/^\.\//)||t.match(/^\.\./)?window.location.origin+window.location.pathname+t:t.match(/^\//)?window.location.origin+"/"+t:t}(t)+'");'}if(useNode)return'eval( require("fs").readFileSync("'+t+'", { encoding: "utf8" }) );';throw"External file `"+t+"` can not be required without any threading technology."})).concat(["( function(){","var ret = ("+fnImplStr+")("+JSON.stringify(pass)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(_p.requires=[],_p.files=[],useWW){var fnBlob,fnUrl;if(!threadTechAlreadyExists){var fnPre=fnStr+"";fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),fnStr+=fnPre,fnBlob=new Blob([fnStr],{type:"application/javascript"}),fnUrl=window.URL.createObjectURL(fnBlob)}var ww=_p.webworker=_p.webworker||new Worker(fnUrl);threadTechAlreadyExists&&ww.postMessage({$$eval:fnStr});var cb;ww.addEventListener("message",cb=function(t){var e=is.object(t)&&is.object(t.data);e&&"$$resolve"in t.data?(ww.removeEventListener("message",cb),resolve(t.data.$$resolve)):e&&"$$reject"in t.data?(ww.removeEventListener("message",cb),reject(t.data.$$reject)):self.trigger(new Event(t,{type:"message",message:t.data}))},!1),threadTechAlreadyExists||ww.postMessage("$$start")}else if(useNode){_p.child||(_p.child=require("child_process").fork(require("path").join(__dirname,"thread-node-fork")));var child=_p.child,cb;child.on("message",cb=function(t){is.object(t)&&"$$resolve"in t?(child.removeListener("message",cb),resolve(t.$$resolve)):is.object(t)&&"$$reject"in t?(child.removeListener("message",cb),reject(t.$$reject)):self.trigger(new Event({},{type:"message",message:t}))}),child.send({$$eval:fnStr})}else{var promiseResolve=resolve,promiseReject=reject,timer=_p.timer=_p.timer||{listeners:[],exec:function(){fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };",'function message(m){ self.trigger( new Event({}, { type: "message", message: m }) ); };',"function listen(fn){ timer.listeners.push( fn ); };","function resolve(v){ promiseResolve(v); };","function reject(v){ promiseReject(v); };"].join("\n")+fnStr,eval(fnStr)},message:function(t){for(var e=timer.listeners,n=0;n<e.length;n++){(0,e[n])(t)}}};timer.exec()}}).then(function(t){return _p.running=!1,_p.ran=!0,self.trigger("ran"),t});return null==_p.queue&&(_p.queue=runP),runP},message:function(t){var e=this._private;return e.webworker&&e.webworker.postMessage(t),e.child&&e.child.send(t),e.timer&&e.timer.message(t),this},stop:function(){var t=this._private;return t.webworker&&t.webworker.terminate(),t.child&&t.child.kill(),t.timer,t.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var fnAs=function(t,e){var n=t.toString();return n=n.replace(/function\s*?\S*?\s*?\(/,"function "+e+"(")},defineFnal=function(t){return t=t||{},function(e,n){var r=fnAs(e,"_$_$_"+t.name);return this.require(r),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+t.name+"( _$_$_"+t.name+(arguments.length>1?", "+JSON.stringify(n):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};util.extend(thdfn,{reduce:defineFnal({name:"reduce"}),reduceRight:defineFnal({name:"reduceRight"}),map:defineFnal({name:"map"})});var fn=thdfn;fn.promise=fn.run,fn.terminate=fn.halt=fn.stop,fn.include=fn.require,util.extend(thdfn,{on:define.on(),one:define.on({unbindSelfOnTrigger:!0}),off:define.off(),trigger:define.trigger()}),define.eventAliasesOn(thdfn),module.exports=Thread}).call(this,"/node_modules/cytoscape/src")},{"./define":87,"./event":88,"./is":126,"./promise":129,"./util":143,"./window":150,child_process:2,path:204}],142:[function(t,e,n){"use strict";var r=t("../is");e.exports={hex2tuple:function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e,n,r,i=4===t.length;return i?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),[e,n,r]}},hsl2tuple:function(t){function e(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var n,r,i,o,a,s,u,l,c=new RegExp("^"+this.regex.hsla+"$").exec(t);if(c){if(r=parseInt(c[1]),r<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(i=parseFloat(c[2]))<0||i>100)return;if(i/=100,(o=parseFloat(c[3]))<0||o>100)return;if(o/=100,void 0!==(a=c[4])&&((a=parseFloat(a))<0||a>1))return;if(0===i)s=u=l=Math.round(255*o);else{var h=o<.5?o*(1+i):o+i-o*i,d=2*o-h;s=Math.round(255*e(d,h,r+1/3)),u=Math.round(255*e(d,h,r)),l=Math.round(255*e(d,h,r-1/3))}n=[s,u,l,a]}return n},rgb2tuple:function(t){var e,n=new RegExp("^"+this.regex.rgba+"$").exec(t);if(n){e=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;e.push(Math.floor(o))}var a=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(a&&!s)return;var u=n[4];if(void 0!==u){if((u=parseFloat(u))<0||u>1)return;e.push(u)}}return e},colorname2tuple:function(t){return this.colors[t.toLowerCase()]},color2tuple:function(t){return(r.array(t)?t:null)||this.colorname2tuple(t)||this.hex2tuple(t)||this.rgb2tuple(t)||this.hsl2tuple(t)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},{"../is":126}],143:[function(t,e,n){"use strict";var r=t("../is"),i=t("../math"),o={trueify:function(){return!0},falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(t){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(t){return this.extend({},t)},copy:function(t){return null==t?t:r.array(t)?t.slice():r.plainObject(t)?this.clone(t):t},uuid:function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e}};o.makeBoundingBox=i.makeBoundingBox.bind(i),o._staticEmptyObject={},o.staticEmptyObject=function(){return o._staticEmptyObject},o.extend=null!=Object.assign?Object.assign:function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},o.default=function(t,e){return void 0===t?e:t},o.removeFromArray=function(t,e,n){for(var r=t.length;r>=0&&(t[r]!==e||(t.splice(r,1),n));r--);},o.clearArray=function(t){t.splice(0,t.length)},
o.getPrefixedProperty=function(t,e,n){return n&&(e=this.prependCamel(n,e)),t[e]},o.setPrefixedProperty=function(t,e,n,r){n&&(e=this.prependCamel(n,e)),t[e]=r},[t("./colors"),t("./maps"),{memoize:t("./memoize")},t("./regex"),t("./strings"),t("./timing")].forEach(function(t){o.extend(o,t)}),e.exports=o},{"../is":126,"../math":128,"./colors":142,"./maps":144,"./memoize":145,"./regex":146,"./strings":147,"./timing":148}],144:[function(t,e,n){"use strict";var r=t("../is");e.exports={mapEmpty:function(t){return null==t||0===Object.keys(t).length},pushMap:function(t){var e=this.getMap(t);null==e?this.setMap(this.extend({},t,{value:[t.value]})):e.push(t.value)},setMap:function(t){for(var e,n=t.map,i=t.keys,o=i.length,a=0;a<o;a++){var e=i[a];r.plainObject(e)&&this.error("Tried to set map with object key"),a<i.length-1?(null==n[e]&&(n[e]={}),n=n[e]):n[e]=t.value}},getMap:function(t){for(var e=t.map,n=t.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(r.plainObject(a)&&this.error("Tried to get map with object key"),null==(e=e[a]))return e}return e},deleteMap:function(t){for(var e=t.map,n=t.keys,i=n.length,o=t.keepChildren,a=0;a<i;a++){var s=n[a];r.plainObject(s)&&this.error("Tried to delete map with object key");if(a===t.keys.length-1)if(o)for(var u=Object.keys(e),l=0;l<u.length;l++){var c=u[l];o[c]||(e[c]=void 0)}else e[s]=void 0;else e=e[s]}}}},{"../is":126}],145:[function(t,e,n){"use strict";e.exports=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var n=function(){var r,i=this,o=arguments,a=e.apply(i,o),s=n.cache;return(r=s[a])||(r=s[a]=t.apply(i,o)),r};return n.cache={},n}},{}],146:[function(t,e,n){"use strict";var r="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))";e.exports={regex:{number:r,rgba:"rgb[a]?\\(("+r+"[%]?)\\s*,\\s*("+r+"[%]?)\\s*,\\s*("+r+"[%]?)(?:\\s*,\\s*("+r+"))?\\)",rgbaNoBackRefs:"rgb[a]?\\((?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)(?:\\s*,\\s*(?:"+r+"))?\\)",hsla:"hsl[a]?\\(("+r+")\\s*,\\s*("+r+"[%])\\s*,\\s*("+r+"[%])(?:\\s*,\\s*("+r+"))?\\)",hslaNoBackRefs:"hsl[a]?\\((?:"+r+")\\s*,\\s*(?:"+r+"[%])\\s*,\\s*(?:"+r+"[%])(?:\\s*,\\s*(?:"+r+"))?\\)",hex3:"\\#[0-9a-fA-F]{3}",hex6:"\\#[0-9a-fA-F]{6}"}}},{}],147:[function(t,e,n){"use strict";var r=t("./memoize"),i=t("../is");e.exports={camel2dash:r(function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),dash2camel:r(function(t){return t.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),prependCamel:r(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),capitalize:function(t){return i.emptyString(t)?t:t.charAt(0).toUpperCase()+t.substring(1)}}},{"../is":126,"./memoize":145}],148:[function(t,e,n){"use strict";var r=t("../window"),i=t("../is"),o=r?r.performance:null,a={},s=r?function(){return r.requestAnimationFrame?function(t){r.requestAnimationFrame(t)}:r.mozRequestAnimationFrame?function(t){r.mozRequestAnimationFrame(t)}:r.webkitRequestAnimationFrame?function(t){r.webkitRequestAnimationFrame(t)}:r.msRequestAnimationFrame?function(t){r.msRequestAnimationFrame(t)}:void 0}():function(t){t&&setTimeout(function(){t(u())},1e3/60)};a.requestAnimationFrame=function(t){s(t)};var u=o&&o.now?function(){return o.now()}:function(){return Date.now()};a.performanceNow=u,a.throttle=function(t,e,n){var r=!0,o=!0;return n===!1?r=!1:i.plainObject(n)&&(r="leading"in n?n.leading:r,o="trailing"in n?n.trailing:o),n=n||{},n.leading=r,n.maxWait=e,n.trailing=o,a.debounce(t,e,n)},a.now=function(){return Date.now()},a.debounce=function(t,e,n){var r,o,a,s,u,l,c,h=this,d=0,p=!1,f=!0;if(i.fn(t)){if(e=Math.max(0,e)||0,n===!0){var g=!0;f=!1}else i.plainObject(n)&&(g=n.leading,p="maxWait"in n&&(Math.max(e,n.maxWait)||0),f="trailing"in n?n.trailing:f);var v=function(){var n=e-(h.now()-s);if(n<=0){o&&clearTimeout(o);var i=c;o=l=c=void 0,i&&(d=h.now(),a=t.apply(u,r),l||o||(r=u=null))}else l=setTimeout(v,n)},y=function(){l&&clearTimeout(l),o=l=c=void 0,(f||p!==e)&&(d=h.now(),a=t.apply(u,r),l||o||(r=u=null))};return function(){if(r=arguments,s=h.now(),u=this,c=f&&(l||!g),p===!1)var n=g&&!l;else{o||g||(d=s);var i=p-(s-d),m=i<=0;m?(o&&(o=clearTimeout(o)),d=s,a=t.apply(u,r)):o||(o=setTimeout(y,i))}return m&&l?l=clearTimeout(l):l||e===p||(l=setTimeout(v,e)),n&&(m=!0,a=t.apply(u,r)),!m||l||o||(r=u=null),a}}},e.exports=a},{"../is":126,"../window":150}],149:[function(t,e,n){e.exports="2.7.15"},{}],150:[function(t,e,n){e.exports="undefined"==typeof window?null:window},{}],151:[function(t,e,n){e.exports={graphlib:t("./lib/graphlib"),layout:t("./lib/layout"),debug:t("./lib/debug"),util:{time:t("./lib/util").time,notime:t("./lib/util").notime},version:t("./lib/version")}},{"./lib/debug":156,"./lib/graphlib":157,"./lib/layout":159,"./lib/util":179,"./lib/version":180}],152:[function(t,e,n){"use strict";function r(t){var e="greedy"===t.graph().acyclicer?s(t,function(t){return function(e){return t.edge(e).weight}}(t)):i(t);a.each(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,a.uniqueId("rev"))})}function i(t){function e(o){a.has(i,o)||(i[o]=!0,r[o]=!0,a.each(t.outEdges(o),function(t){a.has(r,t.w)?n.push(t):e(t.w)}),delete r[o])}var n=[],r={},i={};return a.each(t.nodes(),e),n}function o(t){a.each(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}var a=t("./lodash"),s=t("./greedy-fas");e.exports={run:r,undo:o}},{"./greedy-fas":158,"./lodash":160}],153:[function(t,e,n){function r(t){function e(n){var r=t.children(n),a=t.node(n);if(r.length&&o.each(r,e),o.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,u=a.maxRank+1;s<u;++s)i(t,"borderLeft","_bl",n,a,s),i(t,"borderRight","_br",n,a,s)}}o.each(t.children(),e)}function i(t,e,n,r,i,o){var s={width:0,height:0,rank:o,borderType:e},u=i[e][o-1],l=a.addDummyNode(t,"border",s,n);i[e][o]=l,t.setParent(l,r),u&&t.setEdge(u,l,{weight:1})}var o=t("./lodash"),a=t("./util");e.exports=r},{"./lodash":160,"./util":179}],154:[function(t,e,n){"use strict";function r(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)}function i(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||s(t),"lr"!==e&&"rl"!==e||(l(t),o(t))}function o(t){h.each(t.nodes(),function(e){a(t.node(e))}),h.each(t.edges(),function(e){a(t.edge(e))})}function a(t){var e=t.width;t.width=t.height,t.height=e}function s(t){h.each(t.nodes(),function(e){u(t.node(e))}),h.each(t.edges(),function(e){var n=t.edge(e);h.each(n.points,u),h.has(n,"y")&&u(n)})}function u(t){t.y=-t.y}function l(t){h.each(t.nodes(),function(e){c(t.node(e))}),h.each(t.edges(),function(e){var n=t.edge(e);h.each(n.points,c),h.has(n,"x")&&c(n)})}function c(t){var e=t.x;t.x=t.y,t.y=e}var h=t("./lodash");e.exports={adjust:r,undo:i}},{"./lodash":160}],155:[function(t,e,n){function r(){var t={};t._next=t._prev=t,this._sentinel=t}function i(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}e.exports=r,r.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return i(e),e},r.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&i(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},r.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,o)),n=n._prev;return"["+t.join(", ")+"]"}},{}],156:[function(t,e,n){function r(t){var e=o.buildLayerMatrix(t),n=new a({compound:!0,multigraph:!0}).setGraph({});return i.each(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),i.each(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),i.each(e,function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),i.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}var i=t("./lodash"),o=t("./util"),a=t("./graphlib").Graph;e.exports={debugOrdering:r}},{"./graphlib":157,"./lodash":160,"./util":179}],157:[function(t,e,n){var r;if("function"==typeof t)try{r=t("graphlib")}catch(t){}r||(r=window.graphlib),e.exports=r},{graphlib:181}],158:[function(t,e,n){function r(t,e){if(t.nodeCount()<=1)return[];var n=a(t,e||h),r=i(n.graph,n.buckets,n.zeroIdx);return u.flatten(u.map(r,function(e){return t.outEdges(e.v,e.w)}),!0)}function i(t,e,n){for(var r,i=[],a=e[e.length-1],s=e[0];t.nodeCount();){for(;r=s.dequeue();)o(t,e,n,r);for(;r=a.dequeue();)o(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(o(t,e,n,r,!0));break}}return i}function o(t,e,n,r,i){var o=i?[]:void 0;return u.each(t.inEdges(r.v),function(r){var a=t.edge(r),u=t.node(r.v);i&&o.push({v:r.v,w:r.w}),u.out-=a,s(e,n,u)}),u.each(t.outEdges(r.v),function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,s(e,n,a)}),t.removeNode(r.v),o}function a(t,e){var n=new l,r=0,i=0;u.each(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),u.each(t.edges(),function(t){var o=n.edge(t.v,t.w)||0,a=e(t),s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)});var o=u.range(i+r+3).map(function(){return new c}),a=r+1;return u.each(n.nodes(),function(t){s(o,a,n.node(t))}),{graph:n,buckets:o,zeroIdx:a}}function s(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var u=t("./lodash"),l=t("./graphlib").Graph,c=t("./data/list");e.exports=r;var h=u.constant(1)},{"./data/list":155,"./graphlib":157,"./lodash":160}],159:[function(t,e,n){"use strict";function r(t,e){var n=e&&e.debugTiming?P.time:P.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return a(t)});n("  runLayout",function(){i(e,n)}),n("  updateInputGraph",function(){o(t,e)})})}function i(t,e){e("    makeSpaceForEdgeLabels",function(){s(t)}),e("    removeSelfEdges",function(){v(t)}),e("    acyclic",function(){_.run(t)}),e("    nestingGraph.run",function(){L.run(t)}),e("    rank",function(){k(P.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){u(t)}),e("    removeEmptyRanks",function(){S(t)}),e("    nestingGraph.cleanup",function(){L.cleanup(t)}),e("    normalizeRanks",function(){T(t)}),e("    assignRankMinMax",function(){l(t)}),e("    removeEdgeLabelProxies",function(){c(t)}),e("    normalize.run",function(){E.run(t)}),e("    parentDummyChains",function(){N(t)}),e("    addBorderSegments",function(){C(t)}),e("    order",function(){A(t)}),e("    insertSelfEdges",function(){y(t)}),e("    adjustCoordinateSystem",function(){D.adjust(t)}),e("    position",function(){M(t)}),e("    positionSelfEdges",function(){m(t)}),e("    removeBorderNodes",function(){g(t)}),e("    normalize.undo",function(){E.undo(t)}),e("    fixupEdgeLabelCoords",function(){p(t)}),e("    undoCoordinateSystem",function(){D.undo(t)}),e("    translateGraph",function(){h(t)}),e("    assignNodeIntersects",function(){d(t)}),e("    reversePoints",function(){f(t)}),e("    acyclic.undo",function(){_.undo(t)})}function o(t,e){w.each(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),w.each(t.edges(),function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,w.has(i,"x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}function a(t){var e=new I({multigraph:!0,compound:!0}),n=b(t.graph());return e.setGraph(w.merge({},R,x(n,O),w.pick(n,j))),w.each(t.nodes(),function(n){var r=b(t.node(n));e.setNode(n,w.defaults(x(r,B),F)),e.setParent(n,t.parent(n))}),w.each(t.edges(),function(n){var r=b(t.edge(n));e.setEdge(n,w.merge({},z,x(r,q),w.pick(r,V)))}),e}function s(t){var e=t.graph();e.ranksep/=2,w.each(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function u(t){w.each(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e:e};P.addDummyNode(t,"edge-proxy",o,"_ep")}})}function l(t){var e=0;w.each(t.nodes(),function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=w.max(e,r.maxRank))}),t.graph().maxRank=e}function c(t){w.each(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function h(t){function e(t){var e=t.x,a=t.y,s=t.width,u=t.height;n=Math.min(n,e-s/2),r=Math.max(r,e+s/2),i=Math.min(i,a-u/2),o=Math.max(o,a+u/2)}var n=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,o=0,a=t.graph(),s=a.marginx||0,u=a.marginy||0;w.each(t.nodes(),function(n){e(t.node(n))}),w.each(t.edges(),function(n){var r=t.edge(n);w.has(r,"x")&&e(r)}),n-=s,i-=u,w.each(t.nodes(),function(e){var r=t.node(e);r.x-=n,r.y-=i}),w.each(t.edges(),function(e){var r=t.edge(e);w.each(r.points,function(t){t.x-=n,t.y-=i}),w.has(r,"x")&&(r.x-=n),w.has(r,"y")&&(r.y-=i)}),a.width=r-n+s,a.height=o-i+u}function d(t){w.each(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(P.intersectRect(o,n)),i.points.push(P.intersectRect(a,r))})}function p(t){w.each(t.edges(),function(e){var n=t.edge(e);if(w.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}function f(t){w.each(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}function g(t){w.each(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(w.last(n.borderLeft)),a=t.node(w.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),w.each(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}function v(t){w.each(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}function y(t){var e=P.buildLayerMatrix(t);w.each(e,function(e){var n=0;w.each(e,function(e,r){var i=t.node(e);i.order=r+n,w.each(i.selfEdges,function(e){P.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})}function m(t){w.each(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function x(t,e){return w.mapValues(w.pick(t,e),Number)}function b(t){var e={};return w.each(t,function(t,n){e[n.toLowerCase()]=t}),e}var w=t("./lodash"),_=t("./acyclic"),E=t("./normalize"),k=t("./rank"),T=t("./util").normalizeRanks,N=t("./parent-dummy-chains"),S=t("./util").removeEmptyRanks,L=t("./nesting-graph"),C=t("./add-border-segments"),D=t("./coordinate-system"),A=t("./order"),M=t("./position"),P=t("./util"),I=t("./graphlib").Graph;e.exports=r;var O=["nodesep","edgesep","ranksep","marginx","marginy"],R={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},j=["acyclicer","ranker","rankdir","align"],B=["width","height"],F={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],z={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},V=["labelpos"]},{"./acyclic":152,"./add-border-segments":153,"./coordinate-system":154,"./graphlib":157,"./lodash":160,"./nesting-graph":161,"./normalize":162,"./order":167,"./parent-dummy-chains":172,"./position":174,"./rank":176,"./util":179}],160:[function(t,e,n){var r;if("function"==typeof t)try{r=t("lodash")}catch(t){}r||(r=window._),e.exports=r},{lodash:202}],161:[function(t,e,n){function r(t){var e=l.addDummyNode(t,"root",{},"_root"),n=o(t),r=u.max(n)-1,s=2*r+1;t.graph().nestingRoot=e,u.each(t.edges(),function(e){t.edge(e).minlen*=s});var c=a(t)+1;u.each(t.children(),function(o){i(t,e,s,c,r,n,o)}),t.graph().nodeRankFactor=s}function i(t,e,n,r,o,a,s){var c=t.children(s);if(!c.length)return void(s!==e&&t.setEdge(e,s,{weight:0,minlen:n}));var h=l.addBorderNode(t,"_bt"),d=l.addBorderNode(t,"_bb"),p=t.node(s);t.setParent(h,s),p.borderTop=h,t.setParent(d,s),p.borderBottom=d,u.each(c,function(u){i(t,e,n,r,o,a,u);var l=t.node(u),c=l.borderTop?l.borderTop:u,p=l.borderBottom?l.borderBottom:u,f=l.borderTop?r:2*r,g=c!==p?1:o-a[s]+1;t.setEdge(h,c,{weight:f,minlen:g,nestingEdge:!0}),t.setEdge(p,d,{weight:f,minlen:g,nestingEdge:!0})}),t.parent(s)||t.setEdge(e,h,{weight:0,minlen:o+a[s]})}function o(t){function e(r,i){var o=t.children(r);o&&o.length&&u.each(o,function(t){e(t,i+1)}),n[r]=i}var n={};return u.each(t.children(),function(t){e(t,1)}),n}function a(t){return u.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}function s(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,u.each(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}var u=t("./lodash"),l=t("./util");e.exports={run:r,cleanup:s}},{"./lodash":160,"./util":179}],162:[function(t,e,n){"use strict";function r(t){t.graph().dummyChains=[],a.each(t.edges(),function(e){i(t,e)})}function i(t,e){var n=e.v,r=t.node(n).rank,i=e.w,o=t.node(i).rank,a=e.name,u=t.edge(e),l=u.labelRank;if(o!==r+1){t.removeEdge(e);var c,h,d;for(d=0,++r;r<o;++d,++r)u.points=[],h={width:0,height:0,edgeLabel:u,edgeObj:e,rank:r},c=s.addDummyNode(t,"edge",h,"_d"),r===l&&(h.width=u.width,h.height=u.height,h.dummy="edge-label",h.labelpos=u.labelpos),t.setEdge(n,c,{weight:u.weight},a),0===d&&t.graph().dummyChains.push(c),n=c;t.setEdge(n,i,{weight:u.weight},a)}}function o(t){a.each(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}var a=t("./lodash"),s=t("./util");e.exports={run:r,undo:o}},{"./lodash":160,"./util":179}],163:[function(t,e,n){function r(t,e,n){var r,o={};i.each(n,function(n){for(var i,a,s=t.parent(n);s;){if(i=t.parent(s),i?(a=o[i],o[i]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=i}})}var i=t("../lodash");e.exports=r},{"../lodash":160}],164:[function(t,e,n){function r(t,e){return i.map(e,function(e){var n=t.inEdges(e);if(n.length){var r=i.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}})}var i=t("../lodash");e.exports=r},{"../lodash":160}],165:[function(t,e,n){function r(t,e,n){var r=i(t),s=new a({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(e){return t.node(e)});return o.each(t.nodes(),function(i){var a=t.node(i),u=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(i),s.setParent(i,u||r),o.each(t[n](i),function(e){var n=e.v===i?e.w:e.v,r=s.edge(n,i),a=o.isUndefined(r)?0:r.weight;s.setEdge(n,i,{weight:t.edge(e).weight+a})}),o.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),s}function i(t){for(var e;t.hasNode(e=o.uniqueId("_root")););return e}var o=t("../lodash"),a=t("../graphlib").Graph;e.exports=r},{"../graphlib":157,"../lodash":160}],166:[function(t,e,n){"use strict";function r(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}function i(t,e,n){for(var r=o.zipObject(n,o.map(n,function(t,e){return e})),i=o.flatten(o.map(e,function(e){return o.chain(t.outEdges(e)).map(function(e){return{pos:r[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=o.map(new Array(s),function(){return 0}),l=0;return o.each(i.forEach(function(t){var e=t.pos+a;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),e=e-1>>1,u[e]+=t.weight;l+=t.weight*n})),l}var o=t("../lodash");e.exports=r},{"../lodash":160}],167:[function(t,e,n){"use strict";function r(t){var e=f.maxRank(t),n=i(t,s.range(1,e+1),"inEdges"),r=i(t,s.range(e-1,-1,-1),"outEdges"),c=u(t);a(t,c);for(var h,d=Number.POSITIVE_INFINITY,p=0,g=0;g<4;++p,++g){o(p%2?n:r,p%4>=2),c=f.buildLayerMatrix(t);var v=l(t,c);v<d&&(g=0,h=s.cloneDeep(c),d=v)}a(t,h)}function i(t,e,n){return s.map(e,function(e){return h(t,e,n)})}function o(t,e){var n=new p;s.each(t,function(t){var r=t.graph().root,i=c(t,r,n,e);s.each(i.vs,function(e,n){t.node(e).order=n}),d(t,n,i.vs)})}function a(t,e){s.each(e,function(e){s.each(e,function(e,n){t.node(e).order=n})})}var s=t("../lodash"),u=t("./init-order"),l=t("./cross-count"),c=t("./sort-subgraph"),h=t("./build-layer-graph"),d=t("./add-subgraph-constraints"),p=t("../graphlib").Graph,f=t("../util");e.exports=r},{"../graphlib":157,"../lodash":160,"../util":179,"./add-subgraph-constraints":163,"./build-layer-graph":165,"./cross-count":166,"./init-order":168,"./sort-subgraph":170}],168:[function(t,e,n){"use strict";function r(t){function e(r){if(!i.has(n,r)){n[r]=!0;a[t.node(r).rank].push(r),i.each(t.successors(r),e)}}var n={},r=i.filter(t.nodes(),function(e){return!t.children(e).length}),o=i.max(i.map(r,function(e){return t.node(e).rank})),a=i.map(i.range(o+1),function(){return[]}),s=i.sortBy(r,function(e){return t.node(e).rank});return i.each(s,e),a}var i=t("../lodash");e.exports=r},{"../lodash":160}],169:[function(t,e,n){"use strict";function r(t,e){var n={};return a.each(t,function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};a.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)}),a.each(e.edges(),function(t){var e=n[t.v],r=n[t.w];a.isUndefined(e)||a.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))}),i(a.filter(n,function(t){return!t.indegree}))}function i(t){for(var e=[];t.length;){var n=t.pop();e.push(n),a.each(n.in.reverse(),function(t){return function(e){e.merged||(a.isUndefined(e.barycenter)||a.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&o(t,e)}}(n)),a.each(n.out,function(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}(n))}return a.chain(e).filter(function(t){return!t.merged}).map(function(t){return a.pick(t,["vs","i","barycenter","weight"])}).value()}function o(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}var a=t("../lodash");e.exports=r},{"../lodash":160}],170:[function(t,e,n){function r(t,e,n,c){var h=t.children(e),d=t.node(e),p=d?d.borderLeft:void 0,f=d?d.borderRight:void 0,g={};p&&(h=a.filter(h,function(t){return t!==p&&t!==f}));var v=s(t,h);a.each(v,function(e){if(t.children(e.v).length){var i=r(t,e.v,n,c);g[e.v]=i,a.has(i,"barycenter")&&o(e,i)}});var y=u(v,n);i(y,g);var m=l(y,c);if(p&&(m.vs=a.flatten([p,m.vs,f],!0),t.predecessors(p).length)){var x=t.node(t.predecessors(p)[0]),b=t.node(t.predecessors(f)[0]);a.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+x.order+b.order)/(m.weight+2),m.weight+=2}return m}function i(t,e){a.each(t,function(t){t.vs=a.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}function o(t,e){a.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var a=t("../lodash"),s=t("./barycenter"),u=t("./resolve-conflicts"),l=t("./sort");e.exports=r},{"../lodash":160,"./barycenter":164,"./resolve-conflicts":169,"./sort":171}],171:[function(t,e,n){function r(t,e){var n=s.partition(t,function(t){return a.has(t,"barycenter")}),r=n.lhs,u=a.sortBy(n.rhs,function(t){return-t.i}),l=[],c=0,h=0,d=0;r.sort(o(!!e)),d=i(l,u,d),a.each(r,function(t){d+=t.vs.length,l.push(t.vs),c+=t.barycenter*t.weight,h+=t.weight,d=i(l,u,d)});var p={vs:a.flatten(l,!0)};return h&&(p.barycenter=c/h,p.weight=h),p}function i(t,e,n){for(var r;e.length&&(r=a.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}function o(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}var a=t("../lodash"),s=t("../util");e.exports=r},{"../lodash":160,"../util":179}],172:[function(t,e,n){function r(t){var e=o(t);a.each(t.graph().dummyChains,function(n){for(var r=t.node(n),o=r.edgeObj,a=i(t,e,o.v,o.w),s=a.path,u=a.lca,l=0,c=s[l],h=!0;n!==o.w;){if(r=t.node(n),h){for(;(c=s[l])!==u&&t.node(c).maxRank<r.rank;)l++;c===u&&(h=!1)}if(!h){for(;l<s.length-1&&t.node(c=s[l+1]).minRank<=r.rank;)l++;c=s[l]}t.setParent(n,c),n=t.successors(n)[0]}})}function i(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),l=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||l>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}function o(t){function e(i){var o=r;a.each(t.children(i),e),n[i]={low:o,lim:r++}}var n={},r=0;return a.each(t.children(),e),n}var a=t("./lodash");e.exports=r},{"./lodash":160}],173:[function(t,e,n){"use strict";function r(t,e){function n(e,n){var i=0,s=0,u=e.length,l=y.last(n);return y.each(n,function(e,c){var h=o(t,e),d=h?t.node(h).order:u;(h||e===l)&&(y.each(n.slice(s,c+1),function(e){y.each(t.predecessors(e),function(n){var o=t.node(n),s=o.order;!(s<i||d<s)||o.dummy&&t.node(e).dummy||a(r,n,e)})}),s=c+1,i=d)}),n}var r={};return y.reduce(e,n),r}function i(t,e){function n(e,n,r,o,s){var u;y.each(y.range(n,r),function(n){u=e[n],t.node(u).dummy&&y.each(t.predecessors(u),function(e){var n=t.node(e);n.dummy&&(n.order<o||n.order>s)&&a(i,e,u)})})}function r(e,r){var i,o=-1,a=0;return y.each(r,function(s,u){if("border"===t.node(s).dummy){var l=t.predecessors(s);l.length&&(i=t.node(l[0]).order,n(r,a,u,o,i),a=u,o=i)}n(r,a,r.length,i,e.length)}),r}var i={};return y.reduce(e,r),i}function o(t,e){if(t.node(e).dummy)return y.find(t.predecessors(e),function(e){return t.node(e).dummy})}function a(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function s(t,e,n){if(e>n){var r=e;e=n,n=r}return y.has(t[e],n)}function u(t,e,n,r){var i={},o={},a={};return y.each(e,function(t){y.each(t,function(t,e){i[t]=t,o[t]=t,a[t]=e})}),y.each(e,function(t){var e=-1;y.each(t,function(t){var u=r(t);if(u.length){u=y.sortBy(u,function(t){return a[t]});for(var l=(u.length-1)/2,c=Math.floor(l),h=Math.ceil(l);c<=h;++c){var d=u[c];o[t]===t&&e<a[d]&&!s(n,t,d)&&(o[d]=t,o[t]=i[t]=i[d],e=a[d])}}})}),{root:i,align:o}}function l(t,e,n,r,i){function o(t){y.has(l,t)||(l[t]=!0,s[t]=y.reduce(u.inEdges(t),function(t,e){return o(e.v),Math.max(t,s[e.v]+u.edge(e))},0))}function a(e){if(2!==l[e]){l[e]++;var n=t.node(e),r=y.reduce(u.outEdges(e),function(t,e){return a(e.w),Math.min(t,s[e.w]-u.edge(e))},Number.POSITIVE_INFINITY);r!==Number.POSITIVE_INFINITY&&n.borderType!==h&&(s[e]=Math.max(s[e],r))}}var s={},u=c(t,e,n,i),l={};y.each(u.nodes(),o);var h=i?"borderLeft":"borderRight";return y.each(u.nodes(),a),y.each(r,function(t){s[t]=s[n[t]]}),s}function c(t,e,n,r){var i=new m,o=t.graph(),a=g(o.nodesep,o.edgesep,r);return y.each(e,function(e){var r;y.each(e,function(e){var o=n[e];if(i.setNode(o),r){var s=n[r],u=i.edge(s,o);i.setEdge(s,o,Math.max(a(t,e,r),u||0))}r=e})}),i}function h(t,e){return y.min(e,function(e){var n=y.min(e,function(e,n){return e-v(t,n)/2});return y.max(e,function(e,n){return e+v(t,n)/2})-n})}function d(t,e){var n=y.min(e),r=y.max(e);y.each(["u","d"],function(i){y.each(["l","r"],function(o){var a,s=i+o,u=t[s];u!==e&&(a="l"===o?n-y.min(u):r-y.max(u))&&(t[s]=y.mapValues(u,function(t){return t+a}))})})}function p(t,e){return y.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=y.sortBy(y.pluck(t,r));return(i[1]+i[2])/2})}function f(t){var e,n=x.buildLayerMatrix(t),o=y.merge(r(t,n),i(t,n)),a={};return y.each(["u","d"],function(r){e="u"===r?n:y.values(n).reverse(),y.each(["l","r"],function(n){"r"===n&&(e=y.map(e,function(t){return y.values(t).reverse()}));var i=y.bind("u"===r?t.predecessors:t.successors,t),s=u(t,e,o,i),c=l(t,e,s.root,s.align,"r"===n);"r"===n&&(c=y.mapValues(c,function(t){return-t})),a[r+n]=c})}),d(a,h(t,a)),p(a,t.graph().align)}function g(t,e,n){return function(r,i,o){var a,s=r.node(i),u=r.node(o),l=0;if(l+=s.width/2,y.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(l+=n?a:-a),a=0,l+=(s.dummy?e:t)/2,l+=(u.dummy?e:t)/2,l+=u.width/2,y.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(l+=n?a:-a),a=0,l}}function v(t,e){return t.node(e).width}var y=t("../lodash"),m=t("../graphlib").Graph,x=t("../util");e.exports={positionX:f,findType1Conflicts:r,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:h,balance:p}},{"../graphlib":157,"../lodash":160,"../util":179}],174:[function(t,e,n){"use strict";function r(t){t=a.asNonCompoundGraph(t),i(t),o.each(s(t),function(e,n){t.node(n).x=e})}function i(t){var e=a.buildLayerMatrix(t),n=t.graph().ranksep,r=0;o.each(e,function(e){var i=o.max(o.map(e,function(e){return t.node(e).height}));o.each(e,function(e){t.node(e).y=r+i/2}),r+=i+n})}var o=t("../lodash"),a=t("../util"),s=t("./bk").positionX;e.exports=r},{"../lodash":160,"../util":179,"./bk":173}],175:[function(t,e,n){"use strict";function r(t){var e=new u({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var s,c;i(e,t)<r;)s=o(e,t),c=e.hasNode(s.v)?l(t,s):-l(t,s),a(e,t,c);return e}function i(t,e){function n(r){s.each(e.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;t.hasNode(a)||l(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))})}return s.each(t.nodes(),n),t.nodeCount()}function o(t,e){return s.min(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return l(e,n)})}function a(t,e,n){s.each(t.nodes(),function(t){e.node(t).rank+=n})}var s=t("../lodash"),u=t("../graphlib").Graph,l=t("./util").slack;e.exports=r},{"../graphlib":157,"../lodash":160,"./util":178}],176:[function(t,e,n){"use strict";function r(t){switch(t.graph().ranker){case"network-simplex":o(t);break;case"tight-tree":i(t);break;case"longest-path":c(t);break;default:o(t)}}function i(t){s(t),u(t)}function o(t){l(t)}var a=t("./util"),s=a.longestPath,u=t("./feasible-tree"),l=t("./network-simplex");e.exports=r;var c=s},{"./feasible-tree":175,"./network-simplex":177,"./util":178}],177:[function(t,e,n){"use strict";function r(t){t=w(t),m(t);var e=v(t);s(e),i(e,t);for(var n,r;n=l(e);)r=c(e,t,n),h(e,t,n,r)}function i(t,e){var n=b(t,t.nodes());n=n.slice(0,n.length-1),g.each(n,function(n){o(t,e,n)})}function o(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=a(t,e,n)}function a(t,e,n){var r=t.node(n),i=r.parent,o=!0,a=e.edge(n,i),s=0;return a||(o=!1,a=e.edge(i,n)),s=a.weight,g.each(e.nodeEdges(n),function(r){var a=r.v===n,u=a?r.w:r.v;if(u!==i){var l=a===o,c=e.edge(r).weight;if(s+=l?c:-c,p(t,n,u)){var h=t.edge(n,u).cutvalue;s+=l?-h:h}}}),s}function s(t,e){arguments.length<2&&(e=t.nodes()[0]),u(t,{},1,e)}function u(t,e,n,r,i){var o=n,a=t.node(r);return e[r]=!0,g.each(t.neighbors(r),function(i){g.has(e,i)||(n=u(t,e,n,i,r))}),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function l(t){return g.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function c(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var l=g.filter(e.edges(),function(e){return u===f(t,t.node(e.v),s)&&u!==f(t,t.node(e.w),s)});return g.min(l,function(t){return y(e,t)})}function h(t,e,n,r){var o=n.v,a=n.w;t.removeEdge(o,a),t.setEdge(r.v,r.w,{}),s(t),i(t,e),d(t,e)}function d(t,e){var n=g.find(t.nodes(),function(t){return!e.node(t).parent}),r=x(t,n);r=r.slice(1),g.each(r,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}function p(t,e,n){return t.hasEdge(e,n)}function f(t,e,n){
return n.low<=e.lim&&e.lim<=n.lim}var g=t("../lodash"),v=t("./feasible-tree"),y=t("./util").slack,m=t("./util").longestPath,x=t("../graphlib").alg.preorder,b=t("../graphlib").alg.postorder,w=t("../util").simplify;e.exports=r,r.initLowLimValues=s,r.initCutValues=i,r.calcCutValue=a,r.leaveEdge=l,r.enterEdge=c,r.exchangeEdges=h},{"../graphlib":157,"../lodash":160,"../util":179,"./feasible-tree":175,"./util":178}],178:[function(t,e,n){"use strict";function r(t){function e(r){var i=t.node(r);if(o.has(n,r))return i.rank;n[r]=!0;var a=o.min(o.map(t.outEdges(r),function(n){return e(n.w)-t.edge(n).minlen}));return a===Number.POSITIVE_INFINITY&&(a=0),i.rank=a}var n={};o.each(t.sources(),e)}function i(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var o=t("../lodash");e.exports={longestPath:r,slack:i}},{"../lodash":160}],179:[function(t,e,n){"use strict";function r(t,e,n,r){var i;do{i=y.uniqueId(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function i(t){var e=(new m).setGraph(t.graph());return y.each(t.nodes(),function(n){e.setNode(n,t.node(n))}),y.each(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function o(t){var e=new m({multigraph:t.isMultigraph()}).setGraph(t.graph());return y.each(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),y.each(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e}function a(t){var e=y.map(t.nodes(),function(e){var n={};return y.each(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return y.zipObject(t.nodes(),e)}function s(t){var e=y.map(t.nodes(),function(e){var n={};return y.each(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return y.zipObject(t.nodes(),e)}function u(t,e){var n=t.x,r=t.y,i=e.x-n,o=e.y-r,a=t.width/2,s=t.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(o)*a>Math.abs(i)*s?(o<0&&(s=-s),u=s*i/o,l=s):(i<0&&(a=-a),u=a,l=a*o/i),{x:n+u,y:r+l}}function l(t){var e=y.map(y.range(p(t)+1),function(){return[]});return y.each(t.nodes(),function(n){var r=t.node(n),i=r.rank;y.isUndefined(i)||(e[i][r.order]=n)}),e}function c(t){var e=y.min(y.map(t.nodes(),function(e){return t.node(e).rank}));y.each(t.nodes(),function(n){var r=t.node(n);y.has(r,"rank")&&(r.rank-=e)})}function h(t){var e=y.min(y.map(t.nodes(),function(e){return t.node(e).rank})),n=[];y.each(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var r=0,i=t.graph().nodeRankFactor;y.each(n,function(e,n){y.isUndefined(e)&&n%i!=0?--r:r&&y.each(e,function(e){t.node(e).rank+=r})})}function d(t,e,n,i){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=i),r(t,"border",o,e)}function p(t){return y.max(y.map(t.nodes(),function(e){var n=t.node(e).rank;if(!y.isUndefined(n))return n}))}function f(t,e){var n={lhs:[],rhs:[]};return y.each(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n}function g(t,e){var n=y.now();try{return e()}finally{console.log(t+" time: "+(y.now()-n)+"ms")}}function v(t,e){return e()}var y=t("./lodash"),m=t("./graphlib").Graph;e.exports={addDummyNode:r,simplify:i,asNonCompoundGraph:o,successorWeights:a,predecessorWeights:s,intersectRect:u,buildLayerMatrix:l,normalizeRanks:c,removeEmptyRanks:h,addBorderNode:d,maxRank:p,partition:f,time:g,notime:v}},{"./graphlib":157,"./lodash":160}],180:[function(t,e,n){e.exports="0.7.4"},{}],181:[function(t,e,n){var r=t("./lib");e.exports={Graph:r.Graph,json:t("./lib/json"),alg:t("./lib/alg"),version:r.version}},{"./lib":197,"./lib/alg":188,"./lib/json":198}],182:[function(t,e,n){function r(t){function e(o){i.has(r,o)||(r[o]=!0,n.push(o),i.each(t.successors(o),e),i.each(t.predecessors(o),e))}var n,r={},o=[];return i.each(t.nodes(),function(t){n=[],e(t),n.length&&o.push(n)}),o}var i=t("../lodash");e.exports=r},{"../lodash":199}],183:[function(t,e,n){function r(t,e,n){o.isArray(e)||(e=[e]);var r=[],a={};return o.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,a,r)}),r}function i(t,e,n,r,a){o.has(r,e)||(r[e]=!0,n||a.push(e),o.each(t.neighbors(e),function(e){i(t,e,n,r,a)}),n&&a.push(e))}var o=t("../lodash");e.exports=r},{"../lodash":199}],184:[function(t,e,n){function r(t,e,n){return o.transform(t.nodes(),function(r,o){r[o]=i(t,o,e,n)},{})}var i=t("./dijkstra"),o=t("../lodash");e.exports=r},{"../lodash":199,"./dijkstra":185}],185:[function(t,e,n){function r(t,e,n,r){return i(t,String(e),n||s,r||function(e){return t.outEdges(e)})}function i(t,e,n,r){var i,o,s={},u=new a,l=function(t){var e=t.v!==i?t.v:t.w,r=s[e],a=n(t),l=o.distance+a;if(a<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+a);l<r.distance&&(r.distance=l,r.predecessor=i,u.decrease(e,l))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},u.add(t,n)});u.size()>0&&(i=u.removeMin(),o=s[i],o.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(l);return s}var o=t("../lodash"),a=t("../data/priority-queue");e.exports=r;var s=o.constant(1)},{"../data/priority-queue":195,"../lodash":199}],186:[function(t,e,n){function r(t){return i.filter(o(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}var i=t("../lodash"),o=t("./tarjan");e.exports=r},{"../lodash":199,"./tarjan":193}],187:[function(t,e,n){function r(t,e,n){return i(t,e||a,n||function(e){return t.outEdges(e)})}function i(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}var o=t("../lodash");e.exports=r;var a=o.constant(1)},{"../lodash":199}],188:[function(t,e,n){e.exports={components:t("./components"),dijkstra:t("./dijkstra"),dijkstraAll:t("./dijkstra-all"),findCycles:t("./find-cycles"),floydWarshall:t("./floyd-warshall"),isAcyclic:t("./is-acyclic"),postorder:t("./postorder"),preorder:t("./preorder"),prim:t("./prim"),tarjan:t("./tarjan"),topsort:t("./topsort")}},{"./components":182,"./dijkstra":185,"./dijkstra-all":184,"./find-cycles":186,"./floyd-warshall":187,"./is-acyclic":189,"./postorder":190,"./preorder":191,"./prim":192,"./tarjan":193,"./topsort":194}],189:[function(t,e,n){function r(t){try{i(t)}catch(t){if(t instanceof i.CycleException)return!1;throw t}return!0}var i=t("./topsort");e.exports=r},{"./topsort":194}],190:[function(t,e,n){function r(t,e){return i(t,e,"post")}var i=t("./dfs");e.exports=r},{"./dfs":183}],191:[function(t,e,n){function r(t,e){return i(t,e,"pre")}var i=t("./dfs");e.exports=r},{"./dfs":183}],192:[function(t,e,n){function r(t,e){function n(t){var n=t.v===r?t.w:t.v,i=l.priority(n);if(void 0!==i){var o=e(t);o<i&&(u[n]=r,l.decrease(n,o))}}var r,s=new o,u={},l=new a;if(0===t.nodeCount())return s;i.each(t.nodes(),function(t){l.add(t,Number.POSITIVE_INFINITY),s.setNode(t)}),l.decrease(t.nodes()[0],0);for(var c=!1;l.size()>0;){if(r=l.removeMin(),i.has(u,r))s.setEdge(r,u[r]);else{if(c)throw new Error("Input graph is not connected: "+t);c=!0}t.nodeEdges(r).forEach(n)}return s}var i=t("../lodash"),o=t("../graph"),a=t("../data/priority-queue");e.exports=r},{"../data/priority-queue":195,"../graph":196,"../lodash":199}],193:[function(t,e,n){function r(t){function e(s){var u=o[s]={onStack:!0,lowlink:n,index:n++};if(r.push(s),t.successors(s).forEach(function(t){i.has(o,t)?o[t].onStack&&(u.lowlink=Math.min(u.lowlink,o[t].index)):(e(t),u.lowlink=Math.min(u.lowlink,o[t].lowlink))}),u.lowlink===u.index){var l,c=[];do{l=r.pop(),o[l].onStack=!1,c.push(l)}while(s!==l);a.push(c)}}var n=0,r=[],o={},a=[];return t.nodes().forEach(function(t){i.has(o,t)||e(t)}),a}var i=t("../lodash");e.exports=r},{"../lodash":199}],194:[function(t,e,n){function r(t){function e(s){if(o.has(r,s))throw new i;o.has(n,s)||(r[s]=!0,n[s]=!0,o.each(t.predecessors(s),e),delete r[s],a.push(s))}var n={},r={},a=[];if(o.each(t.sinks(),e),o.size(n)!==t.nodeCount())throw new i;return a}function i(){}var o=t("../lodash");e.exports=r,r.CycleException=i},{"../lodash":199}],195:[function(t,e,n){function r(){this._arr=[],this._keyIndices={}}var i=t("../lodash");e.exports=r,r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(t){return t.key})},r.prototype.has=function(t){return i.has(this._keyIndices,t)},r.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},r.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!i.has(n,t)){var r=this._arr,o=r.length;return n[t]=o,r.push({key:t,priority:e}),this._decrease(o),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},r.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},r.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},r.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&(e=t>>1,!(n[e].priority<r));)this._swap(t,e),t=e},r.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},{"../lodash":199}],196:[function(t,e,n){"use strict";function r(t){this._isDirected=!l.has(t,"directed")||t.directed,this._isMultigraph=!!l.has(t,"multigraph")&&t.multigraph,this._isCompound=!!l.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=l.constant(void 0),this._defaultEdgeLabelFn=l.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[h]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(t,e){t[e]?t[e]++:t[e]=1}function o(t,e){--t[e]||delete t[e]}function a(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+d+o+d+(l.isUndefined(r)?c:r)}function s(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function u(t,e){return a(t,e.v,e.w,e.name)}var l=t("./lodash");e.exports=r;var c="\0",h="\0",d="";r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(t){return this._label=t,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(t){return l.isFunction(t)||(t=l.constant(t)),this._defaultNodeLabelFn=t,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return l.keys(this._nodes)},r.prototype.sources=function(){return l.filter(this.nodes(),function(t){return l.isEmpty(this._in[t])},this)},r.prototype.sinks=function(){return l.filter(this.nodes(),function(t){return l.isEmpty(this._out[t])},this)},r.prototype.setNodes=function(t,e){var n=arguments;return l.each(t,function(t){n.length>1?this.setNode(t,e):this.setNode(t)},this),this},r.prototype.setNode=function(t,e){return l.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=h,this._children[t]={},this._children[h][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},r.prototype.node=function(t){return this._nodes[t]},r.prototype.hasNode=function(t){return l.has(this._nodes,t)},r.prototype.removeNode=function(t){var e=this;if(l.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],l.each(this.children(t),function(t){this.setParent(t)},this),delete this._children[t]),l.each(l.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],l.each(l.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},r.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(l.isUndefined(e))e=h;else{e+="";for(var n=e;!l.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},r.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},r.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==h)return e}},r.prototype.children=function(t){if(l.isUndefined(t)&&(t=h),this._isCompound){var e=this._children[t];if(e)return l.keys(e)}else{if(t===h)return this.nodes();if(this.hasNode(t))return[]}},r.prototype.predecessors=function(t){var e=this._preds[t];if(e)return l.keys(e)},r.prototype.successors=function(t){var e=this._sucs[t];if(e)return l.keys(e)},r.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return l.union(e,this.successors(t))},r.prototype.filterNodes=function(t){function e(t){var o=r.parent(t);return void 0===o||n.hasNode(o)?(i[t]=o,o):o in i?i[o]:e(o)}var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph()),l.each(this._nodes,function(e,r){t(r)&&n.setNode(r,e)},this),l.each(this._edgeObjs,function(t){n.hasNode(t.v)&&n.hasNode(t.w)&&n.setEdge(t,this.edge(t))},this);var r=this,i={};return this._isCompound&&l.each(n.nodes(),function(t){n.setParent(t,e(t))}),n},r.prototype.setDefaultEdgeLabel=function(t){return l.isFunction(t)||(t=l.constant(t)),this._defaultEdgeLabelFn=t,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return l.values(this._edgeObjs)},r.prototype.setPath=function(t,e){var n=this,r=arguments;return l.reduce(t,function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i}),this},r.prototype.setEdge=function(){var t,e,n,r,o=!1,u=arguments[0];"object"==typeof u&&null!==u&&"v"in u?(t=u.v,e=u.w,n=u.name,2===arguments.length&&(r=arguments[1],o=!0)):(t=u,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),t=""+t,e=""+e,l.isUndefined(n)||(n=""+n);var c=a(this._isDirected,t,e,n);if(l.has(this._edgeLabels,c))return o&&(this._edgeLabels[c]=r),this;if(!l.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[c]=o?r:this._defaultEdgeLabelFn(t,e,n);var h=s(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[c]=h,i(this._preds[e],t),i(this._sucs[t],e),this._in[e][c]=h,this._out[t][c]=h,this._edgeCount++,this},r.prototype.edge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n);return this._edgeLabels[r]},r.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n);return l.has(this._edgeLabels,r)},r.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],o(this._preds[e],t),o(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},r.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=l.values(n);return e?l.filter(r,function(t){return t.v===e}):r}},r.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=l.values(n);return e?l.filter(r,function(t){return t.w===e}):r}},r.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},{"./lodash":199}],197:[function(t,e,n){e.exports={Graph:t("./graph"),version:t("./version")}},{"./graph":196,"./version":200}],198:[function(t,e,n){function r(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:o(t)};return s.isUndefined(t.graph())||(e.value=s.clone(t.graph())),e}function i(t){return s.map(t.nodes(),function(e){var n=t.node(e),r=t.parent(e),i={v:e};return s.isUndefined(n)||(i.value=n),s.isUndefined(r)||(i.parent=r),i})}function o(t){return s.map(t.edges(),function(e){var n=t.edge(e),r={v:e.v,w:e.w};return s.isUndefined(e.name)||(r.name=e.name),s.isUndefined(n)||(r.value=n),r})}function a(t){var e=new u(t.options).setGraph(t.value);return s.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),s.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}var s=t("./lodash"),u=t("./graph");e.exports={write:r,read:a}},{"./graph":196,"./lodash":199}],199:[function(t,e,n){e.exports=t(160)},{lodash:202}],200:[function(t,e,n){e.exports="1.0.7"},{}],201:[function(t,e,n){!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=!!t&&"length"in t&&t.length,n=it.type(t);return"function"!==n&&!it.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t,e,n){if(it.isFunction(e))return it.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return it.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(ht.test(e))return it.filter(e,t,n);e=it.filter(e,t)}return it.grep(t,function(t){return J.call(e,t)>-1!==n})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e={};return it.each(t.match(vt)||[],function(t,n){e[n]=!0}),e}function a(){$.removeEventListener("DOMContentLoaded",a),t.removeEventListener("load",a),it.ready()}function s(){this.expando=it.expando+s.uid++}function u(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(Et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:_t.test(n)?it.parseJSON(n):n)}catch(t){}wt.set(t,e,n)}else n=void 0;return n}function l(t,e,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return it.css(t,e,"")},u=s(),l=n&&n[3]||(it.cssNumber[e]?"":"px"),c=(it.cssNumber[e]||"px"!==l&&+u)&&Tt.exec(it.css(t,e));if(c&&c[3]!==l){l=l||c[3],n=n||[],c=+u||1;do{o=o||".5",c/=o,it.style(t,e,c+l)}while(o!==(o=s()/u)&&1!==o&&--a)}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}function c(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&it.nodeName(t,e)?it.merge([t],n):n}function h(t,e){for(var n=0,r=t.length;n<r;n++)bt.set(t[n],"globalEval",!e||bt.get(e[n],"globalEval"))}function d(t,e,n,r,i){for(var o,a,s,u,l,d,p=e.createDocumentFragment(),f=[],g=0,v=t.length;g<v;g++)if((o=t[g])||0===o)if("object"===it.type(o))it.merge(f,o.nodeType?[o]:o);else if(Mt.test(o)){for(a=a||p.appendChild(e.createElement("div")),s=(Ct.exec(o)||["",""])[1].toLowerCase(),u=At[s]||At._default,a.innerHTML=u[1]+it.htmlPrefilter(o)+u[2],d=u[0];d--;)a=a.lastChild;it.merge(f,a.childNodes),a=p.firstChild,a.textContent=""}else f.push(e.createTextNode(o));for(p.textContent="",g=0;o=f[g++];)if(r&&it.inArray(o,r)>-1)i&&i.push(o);else if(l=it.contains(o.ownerDocument,o),a=c(p.appendChild(o),"script"),l&&h(a),n)for(d=0;o=a[d++];)Dt.test(o.type||"")&&n.push(o);return p}function p(){return!0}function f(){return!1}function g(){try{return $.activeElement}catch(t){}}function v(t,e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=void 0);for(s in e)v(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=f;else if(!i)return t;return 1===o&&(a=i,i=function(t){return it().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=it.guid++)),t.each(function(){it.event.add(this,e,i,r,n)})}function y(t,e){return it.nodeName(t,"table")&&it.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function m(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function x(t){var e=Bt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function b(t,e){var n,r,i,o,a,s,u,l;if(1===e.nodeType){if(bt.hasData(t)&&(o=bt.access(t),a=bt.set(e,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)it.event.add(e,i,l[i][n])}wt.hasData(t)&&(s=wt.access(t),u=it.extend({},s),wt.set(e,u))}}function w(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Lt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function _(t,e,n,r){e=Q.apply([],e);var i,o,a,s,u,l,h=0,p=t.length,f=p-1,g=e[0],v=it.isFunction(g);if(v||p>1&&"string"==typeof g&&!rt.checkClone&&jt.test(g))return t.each(function(i){var o=t.eq(i);v&&(e[0]=g.call(this,i,o.html())),_(o,e,n,r)});if(p&&(i=d(e,t[0].ownerDocument,!1,t,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=it.map(c(i,"script"),m),s=a.length;h<p;h++)u=i,h!==f&&(u=it.clone(u,!0,!0),s&&it.merge(a,c(u,"script"))),n.call(t[h],u,h);if(s)for(l=a[a.length-1].ownerDocument,it.map(a,x),h=0;h<s;h++)u=a[h],Dt.test(u.type||"")&&!bt.access(u,"globalEval")&&it.contains(l,u)&&(u.src?it._evalUrl&&it._evalUrl(u.src):it.globalEval(u.textContent.replace(Ft,"")))}return t}function E(t,e,n){for(var r,i=e?it.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||it.cleanData(c(r)),r.parentNode&&(n&&it.contains(r.ownerDocument,r)&&h(c(r,"script")),r.parentNode.removeChild(r));return t}function k(t,e){var n=it(e.createElement(t)).appendTo(e.body),r=it.css(n[0],"display");return n.detach(),r}function T(t){var e=$,n=zt[t];return n||(n=k(t,e),"none"!==n&&n||(qt=(qt||it("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=qt[0].contentDocument,e.write(),e.close(),n=k(t,e),qt.detach()),zt[t]=n),n}function N(t,e,n){var r,i,o,a,s=t.style;return n=n||Xt(t),a=n?n.getPropertyValue(e)||n[e]:void 0,""!==a&&void 0!==a||it.contains(t.ownerDocument,t)||(a=it.style(t,e)),n&&!rt.pixelMarginRight()&&Gt.test(a)&&Vt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o),void 0!==a?a+"":a}function S(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function L(t){if(t in Qt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Zt.length;n--;)if((t=Zt[n]+e)in Qt)return t}function C(t,e,n){var r=Tt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function D(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=it.css(t,n+Nt[o],!0,i)),r?("content"===n&&(a-=it.css(t,"padding"+Nt[o],!0,i)),"margin"!==n&&(a-=it.css(t,"border"+Nt[o]+"Width",!0,i))):(a+=it.css(t,"padding"+Nt[o],!0,i),"padding"!==n&&(a+=it.css(t,"border"+Nt[o]+"Width",!0,i)));return a}function A(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Xt(t),a="border-box"===it.css(t,"boxSizing",!1,o);if(i<=0||null==i){if(i=N(t,e,o),(i<0||null==i)&&(i=t.style[e]),Gt.test(i))return i;r=a&&(rt.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+D(t,e,n||(a?"border":"content"),r,o)+"px"}function M(t,e){for(var n,r,i,o=[],a=0,s=t.length;a<s;a++)r=t[a],r.style&&(o[a]=bt.get(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&St(r)&&(o[a]=bt.access(r,"olddisplay",T(r.nodeName)))):(i=St(r),"none"===n&&i||bt.set(r,"olddisplay",i?n:it.css(r,"display"))));for(a=0;a<s;a++)r=t[a],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function P(t,e,n,r,i){return new P.prototype.init(t,e,n,r,i)}function I(){return t.setTimeout(function(){Kt=void 0}),Kt=it.now()}function O(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)n=Nt[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function R(t,e,n){for(var r,i=(F.tweeners[e]||[]).concat(F.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function j(t,e,n){var r,i,o,a,s,u,l,c=this,h={},d=t.style,p=t.nodeType&&St(t),f=bt.get(t,"fxshow");n.queue||(s=it._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,it.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=it.css(t,"display"),"inline"===("none"===l?bt.get(t,"olddisplay")||T(t.nodeName):l)&&"none"===it.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",c.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],te.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!f||void 0===f[r])continue;p=!0}h[r]=f&&f[r]||it.style(t,r)}else l=void 0;if(it.isEmptyObject(h))"inline"===("none"===l?T(t.nodeName):l)&&(d.display=l);else{f?"hidden"in f&&(p=f.hidden):f=bt.access(t,"fxshow",{}),o&&(f.hidden=!p),p?it(t).show():c.done(function(){it(t).hide()}),c.done(function(){var e;bt.remove(t,"fxshow");for(e in h)it.style(t,e,h[e])});for(r in h)a=R(p?f[r]:0,r,c),r in f||(f[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function B(t,e){var n,r,i,o,a;for(n in t)if(r=it.camelCase(n),i=e[r],o=t[n],it.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=it.cssHooks[r])&&"expand"in a){o=a.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function F(t,e,n){var r,i,o=0,a=F.prefilters.length,s=it.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=Kt||I(),n=Math.max(0,l.startTime+l.duration-e),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;a<u;a++)l.tweens[a].run(o);return s.notifyWith(t,[l,o,n]),o<1&&u?n:(s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:it.extend({},e),opts:it.extend(!0,{specialEasing:{},easing:it.easing._default},n),originalProperties:e,originalOptions:n,startTime:Kt||I(),duration:n.duration,tweens:[],createTween:function(e,n){var r=it.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return e?(s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l,e])):s.rejectWith(t,[l,e]),this}}),c=l.props;for(B(c,l.opts.specialEasing);o<a;o++)if(r=F.prefilters[o].call(l,t,c,l.opts))return it.isFunction(r.stop)&&(it._queueHooks(l.elem,l.opts.queue).stop=it.proxy(r.stop,r)),r;return it.map(c,R,l),it.isFunction(l.opts.start)&&l.opts.start.call(t,l),it.fx.timer(it.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function q(t){return t.getAttribute&&t.getAttribute("class")||""}function z(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(vt)||[];if(it.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function V(t,e,n,r){function i(s){var u;return o[s]=!0,it.each(t[s]||[],function(t,s){var l=s(e,n,r);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(e.dataTypes.unshift(l),i(l),!1)}),u}var o={},a=t===ge;return i(e.dataTypes[0])||!o["*"]&&i("*")}function G(t,e){var n,r,i=it.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&it.extend(!0,t,r),t}function X(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Y(t,e,n,r){var i,o,a,s,u,l={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[i]:l[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function U(t,e,n,r){var i;if(it.isArray(e))it.each(e,function(e,i){n||me.test(t)?r(t,i):U(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==it.type(e))r(t,e);else for(i in e)U(t+"["+i+"]",e[i],n,r)}function H(t){return it.isWindow(t)?t:9===t.nodeType&&t.defaultView}var W=[],$=t.document,Z=W.slice,Q=W.concat,K=W.push,J=W.indexOf,tt={},et=tt.toString,nt=tt.hasOwnProperty,rt={},it=function(t,e){return new it.fn.init(t,e)},ot=function(t,e){return e.toUpperCase()};it.fn=it.prototype={jquery:"2.2.4",constructor:it,selector:"",length:0,toArray:function(){return Z.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:Z.call(this)},pushStack:function(t){var e=it.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return it.each(this,t)},map:function(t){return this.pushStack(it.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(Z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:W.sort,splice:W.splice},it.extend=it.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||it.isFunction(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],r=t[e],a!==r&&(l&&r&&(it.isPlainObject(r)||(i=it.isArray(r)))?(i?(i=!1,o=n&&it.isArray(n)?n:[]):o=n&&it.isPlainObject(n)?n:{},a[e]=it.extend(l,o,r)):void 0!==r&&(a[e]=r));return a},it.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===it.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!it.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==it.type(t)||t.nodeType||it.isWindow(t))return!1;if(t.constructor&&!nt.call(t,"constructor")&&!nt.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||nt.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?tt[et.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=it.trim(t))&&(1===t.indexOf("use strict")?(e=$.createElement("script"),e.text=t,$.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,ot)},
nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var r,i=0;if(n(t))for(r=t.length;i<r&&e.call(t[i],i,t[i])!==!1;i++);else for(i in t)if(e.call(t[i],i,t[i])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?it.merge(r,"string"==typeof t?[t]:t):K.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:J.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,r){var i,o,a=0,s=[];if(n(t))for(i=t.length;a<i;a++)null!=(o=e(t[a],a,r))&&s.push(o);else for(a in t)null!=(o=e(t[a],a,r))&&s.push(o);return Q.apply([],s)},guid:1,proxy:function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),it.isFunction(t))return r=Z.call(arguments,2),i=function(){return t.apply(e||this,r.concat(Z.call(arguments)))},i.guid=t.guid=t.guid||it.guid++,i},now:Date.now,support:rt}),"function"==typeof Symbol&&(it.fn[Symbol.iterator]=W[Symbol.iterator]),it.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()});var at=function(t){function e(t,e,n,r){var i,o,a,s,l,h,d,p,f=e&&e.ownerDocument,g=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return n;if(!r&&((e?e.ownerDocument||e:B)!==D&&C(e),e=e||D,M)){if(11!==g&&(h=gt.exec(t)))if(i=h[1]){if(9===g){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&R(e,a)&&a.id===i)return n.push(a),n}else{if(h[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((i=h[3])&&x.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(i)),n}if(x.qsa&&!G[t+" "]&&(!P||!P.test(t))){if(1!==g)f=e,p=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(yt,"\\$&"):e.setAttribute("id",s=j),d=E(t),o=d.length,l=ct.test(s)?"#"+s:"[id='"+s+"']";o--;)d[o]=l+" "+c(d[o]);p=d.join(","),f=vt.test(t)&&u(e.parentNode)||e}if(p)try{return Z.apply(n,f.querySelectorAll(p)),n}catch(t){}finally{s===j&&e.removeAttribute("id")}}}return T(t.replace(ot,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>b.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[j]=!0,t}function i(t){var e=D.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=n.length;r--;)b.attrHandle[n[r]]=e}function a(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function u(t){return t&&void 0!==t.getElementsByTagName&&t}function l(){}function c(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function h(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=q++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,u,l,c=[F,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(l=e[j]||(e[j]={}),u=l[e.uniqueID]||(l[e.uniqueID]={}),(s=u[r])&&s[0]===F&&s[1]===o)return c[2]=s[2];if(u[r]=c,c[2]=t(e,n,a))return!0}}}function d(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function p(t,n,r){for(var i=0,o=n.length;i<o;i++)e(t,n[i],r);return r}function f(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,l=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),l&&e.push(s)));return a}function g(t,e,n,i,o,a){return i&&!i[j]&&(i=g(i)),o&&!o[j]&&(o=g(o,a)),r(function(r,a,s,u){var l,c,h,d=[],g=[],v=a.length,y=r||p(e||"*",s.nodeType?[s]:s,[]),m=!t||!r&&e?y:f(y,d,t,s,u),x=n?o||(r?t:v||i)?[]:a:m;if(n&&n(m,x,s,u),i)for(l=f(x,g),i(l,[],s,u),c=l.length;c--;)(h=l[c])&&(x[g[c]]=!(m[g[c]]=h));if(r){if(o||t){if(o){for(l=[],c=x.length;c--;)(h=x[c])&&l.push(m[c]=h);o(null,x=[],l,u)}for(c=x.length;c--;)(h=x[c])&&(l=o?K(r,h):d[c])>-1&&(r[l]=!(a[l]=h))}}else x=f(x===a?x.splice(v,x.length):x),o?o(null,a,x,u):Z.apply(a,x)})}function v(t){for(var e,n,r,i=t.length,o=b.relative[t[0].type],a=o||b.relative[" "],s=o?1:0,u=h(function(t){return t===e},a,!0),l=h(function(t){return K(e,t)>-1},a,!0),p=[function(t,n,r){var i=!o&&(r||n!==N)||((e=n).nodeType?u(t,n,r):l(t,n,r));return e=null,i}];s<i;s++)if(n=b.relative[t[s].type])p=[h(d(p),n)];else{if(n=b.filter[t[s].type].apply(null,t[s].matches),n[j]){for(r=++s;r<i&&!b.relative[t[r].type];r++);return g(s>1&&d(p),s>1&&c(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(ot,"$1"),n,s<r&&v(t.slice(s,r)),r<i&&v(t=t.slice(r)),r<i&&c(t))}p.push(n)}return d(p)}function y(t,n){var i=n.length>0,o=t.length>0,a=function(r,a,s,u,l){var c,h,d,p=0,g="0",v=r&&[],y=[],m=N,x=r||o&&b.find.TAG("*",l),w=F+=null==m?1:Math.random()||.1,_=x.length;for(l&&(N=a===D||a||l);g!==_&&null!=(c=x[g]);g++){if(o&&c){for(h=0,a||c.ownerDocument===D||(C(c),s=!M);d=t[h++];)if(d(c,a||D,s)){u.push(c);break}l&&(F=w)}i&&((c=!d&&c)&&p--,r&&v.push(c))}if(p+=g,i&&g!==p){for(h=0;d=n[h++];)d(v,y,a,s);if(r){if(p>0)for(;g--;)v[g]||y[g]||(y[g]=W.call(u));y=f(y)}Z.apply(u,y),l&&!r&&y.length>0&&p+n.length>1&&e.uniqueSort(u)}return l&&(F=w,N=m),v};return i?r(a):a}var m,x,b,w,_,E,k,T,N,S,L,C,D,A,M,P,I,O,R,j="sizzle"+1*new Date,B=t.document,F=0,q=0,z=n(),V=n(),G=n(),X=function(t,e){return t===e&&(L=!0),0},Y=1<<31,U={}.hasOwnProperty,H=[],W=H.pop,$=H.push,Z=H.push,Q=H.slice,K=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",rt=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",it=new RegExp(tt+"+","g"),ot=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),at=new RegExp("^"+tt+"*,"+tt+"*"),st=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),ut=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),lt=new RegExp(rt),ct=new RegExp("^"+et+"$"),ht={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,pt=/^h\d$/i,ft=/^[^{]+\{\s*\[native \w/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vt=/[+~]/,yt=/'|\\/g,mt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),xt=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},bt=function(){C()};try{Z.apply(H=Q.call(B.childNodes),B.childNodes),H[B.childNodes.length].nodeType}catch(t){Z={apply:H.length?function(t,e){$.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}x=e.support={},_=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},C=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:B;return r!==D&&9===r.nodeType&&r.documentElement?(D=r,A=D.documentElement,M=!_(D),(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",bt,!1):n.attachEvent&&n.attachEvent("onunload",bt)),x.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=i(function(t){return t.appendChild(D.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=ft.test(D.getElementsByClassName),x.getById=i(function(t){return A.appendChild(t).id=j,!D.getElementsByName||!D.getElementsByName(j).length}),x.getById?(b.find.ID=function(t,e){if(void 0!==e.getElementById&&M){var n=e.getElementById(t);return n?[n]:[]}},b.filter.ID=function(t){var e=t.replace(mt,xt);return function(t){return t.getAttribute("id")===e}}):(delete b.find.ID,b.filter.ID=function(t){var e=t.replace(mt,xt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),b.find.TAG=x.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=x.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&M)return e.getElementsByClassName(t)},I=[],P=[],(x.qsa=ft.test(D.querySelectorAll))&&(i(function(t){A.appendChild(t).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||P.push("\\["+tt+"*(?:value|"+J+")"),t.querySelectorAll("[id~="+j+"-]").length||P.push("~="),t.querySelectorAll(":checked").length||P.push(":checked"),t.querySelectorAll("a#"+j+"+*").length||P.push(".#.+[+~]")}),i(function(t){var e=D.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&P.push("name"+tt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(x.matchesSelector=ft.test(O=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&i(function(t){x.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),I.push("!=",rt)}),P=P.length&&new RegExp(P.join("|")),I=I.length&&new RegExp(I.join("|")),e=ft.test(A.compareDocumentPosition),R=e||ft.test(A.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},X=e?function(t,e){if(t===e)return L=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===D||t.ownerDocument===B&&R(B,t)?-1:e===D||e.ownerDocument===B&&R(B,e)?1:S?K(S,t)-K(S,e):0:4&n?-1:1)}:function(t,e){if(t===e)return L=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],u=[e];if(!i||!o)return t===D?-1:e===D?1:i?-1:o?1:S?K(S,t)-K(S,e):0;if(i===o)return a(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;s[r]===u[r];)r++;return r?a(s[r],u[r]):s[r]===B?-1:u[r]===B?1:0},D):D},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==D&&C(t),n=n.replace(ut,"='$1']"),x.matchesSelector&&M&&!G[n+" "]&&(!I||!I.test(n))&&(!P||!P.test(n)))try{var r=O.call(t,n);if(r||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return e(n,D,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==D&&C(t),R(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==D&&C(t);var n=b.attrHandle[e.toLowerCase()],r=n&&U.call(b.attrHandle,e.toLowerCase())?n(t,e,!M):void 0;return void 0!==r?r:x.attributes||!M?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(L=!x.detectDuplicates,S=!x.sortStable&&t.slice(0),t.sort(X),L){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return S=null,t},w=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=w(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=w(e);return n},b=e.selectors={cacheLength:50,createPseudo:r,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(mt,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(mt,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ht.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&lt.test(n)&&(e=E(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(mt,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(it," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,d,p,f,g=o!==a?"nextSibling":"previousSibling",v=e.parentNode,y=s&&e.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(v){if(o){for(;g;){for(d=e;d=d[g];)if(s?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?v.firstChild:v.lastChild],a&&m){for(d=v,h=d[j]||(d[j]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),l=c[t]||[],p=l[0]===F&&l[1],x=p&&l[2],d=p&&v.childNodes[p];d=++p&&d&&d[g]||(x=p=0)||f.pop();)if(1===d.nodeType&&++x&&d===e){c[t]=[F,p,x];break}}else if(m&&(d=e,h=d[j]||(d[j]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),l=c[t]||[],p=l[0]===F&&l[1],x=p),x===!1)for(;(d=++p&&d&&d[g]||(x=p=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++x||(m&&(h=d[j]||(d[j]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),c[t]=[F,x]),d!==e)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(t,n){var i,o=b.pseudos[t]||b.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[j]?o(n):o.length>1?(i=[t,t,"",n],b.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),a=i.length;a--;)r=K(t,i[a]),t[r]=!(e[r]=i[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=k(t.replace(ot,"$1"));return i[j]?r(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(mt,xt),function(e){return(e.textContent||e.innerText||w(e)).indexOf(t)>-1}}),lang:r(function(t){return ct.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(mt,xt).toLowerCase(),function(e){var n;do{if(n=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===A},focus:function(t){return t===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return pt.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:s(function(){return[0]}),last:s(function(t,e){return[e-1]}),eq:s(function(t,e,n){return[n<0?n+e:n]}),even:s(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:s(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:s(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:s(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}},b.pseudos.nth=b.pseudos.eq;for(m in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[m]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(m);for(m in{submit:!0,reset:!0})b.pseudos[m]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(m);return l.prototype=b.filters=b.pseudos,b.setFilters=new l,E=e.tokenize=function(t,n){var r,i,o,a,s,u,l,c=V[t+" "];if(c)return n?0:c.slice(0);for(s=t,u=[],l=b.preFilter;s;){r&&!(i=at.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=st.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ot," ")}),s=s.slice(r.length));for(a in b.filter)!(i=ht[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?e.error(t):V(t,u).slice(0)},k=e.compile=function(t,e){var n,r=[],i=[],o=G[t+" "];if(!o){for(e||(e=E(t)),n=e.length;n--;)o=v(e[n]),o[j]?r.push(o):i.push(o);o=G(t,y(i,r)),o.selector=t}return o},T=e.select=function(t,e,n,r){var i,o,a,s,l,h="function"==typeof t&&t,d=!r&&E(t=h.selector||t);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&x.getById&&9===e.nodeType&&M&&b.relative[o[1].type]){if(!(e=(b.find.ID(a.matches[0].replace(mt,xt),e)||[])[0]))return n;h&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=ht.needsContext.test(t)?0:o.length;i--&&(a=o[i],!b.relative[s=a.type]);)if((l=b.find[s])&&(r=l(a.matches[0].replace(mt,xt),vt.test(o[0].type)&&u(e.parentNode)||e))){if(o.splice(i,1),!(t=r.length&&c(o)))return Z.apply(n,r),n;break}}return(h||k(t,d))(r,e,!M,n,!e||vt.test(t)&&u(e.parentNode)||e),n},x.sortStable=j.split("").sort(X).join("")===j,x.detectDuplicates=!!L,C(),x.sortDetached=i(function(t){return 1&t.compareDocumentPosition(D.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(J,function(t,e,n){var r;if(!n)return t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);it.find=at,it.expr=at.selectors,it.expr[":"]=it.expr.pseudos,it.uniqueSort=it.unique=at.uniqueSort,it.text=at.getText,it.isXMLDoc=at.isXML,it.contains=at.contains;var st=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&it(t).is(n))break;r.push(t)}return r},ut=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},lt=it.expr.match.needsContext,ct=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ht=/^.[^:#\[\.,]*$/;it.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?it.find.matchesSelector(r,t)?[r]:[]:it.find.matches(t,it.grep(e,function(t){return 1===t.nodeType}))},it.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(it(t).filter(function(){for(e=0;e<n;e++)if(it.contains(i[e],this))return!0}));for(e=0;e<n;e++)it.find(t,i[e],r);return r=this.pushStack(n>1?it.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&lt.test(t)?it(t):t||[],!1).length}});var dt,pt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(it.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||dt,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:pt.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof it?e[0]:e,it.merge(this,it.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:$,!0)),ct.test(r[1])&&it.isPlainObject(e))for(r in e)it.isFunction(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return i=$.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=$,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):it.isFunction(t)?void 0!==n.ready?n.ready(t):t(it):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),it.makeArray(t,this))}).prototype=it.fn,dt=it($);var ft=/^(?:parents|prev(?:Until|All))/,gt={children:!0,contents:!0,next:!0,prev:!0};it.fn.extend({has:function(t){var e=it(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(it.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=lt.test(t)||"string"!=typeof t?it(t,e||this.context):0;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&it.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?it.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?J.call(it(t),this[0]):J.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(it.uniqueSort(it.merge(this.get(),it(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),it.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return st(t,"parentNode")},parentsUntil:function(t,e,n){return st(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return st(t,"nextSibling")},prevAll:function(t){return st(t,"previousSibling")},nextUntil:function(t,e,n){return st(t,"nextSibling",n)},prevUntil:function(t,e,n){return st(t,"previousSibling",n)},siblings:function(t){return ut((t.parentNode||{}).firstChild,t)},children:function(t){return ut(t.firstChild)},contents:function(t){return t.contentDocument||it.merge([],t.childNodes)}},function(t,e){it.fn[t]=function(n,r){var i=it.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=it.filter(r,i)),this.length>1&&(gt[t]||it.uniqueSort(i),ft.test(t)&&i.reverse()),this.pushStack(i)}});var vt=/\S+/g;it.Callbacks=function(t){t="string"==typeof t?o(t):it.extend({},t);var e,n,r,i,a=[],s=[],u=-1,l=function(){for(i=t.once,r=e=!0;s.length;u=-1)for(n=s.shift();++u<a.length;)a[u].apply(n[0],n[1])===!1&&t.stopOnFalse&&(u=a.length,n=!1);t.memory||(n=!1),e=!1,i&&(a=n?[]:"")},c={add:function(){return a&&(n&&!e&&(u=a.length-1,s.push(n)),function e(n){it.each(n,function(n,r){it.isFunction(r)?t.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==it.type(r)&&e(r)})}(arguments),n&&!e&&l()),this},remove:function(){return it.each(arguments,function(t,e){for(var n;(n=it.inArray(e,a,n))>-1;)a.splice(n,1),n<=u&&u--}),this},has:function(t){return t?it.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=s=[],n||(a=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},it.extend({Deferred:function(t){var e=[["resolve","done",it.Callbacks("once memory"),"resolved"],["reject","fail",it.Callbacks("once memory"),"rejected"],["notify","progress",it.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return it.Deferred(function(n){it.each(e,function(e,o){var a=it.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&it.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?it.extend(t,r):r}},i={};return r.pipe=r.then,it.each(e,function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=Z.call(arguments),a=o.length,s=1!==a||t&&it.isFunction(t.promise)?a:0,u=1===s?t:it.Deferred(),l=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?Z.call(arguments):i,r===e?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(e=new Array(a),n=new Array(a),r=new Array(a);i<a;i++)o[i]&&it.isFunction(o[i].promise)?o[i].promise().progress(l(i,n,e)).done(l(i,r,o)).fail(u.reject):--s;return s||u.resolveWith(r,o),u.promise()}});var yt;it.fn.ready=function(t){return it.ready.promise().done(t),this},it.extend({isReady:!1,readyWait:1,holdReady:function(t){t?it.readyWait++:it.ready(!0)},ready:function(t){(t===!0?--it.readyWait:it.isReady)||(it.isReady=!0,t!==!0&&--it.readyWait>0||(yt.resolveWith($,[it]),it.fn.triggerHandler&&(it($).triggerHandler("ready"),it($).off("ready"))))}}),it.ready.promise=function(e){return yt||(yt=it.Deferred(),"complete"===$.readyState||"loading"!==$.readyState&&!$.documentElement.doScroll?t.setTimeout(it.ready):($.addEventListener("DOMContentLoaded",a),t.addEventListener("load",a))),yt.promise(e)},it.ready.promise();var mt=function(t,e,n,r,i,o,a){var s=0,u=t.length,l=null==n;if("object"===it.type(n)){i=!0;for(s in n)mt(t,e,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,it.isFunction(r)||(a=!0),l&&(a?(e.call(t,r),e=null):(l=e,e=function(t,e,n){return l.call(it(t),n)})),e))for(;s<u;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:l?e.call(t):u?e(t[0],n):o},xt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};s.uid=1,s.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!xt(t))return{};var e=t[this.expando];return e||(e={},xt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[e]=n;else for(r in e)i[r]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,it.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=t[this.expando];if(void 0!==o){if(void 0===e)this.register(t);else{it.isArray(e)?r=e.concat(e.map(it.camelCase)):(i=it.camelCase(e),e in o?r=[e,i]:(r=i,r=r in o?[r]:r.match(vt)||[])),n=r.length;for(;n--;)delete o[r[n]]}(void 0===e||it.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!it.isEmptyObject(e)}};var bt=new s,wt=new s,_t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Et=/[A-Z]/g;it.extend({hasData:function(t){return wt.hasData(t)||bt.hasData(t)},data:function(t,e,n){return wt.access(t,e,n)},removeData:function(t,e){wt.remove(t,e)},_data:function(t,e,n){return bt.access(t,e,n)},_removeData:function(t,e){bt.remove(t,e)}}),it.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=wt.get(o),1===o.nodeType&&!bt.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=it.camelCase(r.slice(5)),u(o,r,i[r])));bt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){wt.set(this,t)}):mt(this,function(e){var n,r;if(o&&void 0===e){if(void 0!==(n=wt.get(o,t)||wt.get(o,t.replace(Et,"-$&").toLowerCase())))return n;if(r=it.camelCase(t),void 0!==(n=wt.get(o,r)))return n;if(void 0!==(n=u(o,r,void 0)))return n}else r=it.camelCase(t),this.each(function(){var n=wt.get(this,r);wt.set(this,r,e),t.indexOf("-")>-1&&void 0!==n&&wt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){wt.remove(this,t)})}}),it.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=bt.get(t,e),n&&(!r||it.isArray(n)?r=bt.access(t,e,it.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=it.queue(t,e),r=n.length,i=n.shift(),o=it._queueHooks(t,e),a=function(){it.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return bt.get(t,n)||bt.access(t,n,{empty:it.Callbacks("once memory").add(function(){bt.remove(t,[e+"queue",n])})})}}),it.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?it.queue(this[0],t):void 0===e?this:this.each(function(){var n=it.queue(this,t,e);it._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&it.dequeue(this,t)})},dequeue:function(t){return this.each(function(){it.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=it.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=bt.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var kt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Tt=new RegExp("^(?:([+-])=|)("+kt+")([a-z%]*)$","i"),Nt=["Top","Right","Bottom","Left"],St=function(t,e){return t=e||t,"none"===it.css(t,"display")||!it.contains(t.ownerDocument,t)},Lt=/^(?:checkbox|radio)$/i,Ct=/<([\w:-]+)/,Dt=/^$|\/(?:java|ecma)script/i,At={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td;var Mt=/<|&#?\w+;/;!function(){var t=$.createDocumentFragment(),e=t.appendChild($.createElement("div")),n=$.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),rt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",rt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Pt=/^key/,It=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ot=/^([^.]*)(?:\.(.+)|)/;it.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,h,d,p,f,g,v=bt.get(t);if(v)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=it.guid++),
(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return void 0!==it&&it.event.triggered!==e.type?it.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(vt)||[""],l=e.length;l--;)s=Ot.exec(e[l])||[],p=g=s[1],f=(s[2]||"").split(".").sort(),p&&(h=it.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=it.event.special[p]||{},c=it.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&it.expr.match.needsContext.test(i),namespace:f.join(".")},o),(d=u[p])||(d=u[p]=[],d.delegateCount=0,h.setup&&h.setup.call(t,r,f,a)!==!1||t.addEventListener&&t.addEventListener(p,a)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),it.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,l,c,h,d,p,f,g,v=bt.hasData(t)&&bt.get(t);if(v&&(u=v.events)){for(e=(e||"").match(vt)||[""],l=e.length;l--;)if(s=Ot.exec(e[l])||[],p=g=s[1],f=(s[2]||"").split(".").sort(),p){for(h=it.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,d=u[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));a&&!d.length&&(h.teardown&&h.teardown.call(t,f,v.handle)!==!1||it.removeEvent(t,p,v.handle),delete u[p])}else for(p in u)it.event.remove(t,p+e[l],n,r,!0);it.isEmptyObject(u)&&bt.remove(t,"handle events")}},dispatch:function(t){t=it.event.fix(t);var e,n,r,i,o,a=[],s=Z.call(arguments),u=(bt.get(this,"events")||{})[t.type]||[],l=it.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(a=it.event.handlers.call(this,t,u),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,void 0!==(r=((it.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,u=t.target;if(s&&u.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==t.type)){for(r=[],n=0;n<s;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?it(i,this).index(u)>-1:it.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||$,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[it.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=It.test(i)?this.mouseHooks:Pt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new it.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=$),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==g()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===g()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&it.nodeName(this,"input"))return this.click(),!1},_default:function(t){return it.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},it.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},it.Event=function(t,e){if(!(this instanceof it.Event))return new it.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?p:f):this.type=t,e&&it.extend(this,e),this.timeStamp=t&&t.timeStamp||it.now(),this[it.expando]=!0},it.Event.prototype={constructor:it.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=p,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=p,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=p,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},it.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){it.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===r||it.contains(r,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),it.fn.extend({on:function(t,e,n,r){return v(this,t,e,n,r)},one:function(t,e,n,r){return v(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,it(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return e!==!1&&"function"!=typeof e||(n=e,e=void 0),n===!1&&(n=f),this.each(function(){it.event.remove(this,t,n,e)})}});var Rt=/<script|<style|<link/i,jt=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^true\/(.*)/,Ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;it.extend({htmlPrefilter:function(t){return t.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),u=it.contains(t.ownerDocument,t);if(!(rt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||it.isXMLDoc(t)))for(a=c(s),o=c(t),r=0,i=o.length;r<i;r++)w(o[r],a[r]);if(e)if(n)for(o=o||c(t),a=a||c(s),r=0,i=o.length;r<i;r++)b(o[r],a[r]);else b(t,s);return a=c(s,"script"),a.length>0&&h(a,!u&&c(t,"script")),s},cleanData:function(t){for(var e,n,r,i=it.event.special,o=0;void 0!==(n=t[o]);o++)if(xt(n)){if(e=n[bt.expando]){if(e.events)for(r in e.events)i[r]?it.event.remove(n,r):it.removeEvent(n,r,e.handle);n[bt.expando]=void 0}n[wt.expando]&&(n[wt.expando]=void 0)}}}),it.fn.extend({domManip:_,detach:function(t){return E(this,t,!0)},remove:function(t){return E(this,t)},text:function(t){return mt(this,function(t){return void 0===t?it.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return _(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){y(this,t).appendChild(t)}})},prepend:function(){return _(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return _(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return _(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(it.cleanData(c(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return it.clone(this,t,e)})},html:function(t){return mt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Rt.test(t)&&!At[(Ct.exec(t)||["",""])[1].toLowerCase()]){t=it.htmlPrefilter(t);try{for(;n<r;n++)e=this[n]||{},1===e.nodeType&&(it.cleanData(c(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return _(this,arguments,function(e){var n=this.parentNode;it.inArray(this,t)<0&&(it.cleanData(c(this)),n&&n.replaceChild(e,this))},t)}}),it.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){it.fn[t]=function(t){for(var n,r=[],i=it(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),it(i[a])[e](n),K.apply(r,n.get());return this.pushStack(r)}});var qt,zt={HTML:"block",BODY:"block"},Vt=/^margin/,Gt=new RegExp("^("+kt+")(?!px)[a-z%]+$","i"),Xt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Yt=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=a[o];return i},Ut=$.documentElement;!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ut.appendChild(a);var e=t.getComputedStyle(s);n="1%"!==e.top,o="2px"===e.marginLeft,r="4px"===e.width,s.style.marginRight="50%",i="4px"===e.marginRight,Ut.removeChild(a)}var n,r,i,o,a=$.createElement("div"),s=$.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",rt.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),it.extend(rt,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==r&&e(),r},pixelMarginRight:function(){return null==r&&e(),i},reliableMarginLeft:function(){return null==r&&e(),o},reliableMarginRight:function(){var e,n=s.appendChild($.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Ut.appendChild(a),e=!parseFloat(t.getComputedStyle(n).marginRight),Ut.removeChild(a),s.removeChild(n),e}}))}();var Ht=/^(none|table(?!-c[ea]).+)/,Wt={position:"absolute",visibility:"hidden",display:"block"},$t={letterSpacing:"0",fontWeight:"400"},Zt=["Webkit","O","Moz","ms"],Qt=$.createElement("div").style;it.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=N(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=it.camelCase(e),u=t.style;if(e=it.cssProps[s]||(it.cssProps[s]=L(s)||s),a=it.cssHooks[e]||it.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:u[e];o=typeof n,"string"===o&&(i=Tt.exec(n))&&i[1]&&(n=l(t,e,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(it.cssNumber[s]?"":"px")),rt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u[e]=n))}},css:function(t,e,n,r){var i,o,a,s=it.camelCase(e);return e=it.cssProps[s]||(it.cssProps[s]=L(s)||s),a=it.cssHooks[e]||it.cssHooks[s],a&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=N(t,e,r)),"normal"===i&&e in $t&&(i=$t[e]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),it.each(["height","width"],function(t,e){it.cssHooks[e]={get:function(t,n,r){if(n)return Ht.test(it.css(t,"display"))&&0===t.offsetWidth?Yt(t,Wt,function(){return A(t,e,r)}):A(t,e,r)},set:function(t,n,r){var i,o=r&&Xt(t),a=r&&D(t,e,r,"border-box"===it.css(t,"boxSizing",!1,o),o);return a&&(i=Tt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=it.css(t,e)),C(t,n,a)}}}),it.cssHooks.marginLeft=S(rt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(N(t,"marginLeft"))||t.getBoundingClientRect().left-Yt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),it.cssHooks.marginRight=S(rt.reliableMarginRight,function(t,e){if(e)return Yt(t,{display:"inline-block"},N,[t,"marginRight"])}),it.each({margin:"",padding:"",border:"Width"},function(t,e){it.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+Nt[r]+e]=o[r]||o[r-2]||o[0];return i}},Vt.test(t)||(it.cssHooks[t+e].set=C)}),it.fn.extend({css:function(t,e){return mt(this,function(t,e,n){var r,i,o={},a=0;if(it.isArray(e)){for(r=Xt(t),i=e.length;a<i;a++)o[e[a]]=it.css(t,e[a],!1,r);return o}return void 0!==n?it.style(t,e,n):it.css(t,e)},t,e,arguments.length>1)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){St(this)?it(this).show():it(this).hide()})}}),it.Tween=P,P.prototype={constructor:P,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||it.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(it.cssNumber[n]?"":"px")},cur:function(){var t=P.propHooks[this.prop];return t&&t.get?t.get(this):P.propHooks._default.get(this)},run:function(t){var e,n=P.propHooks[this.prop];return this.options.duration?this.pos=e=it.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):P.propHooks._default.set(this),this}},P.prototype.init.prototype=P.prototype,P.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=it.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){it.fx.step[t.prop]?it.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[it.cssProps[t.prop]]&&!it.cssHooks[t.prop]?t.elem[t.prop]=t.now:it.style(t.elem,t.prop,t.now+t.unit)}}},P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},it.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},it.fx=P.prototype.init,it.fx.step={};var Kt,Jt,te=/^(?:toggle|show|hide)$/,ee=/queueHooks$/;it.Animation=it.extend(F,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return l(n.elem,t,Tt.exec(e),n),n}]},tweener:function(t,e){it.isFunction(t)?(e=t,t=["*"]):t=t.match(vt);for(var n,r=0,i=t.length;r<i;r++)n=t[r],F.tweeners[n]=F.tweeners[n]||[],F.tweeners[n].unshift(e)},prefilters:[j],prefilter:function(t,e){e?F.prefilters.unshift(t):F.prefilters.push(t)}}),it.speed=function(t,e,n){var r=t&&"object"==typeof t?it.extend({},t):{complete:n||!n&&e||it.isFunction(t)&&t,duration:t,easing:n&&e||e&&!it.isFunction(e)&&e};return r.duration=it.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in it.fx.speeds?it.fx.speeds[r.duration]:it.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){it.isFunction(r.old)&&r.old.call(this),r.queue&&it.dequeue(this,r.queue)},r},it.fn.extend({fadeTo:function(t,e,n,r){return this.filter(St).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=it.isEmptyObject(t),o=it.speed(e,n,r),a=function(){var e=F(this,it.extend({},t),o);(i||bt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=it.timers,a=bt.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ee.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||it.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=bt.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=it.timers,a=r?r.length:0;for(n.finish=!0,it.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),it.each(["toggle","show","hide"],function(t,e){var n=it.fn[e];it.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(O(e,!0),t,r,i)}}),it.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){it.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),it.timers=[],it.fx.tick=function(){var t,e=0,n=it.timers;for(Kt=it.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||it.fx.stop(),Kt=void 0},it.fx.timer=function(t){it.timers.push(t),t()?it.fx.start():it.timers.pop()},it.fx.interval=13,it.fx.start=function(){Jt||(Jt=t.setInterval(it.fx.tick,it.fx.interval))},it.fx.stop=function(){t.clearInterval(Jt),Jt=null},it.fx.speeds={slow:600,fast:200,_default:400},it.fn.delay=function(e,n){return e=it.fx?it.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}})},function(){var t=$.createElement("input"),e=$.createElement("select"),n=e.appendChild($.createElement("option"));t.type="checkbox",rt.checkOn=""!==t.value,rt.optSelected=n.selected,e.disabled=!0,rt.optDisabled=!n.disabled,t=$.createElement("input"),t.value="t",t.type="radio",rt.radioValue="t"===t.value}();var ne,re=it.expr.attrHandle;it.fn.extend({attr:function(t,e){return mt(this,it.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){it.removeAttr(this,t)})}}),it.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?it.prop(t,e,n):(1===o&&it.isXMLDoc(t)||(e=e.toLowerCase(),i=it.attrHooks[e]||(it.expr.match.bool.test(e)?ne:void 0)),void 0!==n?null===n?void it.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=it.find.attr(t,e),null==r?void 0:r))},attrHooks:{type:{set:function(t,e){if(!rt.radioValue&&"radio"===e&&it.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(vt);if(o&&1===t.nodeType)for(;n=o[i++];)r=it.propFix[n]||n,it.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)}}),ne={set:function(t,e,n){return e===!1?it.removeAttr(t,n):t.setAttribute(n,n),n}},it.each(it.expr.match.bool.source.match(/\w+/g),function(t,e){var n=re[e]||it.find.attr;re[e]=function(t,e,r){var i,o;return r||(o=re[e],re[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,re[e]=o),i}});var ie=/^(?:input|select|textarea|button)$/i,oe=/^(?:a|area)$/i;it.fn.extend({prop:function(t,e){return mt(this,it.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[it.propFix[t]||t]})}}),it.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&it.isXMLDoc(t)||(e=it.propFix[e]||e,i=it.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=it.find.attr(t,"tabindex");return e?parseInt(e,10):ie.test(t.nodeName)||oe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),rt.optSelected||(it.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),it.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){it.propFix[this.toLowerCase()]=this});it.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(it.isFunction(t))return this.each(function(e){it(this).addClass(t.call(this,e,q(this)))});if("string"==typeof t&&t)for(e=t.match(vt)||[];n=this[u++];)if(i=q(n),r=1===n.nodeType&&(" "+i+" ").replace(/[\t\r\n\f]/g," ")){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=it.trim(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(it.isFunction(t))return this.each(function(e){it(this).removeClass(t.call(this,e,q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(vt)||[];n=this[u++];)if(i=q(n),r=1===n.nodeType&&(" "+i+" ").replace(/[\t\r\n\f]/g," ")){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=it.trim(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):it.isFunction(t)?this.each(function(n){it(this).toggleClass(t.call(this,n,q(this),e),e)}):this.each(function(){var e,r,i,o;if("string"===n)for(r=0,i=it(this),o=t.match(vt)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==t&&"boolean"!==n||(e=q(this),e&&bt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":bt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+q(n)+" ").replace(/[\t\r\n\f]/g," ").indexOf(e)>-1)return!0;return!1}});it.fn.extend({val:function(t){var e,n,r,i=this[0];{if(arguments.length)return r=it.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,it(this).val()):t,null==i?i="":"number"==typeof i?i+="":it.isArray(i)&&(i=it.map(i,function(t){return null==t?"":t+""})),(e=it.valHooks[this.type]||it.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return(e=it.valHooks[i.type]||it.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(/\r/g,""):null==n?"":n)}}}),it.extend({valHooks:{option:{get:function(t){var e=it.find.attr(t,"value");return null!=e?e:it.trim(it.text(t)).replace(/[\x20\t\r\n\f]+/g," ")}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||i<0,a=o?null:[],s=o?i+1:r.length,u=i<0?s:o?i:0;u<s;u++)if(n=r[u],(n.selected||u===i)&&(rt.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!it.nodeName(n.parentNode,"optgroup"))){if(e=it(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=it.makeArray(e),a=i.length;a--;)r=i[a],(r.selected=it.inArray(it.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),it.each(["radio","checkbox"],function(){it.valHooks[this]={set:function(t,e){if(it.isArray(e))return t.checked=it.inArray(it(t).val(),e)>-1}},rt.checkOn||(it.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ae=/^(?:focusinfocus|focusoutblur)$/;it.extend(it.event,{trigger:function(e,n,r,i){var o,a,s,u,l,c,h,d=[r||$],p=nt.call(e,"type")?e.type:e,f=nt.call(e,"namespace")?e.namespace.split("."):[];if(a=s=r=r||$,3!==r.nodeType&&8!==r.nodeType&&!ae.test(p+it.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),l=p.indexOf(":")<0&&"on"+p,e=e[it.expando]?e:new it.Event(p,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:it.makeArray(n,[e]),h=it.event.special[p]||{},i||!h.trigger||h.trigger.apply(r,n)!==!1)){if(!i&&!h.noBubble&&!it.isWindow(r)){for(u=h.delegateType||p,ae.test(u+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(r.ownerDocument||$)&&d.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=d[o++])&&!e.isPropagationStopped();)e.type=o>1?u:h.bindType||p,c=(bt.get(a,"events")||{})[e.type]&&bt.get(a,"handle"),c&&c.apply(a,n),(c=l&&a[l])&&c.apply&&xt(a)&&(e.result=c.apply(a,n),e.result===!1&&e.preventDefault());return e.type=p,i||e.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),n)!==!1||!xt(r)||l&&it.isFunction(r[p])&&!it.isWindow(r)&&(s=r[l],s&&(r[l]=null),it.event.triggered=p,r[p](),it.event.triggered=void 0,s&&(r[l]=s)),e.result}},simulate:function(t,e,n){var r=it.extend(new it.Event,n,{type:t,isSimulated:!0});it.event.trigger(r,null,e)}}),it.fn.extend({trigger:function(t,e){return this.each(function(){it.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return it.event.trigger(t,e,n,!0)}}),it.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){it.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),it.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),rt.focusin="onfocusin"in t,rt.focusin||it.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){it.event.simulate(e,t.target,it.event.fix(t))};it.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=bt.access(r,e);i||r.addEventListener(t,n,!0),bt.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=bt.access(r,e)-1;i?bt.access(r,e,i):(r.removeEventListener(t,n,!0),bt.remove(r,e))}}});var se=t.location,ue=it.now(),le=/\?/;it.parseJSON=function(t){return JSON.parse(t+"")},it.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||it.error("Invalid XML: "+e),n};var ce=/([?&])_=[^&]*/,he=/^(.*?):[ \t]*([^\r\n]*)$/gm,de=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pe=/^(?:GET|HEAD)$/,fe={},ge={},ve="*/".concat("*"),ye=$.createElement("a");ye.href=se.href,it.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:se.href,type:"GET",isLocal:de.test(se.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":it.parseJSON,"text xml":it.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?G(G(t,it.ajaxSettings),e):G(it.ajaxSettings,t)},ajaxPrefilter:z(fe),ajaxTransport:z(ge),ajax:function(e,n){function r(e,n,r,s){var l,h,m,x,w,E=n;2!==b&&(b=2,u&&t.clearTimeout(u),i=void 0,a=s||"",_.readyState=e>0?4:0,l=e>=200&&e<300||304===e,r&&(x=X(d,_,r)),x=Y(d,x,_,l),l?(d.ifModified&&(w=_.getResponseHeader("Last-Modified"),w&&(it.lastModified[o]=w),(w=_.getResponseHeader("etag"))&&(it.etag[o]=w)),204===e||"HEAD"===d.type?E="nocontent":304===e?E="notmodified":(E=x.state,h=x.data,m=x.error,l=!m)):(m=E,!e&&E||(E="error",e<0&&(e=0))),_.status=e,_.statusText=(n||E)+"",l?g.resolveWith(p,[h,E,_]):g.rejectWith(p,[_,E,m]),_.statusCode(y),y=void 0,c&&f.trigger(l?"ajaxSuccess":"ajaxError",[_,d,l?h:m]),v.fireWith(p,[_,E]),c&&(f.trigger("ajaxComplete",[_,d]),--it.active||it.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var i,o,a,s,u,l,c,h,d=it.ajaxSetup({},n),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?it(p):it.event,g=it.Deferred(),v=it.Callbacks("once memory"),y=d.statusCode||{},m={},x={},b=0,w="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!s)for(s={};e=he.exec(a);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=x[n]=x[n]||t,m[t]=e),this},overrideMimeType:function(t){return b||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(b<2)for(e in t)y[e]=[y[e],t[e]];else _.always(t[_.status]);return this},abort:function(t){var e=t||w;return i&&i.abort(e),r(0,e),this}};if(g.promise(_).complete=v.add,_.success=_.done,_.error=_.fail,d.url=((e||d.url||se.href)+"").replace(/#.*$/,"").replace(/^\/\//,se.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=it.trim(d.dataType||"*").toLowerCase().match(vt)||[""],null==d.crossDomain){l=$.createElement("a");try{l.href=d.url,l.href=l.href,d.crossDomain=ye.protocol+"//"+ye.host!=l.protocol+"//"+l.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=it.param(d.data,d.traditional)),V(fe,d,n,_),2===b)return _;c=it.event&&d.global,c&&0==it.active++&&it.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!pe.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(le.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=ce.test(o)?o.replace(ce,"$1_="+ue++):o+(le.test(o)?"&":"?")+"_="+ue++)),d.ifModified&&(it.lastModified[o]&&_.setRequestHeader("If-Modified-Since",it.lastModified[o]),it.etag[o]&&_.setRequestHeader("If-None-Match",it.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&_.setRequestHeader("Content-Type",d.contentType),_.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+ve+"; q=0.01":""):d.accepts["*"]);for(h in d.headers)_.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(d.beforeSend.call(p,_,d)===!1||2===b))return _.abort();w="abort";for(h in{success:1,error:1,complete:1})_[h](d[h]);if(i=V(ge,d,n,_)){if(_.readyState=1,c&&f.trigger("ajaxSend",[_,d]),2===b)return _;d.async&&d.timeout>0&&(u=t.setTimeout(function(){_.abort("timeout")},d.timeout));try{b=1,i.send(m,r)}catch(t){if(!(b<2))throw t;r(-1,t)}}else r(-1,"No Transport");return _},getJSON:function(t,e,n){return it.get(t,e,n,"json")},getScript:function(t,e){return it.get(t,void 0,e,"script")}}),it.each(["get","post"],function(t,e){it[e]=function(t,n,r,i){return it.isFunction(n)&&(i=i||r,r=n,n=void 0),it.ajax(it.extend({url:t,type:e,dataType:i,data:n,success:r},it.isPlainObject(t)&&t))}}),it._evalUrl=function(t){return it.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},it.fn.extend({wrapAll:function(t){var e;return it.isFunction(t)?this.each(function(e){it(this).wrapAll(t.call(this,e))}):(this[0]&&(e=it(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return it.isFunction(t)?this.each(function(e){it(this).wrapInner(t.call(this,e))}):this.each(function(){var e=it(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=it.isFunction(t);return this.each(function(n){it(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){it.nodeName(this,"body")||it(this).replaceWith(this.childNodes)}).end()}}),it.expr.filters.hidden=function(t){return!it.expr.filters.visible(t)},it.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var me=/\[\]$/,xe=/^(?:submit|button|image|reset|file)$/i,be=/^(?:input|select|textarea|keygen)/i;it.param=function(t,e){var n,r=[],i=function(t,e){e=it.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=it.ajaxSettings&&it.ajaxSettings.traditional),
it.isArray(t)||t.jquery&&!it.isPlainObject(t))it.each(t,function(){i(this.name,this.value)});else for(n in t)U(n,t[n],e,i);return r.join("&").replace(/%20/g,"+")},it.fn.extend({serialize:function(){return it.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=it.prop(this,"elements");return t?it.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!it(this).is(":disabled")&&be.test(this.nodeName)&&!xe.test(t)&&(this.checked||!Lt.test(t))}).map(function(t,e){var n=it(this).val();return null==n?null:it.isArray(n)?it.map(n,function(t){return{name:e.name,value:t.replace(/\r?\n/g,"\r\n")}}):{name:e.name,value:n.replace(/\r?\n/g,"\r\n")}}).get()}}),it.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var we={0:200,1223:204},_e=it.ajaxSettings.xhr();rt.cors=!!_e&&"withCredentials"in _e,rt.ajax=_e=!!_e,it.ajaxTransport(function(e){var n,r;if(rt.cors||_e&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(t){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(we[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),it.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return it.globalEval(t),t}}}),it.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),it.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=it("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),$.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Ee=[],ke=/(=)\?(?=&|$)|\?\?/;it.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ee.pop()||it.expando+"_"+ue++;return this[t]=!0,t}}),it.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=e.jsonp!==!1&&(ke.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ke.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=it.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ke,"$1"+i):e.jsonp!==!1&&(e.url+=(le.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||it.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){void 0===o?it(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Ee.push(i)),a&&it.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),it.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||$;var r=ct.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=d([t],e,i),i&&i.length&&it(i).remove(),it.merge([],r.childNodes))};var Te=it.fn.load;it.fn.load=function(t,e,n){if("string"!=typeof t&&Te)return Te.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=it.trim(t.slice(s)),t=t.slice(0,s)),it.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&it.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?it("<div>").append(it.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},it.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){it.fn[e]=function(t){return this.on(e,t)}}),it.expr.filters.animated=function(t){return it.grep(it.timers,function(e){return t===e.elem}).length},it.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,l,c=it.css(t,"position"),h=it(t),d={};"static"===c&&(t.style.position="relative"),s=h.offset(),o=it.css(t,"top"),u=it.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=h.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),it.isFunction(e)&&(e=e.call(t,n,it.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+i),"using"in e?e.using.call(t,d):h.css(d)}},it.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){it.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return e=o.documentElement,it.contains(e,r)?(i=r.getBoundingClientRect(),n=H(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===it.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),it.nodeName(t[0],"html")||(r=t.offset()),r.top+=it.css(t[0],"borderTopWidth",!0),r.left+=it.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-it.css(n,"marginTop",!0),left:e.left-r.left-it.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===it.css(t,"position");)t=t.offsetParent;return t||Ut})}}),it.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;it.fn[t]=function(r){return mt(this,function(t,r,i){var o=H(t);if(void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),it.each(["top","left"],function(t,e){it.cssHooks[e]=S(rt.pixelPosition,function(t,n){if(n)return n=N(t,e),Gt.test(n)?it(t).position()[e]+"px":n})}),it.each({Height:"height",Width:"width"},function(t,e){it.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){it.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return mt(this,function(e,n,r){var i;return it.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?it.css(e,n,a):it.style(e,n,r,a)},e,o?r:void 0,o,null)}})}),it.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),it.fn.andSelf=it.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return it});var Ne=t.jQuery,Se=t.$;return it.noConflict=function(e){return t.$===it&&(t.$=Se),e&&t.jQuery===it&&(t.jQuery=Ne),it},e||(t.jQuery=t.$=it),it})},{}],202:[function(t,e,n){(function(t){(function(){function r(t,e){if(t!==e){var n=null===t,r=t===T,i=t===t,o=null===e,a=e===T,s=e===e;if(t>e&&!o||!i||n&&!a&&s||r&&s)return 1;if(t<e&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function i(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function o(t,e,n){if(e!==e)return v(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function a(t){return"function"==typeof t||!1}function s(t){return null==t?"":t+""}function u(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function l(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function c(t,e){return r(t.criteria,e.criteria)||t.index-e.index}function h(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,u=n.length;++i<s;){var l=r(o[i],a[i]);if(l){if(i>=u)return l;var c=n[i];return l*("asc"===c||c===!0?1:-1)}}return t.index-e.index}function d(t){return zt[t]}function p(t){return Vt[t]}function f(t,e,n){return e?t=Yt[t]:n&&(t=Ut[t]),"\\"+t}function g(t){return"\\"+Ut[t]}function v(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function y(t){return!!t&&"object"==typeof t}function m(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function x(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=X,o[++i]=n);return o}function b(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var s=t[r],u=e?e(s,r,t):s;r&&n===u||(n=u,a[++o]=s)}return a}function w(t){for(var e=-1,n=t.length;++e<n&&m(t.charCodeAt(e)););return e}function _(t){for(var e=t.length;e--&&m(t.charCodeAt(e)););return e}function E(t){return Gt[t]}function k(t){function e(t){if(y(t)&&!Cs(t)&&!(t instanceof zt)){if(t instanceof m)return t;if(ea.call(t,"__chain__")&&ea.call(t,"__wrapped__"))return pr(t)}return new m(t)}function n(){}function m(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function zt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=La,this.__views__=[]}function Vt(){var t=new zt(this.__wrapped__);return t.__actions__=ne(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ne(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ne(this.__views__),t}function Gt(){if(this.__filtered__){var t=new zt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Xt(){var t=this.__wrapped__.value(),e=this.__dir__,n=Cs(t),r=e<0,i=n?t.length:0,o=Un(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,d=0,p=Ea(u,this.__takeCount__);if(!n||i<q||i==u&&p==u)return nn(r&&n?t.reverse():t,this.__actions__);var f=[];t:for(;u--&&d<p;){l+=e;for(var g=-1,v=t[l];++g<h;){var y=c[g],m=y.iteratee,x=y.type,b=m(v);if(x==V)v=b;else if(!b){if(x==z)continue t;break t}}f[d++]=v}return f}function Yt(){this.__data__={}}function Ut(t){return this.has(t)&&delete this.__data__[t]}function Ht(t){return"__proto__"==t?T:this.__data__[t]}function Wt(t){return"__proto__"!=t&&ea.call(this.__data__,t)}function $t(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Zt(t){var e=t?t.length:0;for(this.data={hash:ya(null),set:new ha};e--;)this.push(t[e])}function Qt(t,e){var n=t.data;return("string"==typeof e||Ii(e)?n.set.has(e):n.hash[e])?0:-1}function Kt(t){var e=this.data;"string"==typeof t||Ii(t)?e.set.add(t):e.hash[t]=!0}function ee(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,a=zo(r+o);++n<r;)a[n]=t[n];for(;++i<o;)a[n++]=e[i];return a}function ne(t,e){var n=-1,r=t.length;for(e||(e=zo(r));++n<r;)e[n]=t[n];return e}function re(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function ie(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function oe(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ae(t,e,n,r){for(var i=-1,o=t.length,a=r,s=a;++i<o;){var u=t[i],l=+e(u);n(l,a)&&(a=l,s=u)}return s}function se(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function ue(t,e){for(var n=-1,r=t.length,i=zo(r);++n<r;)i[n]=e(t[n],n,t);return i}function le(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ce(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function he(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function de(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function pe(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}function fe(t,e){return t===T?e:t}function ge(t,e,n,r){return t!==T&&ea.call(r,n)?t:e}function ve(t,e,n){for(var r=-1,i=qs(e),o=i.length;++r<o;){var a=i[r],s=t[a],u=n(s,e[a],a,t,e);(u===u?u===s:s!==s)&&(s!==T||a in t)||(t[a]=u)}return t}function ye(t,e){return null==e?t:xe(e,qs(e),t)}function me(t,e){for(var n=-1,r=null==t,i=!r&&Qn(t),o=i?t.length:0,a=e.length,s=zo(a);++n<a;){var u=e[n];s[n]=i?Kn(u,o)?t[u]:T:r?T:t[u]}return s}function xe(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function be(t,e,n){var r=typeof t;return"function"==r?e===T?t:an(t,e,n):null==t?Lo:"object"==r?Fe(t):e===T?Io(t):qe(t,e)}function we(t,e,n,r,i,o,a){var s;if(n&&(s=i?n(t,r,i):n(t)),s!==T)return s;if(!Ii(t))return t;var u=Cs(t);if(u){if(s=Hn(t),!e)return ne(t,s)}else{var l=ra.call(t),c=l==Z;if(l!=K&&l!=Y&&(!c||i))return qt[l]?$n(t,l,e):i?t:{};if(s=Wn(c?{}:t),!e)return ye(s,t)}o||(o=[]),a||(a=[]);for(var h=o.length;h--;)if(o[h]==t)return a[h];return o.push(t),a.push(s),(u?re:Ae)(t,function(r,i){s[i]=we(r,e,n,i,t,o,a)}),s}function _e(t,e,n){if("function"!=typeof t)throw new Zo(G);return da(function(){t.apply(T,n)},e)}function Ee(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,a=Gn(),s=a==o,u=s&&e.length>=q?gn(e):null,l=e.length;u&&(a=Qt,s=!1,e=u);t:for(;++i<n;){var c=t[i];if(s&&c===c){for(var h=l;h--;)if(e[h]===c)continue t;r.push(c)}else a(e,c,0)<0&&r.push(c)}return r}function ke(t,e){var n=!0;return Ra(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Te(t,e,n,r){var i=r,o=i;return Ra(t,function(t,a,s){var u=+e(t,a,s);(n(u,i)||u===r&&u===o)&&(i=u,o=t)}),o}function Ne(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,n<0&&(n=-n>i?0:i+n),r=r===T||r>i?i:+r||0,r<0&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)t[n++]=e;return t}function Se(t,e){var n=[];return Ra(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Le(t,e,n,r){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=r?n:t,!1}),i}function Ce(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];y(a)&&Qn(a)&&(n||Cs(a)||Ti(a))?e?Ce(a,e,n,r):le(r,a):n||(r[r.length]=a)}return r}function De(t,e){return Ba(t,e,to)}function Ae(t,e){return Ba(t,e,qs)}function Me(t,e){return Fa(t,e,qs)}function Pe(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];Pi(t[a])&&(o[++i]=a)}return o}function Ie(t,e,n){if(null!=t){n!==T&&n in hr(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:T}}function Oe(t,e,n,r,i,o){return t===e||(null==t||null==e||!Ii(t)&&!y(e)?t!==t&&e!==e:Re(t,e,Oe,n,r,i,o))}function Re(t,e,n,r,i,o,a){var s=Cs(t),u=Cs(e),l=U,c=U;s||(l=ra.call(t),l==Y?l=K:l!=K&&(s=Gi(t))),u||(c=ra.call(e),c==Y?c=K:c!=K&&(u=Gi(e)));var h=l==K,d=c==K,p=l==c;if(p&&!s&&!h)return Fn(t,e,l);if(!i){var f=h&&ea.call(t,"__wrapped__"),g=d&&ea.call(e,"__wrapped__");if(f||g)return n(f?t.value():t,g?e.value():e,r,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==t)return a[v]==e;o.push(t),a.push(e);var y=(s?Bn:qn)(t,e,n,r,i,o,a);return o.pop(),a.pop(),y}function je(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=hr(t);r--;){var a=e[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){a=e[r];var s=a[0],u=t[s],l=a[1];if(o&&a[2]){if(u===T&&!(s in t))return!1}else{var c=n?n(u,l,s):T;if(!(c===T?Oe(l,u,n,!0):c))return!1}}return!0}function Be(t,e){var n=-1,r=Qn(t)?zo(t.length):[];return Ra(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Fe(t){var e=Xn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&(t[n]===r&&(r!==T||n in hr(t)))}}return function(t){return je(t,e)}}function qe(t,e){var n=Cs(t),r=tr(t)&&rr(e),i=t+"";return t=dr(t),function(o){if(null==o)return!1;var a=i;if(o=hr(o),(n||!r)&&!(a in o)){if(null==(o=1==t.length?o:Ie(o,We(t,0,-1))))return!1;a=Nr(t),o=hr(o)}return o[a]===e?e!==T||a in o:Oe(e,o[a],T,!0)}}function ze(t,e,n,r,i){if(!Ii(t))return t;var o=Qn(e)&&(Cs(e)||Gi(e)),a=o?T:qs(e);return re(a||e,function(s,u){if(a&&(u=s,s=e[u]),y(s))r||(r=[]),i||(i=[]),Ve(t,e,u,ze,n,r,i);else{var l=t[u],c=n?n(l,s,u,t,e):T,h=c===T;h&&(c=s),c===T&&(!o||u in t)||!h&&(c===c?c===l:l!==l)||(t[u]=c)}}),t}function Ve(t,e,n,r,i,o,a){for(var s=o.length,u=e[n];s--;)if(o[s]==u)return void(t[n]=a[s]);var l=t[n],c=i?i(l,u,n,t,e):T,h=c===T;h&&(c=u,Qn(u)&&(Cs(u)||Gi(u))?c=Cs(l)?l:Qn(l)?ne(l):[]:qi(u)||Ti(u)?c=Ti(l)?Wi(l):qi(l)?l:{}:h=!1),o.push(u),a.push(c),h?t[n]=r(c,u,i,o,a):(c===c?c!==l:l===l)&&(t[n]=c)}function Ge(t){return function(e){return null==e?T:e[t]}}function Xe(t){var e=t+"";return t=dr(t),function(n){return Ie(n,t,e)}}function Ye(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Kn(r)){var i=r;pa.call(t,r,1)}}return t}function Ue(t,e){return t+ma(Na()*(e-t+1))}function He(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function We(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,e<0&&(e=-e>i?0:i+e),n=n===T||n>i?i:+n||0,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=zo(i);++r<i;)o[r]=t[r+e];return o}function $e(t,e){var n;return Ra(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Ze(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Qe(t,e,n){var r=zn(),i=-1;return e=ue(e,function(t){return r(t)}),Ze(Be(t,function(t){return{criteria:ue(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return h(t,e,n)})}function Ke(t,e){var n=0;return Ra(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Je(t,e){var n=-1,r=Gn(),i=t.length,a=r==o,s=a&&i>=q,u=s?gn():null,l=[];u?(r=Qt,a=!1):(s=!1,u=e?[]:l);t:for(;++n<i;){var c=t[n],h=e?e(c,n,t):c;if(a&&c===c){for(var d=u.length;d--;)if(u[d]===h)continue t;e&&u.push(h),l.push(c)}else r(u,h,0)<0&&((e||s)&&u.push(h),l.push(c))}return l}function tn(t,e){for(var n=-1,r=e.length,i=zo(r);++n<r;)i[n]=t[e[n]];return i}function en(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?We(t,r?0:o,r?o+1:i):We(t,r?o+1:0,r?i:o)}function nn(t,e){var n=t;n instanceof zt&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=e[r];n=o.func.apply(o.thisArg,le([n],o.args))}return n}function rn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&i<=Aa){for(;r<i;){var o=r+i>>>1,a=t[o];(n?a<=e:a<e)&&null!==a?r=o+1:i=o}return i}return on(t,e,Lo,n)}function on(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,s=null===e,u=e===T;i<o;){var l=ma((i+o)/2),c=n(t[l]),h=c!==T,d=c===c;if(a)var p=d||r;else p=s?d&&h&&(r||null!=c):u?d&&(r||h):null!=c&&(r?c<=e:c<e);p?i=l+1:o=l}return Ea(o,Da)}function an(t,e,n){if("function"!=typeof t)return Lo;if(e===T)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function sn(t){var e=new aa(t.byteLength);return new fa(e).set(new fa(t)),e}function un(t,e,n){for(var r=n.length,i=-1,o=_a(t.length-r,0),a=-1,s=e.length,u=zo(s+o);++a<s;)u[a]=e[a];for(;++i<r;)u[n[i]]=t[i];for(;o--;)u[a++]=t[i++];return u}function ln(t,e,n){for(var r=-1,i=n.length,o=-1,a=_a(t.length-i,0),s=-1,u=e.length,l=zo(a+u);++o<a;)l[o]=t[o];for(var c=o;++s<u;)l[c+s]=e[s];for(;++r<i;)l[c+n[r]]=t[o++];return l}function cn(t,e){return function(n,r,i){var o=e?e():{};if(r=zn(r,i,3),Cs(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];t(o,u,r(u,a,n),n)}else Ra(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function hn(t){return yi(function(e,n){var r=-1,i=null==e?0:n.length,o=i>2?n[i-2]:T,a=i>2?n[2]:T,s=i>1?n[i-1]:T;for("function"==typeof o?(o=an(o,s,5),i-=2):(o="function"==typeof s?s:T,i-=o?1:0),a&&Jn(n[0],n[1],a)&&(o=i<3?T:o,i=1);++r<i;){var u=n[r];u&&t(e,u,o)}return e})}function dn(t,e){return function(n,r){var i=n?Va(n):0;if(!nr(i))return t(n,r);for(var o=e?i:-1,a=hr(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function pn(t){return function(e,n,r){for(var i=hr(e),o=r(e),a=o.length,s=t?a:-1;t?s--:++s<a;){var u=o[s];if(n(i[u],u,i)===!1)break}return e}}function fn(t,e){function n(){return(this&&this!==Jt&&this instanceof n?r:t).apply(e,arguments)}var r=yn(t);return n}function gn(t){return ya&&ha?new Zt(t):null}function vn(t){return function(e){for(var n=-1,r=To(co(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function yn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Oa(t.prototype),r=t.apply(n,e);return Ii(r)?r:n}}function mn(t){function e(n,r,i){i&&Jn(n,r,i)&&(r=T);var o=jn(n,t,T,T,T,T,T,r);return o.placeholder=e.placeholder,o}return e}function xn(t,e){return yi(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(T,n))})}function bn(t,e){return function(n,r,i){if(i&&Jn(n,r,i)&&(r=T),r=zn(r,i,3),1==r.length){n=Cs(n)?n:cr(n);var o=ae(n,r,t,e);if(!n.length||o!==e)return o}return Te(n,r,t,e)}}function wn(t,e){return function(n,r,o){if(r=zn(r,o,3),Cs(n)){var a=i(n,r,e);return a>-1?n[a]:T}return Le(n,r,t)}}function _n(t){return function(e,n,r){return e&&e.length?(n=zn(n,r,3),i(e,n,t)):-1}}function En(t){return function(e,n,r){return n=zn(n,r,3),Le(e,n,t,!0)}}function kn(t){return function(){for(var e,n=arguments.length,r=t?n:-1,i=0,o=zo(n);t?r--:++r<n;){var a=o[i++]=arguments[r];if("function"!=typeof a)throw new Zo(G);!e&&m.prototype.thru&&"wrapper"==Vn(a)&&(e=new m([],!0))}for(r=e?-1:n;++r<n;){a=o[r];var s=Vn(a),u="wrapper"==s?za(a):T;e=u&&er(u[0])&&u[1]==(I|D|M|O)&&!u[4].length&&1==u[9]?e[Vn(u[0])].apply(e,u[3]):1==a.length&&er(a)?e[s]():e.thru(a)}return function(){var t=arguments,r=t[0];if(e&&1==t.length&&Cs(r)&&r.length>=q)return e.plant(r).value();for(var i=0,a=n?o[i].apply(this,t):r;++i<n;)a=o[i].call(this,a);return a}}}function Tn(t,e){return function(n,r,i){return"function"==typeof r&&i===T&&Cs(n)?t(n,r):e(n,an(r,i,3))}}function Nn(t){return function(e,n,r){return"function"==typeof n&&r===T||(n=an(n,r,3)),t(e,n,to)}}function Sn(t){return function(e,n,r){return"function"==typeof n&&r===T||(n=an(n,r,3)),t(e,n)}}function Ln(t){return function(e,n,r){var i={};return n=zn(n,r,3),Ae(e,function(e,r,o){var a=n(e,r,o);r=t?a:r,e=t?e:a,i[r]=e}),i}}function Cn(t){return function(e,n,r){return e=s(e),(t?e:"")+Pn(e,n,r)+(t?"":e)}}function Dn(t){var e=yi(function(n,r){return jn(n,t,T,r,x(r,e.placeholder))});return e}function An(t,e){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===T&&Cs(n)?t(n,r,i,a):He(n,zn(r,o,4),i,a,e)}}function Mn(t,e,n,r,i,o,a,s,u,l){function c(){for(var m=arguments.length,b=m,w=zo(m);b--;)w[b]=arguments[b];if(r&&(w=un(w,r,i)),o&&(w=ln(w,o,a)),f||v){var _=c.placeholder,E=x(w,_);if((m-=E.length)<l){var k=s?ne(s):T,N=_a(l-m,0),C=f?E:T,D=f?T:E,A=f?w:T,I=f?T:w;e|=f?M:P,e&=~(f?P:M),g||(e&=~(S|L));var O=[t,e,n,A,C,I,D,k,u,N],R=Mn.apply(T,O);return er(t)&&Ga(R,O),R.placeholder=_,R}}var j=d?n:this,B=p?j[t]:t;return s&&(w=ur(w,s)),h&&u<w.length&&(w.length=u),this&&this!==Jt&&this instanceof c&&(B=y||yn(t)),B.apply(j,w)}var h=e&I,d=e&S,p=e&L,f=e&D,g=e&C,v=e&A,y=p?T:yn(t);return c}function Pn(t,e,n){var r=t.length;if(e=+e,r>=e||!ba(e))return"";var i=e-r;return n=null==n?" ":n+"",yo(n,va(i/n.length)).slice(0,i)}function In(t,e,n,r){function i(){for(var e=-1,s=arguments.length,u=-1,l=r.length,c=zo(l+s);++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++e];return(this&&this!==Jt&&this instanceof i?a:t).apply(o?n:this,c)}var o=e&S,a=yn(t);return i}function On(t){var e=Yo[t];return function(t,n){return n=n===T?0:+n||0,n?(n=la(10,n),e(t*n)/n):e(t)}}function Rn(t){return function(e,n,r,i){var o=zn(r);return null==r&&o===be?rn(e,n,t):on(e,n,o(r,i,1),t)}}function jn(t,e,n,r,i,o,a,s){var u=e&L;if(!u&&"function"!=typeof t)throw new Zo(G);var l=r?r.length:0;if(l||(e&=~(M|P),r=i=T),l-=i?i.length:0,e&P){var c=r,h=i;r=i=T}var d=u?T:za(t),p=[t,e,n,r,i,c,h,o,a,s];if(d&&(ir(p,d),e=p[1],s=p[9]),p[9]=null==s?u?0:t.length:_a(s-l,0)||0,e==S)var f=fn(p[0],p[2]);else f=e!=M&&e!=(S|M)||p[4].length?Mn.apply(T,p):In.apply(T,p);return(d?qa:Ga)(f,p)}function Bn(t,e,n,r,i,o,a){var s=-1,u=t.length,l=e.length;if(u!=l&&!(i&&l>u))return!1;for(;++s<u;){var c=t[s],h=e[s],d=r?r(i?h:c,i?c:h,s):T;if(d!==T){if(d)continue;return!1}if(i){if(!de(e,function(t){return c===t||n(c,t,r,i,o,a)}))return!1}else if(c!==h&&!n(c,h,r,i,o,a))return!1}return!0}function Fn(t,e,n){switch(n){case H:case W:return+t==+e;case $:return t.name==e.name&&t.message==e.message;case Q:return t!=+t?e!=+e:t==+e;case J:case tt:return t==e+""}return!1}function qn(t,e,n,r,i,o,a){var s=qs(t),u=s.length;if(u!=qs(e).length&&!i)return!1;for(var l=u;l--;){var c=s[l];if(!(i?c in e:ea.call(e,c)))return!1}for(var h=i;++l<u;){c=s[l];var d=t[c],p=e[c],f=r?r(i?p:d,i?d:p,c):T;if(!(f===T?n(d,p,r,i,o,a):f))return!1;h||(h="constructor"==c)}if(!h){var g=t.constructor,v=e.constructor;if(g!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof v&&v instanceof v))return!1}return!0}function zn(t,n,r){var i=e.callback||No;return i=i===No?be:i,r?i(t,n,r):i}function Vn(t){for(var e=t.name,n=Ia[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Gn(t,n,r){var i=e.indexOf||kr;return i=i===kr?o:i,t?i(t,n,r):i}function Xn(t){for(var e=eo(t),n=e.length;n--;)e[n][2]=rr(e[n][1]);return e}function Yn(t,e){var n=null==t?T:t[e];return ji(n)?n:T}function Un(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ea(e,t+a);break;case"takeRight":t=_a(t,e-a)}}return{start:t,end:e}}function Hn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ea.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Wn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Ho),new e}function $n(t,e,n){var r=t.constructor;switch(e){case et:return sn(t);case H:case W:return new r(+t);case nt:case rt:case it:case ot:case at:case st:case ut:case lt:case ct:var i=t.buffer;return new r(n?sn(i):i,t.byteOffset,t.length);case Q:case tt:return new r(t);case J:var o=new r(t.source,Ct.exec(t));o.lastIndex=t.lastIndex}return o}function Zn(t,e,n){null==t||tr(e,t)||(e=dr(e),t=1==e.length?t:Ie(t,We(e,0,-1)),e=Nr(e));var r=null==t?t:t[e];return null==r?T:r.apply(t,n)}function Qn(t){return null!=t&&nr(Va(t))}function Kn(t,e){return t="number"==typeof t||Mt.test(t)?+t:-1,e=null==e?Ma:e,t>-1&&t%1==0&&t<e}function Jn(t,e,n){if(!Ii(n))return!1;var r=typeof e;if("number"==r?Qn(n)&&Kn(e,n.length):"string"==r&&e in n){var i=n[e];return t===t?t===i:i!==i}return!1}function tr(t,e){var n=typeof t;return!!("string"==n&&_t.test(t)||"number"==n)||!Cs(t)&&(!wt.test(t)||null!=e&&t in hr(e))}function er(t){var n=Vn(t);if(!(n in zt.prototype))return!1;var r=e[n];if(t===r)return!0;var i=za(r);return!!i&&t===i[0]}function nr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ma}function rr(t){return t===t&&!Ii(t)}function ir(t,e){var n=t[1],r=e[1],i=n|r,o=i<I,a=r==I&&n==D||r==I&&n==O&&t[7].length<=e[8]||r==(I|O)&&n==D;if(!o&&!a)return t;r&S&&(t[2]=e[2],i|=n&S?0:C);var s=e[3];if(s){var u=t[3];t[3]=u?un(u,s,e[4]):ne(s),t[4]=u?x(t[3],X):ne(e[4])}return s=e[5],s&&(u=t[5],t[5]=u?ln(u,s,e[6]):ne(s),t[6]=u?x(t[5],X):ne(e[6])),s=e[7],s&&(t[7]=ne(s)),r&I&&(t[8]=null==t[8]?e[8]:Ea(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function or(t,e){return t===T?e:Ds(t,e,or)}function ar(t,e){t=hr(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function sr(t,e){var n={};return De(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function ur(t,e){for(var n=t.length,r=Ea(e.length,n),i=ne(t);r--;){var o=e[r];t[r]=Kn(o,n)?i[o]:T}return t}function lr(t){for(var e=to(t),n=e.length,r=n&&t.length,i=!!r&&nr(r)&&(Cs(t)||Ti(t)),o=-1,a=[];++o<n;){var s=e[o];(i&&Kn(s,r)||ea.call(t,s))&&a.push(s)}return a}function cr(t){return null==t?[]:Qn(t)?Ii(t)?t:Ho(t):oo(t)}function hr(t){return Ii(t)?t:Ho(t)}function dr(t){if(Cs(t))return t;var e=[];return s(t).replace(Et,function(t,n,r,i){e.push(r?i.replace(St,"$1"):n||t)}),e}function pr(t){return t instanceof zt?t.clone():new m(t.__wrapped__,t.__chain__,ne(t.__actions__))}function fr(t,e,n){e=(n?Jn(t,e,n):null==e)?1:_a(ma(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,a=zo(va(i/e));r<i;)a[++o]=We(t,r,r+=e);return a}function gr(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function vr(t,e,n){return(t?t.length:0)?((n?Jn(t,e,n):null==e)&&(e=1),We(t,e<0?0:e)):[]}function yr(t,e,n){var r=t?t.length:0;return r?((n?Jn(t,e,n):null==e)&&(e=1),e=r-(+e||0),We(t,0,e<0?0:e)):[]}function mr(t,e,n){return t&&t.length?en(t,zn(e,n,3),!0,!0):[]}function xr(t,e,n){return t&&t.length?en(t,zn(e,n,3),!0):[]}function br(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Jn(t,e,n)&&(n=0,r=i),Ne(t,e,n,r)):[]}function wr(t){return t?t[0]:T}function _r(t,e,n){var r=t?t.length:0;return n&&Jn(t,e,n)&&(e=!1),r?Ce(t,e):[]}function Er(t){return(t?t.length:0)?Ce(t,!0):[]}function kr(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?_a(r+n,0):n;else if(n){var i=rn(t,e);return i<r&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return o(t,e,n||0)}function Tr(t){return yr(t,1)}function Nr(t){var e=t?t.length:0;return e?t[e-1]:T}function Sr(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?_a(r+n,0):Ea(n||0,r-1))+1;else if(n){i=rn(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return v(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Lr(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Gn(),i=t.length;++n<i;)for(var o=0,a=t[n];(o=r(e,a,o))>-1;)pa.call(e,o,1);return e}function Cr(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=zn(e,n,3);++i<a;){var s=t[i];e(s,i,t)&&(r.push(s),o.push(i))}return Ye(t,o),r}function Dr(t){return vr(t,1)}function Ar(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Jn(t,e,n)&&(e=0,n=r),We(t,e,n)):[]}function Mr(t,e,n){return(t?t.length:0)?((n?Jn(t,e,n):null==e)&&(e=1),We(t,0,e<0?0:e)):[]}function Pr(t,e,n){var r=t?t.length:0;return r?((n?Jn(t,e,n):null==e)&&(e=1),e=r-(+e||0),We(t,e<0?0:e)):[]}function Ir(t,e,n){return t&&t.length?en(t,zn(e,n,3),!1,!0):[]}function Or(t,e,n){return t&&t.length?en(t,zn(e,n,3)):[]}function Rr(t,e,n,r){if(!(t?t.length:0))return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Jn(t,e,r)?T:e,e=!1);var i=zn();return null==n&&i===be||(n=i(n,r,3)),e&&Gn()==o?b(t,n):Je(t,n)}function jr(t){if(!t||!t.length)return[];var e=-1,n=0;t=se(t,function(t){if(Qn(t))return n=_a(t.length,n),!0});for(var r=zo(n);++e<n;)r[e]=ue(t,Ge(e));return r}function Br(t,e,n){if(!(t?t.length:0))return[];var r=jr(t);return null==e?r:(e=an(e,n,4),ue(r,function(t){return ce(t,e,T,!0)}))}function Fr(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Qn(n))var r=r?le(Ee(r,n),Ee(n,r)):n}return r?Je(r):[]}function qr(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Cs(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function zr(t){var n=e(t);return n.__chain__=!0,n}function Vr(t,e,n){return e.call(n,t),t}function Gr(t,e,n){return e.call(n,t)}function Xr(){return zr(this)}function Yr(){return new m(this.value(),this.__chain__)}function Ur(t){for(var e,r=this;r instanceof n;){var i=pr(r);e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function Hr(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof zt){var n=t;return this.__actions__.length&&(n=new zt(this)),n=n.reverse(),n.__actions__.push({func:Gr,args:[e],thisArg:T}),new m(n,this.__chain__)}return this.thru(e)}function Wr(){return this.value()+""}function $r(){return nn(this.__wrapped__,this.__actions__)}function Zr(t,e,n){var r=Cs(t)?oe:ke;return n&&Jn(t,e,n)&&(e=T),"function"==typeof e&&n===T||(e=zn(e,n,3)),r(t,e)}function Qr(t,e,n){var r=Cs(t)?se:Se;return e=zn(e,n,3),r(t,e)}function Kr(t,e){return is(t,Fe(e))}function Jr(t,e,n,r){var i=t?Va(t):0
;return nr(i)||(t=oo(t),i=t.length),n="number"!=typeof n||r&&Jn(e,n,r)?0:n<0?_a(i+n,0):n||0,"string"==typeof t||!Cs(t)&&Vi(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Gn(t,e,n)>-1}function ti(t,e,n){var r=Cs(t)?ue:Be;return e=zn(e,n,3),r(t,e)}function ei(t,e){return ti(t,Io(e))}function ni(t,e,n){var r=Cs(t)?se:Se;return e=zn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function ri(t,e,n){if(n?Jn(t,e,n):null==e){t=cr(t);var r=t.length;return r>0?t[Ue(0,r-1)]:T}var i=-1,o=Hi(t),r=o.length,a=r-1;for(e=Ea(e<0?0:+e||0,r);++i<e;){var s=Ue(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=e,o}function ii(t){return ri(t,La)}function oi(t){var e=t?Va(t):0;return nr(e)?e:qs(t).length}function ai(t,e,n){var r=Cs(t)?de:$e;return n&&Jn(t,e,n)&&(e=T),"function"==typeof e&&n===T||(e=zn(e,n,3)),r(t,e)}function si(t,e,n){if(null==t)return[];n&&Jn(t,e,n)&&(e=T);var r=-1;return e=zn(e,n,3),Ze(Be(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}}),c)}function ui(t,e,n,r){return null==t?[]:(r&&Jn(e,n,r)&&(n=T),Cs(e)||(e=null==e?[]:[e]),Cs(n)||(n=null==n?[]:[n]),Qe(t,e,n))}function li(t,e){return Qr(t,Fe(e))}function ci(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Zo(G);var n=t;t=e,e=n}return t=ba(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function hi(t,e,n){return n&&Jn(t,e,n)&&(e=T),e=t&&null==e?t.length:_a(+e||0,0),jn(t,I,T,T,T,T,e)}function di(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Zo(G);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=T),n}}function pi(t,e,n){function r(){p&&sa(p),l&&sa(l),g=0,l=p=f=T}function i(e,n){n&&sa(n),l=p=f=T,e&&(g=gs(),c=t.apply(d,u),p||l||(u=d=T))}function o(){var t=e-(gs()-h);t<=0||t>e?i(f,l):p=da(o,t)}function a(){i(y,p)}function s(){if(u=arguments,h=gs(),d=this,f=y&&(p||!m),v===!1)var n=m&&!p;else{l||m||(g=h);var r=v-(h-g),i=r<=0||r>v;i?(l&&(l=sa(l)),g=h,c=t.apply(d,u)):l||(l=da(a,r))}return i&&p?p=sa(p):p||e===v||(p=da(o,e)),n&&(i=!0,c=t.apply(d,u)),!i||p||l||(u=d=T),c}var u,l,c,h,d,p,f,g=0,v=!1,y=!0;if("function"!=typeof t)throw new Zo(G);if(e=e<0?0:+e||0,n===!0){var m=!0;y=!1}else Ii(n)&&(m=!!n.leading,v="maxWait"in n&&_a(+n.maxWait||0,e),y="trailing"in n?!!n.trailing:y);return s.cancel=r,s}function fi(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Zo(G);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new fi.Cache,n}function gi(t){if("function"!=typeof t)throw new Zo(G);return function(){return!t.apply(this,arguments)}}function vi(t){return di(2,t)}function yi(t,e){if("function"!=typeof t)throw new Zo(G);return e=_a(e===T?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=_a(n.length-e,0),o=zo(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var a=zo(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=o,t.apply(this,a)}}function mi(t){if("function"!=typeof t)throw new Zo(G);return function(e){return t.apply(this,e)}}function xi(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Zo(G);return n===!1?r=!1:Ii(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),pi(t,e,{leading:r,maxWait:+e,trailing:i})}function bi(t,e){return e=null==e?Lo:e,jn(e,M,T,[t],[])}function wi(t,e,n,r){return e&&"boolean"!=typeof e&&Jn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?we(t,e,an(n,r,1)):we(t,e)}function _i(t,e,n){return"function"==typeof e?we(t,!0,an(e,n,1)):we(t,!0)}function Ei(t,e){return t>e}function ki(t,e){return t>=e}function Ti(t){return y(t)&&Qn(t)&&ea.call(t,"callee")&&!ca.call(t,"callee")}function Ni(t){return t===!0||t===!1||y(t)&&ra.call(t)==H}function Si(t){return y(t)&&ra.call(t)==W}function Li(t){return!!t&&1===t.nodeType&&y(t)&&!qi(t)}function Ci(t){return null==t||(Qn(t)&&(Cs(t)||Vi(t)||Ti(t)||y(t)&&Pi(t.splice))?!t.length:!qs(t).length)}function Di(t,e,n,r){n="function"==typeof n?an(n,r,3):T;var i=n?n(t,e):T;return i===T?Oe(t,e,n):!!i}function Ai(t){return y(t)&&"string"==typeof t.message&&ra.call(t)==$}function Mi(t){return"number"==typeof t&&ba(t)}function Pi(t){return Ii(t)&&ra.call(t)==Z}function Ii(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Oi(t,e,n,r){return n="function"==typeof n?an(n,r,3):T,je(t,Xn(e),n)}function Ri(t){return Fi(t)&&t!=+t}function ji(t){return null!=t&&(Pi(t)?oa.test(ta.call(t)):y(t)&&At.test(t))}function Bi(t){return null===t}function Fi(t){return"number"==typeof t||y(t)&&ra.call(t)==Q}function qi(t){var e;if(!y(t)||ra.call(t)!=K||Ti(t)||!ea.call(t,"constructor")&&"function"==typeof(e=t.constructor)&&!(e instanceof e))return!1;var n;return De(t,function(t,e){n=e}),n===T||ea.call(t,n)}function zi(t){return Ii(t)&&ra.call(t)==J}function Vi(t){return"string"==typeof t||y(t)&&ra.call(t)==tt}function Gi(t){return y(t)&&nr(t.length)&&!!Ft[ra.call(t)]}function Xi(t){return t===T}function Yi(t,e){return t<e}function Ui(t,e){return t<=e}function Hi(t){var e=t?Va(t):0;return nr(e)?e?ne(t):[]:oo(t)}function Wi(t){return xe(t,to(t))}function $i(t,e,n){var r=Oa(t);return n&&Jn(t,e,n)&&(e=T),e?ye(r,e):r}function Zi(t){return Pe(t,to(t))}function Qi(t,e,n){var r=null==t?T:Ie(t,dr(e),e+"");return r===T?n:r}function Ki(t,e){if(null==t)return!1;var n=ea.call(t,e);if(!n&&!tr(e)){if(e=dr(e),null==(t=1==e.length?t:Ie(t,We(e,0,-1))))return!1;e=Nr(e),n=ea.call(t,e)}return n||nr(t.length)&&Kn(e,t.length)&&(Cs(t)||Ti(t))}function Ji(t,e,n){n&&Jn(t,e,n)&&(e=T);for(var r=-1,i=qs(t),o=i.length,a={};++r<o;){var s=i[r],u=t[s];e?ea.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function to(t){if(null==t)return[];Ii(t)||(t=Ho(t));var e=t.length;e=e&&nr(e)&&(Cs(t)||Ti(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=zo(e),a=e>0;++r<e;)o[r]=r+"";for(var s in t)a&&Kn(s,e)||"constructor"==s&&(i||!ea.call(t,s))||o.push(s);return o}function eo(t){t=hr(t);for(var e=-1,n=qs(t),r=n.length,i=zo(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function no(t,e,n){var r=null==t?T:t[e];return r===T&&(null==t||tr(e,t)||(e=dr(e),t=1==e.length?t:Ie(t,We(e,0,-1)),r=null==t?T:t[Nr(e)]),r=r===T?n:r),Pi(r)?r.call(t):r}function ro(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||tr(e,t)?[r]:dr(e);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=e[i];Ii(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Kn(e[i+1])?[]:{})),s=s[u]}return t}function io(t,e,n,r){var i=Cs(t)||Gi(t);if(e=zn(e,r,4),null==n)if(i||Ii(t)){var o=t.constructor;n=i?Cs(t)?new o:[]:Oa(Pi(o)?o.prototype:T)}else n={};return(i?re:Ae)(t,function(t,r,i){return e(n,t,r,i)}),n}function oo(t){return tn(t,qs(t))}function ao(t){return tn(t,to(t))}function so(t,e,n){return e=+e||0,n===T?(n=e,e=0):n=+n||0,t>=Ea(e,n)&&t<_a(e,n)}function uo(t,e,n){n&&Jn(t,e,n)&&(e=n=T);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=Na();return Ea(t+o*(e-t+ua("1e-"+((o+"").length-1))),e)}return Ue(t,e)}function lo(t){return(t=s(t))&&t.charAt(0).toUpperCase()+t.slice(1)}function co(t){return(t=s(t))&&t.replace(Pt,d).replace(Nt,"")}function ho(t,e,n){t=s(t),e+="";var r=t.length;return n=n===T?r:Ea(n<0?0:+n||0,r),(n-=e.length)>=0&&t.indexOf(e,n)==n}function po(t){return t=s(t),t&&yt.test(t)?t.replace(gt,p):t}function fo(t){return t=s(t),t&&Tt.test(t)?t.replace(kt,f):t||"(?:)"}function go(t,e,n){t=s(t),e=+e;var r=t.length;if(r>=e||!ba(e))return t;var i=(e-r)/2,o=ma(i);return n=Pn("",va(i),n),n.slice(0,o)+t+n}function vo(t,e,n){return(n?Jn(t,e,n):null==e)?e=0:e&&(e=+e),t=bo(t),Ta(t,e||(Dt.test(t)?16:10))}function yo(t,e){var n="";if(t=s(t),(e=+e)<1||!t||!ba(e))return n;do{e%2&&(n+=t),e=ma(e/2),t+=t}while(e);return n}function mo(t,e,n){return t=s(t),n=null==n?0:Ea(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function xo(t,n,r){var i=e.templateSettings;r&&Jn(t,n,r)&&(n=r=T),t=s(t),n=ve(ye({},r||n),i,ge);var o,a,u=ve(ye({},n.imports),i.imports,ge),l=qs(u),c=tn(u,l),h=0,d=n.interpolate||It,p="__p += '",f=Wo((n.escape||It).source+"|"+d.source+"|"+(d===bt?Lt:It).source+"|"+(n.evaluate||It).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Bt+"]")+"\n";t.replace(f,function(e,n,r,i,s,u){return r||(r=i),p+=t.slice(h,u).replace(Ot,g),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),p+="';\n";var y=n.variable;y||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(ht,""):p).replace(dt,"$1").replace(pt,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Qs(function(){return Xo(l,v+"return "+p).apply(T,c)});if(m.source=p,Ai(m))throw m;return m}function bo(t,e,n){var r=t;return(t=s(t))?(n?Jn(r,e,n):null==e)?t.slice(w(t),_(t)+1):(e+="",t.slice(u(t,e),l(t,e)+1)):t}function wo(t,e,n){var r=t;return t=s(t),t?(n?Jn(r,e,n):null==e)?t.slice(w(t)):t.slice(u(t,e+"")):t}function _o(t,e,n){var r=t;return t=s(t),t?(n?Jn(r,e,n):null==e)?t.slice(0,_(t)+1):t.slice(0,l(t,e+"")+1):t}function Eo(t,e,n){n&&Jn(t,e,n)&&(e=T);var r=R,i=j;if(null!=e)if(Ii(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?s(e.omission):i}else r=+e||0;if(t=s(t),r>=t.length)return t;var a=r-i.length;if(a<1)return i;var u=t.slice(0,a);if(null==o)return u+i;if(zi(o)){if(t.slice(a).search(o)){var l,c,h=t.slice(0,a);for(o.global||(o=Wo(o.source,(Ct.exec(o)||"")+"g")),o.lastIndex=0;l=o.exec(h);)c=l.index;u=u.slice(0,null==c?a:c)}}else if(t.indexOf(o,a)!=a){var d=u.lastIndexOf(o);d>-1&&(u=u.slice(0,d))}return u+i}function ko(t){return t=s(t),t&&vt.test(t)?t.replace(ft,E):t}function To(t,e,n){return n&&Jn(t,e,n)&&(e=T),t=s(t),t.match(e||Rt)||[]}function No(t,e,n){return n&&Jn(t,e,n)&&(e=T),y(t)?Co(t):be(t,e)}function So(t){return function(){return t}}function Lo(t){return t}function Co(t){return Fe(we(t,!0))}function Do(t,e){return qe(t,we(e,!0))}function Ao(t,e,n){if(null==n){var r=Ii(e),i=r?qs(e):T,o=i&&i.length?Pe(e,i):T;(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=Pe(e,qs(e)));var a=!0,s=-1,u=Pi(t),l=o.length;n===!1?a=!1:Ii(n)&&"chain"in n&&(a=n.chain);for(;++s<l;){var c=o[s],h=e[c];t[c]=h,u&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(a||n){var r=t(this.__wrapped__);return(r.__actions__=ne(this.__actions__)).push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,le([this.value()],arguments))}}(h))}return t}function Mo(){return Jt._=ia,this}function Po(){}function Io(t){return tr(t)?Ge(t):Xe(t)}function Oo(t){return function(e){return Ie(t,dr(e),e+"")}}function Ro(t,e,n){n&&Jn(t,e,n)&&(e=n=T),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=_a(va((e-t)/(n||1)),0),o=zo(i);++r<i;)o[r]=t,t+=n;return o}function jo(t,e,n){if((t=ma(t))<1||!ba(t))return[];var r=-1,i=zo(Ea(t,Ca));for(e=an(e,n,1);++r<t;)r<Ca?i[r]=e(r):e(r);return i}function Bo(t){var e=++na;return s(t)+e}function Fo(t,e){return(+t||0)+(+e||0)}function qo(t,e,n){return n&&Jn(t,e,n)&&(e=T),e=zn(e,n,3),1==e.length?pe(Cs(t)?t:cr(t),e):Ke(t,e)}t=t?te.defaults(Jt.Object(),t,te.pick(Jt,jt)):Jt;var zo=t.Array,Vo=t.Date,Go=t.Error,Xo=t.Function,Yo=t.Math,Uo=t.Number,Ho=t.Object,Wo=t.RegExp,$o=t.String,Zo=t.TypeError,Qo=zo.prototype,Ko=Ho.prototype,Jo=$o.prototype,ta=Xo.prototype.toString,ea=Ko.hasOwnProperty,na=0,ra=Ko.toString,ia=Jt._,oa=Wo("^"+ta.call(ea).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=t.ArrayBuffer,sa=t.clearTimeout,ua=t.parseFloat,la=Yo.pow,ca=Ko.propertyIsEnumerable,ha=Yn(t,"Set"),da=t.setTimeout,pa=Qo.splice,fa=t.Uint8Array,ga=Yn(t,"WeakMap"),va=Yo.ceil,ya=Yn(Ho,"create"),ma=Yo.floor,xa=Yn(zo,"isArray"),ba=t.isFinite,wa=Yn(Ho,"keys"),_a=Yo.max,Ea=Yo.min,ka=Yn(Vo,"now"),Ta=t.parseInt,Na=Yo.random,Sa=Uo.NEGATIVE_INFINITY,La=Uo.POSITIVE_INFINITY,Ca=4294967295,Da=Ca-1,Aa=Ca>>>1,Ma=9007199254740991,Pa=ga&&new ga,Ia={};e.support={};e.templateSettings={escape:mt,evaluate:xt,interpolate:bt,variable:"",imports:{_:e}};var Oa=function(){function t(){}return function(e){if(Ii(e)){t.prototype=e;var n=new t;t.prototype=T}return n||{}}}(),Ra=dn(Ae),ja=dn(Me,!0),Ba=pn(),Fa=pn(!0),qa=Pa?function(t,e){return Pa.set(t,e),t}:Lo,za=Pa?function(t){return Pa.get(t)}:Po,Va=Ge("length"),Ga=function(){var t=0,e=0;return function(n,r){var i=gs(),o=F-(i-e);if(e=i,o>0){if(++t>=B)return n}else t=0;return qa(n,r)}}(),Xa=yi(function(t,e){return y(t)&&Qn(t)?Ee(t,Ce(e,!1,!0)):[]}),Ya=_n(),Ua=_n(!0),Ha=yi(function(t){for(var e=t.length,n=e,r=zo(h),i=Gn(),a=i==o,s=[];n--;){var u=t[n]=Qn(u=t[n])?u:[];r[n]=a&&u.length>=120?gn(n&&u):null}var l=t[0],c=-1,h=l?l.length:0,d=r[0];t:for(;++c<h;)if(u=l[c],(d?Qt(d,u):i(s,u,0))<0){for(var n=e;--n;){var p=r[n];if((p?Qt(p,u):i(t[n],u,0))<0)continue t}d&&d.push(u),s.push(u)}return s}),Wa=yi(function(t,e){e=Ce(e);var n=me(t,e);return Ye(t,e.sort(r)),n}),$a=Rn(),Za=Rn(!0),Qa=yi(function(t){return Je(Ce(t,!1,!0))}),Ka=yi(function(t,e){return Qn(t)?Ee(t,e):[]}),Ja=yi(jr),ts=yi(function(t){var e=t.length,n=e>2?t[e-2]:T,r=e>1?t[e-1]:T;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):T,r=T),t.length=e,Br(t,n,r)}),es=yi(function(t){return t=Ce(t),this.thru(function(e){return ee(Cs(e)?e:[hr(e)],t)})}),ns=yi(function(t,e){return me(t,Ce(e))}),rs=cn(function(t,e,n){ea.call(t,n)?++t[n]:t[n]=1}),is=wn(Ra),os=wn(ja,!0),as=Tn(re,Ra),ss=Tn(ie,ja),us=cn(function(t,e,n){ea.call(t,n)?t[n].push(e):t[n]=[e]}),ls=cn(function(t,e,n){t[n]=e}),cs=yi(function(t,e,n){var r=-1,i="function"==typeof e,o=tr(e),a=Qn(t)?zo(t.length):[];return Ra(t,function(t){var s=i?e:o&&null!=t?t[e]:T;a[++r]=s?s.apply(t,n):Zn(t,e,n)}),a}),hs=cn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ds=An(ce,Ra),ps=An(he,ja),fs=yi(function(t,e){if(null==t)return[];var n=e[2];return n&&Jn(e[0],e[1],n)&&(e.length=1),Qe(t,Ce(e),[])}),gs=ka||function(){return(new Vo).getTime()},vs=yi(function(t,e,n){var r=S;if(n.length){var i=x(n,vs.placeholder);r|=M}return jn(t,r,e,n,i)}),ys=yi(function(t,e){e=e.length?Ce(e):Zi(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=jn(t[i],S,t)}return t}),ms=yi(function(t,e,n){var r=S|L;if(n.length){var i=x(n,ms.placeholder);r|=M}return jn(e,r,t,n,i)}),xs=mn(D),bs=mn(A),ws=yi(function(t,e){return _e(t,1,e)}),_s=yi(function(t,e,n){return _e(t,e,n)}),Es=kn(),ks=kn(!0),Ts=yi(function(t,e){if(e=Ce(e),"function"!=typeof t||!oe(e,a))throw new Zo(G);var n=e.length;return yi(function(r){for(var i=Ea(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})}),Ns=Dn(M),Ss=Dn(P),Ls=yi(function(t,e){return jn(t,O,T,T,T,Ce(e))}),Cs=xa||function(t){return y(t)&&nr(t.length)&&ra.call(t)==U},Ds=hn(ze),As=hn(function(t,e,n){return n?ve(t,e,n):ye(t,e)}),Ms=xn(As,fe),Ps=xn(Ds,or),Is=En(Ae),Os=En(Me),Rs=Nn(Ba),js=Nn(Fa),Bs=Sn(Ae),Fs=Sn(Me),qs=wa?function(t){var e=null==t?T:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Qn(t)?lr(t):Ii(t)?wa(t):[]}:lr,zs=Ln(!0),Vs=Ln(),Gs=yi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Ce(e),$o);return ar(t,Ee(to(t),e))}var n=an(e[0],e[1],3);return sr(t,function(t,e,r){return!n(t,e,r)})}),Xs=yi(function(t,e){return null==t?{}:"function"==typeof e[0]?sr(t,an(e[0],e[1],3)):ar(t,Ce(e))}),Ys=vn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Us=vn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Hs=Cn(),Ws=Cn(!0),$s=vn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Zs=vn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Qs=yi(function(t,e){try{return t.apply(T,e)}catch(t){return Ai(t)?t:new Go(t)}}),Ks=yi(function(t,e){return function(n){return Zn(n,t,e)}}),Js=yi(function(t,e){return function(n){return Zn(t,n,e)}}),tu=On("ceil"),eu=On("floor"),nu=bn(Ei,Sa),ru=bn(Yi,La),iu=On("round");return e.prototype=n.prototype,m.prototype=Oa(n.prototype),m.prototype.constructor=m,zt.prototype=Oa(n.prototype),zt.prototype.constructor=zt,Yt.prototype.delete=Ut,Yt.prototype.get=Ht,Yt.prototype.has=Wt,Yt.prototype.set=$t,Zt.prototype.push=Kt,fi.Cache=Yt,e.after=ci,e.ary=hi,e.assign=As,e.at=ns,e.before=di,e.bind=vs,e.bindAll=ys,e.bindKey=ms,e.callback=No,e.chain=zr,e.chunk=fr,e.compact=gr,e.constant=So,e.countBy=rs,e.create=$i,e.curry=xs,e.curryRight=bs,e.debounce=pi,e.defaults=Ms,e.defaultsDeep=Ps,e.defer=ws,e.delay=_s,e.difference=Xa,e.drop=vr,e.dropRight=yr,e.dropRightWhile=mr,e.dropWhile=xr,e.fill=br,e.filter=Qr,e.flatten=_r,e.flattenDeep=Er,e.flow=Es,e.flowRight=ks,e.forEach=as,e.forEachRight=ss,e.forIn=Rs,e.forInRight=js,e.forOwn=Bs,e.forOwnRight=Fs,e.functions=Zi,e.groupBy=us,e.indexBy=ls,e.initial=Tr,e.intersection=Ha,e.invert=Ji,e.invoke=cs,e.keys=qs,e.keysIn=to,e.map=ti,e.mapKeys=zs,e.mapValues=Vs,e.matches=Co,e.matchesProperty=Do,e.memoize=fi,e.merge=Ds,e.method=Ks,e.methodOf=Js,e.mixin=Ao,e.modArgs=Ts,e.negate=gi,e.omit=Gs,e.once=vi,e.pairs=eo,e.partial=Ns,e.partialRight=Ss,e.partition=hs,e.pick=Xs,e.pluck=ei,e.property=Io,e.propertyOf=Oo,e.pull=Lr,e.pullAt=Wa,e.range=Ro,e.rearg=Ls,e.reject=ni,e.remove=Cr,e.rest=Dr,e.restParam=yi,e.set=ro,e.shuffle=ii,e.slice=Ar,e.sortBy=si,e.sortByAll=fs,e.sortByOrder=ui,e.spread=mi,e.take=Mr,e.takeRight=Pr,e.takeRightWhile=Ir,e.takeWhile=Or,e.tap=Vr,e.throttle=xi,e.thru=Gr,e.times=jo,e.toArray=Hi,e.toPlainObject=Wi,e.transform=io,e.union=Qa,e.uniq=Rr,e.unzip=jr,e.unzipWith=Br,e.values=oo,e.valuesIn=ao,e.where=li,e.without=Ka,e.wrap=bi,e.xor=Fr,e.zip=Ja,e.zipObject=qr,e.zipWith=ts,e.backflow=ks,e.collect=ti,e.compose=ks,e.each=as,e.eachRight=ss,e.extend=As,e.iteratee=No,e.methods=Zi,e.object=qr,e.select=Qr,e.tail=Dr,e.unique=Rr,Ao(e,e),e.add=Fo,e.attempt=Qs,e.camelCase=Ys,e.capitalize=lo,e.ceil=tu,e.clone=wi,e.cloneDeep=_i,e.deburr=co,e.endsWith=ho,e.escape=po,e.escapeRegExp=fo,e.every=Zr,e.find=is,e.findIndex=Ya,e.findKey=Is,e.findLast=os,e.findLastIndex=Ua,e.findLastKey=Os,e.findWhere=Kr,e.first=wr,e.floor=eu,e.get=Qi,e.gt=Ei,e.gte=ki,e.has=Ki,e.identity=Lo,e.includes=Jr,e.indexOf=kr,e.inRange=so,e.isArguments=Ti,e.isArray=Cs,e.isBoolean=Ni,e.isDate=Si,e.isElement=Li,e.isEmpty=Ci,e.isEqual=Di,e.isError=Ai,e.isFinite=Mi,e.isFunction=Pi,e.isMatch=Oi,e.isNaN=Ri,e.isNative=ji,e.isNull=Bi,e.isNumber=Fi,e.isObject=Ii,e.isPlainObject=qi,e.isRegExp=zi,e.isString=Vi,e.isTypedArray=Gi,e.isUndefined=Xi,e.kebabCase=Us,e.last=Nr,e.lastIndexOf=Sr,e.lt=Yi,e.lte=Ui,e.max=nu,e.min=ru,e.noConflict=Mo,e.noop=Po,e.now=gs,e.pad=go,e.padLeft=Hs,e.padRight=Ws,e.parseInt=vo,e.random=uo,e.reduce=ds,e.reduceRight=ps,e.repeat=yo,e.result=no,e.round=iu,e.runInContext=k,e.size=oi,e.snakeCase=$s,e.some=ai,e.sortedIndex=$a,e.sortedLastIndex=Za,e.startCase=Zs,e.startsWith=mo,e.sum=qo,e.template=xo,e.trim=bo,e.trimLeft=wo,e.trimRight=_o,e.trunc=Eo,e.unescape=ko,e.uniqueId=Bo,e.words=To,e.all=Zr,e.any=ai,e.contains=Jr,e.eq=Di,e.detect=is,e.foldl=ds,e.foldr=ps,e.head=wr,e.include=Jr,e.inject=ds,Ao(e,function(){var t={};return Ae(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=ri,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ri(e,t)}):ri(this.value())},e.VERSION=N,re(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),re(["drop","take"],function(t,e){zt.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new zt(this);n=null==n?1:_a(ma(n)||0,0);var i=this.clone();return r?i.__takeCount__=Ea(i.__takeCount__,n):i.__views__.push({size:n,type:t+(i.__dir__<0?"Right":"")}),i},zt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),re(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=V;zt.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:zn(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),re(["first","last"],function(t,e){var n="take"+(e?"Right":"");zt.prototype[t]=function(){return this[n](1).value()[0]}}),re(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");zt.prototype[t]=function(){return this.__filtered__?new zt(this):this[n](1)}}),re(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Fe:Io;zt.prototype[t]=function(t){return this[n](r(t))}}),zt.prototype.compact=function(){return this.filter(Lo)},zt.prototype.reject=function(t,e){return t=zn(t,e,1),this.filter(function(e){return!t(e)})},zt.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||e<0)?new zt(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==T&&(e=+e||0,n=e<0?n.dropRight(-e):n.take(e-t)),n)},zt.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},zt.prototype.toArray=function(){return this.take(La)},Ae(zt.prototype,function(t,n){var r=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),o=e[i?"take"+("last"==n?"Right":""):n];o&&(e.prototype[n]=function(){var e=i?[1]:arguments,n=this.__chain__,a=this.__wrapped__,s=!!this.__actions__.length,u=a instanceof zt,l=e[0],c=u||Cs(a);c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var h=function(t){return i&&n?o(t,1)[0]:o.apply(T,le([t],e))},d={func:Gr,args:[h],thisArg:T},p=u&&!s;if(i&&!n)return p?(a=a.clone(),a.__actions__.push(d),t.call(a)):o.call(T,this.value())[0];if(!i&&c){a=p?a:new zt(this);var f=t.apply(a,e);return f.__actions__.push(d),new m(f,n)}return this.thru(h)})}),re(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Jo:Qo)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Ae(zt.prototype,function(t,n){var r=e[n];if(r){var i=r.name;(Ia[i]||(Ia[i]=[])).push({name:n,func:r})}}),Ia[Mn(T,L).name]=[{name:"wrapper",func:T}],zt.prototype.clone=Vt,zt.prototype.reverse=Gt,zt.prototype.value=Xt,e.prototype.chain=Xr,e.prototype.commit=Yr,e.prototype.concat=es,e.prototype.plant=Ur,e.prototype.reverse=Hr,e.prototype.toString=Wr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=$r,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var T,N="3.10.1",S=1,L=2,C=4,D=8,A=16,M=32,P=64,I=128,O=256,R=30,j="...",B=150,F=16,q=200,z=1,V=2,G="Expected a function",X="__lodash_placeholder__",Y="[object Arguments]",U="[object Array]",H="[object Boolean]",W="[object Date]",$="[object Error]",Z="[object Function]",Q="[object Number]",K="[object Object]",J="[object RegExp]",tt="[object String]",et="[object ArrayBuffer]",nt="[object Float32Array]",rt="[object Float64Array]",it="[object Int8Array]",ot="[object Int16Array]",at="[object Int32Array]",st="[object Uint8Array]",ut="[object Uint8ClampedArray]",lt="[object Uint16Array]",ct="[object Uint32Array]",ht=/\b__p \+= '';/g,dt=/\b(__p \+=) '' \+/g,pt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ft=/&(?:amp|lt|gt|quot|#39|#96);/g,gt=/[&<>"'`]/g,vt=RegExp(ft.source),yt=RegExp(gt.source),mt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,_t=/^\w*$/,Et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,kt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Tt=RegExp(kt.source),Nt=/[\u0300-\u036f\ufe20-\ufe23]/g,St=/\\(\\)?/g,Lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ct=/\w*$/,Dt=/^0[xX]/,At=/^\[object .+?Constructor\]$/,Mt=/^\d+$/,Pt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,It=/($^)/,Ot=/['\n\r\u2028\u2029\\]/g,Rt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),jt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Bt=-1,Ft={};Ft[nt]=Ft[rt]=Ft[it]=Ft[ot]=Ft[at]=Ft[st]=Ft[ut]=Ft[lt]=Ft[ct]=!0,Ft[Y]=Ft[U]=Ft[et]=Ft[H]=Ft[W]=Ft[$]=Ft[Z]=Ft["[object Map]"]=Ft[Q]=Ft[K]=Ft[J]=Ft["[object Set]"]=Ft[tt]=Ft["[object WeakMap]"]=!1;var qt={};qt[Y]=qt[U]=qt[et]=qt[H]=qt[W]=qt[nt]=qt[rt]=qt[it]=qt[ot]=qt[at]=qt[Q]=qt[K]=qt[J]=qt[tt]=qt[st]=qt[ut]=qt[lt]=qt[ct]=!0,qt[$]=qt[Z]=qt["[object Map]"]=qt["[object Set]"]=qt["[object WeakMap]"]=!1;var zt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Gt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Xt={function:!0,object:!0},Yt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=Xt[typeof n]&&n&&!n.nodeType&&n,Wt=Xt[typeof e]&&e&&!e.nodeType&&e,$t=Ht&&Wt&&"object"==typeof t&&t&&t.Object&&t,Zt=Xt[typeof self]&&self&&self.Object&&self,Qt=Xt[typeof window]&&window&&window.Object&&window,Kt=Wt&&Wt.exports===Ht&&Ht,Jt=$t||Qt!==(this&&this.window)&&Qt||Zt||this,te=k();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Jt._=te,define(function(){return te})):Ht&&Wt?Kt?(Wt.exports=te)._=te:Ht._=te:Jt._=te}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],203:[function(t,e,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n"},{}],204:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(t){var i=n.isAbsolute(t),o="/"===a(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=r(t.split("/")),o=r(e.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}for(var l=[],u=s;u<i.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("g5I+bs"))},{"g5I+bs":205}],205:[function(t,e,n){function r(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){n.shift()()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],206:[function(t,e,n){!function(t,e,n){!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.qtip&&t(jQuery)}(function(r){"use strict";function i(t,e,n,i){this.id=n,this.target=t,this.tooltip=A,this.elements={target:t},this._id=V+"-"+n,this.timers={img:{}},this.options=e,this.plugins={},this.cache={event:{},target:r(),disabled:D,attr:i,onTooltip:D,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=D}function o(t){return t===A||"object"!==r.type(t)}function a(t){return!(r.isFunction(t)||t&&t.attr||t.length||"object"===r.type(t)&&(t.jquery||t.then))}function s(t){var e,n,i,s;return o(t)?D:(o(t.metadata)&&(t.metadata={type:t.metadata}),"content"in t&&(e=t.content,o(e)||e.jquery||e.done?(n=a(e)?D:e,e=t.content={text:n}):n=e.text,"ajax"in e&&(i=e.ajax,s=i&&i.once!==D,delete e.ajax,e.text=function(t,e){var o=n||r(this).attr(e.options.content.attr)||"Loading...",a=r.ajax(r.extend({},i,{context:e})).then(i.success,A,i.error).then(function(t){return t&&s&&e.set("content.text",t),t},function(t,n,r){e.destroyed||0===t.status||e.set("content.text",n+": "+r)});return s?o:(e.set("content.text",o),a)}),"title"in e&&(r.isPlainObject(e.title)&&(e.button=e.title.button,e.title=e.title.text),a(e.title||D)&&(e.title=D))),"position"in t&&o(t.position)&&(t.position={my:t.position,at:t.position}),"show"in t&&o(t.show)&&(t.show=t.show.jquery?{target:t.show}:t.show===C?{ready:C}:{event:t.show}),"hide"in t&&o(t.hide)&&(t.hide=t.hide.jquery?{target:t.hide}:{event:t.hide}),"style"in t&&o(t.style)&&(t.style={classes:t.style}),r.each(z,function(){this.sanitize&&this.sanitize(t)}),t)}function u(t,e){for(var n,r=0,i=t,o=e.split(".");i=i[o[r++]];)r<o.length&&(n=i);return[n||t,o.pop()]}function l(t,e){var n,r,i;for(n in this.checks)if(this.checks.hasOwnProperty(n))for(r in this.checks[n])this.checks[n].hasOwnProperty(r)&&(i=new RegExp(r,"i").exec(t))&&(e.push(i),("builtin"===n||this.plugins[n])&&this.checks[n][r].apply(this.plugins[n]||this,e))}function c(t){return Y.concat("").join(t?"-"+t+" ":" ")}function h(t,e){if(e>0)return setTimeout(r.proxy(t,this),e);t.call(this)}function d(t){
this.tooltip.hasClass(K)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=h.call(this,function(){this.toggle(C,t)},this.options.show.delay))}function p(t){if(!this.tooltip.hasClass(K)&&!this.destroyed){var e=r(t.relatedTarget),n=e.closest(U)[0]===this.tooltip[0],i=e[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==e[0]&&"mouse"===this.options.position.target&&n||this.options.hide.fixed&&/mouse(out|leave|move)/.test(t.type)&&(n||i))try{t.preventDefault(),t.stopImmediatePropagation()}catch(t){}else this.timers.hide=h.call(this,function(){this.toggle(D,t)},this.options.hide.delay,this)}}function f(t){!this.tooltip.hasClass(K)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=h.call(this,function(){this.hide(t)},this.options.hide.inactive))}function g(t){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(t)}function v(t,n,i){r(e.body).delegate(t,(n.split?n:n.join("."+V+" "))+"."+V,function(){var t=k.api[r.attr(this,X)];t&&!t.disabled&&i.apply(t,arguments)})}function y(t,n,o){var a,u,l,c,h,d=r(e.body),p=t[0]===e?d:t,f=t.metadata?t.metadata(o.metadata):A,g="html5"===o.metadata.type&&f?f[o.metadata.name]:A,v=t.data(o.metadata.name||"qtipopts");try{v="string"==typeof v?r.parseJSON(v):v}catch(t){}if(c=r.extend(C,{},k.defaults,o,"object"==typeof v?s(v):A,s(g||f)),u=c.position,c.id=n,"boolean"==typeof c.content.text){if(l=t.attr(c.content.attr),c.content.attr===D||!l)return D;c.content.text=l}if(u.container.length||(u.container=d),u.target===D&&(u.target=p),c.show.target===D&&(c.show.target=p),c.show.solo===C&&(c.show.solo=u.container.closest("body")),c.hide.target===D&&(c.hide.target=p),c.position.viewport===C&&(c.position.viewport=u.container),u.container=u.container.eq(0),u.at=new N(u.at,C),u.my=new N(u.my),t.data(V))if(c.overwrite)t.qtip("destroy",!0);else if(c.overwrite===D)return D;return t.attr(G,n),c.suppress&&(h=t.attr("title"))&&t.removeAttr("title").attr(J,h).attr("title",""),a=new i(t,c,n,!!l),t.data(V,a),a}function m(t){return t.charAt(0).toUpperCase()+t.slice(1)}function x(t,e){var r,i,o=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+ft.join(o+" ")+o).split(" "),s=0;if(pt[e])return t.css(pt[e]);for(;r=a[s++];)if((i=t.css(r))!==n)return pt[e]=r,i}function b(t,e){return Math.ceil(parseFloat(x(t,e)))}function w(t,e){this._ns="tip",this.options=e,this.offset=e.offset,this.size=[e.width,e.height],this.qtip=t,this.init(t)}function _(t,e){this.options=e,this._ns="-modal",this.qtip=t,this.init(t)}function E(t){this._ns="ie6",this.qtip=t,this.init(t)}var k,T,N,S,L,C=!0,D=!1,A=null,M="x",P="y",I="width",O="top",R="left",j="right",B="center",F="flipinvert",q="shift",z={},V="qtip",G="data-hasqtip",X="data-qtip-id",Y=["ui-widget","ui-tooltip"],U="."+V,H="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),W=V+"-fixed",$=V+"-default",Z=V+"-focus",Q=V+"-hover",K=V+"-disabled",J="oldtitle",tt={ie:function(){var t,n;for(t=4,n=e.createElement("div");(n.innerHTML="<!--[if gt IE "+t+"]><i></i><![endif]-->")&&n.getElementsByTagName("i")[0];t+=1);return t>4?t:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||D};T=i.prototype,T._when=function(t){return r.when.apply(r,t)},T.render=function(t){if(this.rendered||this.destroyed)return this;var e=this,n=this.options,i=this.cache,o=this.elements,a=n.content.text,s=n.content.title,u=n.content.button,l=n.position,c=[];return r.attr(this.target[0],"aria-describedby",this._id),i.posClass=this._createPosClass((this.position={my:l.my,at:l.at}).my),this.tooltip=o.tooltip=r("<div/>",{id:this._id,class:[V,$,n.style.classes,i.posClass].join(" "),width:n.style.width||"",height:n.style.height||"",tracking:"mouse"===l.target&&l.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":D,"aria-describedby":this._id+"-content","aria-hidden":C}).toggleClass(K,this.disabled).attr(X,this.id).data(V,this).appendTo(l.container).append(o.content=r("<div />",{class:V+"-content",id:this._id+"-content","aria-atomic":C})),this.rendered=-1,this.positioning=C,s&&(this._createTitle(),r.isFunction(s)||c.push(this._updateTitle(s,D))),u&&this._createButton(),r.isFunction(a)||c.push(this._updateContent(a,D)),this.rendered=C,this._setWidget(),r.each(z,function(t){var n;"render"===this.initialize&&(n=this(e))&&(e.plugins[t]=n)}),this._unassignEvents(),this._assignEvents(),this._when(c).then(function(){e._trigger("render"),e.positioning=D,e.hiddenDuringWait||!n.show.ready&&!t||e.toggle(C,i.event,D),e.hiddenDuringWait=D}),k.api[this.id]=this,this},T.destroy=function(t){function e(){if(!this.destroyed){this.destroyed=C;var t,e=this.target,n=e.attr(J);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),r.each(this.plugins,function(){this.destroy&&this.destroy()});for(t in this.timers)this.timers.hasOwnProperty(t)&&clearTimeout(this.timers[t]);e.removeData(V).removeAttr(X).removeAttr(G).removeAttr("aria-describedby"),this.options.suppress&&n&&e.attr("title",n).removeAttr(J),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=A,delete k.api[this.id]}}return this.destroyed?this.target:(t===C&&"hide"!==this.triggering||!this.rendered?e.call(this):(this.tooltip.one("tooltiphidden",r.proxy(e,this)),!this.triggering&&this.hide()),this.target)},S=T.checks={builtin:{"^id$":function(t,e,n,i){var o=n===C?k.nextid:n,a=V+"-"+o;o!==D&&o.length>0&&!r("#"+a).length?(this._id=a,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):t[e]=i},"^prerender":function(t,e,n){n&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(t,e,n){this._updateContent(n)},"^content.attr$":function(t,e,n,r){this.options.content.text===this.target.attr(r)&&this._updateContent(this.target.attr(n))},"^content.title$":function(t,e,n){if(!n)return this._removeTitle();n&&!this.elements.title&&this._createTitle(),this._updateTitle(n)},"^content.button$":function(t,e,n){this._updateButton(n)},"^content.title.(text|button)$":function(t,e,n){this.set("content."+e,n)},"^position.(my|at)$":function(t,e,n){"string"==typeof n&&(this.position[e]=t[e]=new N(n,"at"===e))},"^position.container$":function(t,e,n){this.rendered&&this.tooltip.appendTo(n)},"^show.ready$":function(t,e,n){n&&(!this.rendered&&this.render(C)||this.toggle(C))},"^style.classes$":function(t,e,n,r){this.rendered&&this.tooltip.removeClass(r).addClass(n)},"^style.(width|height)":function(t,e,n){this.rendered&&this.tooltip.css(e,n)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(t,e,n){this.rendered&&this.tooltip.toggleClass($,!!n)},"^events.(render|show|move|hide|focus|blur)$":function(t,e,n){this.rendered&&this.tooltip[(r.isFunction(n)?"":"un")+"bind"]("tooltip"+e,n)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var t=this.options.position;this.tooltip.attr("tracking","mouse"===t.target&&t.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},T.get=function(t){if(this.destroyed)return this;var e=u(this.options,t.toLowerCase()),n=e[0][e[1]];return n.precedance?n.string():n};var et=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,nt=/^prerender|show\.ready/i;T.set=function(t,e){if(this.destroyed)return this;var n,i=this.rendered,o=D,a=this.options;return"string"==typeof t?(n=t,t={},t[n]=e):t=r.extend({},t),r.each(t,function(e,n){if(i&&nt.test(e))return void delete t[e];var s,l=u(a,e.toLowerCase());s=l[0][l[1]],l[0][l[1]]=n&&n.nodeType?r(n):n,o=et.test(e)||o,t[e]=[l[0],l[1],n,s]}),s(a),this.positioning=C,r.each(t,r.proxy(l,this)),this.positioning=D,this.rendered&&this.tooltip[0].offsetWidth>0&&o&&this.reposition("mouse"===a.position.target?A:this.cache.event),this},T._update=function(t,e){var n=this,i=this.cache;return this.rendered&&t?(r.isFunction(t)&&(t=t.call(this.elements.target,i.event,this)||""),r.isFunction(t.then)?(i.waiting=C,t.then(function(t){return i.waiting=D,n._update(t,e)},A,function(t){return n._update(t,e)})):t===D||!t&&""!==t?D:(t.jquery&&t.length>0?e.empty().append(t.css({display:"block",visibility:"visible"})):e.html(t),this._waitForContent(e).then(function(t){n.rendered&&n.tooltip[0].offsetWidth>0&&n.reposition(i.event,!t.length)}))):D},T._waitForContent=function(t){var e=this.cache;return e.waiting=C,(r.fn.imagesLoaded?t.imagesLoaded():(new r.Deferred).resolve([])).done(function(){e.waiting=D}).promise()},T._updateContent=function(t,e){this._update(t,this.elements.content,e)},T._updateTitle=function(t,e){this._update(t,this.elements.title,e)===D&&this._removeTitle(D)},T._createTitle=function(){var t=this.elements,e=this._id+"-title";t.titlebar&&this._removeTitle(),t.titlebar=r("<div />",{class:V+"-titlebar "+(this.options.style.widget?c("header"):"")}).append(t.title=r("<div />",{id:e,class:V+"-title","aria-atomic":C})).insertBefore(t.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(t){r(this).toggleClass("ui-state-active ui-state-focus","down"===t.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(t){r(this).toggleClass("ui-state-hover","mouseover"===t.type)}),this.options.content.button&&this._createButton()},T._removeTitle=function(t){var e=this.elements;e.title&&(e.titlebar.remove(),e.titlebar=e.title=e.button=A,t!==D&&this.reposition())},T._createPosClass=function(t){return V+"-pos-"+(t||this.options.position.my).abbrev()},T.reposition=function(n,i){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=C;var o,a,s,u,l=this.cache,c=this.tooltip,h=this.options.position,d=h.target,p=h.my,f=h.at,g=h.viewport,v=h.container,y=h.adjust,m=y.method.split(" "),x=c.outerWidth(D),b=c.outerHeight(D),w=0,_=0,E=c.css("position"),k={left:0,top:0},T=c[0].offsetWidth>0,N=n&&"scroll"===n.type,S=r(t),L=v[0].ownerDocument,A=this.mouse;if(r.isArray(d)&&2===d.length)f={x:R,y:O},k={left:d[0],top:d[1]};else if("mouse"===d)f={x:R,y:O},(!y.mouse||this.options.hide.distance)&&l.origin&&l.origin.pageX?n=l.origin:!n||n&&("resize"===n.type||"scroll"===n.type)?n=l.event:A&&A.pageX&&(n=A),"static"!==E&&(k=v.offset()),L.body.offsetWidth!==(t.innerWidth||L.documentElement.clientWidth)&&(a=r(e.body).offset()),k={left:n.pageX-k.left+(a&&a.left||0),top:n.pageY-k.top+(a&&a.top||0)},y.mouse&&N&&A&&(k.left-=(A.scrollX||0)-S.scrollLeft(),k.top-=(A.scrollY||0)-S.scrollTop());else{if("event"===d?n&&n.target&&"scroll"!==n.type&&"resize"!==n.type?l.target=r(n.target):n.target||(l.target=this.elements.target):"event"!==d&&(l.target=r(d.jquery?d:this.elements.target)),d=l.target,d=r(d).eq(0),0===d.length)return this;d[0]===e||d[0]===t?(w=tt.iOS?t.innerWidth:d.width(),_=tt.iOS?t.innerHeight:d.height(),d[0]===t&&(k={top:(g||d).scrollTop(),left:(g||d).scrollLeft()})):z.imagemap&&d.is("area")?o=z.imagemap(this,d,f,z.viewport?m:D):z.svg&&d&&d[0].ownerSVGElement?o=z.svg(this,d,f,z.viewport?m:D):(w=d.outerWidth(D),_=d.outerHeight(D),k=d.offset()),o&&(w=o.width,_=o.height,a=o.offset,k=o.position),k=this.reposition.offset(d,k,v),(tt.iOS>3.1&&tt.iOS<4.1||tt.iOS>=4.3&&tt.iOS<4.33||!tt.iOS&&"fixed"===E)&&(k.left-=S.scrollLeft(),k.top-=S.scrollTop()),(!o||o&&o.adjustable!==D)&&(k.left+=f.x===j?w:f.x===B?w/2:0,k.top+="bottom"===f.y?_:f.y===B?_/2:0)}return k.left+=y.x+(p.x===j?-x:p.x===B?-x/2:0),k.top+=y.y+("bottom"===p.y?-b:p.y===B?-b/2:0),z.viewport?(s=k.adjusted=z.viewport(this,k,h,w,_,x,b),a&&s.left&&(k.left+=a.left),a&&s.top&&(k.top+=a.top),s.my&&(this.position.my=s.my)):k.adjusted={left:0,top:0},l.posClass!==(u=this._createPosClass(this.position.my))&&(l.posClass=u,c.removeClass(l.posClass).addClass(u)),this._trigger("move",[k,g.elem||g],n)?(delete k.adjusted,i===D||!T||isNaN(k.left)||isNaN(k.top)||"mouse"===d||!r.isFunction(h.effect)?c.css(k):r.isFunction(h.effect)&&(h.effect.call(c,this,r.extend({},k)),c.queue(function(t){r(this).css({opacity:"",height:""}),tt.ie&&this.style.removeAttribute("filter"),t()})),this.positioning=D,this):this},T.reposition.offset=function(t,n,i){function o(t,e){n.left+=e*t.scrollLeft(),n.top+=e*t.scrollTop()}if(!i[0])return n;var a,s,u,l,c=r(t[0].ownerDocument),h=!!tt.ie&&"CSS1Compat"!==e.compatMode,d=i[0];do{"static"!==(s=r.css(d,"position"))&&("fixed"===s?(u=d.getBoundingClientRect(),o(c,-1)):(u=r(d).position(),u.left+=parseFloat(r.css(d,"borderLeftWidth"))||0,u.top+=parseFloat(r.css(d,"borderTopWidth"))||0),n.left-=u.left+(parseFloat(r.css(d,"marginLeft"))||0),n.top-=u.top+(parseFloat(r.css(d,"marginTop"))||0),a||"hidden"===(l=r.css(d,"overflow"))||"visible"===l||(a=r(d)))}while(d=d.offsetParent);return a&&(a[0]!==c[0]||h)&&o(a,1),n};var rt=(N=T.reposition.Corner=function(t,e){t=(""+t).replace(/([A-Z])/," $1").replace(/middle/gi,B).toLowerCase(),this.x=(t.match(/left|right/i)||t.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(t.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!e;var n=t.charAt(0);this.precedance="t"===n||"b"===n?P:M}).prototype;rt.invert=function(t,e){this[t]=this[t]===R?j:this[t]===j?R:e||this[t]},rt.string=function(t){var e=this.x,n=this.y,r=e!==n?"center"===e||"center"!==n&&(this.precedance===P||this.forceY)?[n,e]:[e,n]:[e];return t!==!1?r.join(" "):r},rt.abbrev=function(){var t=this.string(!1);return t[0].charAt(0)+(t[1]&&t[1].charAt(0)||"")},rt.clone=function(){return new N(this.string(),this.forceY)},T.toggle=function(t,n){var i=this.cache,o=this.options,a=this.tooltip;if(n){if(/over|enter/.test(n.type)&&i.event&&/out|leave/.test(i.event.type)&&o.show.target.add(n.target).length===o.show.target.length&&a.has(n.relatedTarget).length)return this;i.event=r.event.fix(n)}if(this.waiting&&!t&&(this.hiddenDuringWait=C),!this.rendered)return t?this.render(1):this;if(this.destroyed||this.disabled)return this;var s,u,l,c=t?"show":"hide",h=this.options[c],d=this.options.position,p=this.options.content,f=this.tooltip.css("width"),g=this.tooltip.is(":visible"),v=t||1===h.target.length,y=!n||h.target.length<2||i.target[0]===n.target;return(typeof t).search("boolean|number")&&(t=!g),s=!a.is(":animated")&&g===t&&y,u=s?A:!!this._trigger(c,[90]),this.destroyed?this:(u!==D&&t&&this.focus(n),!u||s?this:(r.attr(a[0],"aria-hidden",!t),t?(this.mouse&&(i.origin=r.event.fix(this.mouse)),r.isFunction(p.text)&&this._updateContent(p.text,D),r.isFunction(p.title)&&this._updateTitle(p.title,D),!L&&"mouse"===d.target&&d.adjust.mouse&&(r(e).bind("mousemove."+V,this._storeMouse),L=C),f||a.css("width",a.outerWidth(D)),this.reposition(n,arguments[2]),f||a.css("width",""),h.solo&&("string"==typeof h.solo?r(h.solo):r(U,h.solo)).not(a).not(h.target).qtip("hide",new r.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete i.origin,L&&!r(U+'[tracking="true"]:visible',h.solo).not(a).length&&(r(e).unbind("mousemove."+V),L=D),this.blur(n)),l=r.proxy(function(){t?(tt.ie&&a[0].style.removeAttribute("filter"),a.css("overflow",""),"string"==typeof h.autofocus&&r(this.options.show.autofocus,a).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):a.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(t?"visible":"hidden")},this),h.effect===D||v===D?(a[c](),l()):r.isFunction(h.effect)?(a.stop(1,1),h.effect.call(a,this),a.queue("fx",function(t){l(),t()})):a.fadeTo(90,t?1:0,l),t&&h.target.trigger("qtip-"+this.id+"-inactive"),this))},T.show=function(t){return this.toggle(C,t)},T.hide=function(t){return this.toggle(D,t)},T.focus=function(t){if(!this.rendered||this.destroyed)return this;var e=r(U),n=this.tooltip,i=parseInt(n[0].style.zIndex,10),o=k.zindex+e.length;return n.hasClass(Z)||this._trigger("focus",[o],t)&&(i!==o&&(e.each(function(){this.style.zIndex>i&&(this.style.zIndex=this.style.zIndex-1)}),e.filter("."+Z).qtip("blur",t)),n.addClass(Z)[0].style.zIndex=o),this},T.blur=function(t){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(Z),this._trigger("blur",[this.tooltip.css("zIndex")],t),this)},T.disable=function(t){return this.destroyed?this:("toggle"===t?t=!(this.rendered?this.tooltip.hasClass(K):this.disabled):"boolean"!=typeof t&&(t=C),this.rendered&&this.tooltip.toggleClass(K,t).attr("aria-disabled",t),this.disabled=!!t,this)},T.enable=function(){return this.disable(D)},T._createButton=function(){var t=this,e=this.elements,n=e.tooltip,i=this.options.content.button,o="string"==typeof i,a=o?i:"Close tooltip";e.button&&e.button.remove(),i.jquery?e.button=i:e.button=r("<a />",{class:"qtip-close "+(this.options.style.widget?"":V+"-icon"),title:a,"aria-label":a}).prepend(r("<span />",{class:"ui-icon ui-icon-close",html:"&times;"})),e.button.appendTo(e.titlebar||n).attr("role","button").click(function(e){return n.hasClass(K)||t.hide(e),D})},T._updateButton=function(t){if(!this.rendered)return D;var e=this.elements.button;t?this._createButton():e.remove()},T._setWidget=function(){var t=this.options.style.widget,e=this.elements,n=e.tooltip,r=n.hasClass(K);n.removeClass(K),K=t?"ui-state-disabled":"qtip-disabled",n.toggleClass(K,r),n.toggleClass("ui-helper-reset "+c(),t).toggleClass($,this.options.style.def&&!t),e.content&&e.content.toggleClass(c("content"),t),e.titlebar&&e.titlebar.toggleClass(c("header"),t),e.button&&e.button.toggleClass(V+"-icon",!t)},T._storeMouse=function(t){return(this.mouse=r.event.fix(t)).type="mousemove",this},T._bind=function(t,e,n,i,o){if(t&&n&&e.length){var a="."+this._id+(i?"-"+i:"");return r(t).bind((e.split?e:e.join(a+" "))+a,r.proxy(n,o||this)),this}},T._unbind=function(t,e){return t&&r(t).unbind("."+this._id+(e?"-"+e:"")),this},T._trigger=function(t,e,n){var i=new r.Event("tooltip"+t);return i.originalEvent=n&&r.extend({},n)||this.cache.event||A,this.triggering=t,this.tooltip.trigger(i,[this].concat(e||[])),this.triggering=D,!i.isDefaultPrevented()},T._bindEvents=function(t,e,n,i,o,a){var s=n.filter(i).add(i.filter(n)),u=[];s.length&&(r.each(e,function(e,n){var i=r.inArray(n,t);i>-1&&u.push(t.splice(i,1)[0])}),u.length&&(this._bind(s,u,function(t){(!!this.rendered&&this.tooltip[0].offsetWidth>0?a:o).call(this,t)}),n=n.not(s),i=i.not(s))),this._bind(n,t,o),this._bind(i,e,a)},T._assignInitialEvents=function(t){function e(t){if(this.disabled||this.destroyed)return D;this.cache.event=t&&r.event.fix(t),this.cache.target=t&&r(t.target),clearTimeout(this.timers.show),this.timers.show=h.call(this,function(){this.render("object"==typeof t||n.show.ready)},n.prerender?0:n.show.delay)}var n=this.options,i=n.show.target,o=n.hide.target,a=n.show.event?r.trim(""+n.show.event).split(" "):[],s=n.hide.event?r.trim(""+n.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(n.show.event)&&!/mouse(out|leave)/i.test(n.hide.event)&&s.push("mouseleave"),this._bind(i,"mousemove",function(t){this._storeMouse(t),this.cache.onTarget=C}),this._bindEvents(a,s,i,o,e,function(){if(!this.timers)return D;clearTimeout(this.timers.show)}),(n.show.ready||n.prerender)&&e.call(this,t)},T._assignEvents=function(){var n=this,i=this.options,o=i.position,a=this.tooltip,s=i.show.target,u=i.hide.target,l=o.container,c=o.viewport,h=r(e),v=r(t),y=i.show.event?r.trim(""+i.show.event).split(" "):[],m=i.hide.event?r.trim(""+i.hide.event).split(" "):[];r.each(i.events,function(t,e){n._bind(a,"toggle"===t?["tooltipshow","tooltiphide"]:["tooltip"+t],e,null,a)}),/mouse(out|leave)/i.test(i.hide.event)&&"window"===i.hide.leave&&this._bind(h,["mouseout","blur"],function(t){/select|option/.test(t.target.nodeName)||t.relatedTarget||this.hide(t)}),i.hide.fixed?u=u.add(a.addClass(W)):/mouse(over|enter)/i.test(i.show.event)&&this._bind(u,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+i.hide.event).indexOf("unfocus")>-1&&this._bind(l.closest("html"),["mousedown","touchstart"],function(t){var e=r(t.target),n=this.rendered&&!this.tooltip.hasClass(K)&&this.tooltip[0].offsetWidth>0,i=e.parents(U).filter(this.tooltip[0]).length>0;e[0]===this.target[0]||e[0]===this.tooltip[0]||i||this.target.has(e[0]).length||!n||this.hide(t)}),"number"==typeof i.hide.inactive&&(this._bind(s,"qtip-"+this.id+"-inactive",f,"inactive"),this._bind(u.add(a),k.inactiveEvents,f)),this._bindEvents(y,m,s,u,d,p),this._bind(s.add(a),"mousemove",function(t){if("number"==typeof i.hide.distance){var e=this.cache.origin||{},n=this.options.hide.distance,r=Math.abs;(r(t.pageX-e.pageX)>=n||r(t.pageY-e.pageY)>=n)&&this.hide(t)}this._storeMouse(t)}),"mouse"===o.target&&o.adjust.mouse&&(i.hide.event&&this._bind(s,["mouseenter","mouseleave"],function(t){if(!this.cache)return D;this.cache.onTarget="mouseenter"===t.type}),this._bind(h,"mousemove",function(t){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(K)&&this.tooltip[0].offsetWidth>0&&this.reposition(t)})),(o.adjust.resize||c.length)&&this._bind(r.event.special.resize?c:v,"resize",g),o.adjust.scroll&&this._bind(v.add(o.container),"scroll",g)},T._unassignEvents=function(){var n=this.options,i=n.show.target,o=n.hide.target,a=r.grep([this.elements.target[0],this.rendered&&this.tooltip[0],n.position.container[0],n.position.viewport[0],n.position.container.closest("html")[0],t,e],function(t){return"object"==typeof t});i&&i.toArray&&(a=a.concat(i.toArray())),o&&o.toArray&&(a=a.concat(o.toArray())),this._unbind(a)._unbind(a,"destroy")._unbind(a,"inactive")},r(function(){v(U,["mouseenter","mouseleave"],function(t){var e="mouseenter"===t.type,n=r(t.currentTarget),i=r(t.relatedTarget||t.target),o=this.options;e?(this.focus(t),n.hasClass(W)&&!n.hasClass(K)&&clearTimeout(this.timers.hide)):"mouse"===o.position.target&&o.position.adjust.mouse&&o.hide.event&&o.show.target&&!i.closest(o.show.target[0]).length&&this.hide(t),n.toggleClass(Q,e)}),v("["+X+"]",H,f)}),k=r.fn.qtip=function(t,e,i){var o=(""+t).toLowerCase(),a=A,u=r.makeArray(arguments).slice(1),l=u[u.length-1],c=this[0]?r.data(this[0],V):A;return!arguments.length&&c||"api"===o?c:"string"==typeof t?(this.each(function(){var t=r.data(this,V);if(!t)return C;if(l&&l.timeStamp&&(t.cache.event=l),!e||"option"!==o&&"options"!==o)t[o]&&t[o].apply(t,u);else{if(i===n&&!r.isPlainObject(e))return a=t.get(e),D;t.set(e,i)}}),a!==A?a:this):"object"!=typeof t&&arguments.length?void 0:(c=s(r.extend(C,{},t)),this.each(function(t){var e,n;if(n=r.isArray(c.id)?c.id[t]:c.id,n=!n||n===D||n.length<1||k.api[n]?k.nextid++:n,(e=y(r(this),n,c))===D)return C;k.api[n]=e,r.each(z,function(){"initialize"===this.initialize&&this(e)}),e._assignInitialEvents(l)}))},r.qtip=i,k.api={},r.each({attr:function(t,e){if(this.length){var n=this[0],i=r.data(n,"qtip");if("title"===t&&i&&i.options&&"object"==typeof i&&"object"==typeof i.options&&i.options.suppress)return arguments.length<2?r.attr(n,J):(i&&"title"===i.options.content.attr&&i.cache.attr&&i.set("content.text",e),this.attr(J,e))}return r.fn.attr_replacedByqTip.apply(this,arguments)},clone:function(t){var e=r.fn.clone_replacedByqTip.apply(this,arguments);return t||e.filter("["+J+"]").attr("title",function(){return r.attr(this,J)}).removeAttr(J),e}},function(t,e){if(!e||r.fn[t+"_replacedByqTip"])return C;var n=r.fn[t+"_replacedByqTip"]=r.fn[t];r.fn[t]=function(){return e.apply(this,arguments)||n.apply(this,arguments)}}),r.ui||(r.cleanData_replacedByqTip=r.cleanData,r.cleanData=function(t){for(var e,n=0;(e=r(t[n])).length;n++)if(e.attr(G))try{e.triggerHandler("removeqtip")}catch(t){}r.cleanData_replacedByqTip.apply(this,arguments)}),k.version="3.0.3",k.nextid=0,k.inactiveEvents=H,k.zindex=15e3,k.defaults={prerender:D,id:D,overwrite:C,suppress:C,content:{text:C,attr:"title",title:D,button:D},position:{my:"top left",at:"bottom right",target:D,container:D,viewport:D,adjust:{x:0,y:0,mouse:C,scroll:C,resize:C,method:"flipinvert flipinvert"},effect:function(t,e){r(this).animate(e,{duration:200,queue:D})}},show:{target:D,event:"mouseenter",effect:C,delay:90,solo:D,ready:D,autofocus:D},hide:{target:D,event:"mouseleave",effect:C,delay:0,fixed:D,inactive:D,leave:"window",distance:D},style:{classes:"",widget:D,width:D,height:D,def:C},events:{render:A,move:A,show:A,hide:A,toggle:A,visible:A,hidden:A,focus:A,blur:A}};var it,ot,at,st,ut,lt="margin",ct="background-color",ht=!!e.createElement("canvas").getContext,dt=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,pt={},ft=["Webkit","O","Moz","ms"];ht?(st=t.devicePixelRatio||1,ut=function(){var t=e.createElement("canvas").getContext("2d");return t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||1}(),at=st/ut):ot=function(t,e,n){return"<qtipvml:"+t+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(e||"")+' style="behavior: url(#default#VML); '+(n||"")+'" />'},r.extend(w.prototype,{init:function(t){var e,n;n=this.element=t.elements.tip=r("<div />",{class:V+"-tip"}).prependTo(t.tooltip),ht?(e=r("<canvas />").appendTo(this.element)[0].getContext("2d"),e.lineJoin="miter",e.miterLimit=1e5,e.save()):(e=ot("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(e+e),t._bind(r("*",n).add(n),["click","mousedown"],function(t){t.stopPropagation()},this._ns)),t._bind(t.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(t){var e=this.qtip.elements.titlebar;return e&&(t.y===O||t.y===B&&this.element.position().top+this.size[1]/2+this.options.offset<e.outerHeight(C))},_parseCorner:function(t){var e=this.qtip.options.position.my;return t===D||e===D?t=D:t===C?t=new N(e.string()):t.string||(t=new N(t),t.fixed=C),t},_parseWidth:function(t,e,n){var r=this.qtip.elements,i="border"+m(e)+"Width";return(n?b(n,i):b(r.content,i)||b(this._useTitle(t)&&r.titlebar||r.content,i)||b(r.tooltip,i))||0},_parseRadius:function(t){var e=this.qtip.elements,n="border"+m(t.y)+m(t.x)+"Radius";return tt.ie<9?0:b(this._useTitle(t)&&e.titlebar||e.content,n)||b(e.tooltip,n)||0},_invalidColour:function(t,e,n){var r=t.css(e);return!r||n&&r===t.css(n)||dt.test(r)?D:r},_parseColours:function(t){var e=this.qtip.elements,n=this.element.css("cssText",""),i="border"+m(t[t.precedance])+m("color"),o=this._useTitle(t)&&e.titlebar||e.content,a=this._invalidColour,s=[];return s[0]=a(n,ct)||a(o,ct)||a(e.content,ct)||a(e.tooltip,ct)||n.css(ct),s[1]=a(n,i,"color")||a(o,i,"color")||a(e.content,i,"color")||a(e.tooltip,i,"color")||e.tooltip.css(i),r("*",n).add(n).css("cssText",ct+":transparent !important;border:0 !important;"),s},_calculateSize:function(t){var e,n,r,i=t.precedance===P,o=this.options.width,a=this.options.height,s="c"===t.abbrev(),u=(i?o:a)*(s?.5:1),l=Math.pow,c=Math.round,h=Math.sqrt(l(u,2)+l(a,2)),d=[this.border/u*h,this.border/a*h];return d[2]=Math.sqrt(l(d[0],2)-l(this.border,2)),d[3]=Math.sqrt(l(d[1],2)-l(this.border,2)),e=h+d[2]+d[3]+(s?0:d[0]),n=e/h,r=[c(n*o),c(n*a)],i?r:r.reverse()},_calculateTip:function(t,e,n){n=n||1,e=e||this.size;var r=e[0]*n,i=e[1]*n,o=Math.ceil(r/2),a=Math.ceil(i/2),s={br:[0,0,r,i,r,0],bl:[0,0,r,0,0,i],tr:[0,i,r,0,r,i],tl:[0,0,0,i,r,i],tc:[0,i,o,0,r,i],bc:[0,0,r,0,o,i],rc:[0,0,r,a,0,i],lc:[r,0,r,i,0,a]};return s.lt=s.br,s.rt=s.bl,s.lb=s.tr,s.rb=s.tl,s[t.abbrev()]},_drawCoords:function(t,e){t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.closePath()},create:function(){var t=this.corner=(ht||tt.ie)&&this._parseCorner(this.options.corner);return this.enabled=!!this.corner&&"c"!==this.corner.abbrev(),this.enabled&&(this.qtip.cache.corner=t.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(e,n){if(!this.enabled)return this;var i,o,a,s,u,l,c,h,d=this.qtip.elements,p=this.element,f=p.children(),g=this.options,v=this.size,y=g.mimic,m=Math.round;e||(e=this.qtip.cache.corner||this.corner),y===D?y=e:(y=new N(y),y.precedance=e.precedance,"inherit"===y.x?y.x=e.x:"inherit"===y.y?y.y=e.y:y.x===y.y&&(y[e.precedance]=e[e.precedance])),o=y.precedance,e.precedance===M?this._swapDimensions():this._resetDimensions(),i=this.color=this._parseColours(e),"transparent"!==i[1]?(h=this.border=this._parseWidth(e,e[e.precedance]),g.border&&h<1&&!dt.test(i[1])&&(i[0]=i[1]),this.border=h=g.border!==C?g.border:h):this.border=h=0,c=this.size=this._calculateSize(e),p.css({width:c[0],height:c[1],lineHeight:c[1]+"px"}),l=e.precedance===P?[m(y.x===R?h:y.x===j?c[0]-v[0]-h:(c[0]-v[0])/2),m(y.y===O?c[1]-v[1]:0)]:[m(y.x===R?c[0]-v[0]:0),m(y.y===O?h:"bottom"===y.y?c[1]-v[1]-h:(c[1]-v[1])/2)],ht?(a=f[0].getContext("2d"),a.restore(),a.save(),a.clearRect(0,0,6e3,6e3),s=this._calculateTip(y,v,at),u=this._calculateTip(y,this.size,at),f.attr(I,c[0]*at).attr("height",c[1]*at),f.css(I,c[0]).css("height",c[1]),this._drawCoords(a,u),a.fillStyle=i[1],a.fill(),a.translate(l[0]*at,l[1]*at),this._drawCoords(a,s),a.fillStyle=i[0],a.fill()):(s=this._calculateTip(y),s="m"+s[0]+","+s[1]+" l"+s[2]+","+s[3]+" "+s[4]+","+s[5]+" xe",l[2]=h&&/^(r|b)/i.test(e.string())?8===tt.ie?2:1:0,f.css({coordsize:c[0]+h+" "+c[1]+h,antialias:""+(y.string().indexOf(B)>-1),left:l[0]-l[2]*Number(o===M),top:l[1]-l[2]*Number(o===P),width:c[0]+h,height:c[1]+h}).each(function(t){var e=r(this);e[e.prop?"prop":"attr"]({coordsize:c[0]+h+" "+c[1]+h,path:s,fillcolor:i[0],filled:!!t,stroked:!t}).toggle(!(!h&&!t)),!t&&e.html(ot("stroke",'weight="'+2*h+'px" color="'+i[1]+'" miterlimit="1000" joinstyle="miter"'))})),t.opera&&setTimeout(function(){d.tip.css({display:"inline-block",visibility:"visible"})},1),n!==D&&this.calculate(e,c)},calculate:function(t,e){if(!this.enabled)return D;var n,i,o=this,a=this.qtip.elements,s=this.element,u=this.options.offset,l={};return t=t||this.corner,n=t.precedance,e=e||this._calculateSize(t),i=[t.x,t.y],n===M&&i.reverse(),r.each(i,function(r,i){var s,c,h;i===B?(s=n===P?R:O,l[s]="50%",l[lt+"-"+s]=-Math.round(e[n===P?0:1]/2)+u):(s=o._parseWidth(t,i,a.tooltip),c=o._parseWidth(t,i,a.content),h=o._parseRadius(t),l[i]=Math.max(-o.border,r?c:u+(h>s?h:-s)))}),l[t[n]]-=e[n===M?0:1],s.css({margin:"",top:"",bottom:"",left:"",right:""}).css(l),l},reposition:function(t,e,r){function i(t,e,n,r,i){t===q&&l.precedance===e&&c[r]&&l[n]!==B?l.precedance=l.precedance===M?P:M:t!==q&&c[r]&&(l[e]=l[e]===B?c[r]>0?r:i:l[e]===r?i:r)}function o(t,e,i){l[t]===B?g[lt+"-"+e]=f[t]=a[lt+"-"+e]-c[e]:(s=a[i]!==n?[c[e],-a[e]]:[-c[e],a[e]],(f[t]=Math.max(s[0],s[1]))>s[0]&&(r[e]-=c[e],f[e]=D),g[a[i]!==n?i:e]=f[t])}if(this.enabled){var a,s,u=e.cache,l=this.corner.clone(),c=r.adjusted,h=e.options.position.adjust.method.split(" "),d=h[0],p=h[1]||h[0],f={left:D,top:D,x:0,y:0},g={};this.corner.fixed!==C&&(i(d,M,P,R,j),i(p,P,M,O,"bottom"),l.string()===u.corner.string()&&u.cornerTop===c.top&&u.cornerLeft===c.left||this.update(l,D)),a=this.calculate(l),a.right!==n&&(a.left=-a.right),a.bottom!==n&&(a.top=-a.bottom),a.user=this.offset,f.left=d===q&&!!c.left,f.left&&o(M,R,j),f.top=p===q&&!!c.top,f.top&&o(P,O,"bottom"),this.element.css(g).toggle(!(f.x&&f.y||l.x===B&&f.y||l.y===B&&f.x)),r.left-=a.left.charAt?a.user:d!==q||f.top||!f.left&&!f.top?a.left+this.border:0,r.top-=a.top.charAt?a.user:p!==q||f.left||!f.left&&!f.top?a.top+this.border:0,u.cornerLeft=c.left,u.cornerTop=c.top,u.corner=l.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),it=z.tip=function(t){return new w(t,t.options.style.tip)},it.initialize="render",it.sanitize=function(t){if(t.style&&"tip"in t.style){var e=t.style.tip;"object"!=typeof e&&(e=t.style.tip={corner:e}),/string|boolean/i.test(typeof e.corner)||(e.corner=C)}},S.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(t){
this.size=[t.width,t.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},r.extend(C,k.defaults,{style:{tip:{corner:C,mimic:D,width:6,height:6,border:C,offset:0}}});var gt,vt;vt=function(){function t(t){if(r.expr[":"].focusable)return r.expr[":"].focusable;var e,n,i,o=!isNaN(r.attr(t,"tabindex")),a=t.nodeName&&t.nodeName.toLowerCase();return"area"===a?(e=t.parentNode,n=e.name,!(!t.href||!n||"map"!==e.nodeName.toLowerCase())&&(!!(i=r("img[usemap=#"+n+"]")[0])&&i.is(":visible"))):/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||o:o}function n(t){l.length<1&&t.length?t.not("body").blur():l.first().focus()}function i(t){if(s.is(":visible")){var e,i=r(t.target),a=o.tooltip,u=i.closest(U);e=u.length<1?D:parseInt(u[0].style.zIndex,10)>parseInt(a[0].style.zIndex,10),e||i.closest(U)[0]===a[0]||n(i)}}var o,a,s,u=this,l={};r.extend(u,{init:function(){return s=u.elem=r("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return D}}).hide(),r(e.body).bind("focusin.qtip-modal",i),r(e).bind("keydown.qtip-modal",function(t){o&&o.options.show.modal.escape&&27===t.keyCode&&o.hide(t)}),s.bind("click.qtip-modal",function(t){o&&o.options.show.modal.blur&&o.hide(t)}),u},update:function(e){o=e,l=e.options.show.modal.stealfocus!==D?e.tooltip.find("*").filter(function(){return t(this)}):[]},toggle:function(t,i,l){var c=t.tooltip,h=t.options.show.modal,d=h.effect,p=i?"show":"hide",f=s.is(":visible"),g=r(".qtip-modal").filter(":visible:not(:animated)").not(c);return u.update(t),i&&h.stealfocus!==D&&n(r(":focus")),s.toggleClass("blurs",h.blur),i&&s.appendTo(e.body),s.is(":animated")&&f===i&&a!==D||!i&&g.length?u:(s.stop(C,D),r.isFunction(d)?d.call(s,i):d===D?s[p]():s.fadeTo(parseInt(l,10)||90,i?1:0,function(){i||s.hide()}),i||s.queue(function(t){s.css({left:"",top:""}),r(".qtip-modal").length||s.detach(),t()}),a=i,o.destroyed&&(o=A),u)}}),u.init()},vt=new vt,r.extend(_.prototype,{init:function(t){var e=t.tooltip;if(!this.options.on)return this;t.elements.overlay=vt.elem,e.addClass("qtip-modal").css("z-index",k.modal_zindex+r(".qtip-modal").length),t._bind(e,["tooltipshow","tooltiphide"],function(t,n,i){var o=t.originalEvent;if(t.target===e[0])if(o&&"tooltiphide"===t.type&&/mouse(leave|enter)/.test(o.type)&&r(o.relatedTarget).closest(vt.elem[0]).length)try{t.preventDefault()}catch(t){}else(!o||o&&"tooltipsolo"!==o.type)&&this.toggle(t,"tooltipshow"===t.type,i)},this._ns,this),t._bind(e,"tooltipfocus",function(t,n){if(!t.isDefaultPrevented()&&t.target===e[0]){var i=r(".qtip-modal"),o=k.modal_zindex+i.length,a=parseInt(e[0].style.zIndex,10);vt.elem[0].style.zIndex=o-1,i.each(function(){this.style.zIndex>a&&(this.style.zIndex-=1)}),i.filter("."+Z).qtip("blur",t.originalEvent),e.addClass(Z)[0].style.zIndex=o,vt.update(n);try{t.preventDefault()}catch(t){}}},this._ns,this),t._bind(e,"tooltiphide",function(t){t.target===e[0]&&r(".qtip-modal").filter(":visible").not(e).last().qtip("focus",t)},this._ns,this)},toggle:function(t,e,n){if(t&&t.isDefaultPrevented())return this;vt.toggle(this.qtip,!!e,n)},destroy:function(){this.qtip.tooltip.removeClass("qtip-modal"),this.qtip._unbind(this.qtip.tooltip,this._ns),vt.toggle(this.qtip,D),delete this.qtip.elements.overlay}}),gt=z.modal=function(t){return new _(t,t.options.show.modal)},gt.sanitize=function(t){t.show&&("object"!=typeof t.show.modal?t.show.modal={on:!!t.show.modal}:void 0===t.show.modal.on&&(t.show.modal.on=C))},k.modal_zindex=k.zindex-200,gt.initialize="render",S.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},r.extend(C,k.defaults,{show:{modal:{on:D,effect:C,blur:C,stealfocus:C,escape:C}}}),z.viewport=function(n,r,i,o,a,s,u){function l(t,e,n,i,o,a,s,u,l){var c=r[o],m=b[t],x=w[t],_=n===q,E=m===o?l:m===a?-l:-l/2,k=x===o?u:x===a?-u:-u/2,T=v[o]+y[o]-(p?0:d[o]),N=T-c,S=c+l-(s===I?f:g)-T,L=E-(b.precedance===t||m===b[e]?k:0)-(x===B?u/2:0);return _?(L=(m===o?1:-1)*E,r[o]+=N>0?N:S>0?-S:0,r[o]=Math.max(-d[o]+y[o],c-L,Math.min(Math.max(-d[o]+y[o]+(s===I?f:g),c+L),r[o],"center"===m?c-E:1e9))):(i*=n===F?2:0,N>0&&(m!==o||S>0)?(r[o]-=L+i,h.invert(t,o)):S>0&&(m!==a||N>0)&&(r[o]-=(m===B?-L:L)+i,h.invert(t,a)),r[o]<v[o]&&-r[o]>S&&(r[o]=c,h=b.clone())),r[o]-c}var c,h,d,p,f,g,v,y,m=i.target,x=n.elements.tooltip,b=i.my,w=i.at,_=i.adjust,E=_.method.split(" "),k=E[0],T=E[1]||E[0],N=i.viewport,S=i.container,L={left:0,top:0};return N.jquery&&m[0]!==t&&m[0]!==e.body&&"none"!==_.method?(d=S.offset()||L,p="static"===S.css("position"),c="fixed"===x.css("position"),f=N[0]===t?N.width():N.outerWidth(D),g=N[0]===t?N.height():N.outerHeight(D),v={left:c?0:N.scrollLeft(),top:c?0:N.scrollTop()},y=N.offset()||L,"shift"===k&&"shift"===T||(h=b.clone()),L={left:"none"!==k?l(M,P,k,_.x,R,j,I,o,s):0,top:"none"!==T?l(P,M,T,_.y,O,"bottom","height",a,u):0,my:h}):L},z.polys={polygon:function(t,e){var n,r,i,o={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:D},a=0,s=[],u=1,l=1,c=0,h=0;for(a=t.length;a--;)n=[parseInt(t[--a],10),parseInt(t[a+1],10)],n[0]>o.position.right&&(o.position.right=n[0]),n[0]<o.position.left&&(o.position.left=n[0]),n[1]>o.position.bottom&&(o.position.bottom=n[1]),n[1]<o.position.top&&(o.position.top=n[1]),s.push(n);if(r=o.width=Math.abs(o.position.right-o.position.left),i=o.height=Math.abs(o.position.bottom-o.position.top),"c"===e.abbrev())o.position={left:o.position.left+o.width/2,top:o.position.top+o.height/2};else{for(;r>0&&i>0&&u>0&&l>0;)for(r=Math.floor(r/2),i=Math.floor(i/2),e.x===R?u=r:e.x===j?u=o.width-r:u+=Math.floor(r/2),e.y===O?l=i:"bottom"===e.y?l=o.height-i:l+=Math.floor(i/2),a=s.length;a--&&!(s.length<2);)c=s[a][0]-o.position.left,h=s[a][1]-o.position.top,(e.x===R&&c>=u||e.x===j&&c<=u||e.x===B&&(c<u||c>o.width-u)||e.y===O&&h>=l||"bottom"===e.y&&h<=l||e.y===B&&(h<l||h>o.height-l))&&s.splice(a,1);o.position={left:s[0][0],top:s[0][1]}}return o},rect:function(t,e,n,r){return{width:Math.abs(n-t),height:Math.abs(r-e),position:{left:Math.min(t,n),top:Math.min(e,r)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(t,e,n,r,i){var o=z.polys._angles[i.abbrev()],a=0===o?0:n*Math.cos(o*Math.PI),s=r*Math.sin(o*Math.PI);return{width:2*n-Math.abs(a),height:2*r-Math.abs(s),position:{left:t+a,top:e+s},adjustable:D}},circle:function(t,e,n,r){return z.polys.ellipse(t,e,n,n,r)}},z.svg=function(t,n,i){for(var o,a,s,u,l,c,h,d,p,f=n[0],g=r(f.ownerSVGElement),v=f.ownerDocument,y=(parseInt(n.css("stroke-width"),10)||0)/2;!f.getBBox;)f=f.parentNode;if(!f.getBBox||!f.parentNode)return D;switch(f.nodeName){case"ellipse":case"circle":d=z.polys.ellipse(f.cx.baseVal.value,f.cy.baseVal.value,(f.rx||f.r).baseVal.value+y,(f.ry||f.r).baseVal.value+y,i);break;case"line":case"polygon":case"polyline":for(h=f.points||[{x:f.x1.baseVal.value,y:f.y1.baseVal.value},{x:f.x2.baseVal.value,y:f.y2.baseVal.value}],d=[],c=-1,u=h.numberOfItems||h.length;++c<u;)l=h.getItem?h.getItem(c):h[c],d.push.apply(d,[l.x,l.y]);d=z.polys.polygon(d,i);break;default:d=f.getBBox(),d={width:d.width,height:d.height,position:{left:d.x,top:d.y}}}return p=d.position,g=g[0],g.createSVGPoint&&(a=f.getScreenCTM(),h=g.createSVGPoint(),h.x=p.left,h.y=p.top,s=h.matrixTransform(a),p.left=s.x,p.top=s.y),v!==e&&"mouse"!==t.position.target&&(o=r((v.defaultView||v.parentWindow).frameElement).offset())&&(p.left+=o.left,p.top+=o.top),v=r(v),p.left+=v.scrollLeft(),p.top+=v.scrollTop(),d},z.imagemap=function(t,e,n){e.jquery||(e=r(e));var i,o,a,s,u,l=(e.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),c=r('img[usemap="#'+e.parent("map").attr("name")+'"]'),h=r.trim(e.attr("coords")),d=h.replace(/,$/,"").split(",");if(!c.length)return D;if("polygon"===l)s=z.polys.polygon(d,n);else{if(!z.polys[l])return D;for(a=-1,u=d.length,o=[];++a<u;)o.push(parseInt(d[a],10));s=z.polys[l].apply(this,o.concat(n))}return i=c.offset(),i.left+=Math.ceil((c.outerWidth(D)-c.width())/2),i.top+=Math.ceil((c.outerHeight(D)-c.height())/2),s.position.left+=i.left,s.position.top+=i.top,s};var yt;r.extend(E.prototype,{_scroll:function(){var e=this.qtip.elements.overlay;e&&(e[0].style.top=r(t).scrollTop()+"px")},init:function(n){var i=n.tooltip;r("select, object").length<1&&(this.bgiframe=n.elements.bgiframe=r('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>').appendTo(i),n._bind(i,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=r("<div/>",{id:V+"-rcontainer"}).appendTo(e.body),n.elements.overlay&&n.elements.overlay.addClass("qtipmodal-ie6fix")&&(n._bind(t,["scroll","resize"],this._scroll,this._ns,this),n._bind(i,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var t,e,n=this.qtip.tooltip,r={height:n.outerHeight(D),width:n.outerWidth(D)},i=this.qtip.plugins.tip,o=this.qtip.elements.tip;e=parseInt(n.css("borderLeftWidth"),10)||0,e={left:-e,top:-e},i&&o&&(t="x"===i.corner.precedance?[I,R]:["height",O],e[t[1]]-=o[t[0]]()),this.bgiframe.css(e).css(r)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var t,e,n,r,i=this.qtip.tooltip,o=this.qtip.options.style,a=this.qtip.options.position.container;return this.qtip.drawing=1,o.height&&i.css("height",o.height),o.width?i.css(I,o.width):(i.css(I,"").appendTo(this.redrawContainer),e=i.width(),e%2<1&&(e+=1),n=i.css("maxWidth")||"",r=i.css("minWidth")||"",t=(n+r).indexOf("%")>-1?a.width()/100:0,n=(n.indexOf("%")>-1?t:1*parseInt(n,10))||e,r=(r.indexOf("%")>-1?t:1*parseInt(r,10))||0,e=n+r?Math.min(Math.max(e,r),n):e,i.css(I,Math.round(e)).appendTo(a)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([t,this.qtip.tooltip],this._ns)}}),yt=z.ie6=function(t){return 6===tt.ie?new E(t):D},yt.initialize="render",S.ie6={"^content|style$":function(){this.redraw()}}})}(window,document)},{}],207:[function(t,e,n){!function(t,r){"function"==typeof define&&define.amd?define(function(){return t.returnExportsGlobal=r()}):"object"==typeof n?e.exports=r():t.Springy=r()}(this,function(){var t={},e=t.Graph=function(){this.nodeSet={},this.nodes=[],this.edges=[],this.adjacency={},this.nextNodeId=0,this.nextEdgeId=0,this.eventListeners=[]},n=t.Node=function(t,e){this.id=t,this.data=void 0!==e?e:{}},r=t.Edge=function(t,e,n,r){this.id=t,this.source=e,this.target=n,this.data=void 0!==r?r:{}};e.prototype.addNode=function(t){return t.id in this.nodeSet||this.nodes.push(t),this.nodeSet[t.id]=t,this.notify(),t},e.prototype.addNodes=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],r=new n(e,{label:e});this.addNode(r)}},e.prototype.addEdge=function(t){var e=!1;return this.edges.forEach(function(n){t.id===n.id&&(e=!0)}),e||this.edges.push(t),t.source.id in this.adjacency||(this.adjacency[t.source.id]={}),t.target.id in this.adjacency[t.source.id]||(this.adjacency[t.source.id][t.target.id]=[]),e=!1,this.adjacency[t.source.id][t.target.id].forEach(function(n){t.id===n.id&&(e=!0)}),e||this.adjacency[t.source.id][t.target.id].push(t),this.notify(),t},e.prototype.addEdges=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],n=this.nodeSet[e[0]];if(void 0==n)throw new TypeError("invalid node name: "+e[0]);var r=this.nodeSet[e[1]];if(void 0==r)throw new TypeError("invalid node name: "+e[1]);var i=e[2];this.newEdge(n,r,i)}},e.prototype.newNode=function(t){var e=new n(this.nextNodeId++,t);return this.addNode(e),e},e.prototype.newEdge=function(t,e,n){var i=new r(this.nextEdgeId++,t,e,n);return this.addEdge(i),i},e.prototype.loadJSON=function(t){("string"==typeof t||t instanceof String)&&(t=JSON.parse(t)),("nodes"in t||"edges"in t)&&(this.addNodes.apply(this,t.nodes),this.addEdges.apply(this,t.edges))},e.prototype.getEdges=function(t,e){return t.id in this.adjacency&&e.id in this.adjacency[t.id]?this.adjacency[t.id][e.id]:[]},e.prototype.removeNode=function(t){t.id in this.nodeSet&&delete this.nodeSet[t.id];for(var e=this.nodes.length-1;e>=0;e--)this.nodes[e].id===t.id&&this.nodes.splice(e,1);this.detachNode(t)},e.prototype.detachNode=function(t){this.edges.slice().forEach(function(e){e.source.id!==t.id&&e.target.id!==t.id||this.removeEdge(e)},this),this.notify()},e.prototype.removeEdge=function(t){for(var e=this.edges.length-1;e>=0;e--)this.edges[e].id===t.id&&this.edges.splice(e,1);for(var n in this.adjacency){for(var r in this.adjacency[n]){for(var i=this.adjacency[n][r],o=i.length-1;o>=0;o--)this.adjacency[n][r][o].id===t.id&&this.adjacency[n][r].splice(o,1);0==this.adjacency[n][r].length&&delete this.adjacency[n][r]}s(this.adjacency[n])&&delete this.adjacency[n]}this.notify()},e.prototype.merge=function(t){var e=[];t.nodes.forEach(function(t){e.push(this.addNode(new n(t.id,t.data)))},this),t.edges.forEach(function(t){var n=e[t.from],i=e[t.to],o=t.directed?o=t.type+"-"+n.id+"-"+i.id:n.id<i.id?t.type+"-"+n.id+"-"+i.id:t.type+"-"+i.id+"-"+n.id;this.addEdge(new r(o,n,i,t.data)).data.type=t.type},this)},e.prototype.filterNodes=function(t){this.nodes.slice().forEach(function(e){t(e)||this.removeNode(e)},this)},e.prototype.filterEdges=function(t){this.edges.slice().forEach(function(e){t(e)||this.removeEdge(e)},this)},e.prototype.addGraphListener=function(t){this.eventListeners.push(t)},e.prototype.notify=function(){this.eventListeners.forEach(function(t){t.graphChanged()})};var i=t.Layout={};i.ForceDirected=function(t,e,n,r,i){this.graph=t,this.stiffness=e,this.repulsion=n,this.damping=r,this.minEnergyThreshold=i||.01,this.nodePoints={},this.edgeSprings={}},i.ForceDirected.prototype.point=function(t){if(!(t.id in this.nodePoints)){var e=void 0!==t.data.mass?t.data.mass:1;this.nodePoints[t.id]=new i.ForceDirected.Point(o.random(),e)}return this.nodePoints[t.id]},i.ForceDirected.prototype.spring=function(t){if(!(t.id in this.edgeSprings)){var e=void 0!==t.data.length?t.data.length:1,n=!1,r=this.graph.getEdges(t.source,t.target);if(r.forEach(function(t){n===!1&&t.id in this.edgeSprings&&(n=this.edgeSprings[t.id])},this),n!==!1)return new i.ForceDirected.Spring(n.point1,n.point2,0,0);this.graph.getEdges(t.target,t.source);if(r.forEach(function(t){n===!1&&t.id in this.edgeSprings&&(n=this.edgeSprings[t.id])},this),n!==!1)return new i.ForceDirected.Spring(n.point2,n.point1,0,0);this.edgeSprings[t.id]=new i.ForceDirected.Spring(this.point(t.source),this.point(t.target),e,this.stiffness)}return this.edgeSprings[t.id]},i.ForceDirected.prototype.eachNode=function(t){var e=this;this.graph.nodes.forEach(function(n){t.call(e,n,e.point(n))})},i.ForceDirected.prototype.eachEdge=function(t){var e=this;this.graph.edges.forEach(function(n){t.call(e,n,e.spring(n))})},i.ForceDirected.prototype.eachSpring=function(t){var e=this;this.graph.edges.forEach(function(n){t.call(e,e.spring(n))})},i.ForceDirected.prototype.applyCoulombsLaw=function(){this.eachNode(function(t,e){this.eachNode(function(t,n){if(e!==n){var r=e.p.subtract(n.p),i=r.magnitude()+.1,o=r.normalise();e.applyForce(o.multiply(this.repulsion).divide(i*i*.5)),n.applyForce(o.multiply(this.repulsion).divide(i*i*-.5))}})})},i.ForceDirected.prototype.applyHookesLaw=function(){this.eachSpring(function(t){var e=t.point2.p.subtract(t.point1.p),n=t.length-e.magnitude(),r=e.normalise();t.point1.applyForce(r.multiply(t.k*n*-.5)),t.point2.applyForce(r.multiply(t.k*n*.5))})},i.ForceDirected.prototype.attractToCentre=function(){this.eachNode(function(t,e){var n=e.p.multiply(-1);e.applyForce(n.multiply(this.repulsion/50))})},i.ForceDirected.prototype.updateVelocity=function(t){this.eachNode(function(e,n){n.v=n.v.add(n.a.multiply(t)).multiply(this.damping),n.a=new o(0,0)})},i.ForceDirected.prototype.updatePosition=function(t){this.eachNode(function(e,n){n.p=n.p.add(n.v.multiply(t))})},i.ForceDirected.prototype.totalEnergy=function(t){var e=0;return this.eachNode(function(t,n){var r=n.v.magnitude();e+=.5*n.m*r*r}),e};t.requestAnimationFrame=function(t,e){return function(){return t.apply(e,arguments)}}(this.requestAnimationFrame||this.webkitRequestAnimationFrame||this.mozRequestAnimationFrame||this.oRequestAnimationFrame||this.msRequestAnimationFrame||function(t,e){this.setTimeout(t,10)},this),i.ForceDirected.prototype.start=function(e,n,r){var i=this;this._started||(this._started=!0,this._stop=!1,void 0!==r&&r(),t.requestAnimationFrame(function r(){i.tick(.03),void 0!==e&&e(),i._stop||i.totalEnergy()<i.minEnergyThreshold?(i._started=!1,void 0!==n&&n()):t.requestAnimationFrame(r)}))},i.ForceDirected.prototype.stop=function(){this._stop=!0},i.ForceDirected.prototype.tick=function(t){this.applyCoulombsLaw(),this.applyHookesLaw(),this.attractToCentre(),this.updateVelocity(t),this.updatePosition(t)},i.ForceDirected.prototype.nearest=function(t){var e={node:null,point:null,distance:null},n=this;return this.graph.nodes.forEach(function(r){var i=n.point(r),o=i.p.subtract(t).magnitude();(null===e.distance||o<e.distance)&&(e={node:r,point:i,distance:o})}),e},i.ForceDirected.prototype.getBoundingBox=function(){var t=new o(-2,-2),e=new o(2,2);this.eachNode(function(n,r){r.p.x<t.x&&(t.x=r.p.x),r.p.y<t.y&&(t.y=r.p.y),r.p.x>e.x&&(e.x=r.p.x),r.p.y>e.y&&(e.y=r.p.y)});var n=e.subtract(t).multiply(.07);return{bottomleft:t.subtract(n),topright:e.add(n)}};var o=t.Vector=function(t,e){this.x=t,this.y=e};o.random=function(){return new o(10*(Math.random()-.5),10*(Math.random()-.5))},o.prototype.add=function(t){return new o(this.x+t.x,this.y+t.y)},o.prototype.subtract=function(t){return new o(this.x-t.x,this.y-t.y)},o.prototype.multiply=function(t){return new o(this.x*t,this.y*t)},o.prototype.divide=function(t){return new o(this.x/t||0,this.y/t||0)},o.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},o.prototype.normal=function(){return new o(-this.y,this.x)},o.prototype.normalise=function(){return this.divide(this.magnitude())},i.ForceDirected.Point=function(t,e){this.p=t,this.m=e,this.v=new o(0,0),this.a=new o(0,0)},i.ForceDirected.Point.prototype.applyForce=function(t){this.a=this.a.add(t.divide(this.m))},i.ForceDirected.Spring=function(t,e,n,r){this.point1=t,this.point2=e,this.length=n,this.k=r};var a=t.Renderer=function(t,e,n,r,i,o){this.layout=t,this.clear=e,this.drawEdge=n,this.drawNode=r,this.onRenderStop=i,this.onRenderStart=o,this.layout.graph.addGraphListener(this)};a.prototype.graphChanged=function(t){this.start()},a.prototype.start=function(t){var e=this;this.layout.start(function(){e.clear(),e.layout.eachEdge(function(t,n){e.drawEdge(t,n.point1.p,n.point2.p)}),e.layout.eachNode(function(t,n){e.drawNode(t,n.p)})},this.onRenderStop,this.onRenderStart)},a.prototype.stop=function(){this.layout.stop()},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),r=0;r<o;){var a;r in i&&(a=i[r],t.call(n,a,r,i)),r++}});var s=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};return t})},{}],208:[function(t,e,n){(function(){function t(t){function e(e,n,r,i,o,a){for(;o>=0&&o<a;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}return function(n,r,i,o){r=w(r,o,4);var a=!L(n)&&b.keys(n),s=(a||n).length,u=t>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=t),e(n,r,i,a,u,s)}}function r(t){return function(e,n,r){n=_(n,r);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function i(t,e,n){return function(r,i,o){var a=0,s=S(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(d.call(r,a,s),b.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}function o(t,e){var n=P.length,r=t.constructor,i=b.isFunction(r)&&r.prototype||l,o="constructor";for(b.has(t,o)&&!b.contains(e,o)&&e.push(o);n--;)(o=P[n])in t&&t[o]!==i[o]&&!b.contains(e,o)&&e.push(o)}var a=this,s=a._,u=Array.prototype,l=Object.prototype,c=Function.prototype,h=u.push,d=u.slice,p=l.toString,f=l.hasOwnProperty,g=Array.isArray,v=Object.keys,y=c.bind,m=Object.create,x=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};void 0!==n?(void 0!==e&&e.exports&&(n=e.exports=b),n._=b):a._=b,b.VERSION="1.8.3";var w=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?b.identity:b.isFunction(t)?w(t,e,n):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return _(t,e,1/0)};var E=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;u<s;u++){var l=a[u];e&&void 0!==n[l]||(n[l]=o[l])}return n}},k=function(t){if(!b.isObject(t))return{};if(m)return m(t);x.prototype=t;var e=new x;return x.prototype=null,e},T=function(t){return function(e){return null==e?void 0:e[t]}},N=Math.pow(2,53)-1,S=T("length"),L=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=N};b.each=b.forEach=function(t,e,n){e=w(e,n);var r,i;if(L(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=b.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},b.map=b.collect=function(t,e,n){e=_(e,n);for(var r=!L(t)&&b.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,e,n){var r;if(void 0!==(r=L(t)?b.findIndex(t,e,n):b.findKey(t,e,n))&&r!==-1)return t[r]},b.filter=b.select=function(t,e,n){var r=[];return e=_(e,n),b.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},b.reject=function(t,e,n){return b.filter(t,b.negate(_(e)),n)},b.every=b.all=function(t,e,n){e=_(e,n);for(var r=!L(t)&&b.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},b.some=b.any=function(t,e,n){e=_(e,n);for(var r=!L(t)&&b.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,n,r){return L(t)||(t=b.values(t)),("number"!=typeof n||r)&&(n=0),b.indexOf(t,e,n)>=0},b.invoke=function(t,e){var n=d.call(arguments,2),r=b.isFunction(e);return b.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,n){var r,i,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=L(t)?t:b.values(t);for(var s=0,u=t.length;s<u;s++)(r=t[s])>o&&(o=r)}else e=_(e,n),b.each(t,function(t,n,r){((i=e(t,n,r))>a||i===-(1/0)&&o===-(1/0))&&(o=t,a=i)});return o},b.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=L(t)?t:b.values(t);for(var s=0,u=t.length;s<u;s++)(r=t[s])<o&&(o=r)}else e=_(e,n),b.each(t,function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},b.shuffle=function(t){for(var e,n=L(t)?t:b.values(t),r=n.length,i=Array(r),o=0;o<r;o++)e=b.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},b.sample=function(t,e,n){return null==e||n?(L(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,n){return e=_(e,n),b.pluck(b.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var C=function(t){return function(e,n,r){var i={};return n=_(n,r),b.each(e,function(r,o){t(i,r,n(r,o,e))}),i}};b.groupBy=C(function(t,e,n){b.has(t,n)?t[n].push(e):t[n]=[e]}),b.indexBy=C(function(t,e,n){t[n]=e}),b.countBy=C(function(t,e,n){b.has(t,n)?t[n]++:t[n]=1}),b.toArray=function(t){return t?b.isArray(t)?d.call(t):L(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:L(t)?t.length:b.keys(t).length},b.partition=function(t,e,n){e=_(e,n);var r=[],i=[];return b.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},b.first=b.head=b.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},b.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,n){return d.call(t,null==e||n?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var D=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=S(t);a<s;a++){var u=t[a];if(L(u)&&(b.isArray(u)||b.isArguments(u))){e||(u=D(u,e,n));var l=0,c=u.length;for(i.length+=c;l<c;)i[o++]=u[l++]}else n||(i[o++]=u)}return i};b.flatten=function(t,e){return D(t,e,!1)},b.without=function(t){return b.difference(t,d.call(arguments,1))},b.uniq=b.unique=function(t,e,n,r){b.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,s=S(t);a<s;a++){var u=t[a],l=n?n(u,a,t):u;e?(a&&o===l||i.push(u),o=l):n?b.contains(o,l)||(o.push(l),i.push(u)):b.contains(i,u)||i.push(u)}return i},b.union=function(){return b.uniq(D(arguments,!0,!0))},b.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=S(t);r<i;r++){var o=t[r];if(!b.contains(e,o)){for(var a=1;a<n&&b.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},b.difference=function(t){var e=D(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,S).length||0,n=Array(e),r=0;r<e;r++)n[r]=b.pluck(t,r);return n},b.object=function(t,e){for(var n={},r=0,i=S(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},b.findIndex=r(1),b.findLastIndex=r(-1),b.sortedIndex=function(t,e,n,r){n=_(n,r,1);for(var i=n(e),o=0,a=S(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},b.indexOf=i(1,b.findIndex,b.sortedIndex),b.lastIndexOf=i(-1,b.findLastIndex),b.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var A=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=k(t.prototype),a=t.apply(o,i);return b.isObject(a)?a:o};b.bind=function(t,e){if(y&&t.bind===y)return y.apply(t,d.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return A(t,r,e,this,n.concat(d.call(arguments)))};return r},b.partial=function(t){var e=d.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===b?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return A(t,n,this,this,o)};return n},b.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)n=arguments[e],t[n]=b.bind(t[n],t);return t},b.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return b.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},b.delay=function(t,e){var n=d.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:b.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var l=b.now();s||n.leading!==!1||(s=l);var c=e-(l-s);return r=this,i=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=l,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(u,c)),o}},b.debounce=function(t,e,n){var r,i,o,a,s,u=function(){var l=b.now()-a;l<e&&l>=0?r=setTimeout(u,e-l):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=b.now();var l=n&&!r;return r||(r=setTimeout(u,e)),l&&(s=t.apply(o,i),o=i=null),s}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},b.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},b.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},b.once=b.partial(b.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(v)return v(t);var e=[];for(var n in t)b.has(t,n)&&e.push(n);return M&&o(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var n in t)e.push(n);return M&&o(t,e),e},b.values=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},b.mapObject=function(t,e,n){e=_(e,n);for(var r,i=b.keys(t),o=i.length,a={},s=0;s<o;s++)r=i[s],a[r]=e(t[r],r,t);return a},b.pairs=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},b.invert=function(t){for(var e={},n=b.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},b.functions=b.methods=function(t){var e=[];for(var n in t)b.isFunction(t[n])&&e.push(n);return e.sort()},b.extend=E(b.allKeys),b.extendOwn=b.assign=E(b.keys),b.findKey=function(t,e,n){e=_(e,n);for(var r,i=b.keys(t),o=0,a=i.length;o<a;o++)if(r=i[o],e(t[r],r,t))return r},b.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;b.isFunction(e)?(i=b.allKeys(a),r=w(e,n)):(i=D(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=i.length;s<u;s++){var l=i[s],c=a[l];r(c,l,a)&&(o[l]=c)}return o},b.omit=function(t,e,n){if(b.isFunction(e))e=b.negate(e);else{var r=b.map(D(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(r,e)}}return b.pick(t,e,n)},b.defaults=E(b.allKeys,!0),b.create=function(t,e){var n=k(t);return e&&b.extendOwn(n,e),n},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var n=b.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var I=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var i=p.call(t);if(i!==p.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(b.isFunction(a)&&a instanceof a&&b.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if((u=t.length)!==e.length)return!1;for(;u--;)if(!I(t[u],e[u],n,r))return!1}else{var l,c=b.keys(t);if(u=c.length,b.keys(e).length!==u)return!1;for(;u--;)if(l=c[u],!b.has(e,l)||!I(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(t,e){return I(t,e)},b.isEmpty=function(t){return null==t||(L(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length)},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=g||function(t){return"[object Array]"===p.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return p.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),
"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===p.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&f.call(t,e)},b.noConflict=function(){return a._=s,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=T,b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,n){var r=Array(Math.max(0,t));e=w(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=b.invert(O),j=function(t){var e=function(e){return t[e]},n="(?:"+b.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};b.escape=j(O),b.unescape=j(R),b.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),b.isFunction(r)?r.call(t):r};var B=0;b.uniqueId=function(t){var e=++B+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=function(t){return"\\"+F[t]};b.template=function(t,e,n){!e&&n&&(e=n),e=b.defaults({},e,b.templateSettings);var r=RegExp([(e.escape||/(.)^/).source,(e.interpolate||/(.)^/).source,(e.evaluate||/(.)^/).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(/\\|'|\r|\n|\u2028|\u2029/g,q),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return a.call(this,t,b)},u=e.variable||"obj";return s.source="function("+u+"){\n"+o+"}",s},b.chain=function(t){var e=b(t);return e._chain=!0,e};var z=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var n=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),z(this,n.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];b.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],z(this,n)}}),b.each(["concat","join","slice"],function(t){var e=u[t];b.prototype[t]=function(){return z(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],209:[function(t,e,n){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}r(t("./src/adaptor")),r(t("./src/d3adaptor")),r(t("./src/descent")),r(t("./src/geom")),r(t("./src/gridrouter")),r(t("./src/handledisconnected")),r(t("./src/layout")),r(t("./src/layout3d")),r(t("./src/linklengths")),r(t("./src/powergraph")),r(t("./src/pqueue")),r(t("./src/rbtree")),r(t("./src/rectangle")),r(t("./src/shortestpaths")),r(t("./src/vpsc")),r(t("./src/batch"))},{"./src/adaptor":210,"./src/batch":211,"./src/d3adaptor":212,"./src/descent":215,"./src/geom":216,"./src/gridrouter":217,"./src/handledisconnected":218,"./src/layout":219,"./src/layout3d":220,"./src/linklengths":221,"./src/powergraph":222,"./src/pqueue":223,"./src/rbtree":224,"./src/rectangle":225,"./src/shortestpaths":226,"./src/vpsc":227}],210:[function(t,e,n){"use strict";function r(t){return new a(t)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("./layout"),a=function(t){function e(e){var n=t.call(this)||this,r=e;return r.trigger&&(n.trigger=r.trigger),r.kick&&(n.kick=r.kick),r.drag&&(n.drag=r.drag),r.on&&(n.on=r.on),n.dragstart=n.dragStart=o.Layout.dragStart,n.dragend=n.dragEnd=o.Layout.dragEnd,n}return i(e,t),e.prototype.trigger=function(t){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(t,e){return this},e}(o.Layout);n.LayoutAdaptor=a,n.adaptor=r},{"./layout":219}],211:[function(t,e,n){"use strict";function r(t,e,n,r){return t.cola.start(0,0,0,10,!1),i(t.cola.nodes(),t.cola.groups(),n,r).routeEdges(t.powerGraph.powerEdges,e,function(t){return t.source.routerNode.id},function(t){return t.target.routerNode.id})}function i(t,e,n,r){t.forEach(function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-n)}}),e.forEach(function(e){e.routerNode={bounds:e.bounds.inflate(-r),children:(void 0!==e.groups?e.groups.map(function(e){return t.length+e.id}):[]).concat(void 0!==e.leaves?e.leaves.map(function(t){return t.index}):[])}});var i=t.concat(e).map(function(t,e){return t.routerNode.id=e,t.routerNode});return new s.GridRouter(i,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},n-r)}function o(t,e,n){var r;t.nodes.forEach(function(t,e){return t.index=e}),(new a.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(t){r=t,r.groups.forEach(function(t){return t.padding=n})});var i=t.nodes.length,o=[],s=t.nodes.slice(0);return s.forEach(function(t,e){return t.index=e}),r.groups.forEach(function(t){var e=t.index=t.id+i;s.push(t),void 0!==t.leaves&&t.leaves.forEach(function(t){return o.push({source:e,target:t.index})}),void 0!==t.groups&&t.groups.forEach(function(t){return o.push({source:e,target:t.id+i})})}),r.powerEdges.forEach(function(t){o.push({source:t.source.index,target:t.target.index})}),(new a.Layout).size(e).nodes(s).links(o).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new a.Layout).convergenceThreshold(.001).size(e).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(t){r=t,r.groups.forEach(function(t){t.padding=n})}).start(50,0,100,0,!1),powerGraph:r}}var a=t("./layout"),s=t("./gridrouter");n.gridify=r,n.powerGraphGridLayout=o},{"./gridrouter":217,"./layout":219}],212:[function(t,e,n){"use strict";function r(t){return!t||i(t)?new o.D3StyleLayoutAdaptor:new a.D3StyleLayoutAdaptor(t)}function i(t){return t.version&&null!==t.version.match(/^3\./)}var o=t("./d3v3adaptor"),a=t("./d3v4adaptor");n.d3adaptor=r},{"./d3v3adaptor":213,"./d3v4adaptor":214}],213:[function(t,e,n){"use strict";function r(){return new a}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("./layout"),a=function(t){function e(){var e=t.call(this)||this;e.event=d3.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var n=e;return e.drag=function(){if(!t)var t=d3.behavior.drag().origin(o.Layout.dragOrigin).on("dragstart.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",function(t){o.Layout.drag(t,d3.event),n.resume()}).on("dragend.d3adaptor",o.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},e}return i(e,t),e.prototype.trigger=function(t){var e={type:o.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[e.type](e)},e.prototype.kick=function(){var e=this;d3.timer(function(){return t.prototype.tick.call(e)})},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(o.EventType[t],e),this},e}(o.Layout);n.D3StyleLayoutAdaptor=a,n.d3adaptor=r},{"./layout":219}],214:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("./layout"),o=function(t){function e(e){var n=t.call(this)||this;n.d3Context=e,n.event=e.dispatch(i.EventType[i.EventType.start],i.EventType[i.EventType.tick],i.EventType[i.EventType.end]);var r=n;return n.drag=function(){if(!t)var t=e.drag().subject(i.Layout.dragOrigin).on("start.d3adaptor",i.Layout.dragStart).on("drag.d3adaptor",function(t){i.Layout.drag(t,e.event),r.resume()}).on("end.d3adaptor",i.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},n}return r(e,t),e.prototype.trigger=function(t){var e={type:i.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(e.type,e)},e.prototype.kick=function(){var e=this,n=this.d3Context.timer(function(){return t.prototype.tick.call(e)&&n.stop()})},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(i.EventType[t],e),this},e}(i.Layout);n.D3StyleLayoutAdaptor=o},{"./layout":219}],215:[function(t,e,n){"use strict";var r=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(Number(e),this.locks[e])},t}();n.Locks=r;var i=function(){function t(t,e,n){void 0===n&&(n=null),this.D=e,this.G=n,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new o,this.project=null,this.x=t,this.k=t.length;var i=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new r,this.minD=Number.MAX_VALUE;for(var a,s=i;s--;)for(a=i;--a>s;){var u=e[s][a];u>0&&u<this.minD&&(this.minD=u)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(i),this.H[s]=new Array(i),a=i;a--;)this.H[s][a]=new Array(i);this.Hd[s]=new Array(i),this.a[s]=new Array(i),this.b[s]=new Array(i),this.c[s]=new Array(i),this.d[s]=new Array(i),this.e[s]=new Array(i),this.ia[s]=new Array(i),this.ib[s]=new Array(i),this.xtmp[s]=new Array(i)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map(function(e){return e*=t.minD/n})},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,u=0;u<n;++u){for(r=0;r<this.k;++r)a[r]=this.g[r][u]=0;for(var l=0;l<n;++l)if(u!==l){for(var c=n;c--;){var h=0;for(r=0;r<this.k;++r){var d=i[r]=t[r][u]-t[r][l];h+=o[r]=d*d}if(h>1e-9)break;var p=this.offsetDir();for(r=0;r<this.k;++r)t[r][l]+=p[r]}var f=Math.sqrt(h),g=this.D[u][l],v=null!=this.G?this.G[u][l]:1;if(v>1&&f>g||!isFinite(g))for(r=0;r<this.k;++r)this.H[r][u][l]=0;else{v>1&&(v=1);var y=g*g,m=2*v*(f-g)/(y*f),x=f*f*f,b=2*-v/(y*x);for(isFinite(m)||console.log(m),r=0;r<this.k;++r)this.g[r][u]+=i[r]*m,a[r]-=this.H[r][u][l]=b*(x+g*(o[r]-h)+f*h)}}for(r=0;r<this.k;++r)s=Math.max(s,this.H[r][u][u]=a[r])}for(var w=this.snapGridSize/2,_=this.snapGridSize,E=this.snapStrength,k=E/(w*w),T=this.numGridSnapNodes,u=0;u<T;++u)for(r=0;r<this.k;++r){var N=this.x[r][u],S=N/_,L=S%1,C=S-L,D=Math.abs(L),d=D<=.5?N-C*_:N>0?N-(C+1)*_:N-(C-1)*_;-w<d&&d<=w&&(this.scaleSnapByMaxH?(this.g[r][u]+=s*k*d,this.H[r][u][u]+=s*k):(this.g[r][u]+=k*d,this.H[r][u][u]+=k))}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=s,e.g[r][n]-=s*(i[r]-t[r][n])})}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)e[i][o]=t[i][o]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply(function(r,i){return n.e[r][i]=t[r][i]-e[r][i]});var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,o=e.x[t][r]-i;n+=o*o,e.x[t][r]=i}),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2})},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][e]-this.x[a][r];o+=s*s}o=Math.sqrt(o);var u=this.D[e][r];if(isFinite(u)){var l=u-o,c=u*u;t+=l*l/c}}return t},t}();i.zeroDistance=1e-10,n.Descent=i;var o=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();n.PseudoRandom=o},{}],216:[function(t,e,n){"use strict";function r(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function i(t,e,n){return r(t,e,n)>0}function o(t,e,n){return r(t,e,n)<0}function a(t){var e,n=t.slice(0).sort(function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y}),i=t.length,o=n[0].x;for(e=1;e<i&&n[e].x===o;++e);var a=e-1,s=[];if(s.push(n[0]),a===i-1)n[a].y!==n[0].y&&s.push(n[a]);else{var u,l=i-1,c=n[i-1].x;for(e=i-2;e>=0&&n[e].x===c;e--);for(u=e+1,e=a;++e<=u;)if(!(r(n[0],n[u],n[e])>=0&&e<u)){for(;s.length>1&&!(r(s[s.length-2],s[s.length-1],n[e])>0);)s.length-=1;0!=e&&s.push(n[e])}l!=u&&s.push(n[l]);var h=s.length;for(e=u;--e>=a;)if(!(r(n[l],n[a],n[e])>=0&&e>a)){for(;s.length>h&&!(r(s[s.length-2],s[s.length-1],n[e])>0);)s.length-=1;0!=e&&s.push(n[e])}}return s}function s(t,e,n){e.slice(0).sort(function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)}).forEach(n)}function u(t,e){return{rtan:l(t,e),ltan:c(t,e)}}function l(t,e){var n,r,a,s,u,l=e.length-1;if(o(t,e[1],e[0])&&!i(t,e[l-1],e[0]))return 0;for(n=0,r=l;;){if(r-n==1)return i(t,e[n],e[r])?n:r;if(a=Math.floor((n+r)/2),(u=o(t,e[a+1],e[a]))&&!i(t,e[a-1],e[a]))return a;s=i(t,e[n+1],e[n]),s?u?r=a:i(t,e[n],e[a])?r=a:n=a:u&&o(t,e[n],e[a])?r=a:n=a}}function c(t,e){var n,r,a,s,u,l=e.length-1;if(i(t,e[l-1],e[0])&&!o(t,e[1],e[0]))return 0;for(n=0,r=l;;){if(r-n==1)return o(t,e[n],e[r])?n:r;if(a=Math.floor((n+r)/2),u=o(t,e[a+1],e[a]),i(t,e[a-1],e[a])&&!u)return a;s=o(t,e[n+1],e[n]),s?u?o(t,e[n],e[a])?r=a:n=a:r=a:u?n=a:i(t,e[n],e[a])?r=a:n=a}}function h(t,e,n,r,i,o){var a,s;a=n(e[0],t),s=r(t[a],e);for(var u=!1;!u;){for(u=!0;;){if(a===t.length-1&&(a=0),i(e[s],t[a],t[a+1]))break;++a}for(;;){if(0===s&&(s=e.length-1),o(t[a],e[s],e[s-1]))break;--s,u=!1}}return{t1:a,t2:s}}function d(t,e){var n=p(e,t);return{t1:n.t2,t2:n.t1}}function p(t,e){return h(t,e,l,c,i,o)}function f(t,e){return h(t,e,c,c,o,o)}function g(t,e){return h(t,e,l,l,i,i)}function v(t,e){for(var n=[],r=1,i=e.length;r<i;++r){var o=_.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,e[r-1].x,e[r-1].y,e[r].x,e[r].y);o&&n.push(o)}return n}function y(t,e){for(var n=t.length-1,i=e.length-1,o=new S,a=0;a<n;++a)for(var s=0;s<i;++s){var u=t[0==a?n-1:a-1],l=t[a],c=t[a+1],h=e[0==s?i-1:s-1],d=e[s],p=e[s+1],f=r(u,l,d),g=r(l,h,d),v=r(l,d,p),y=r(h,d,l),m=r(d,u,l),x=r(d,l,c);f>=0&&g>=0&&v<0&&y>=0&&m>=0&&x<0?o.ll=new N(a,s):f<=0&&g<=0&&v>0&&y<=0&&m<=0&&x>0?o.rr=new N(a,s):f<=0&&g>0&&v<=0&&y>=0&&m<0&&x>=0?o.rl=new N(a,s):f>=0&&g<0&&v>=0&&y<=0&&m>0&&x<=0&&(o.lr=new N(a,s))}return o}function m(t,e){for(var n=1,r=e.length;n<r;++n)if(o(e[n-1],e[n],t))return!1;return!0}function x(t,e){return!t.every(function(t){return!m(t,e)})}function b(t,e){if(x(t,e))return!0;if(x(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],o=t[n-1];if(v(new k(o.x,o.y,i.x,i.y),e).length>0)return!0}return!1}var w=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},_=t("./rectangle"),E=function(){function t(){}return t}();n.Point=E;var k=function(){function t(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}return t}();n.LineSegment=k;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(E);n.PolyPoint=T,n.isLeft=r,n.ConvexHull=a,n.clockwiseRadialSweep=s,n.tangent_PolyPolyC=h,n.LRtangent_PolyPolyC=d,n.RLtangent_PolyPolyC=p,n.LLtangent_PolyPolyC=f,n.RRtangent_PolyPolyC=g;var N=function(){function t(t,e){this.t1=t,this.t2=e}return t}();n.BiTangent=N;var S=function(){function t(){}return t}();n.BiTangents=S;var L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(E);n.TVGPoint=L;var C=function(){function t(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this}return t}();n.VisibilityVertex=C;var D=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();n.VisibilityEdge=D;var A=function(){function t(t,e){if(this.P=t,this.V=[],this.E=[],e)this.V=e.V.slice(0),this.E=e.E.slice(0);else{for(var n=t.length,r=0;r<n;r++)for(var i=t[r],o=0;o<i.length;++o){var a=i[o],s=new C(this.V.length,r,o,a);this.V.push(s),o>0&&this.E.push(new D(i[o-1].vv,s))}for(var r=0;r<n-1;r++)for(var u=t[r],o=r+1;o<n;o++){var l=t[o],c=y(u,l);for(var h in c){var d=c[h],p=u[d.t1],f=l[d.t2];this.addEdgeIfVisible(p,f,r,o)}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new k(t.x,t.y,e.x,e.y),n,r)||this.E.push(new D(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n=this.P.length;this.V.push(new C(this.V.length,n,0,t));for(var r=0;r<n;++r)if(r!==e){var i=this.P[r],o=u(t,i);this.addEdgeIfVisible(t,i[o.ltan],e,r),this.addEdgeIfVisible(t,i[o.rtan],e,r)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&v(t,this.P[r]).length>0)return!0;return!1},t}();n.TangentVisibilityGraph=A,n.tangents=y,n.polysOverlap=b},{"./rectangle":225}],217:[function(t,e,n){"use strict";var r=t("./rectangle"),i=t("./vpsc"),o=t("./shortestpaths"),a=function(){function t(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf=void 0===n||0===n.length}return t}();n.NodeWrapper=a;var s=function(){function t(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i}return t}();n.Vert=s;var u=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),o=t.findMatch(e,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;a<n;a++){o[a]=new Array(r);for(var s=0;s<r;s++)if(t[a]===e[s]){var u=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;u>i.length&&(i.length=u,i.si=a-u+1,i.ti=s-u+1)}else o[a][s]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();n.LongestCommonSubsequence=u;var l=function(){function t(t,e,n){void 0===n&&(n=12);var i=this;this.originalnodes=t,this.groupPadding=n,this.leaves=null,this.nodes=t.map(function(t,n){return new a(n,e.getBounds(t),e.getChildren(t))}),this.leaves=this.nodes.filter(function(t){return t.leaf}),this.groups=this.nodes.filter(function(t){return!t.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(t){return t.children.forEach(function(e){return i.nodes[e].parent=t})}),this.root={children:[]},this.nodes.forEach(function(t){void 0===t.parent&&(t.parent=i.root,i.root.children.push(t.id)),t.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(t,e){return i.getDepth(t)-i.getDepth(e)}),this.backToFront.slice(0).reverse().filter(function(t){return!t.leaf}).forEach(function(t){var e=r.Rectangle.empty();t.children.forEach(function(t){return e=e.union(i.nodes[t].rect)}),t.rect=e.inflate(i.groupPadding)});var o=this.midPoints(this.cols.map(function(t){return t.pos})),u=this.midPoints(this.rows.map(function(t){return t.pos})),l=o[0],c=o[o.length-1],h=u[0],d=u[u.length-1],p=this.rows.map(function(t){return{x1:l,x2:c,y1:t.pos,y2:t.pos}}).concat(u.map(function(t){return{x1:l,x2:c,y1:t,y2:t}})),f=this.cols.map(function(t){return{x1:t.pos,x2:t.pos,y1:h,y2:d}}).concat(o.map(function(t){return{x1:t,x2:t,y1:h,y2:d}})),g=p.concat(f);g.forEach(function(t){return t.verts=[]}),this.verts=[],this.edges=[],p.forEach(function(t){return f.forEach(function(e){var n=new s(i.verts.length,e.x1,t.y1);t.verts.push(n),e.verts.push(n),i.verts.push(n);for(var r=i.backToFront.length;r-- >0;){var o=i.backToFront[r],a=o.rect,u=Math.abs(n.x-a.cx()),l=Math.abs(n.y-a.cy());if(u<a.width()/2&&l<a.height()/2){n.node=o;break}}})}),g.forEach(function(t,e){i.nodes.forEach(function(e,n){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach(function(n,r){var o=new s(i.verts.length,n.x,n.y,e,t);i.verts.push(o),t.verts.push(o),e.ports.push(o)})});var n=Math.abs(t.y1-t.y2)<.1,r=function(t,e){return n?e.x-t.x:e.y-t.y};t.verts.sort(r);for(var o=1;o<t.verts.length;o++){var a=t.verts[o-1],u=t.verts[o];a.node&&a.node===u.node&&a.node.leaf||i.edges.push({source:a.id,target:u.id,length:Math.abs(r(a,u))})}})}return t.prototype.avg=function(t){return t.reduce(function(t,e){return t+e})/t.length},t.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter(function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)}),i={nodes:r,pos:this.avg(r.map(function(e){return e.rect["c"+t]()}))};e.push(i),i.nodes.forEach(function(t){return n.splice(n.indexOf(t),1)})}return e.sort(function(t,e){return t.pos-e.pos}),e},t.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},t.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},t.prototype.findLineage=function(t){var e=[t];do{t=t.parent,e.push(t)}while(t!==this.root);return e.reverse()},t.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},t.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach(function(t){return i[t.id]={}});var o=r.commonAncestor.children.filter(function(t){return!(t in i)});return r.lineages.filter(function(t){return t.parent!==r.commonAncestor}).forEach(function(t){return o=o.concat(t.parent.children.filter(function(e){return e!==t.id}))}),o.map(function(t){return n.nodes[t]})},t.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=t[i],a=0;a<o.length;a++){var s=o[a];s.edgeid=i,s.i=a;var u=s[1][e]-s[0][e];Math.abs(u)<.1&&r.push(s)}r.sort(function(t,n){return t[0][e]-n[0][e]});for(var l=[],c=null,h=0;h<r.length;h++){var s=r[h];(!c||Math.abs(s[0][e]-c.pos)>.1)&&(c={pos:s[0][e],segments:[]},l.push(c)),c.segments.push(s)}return l},t.nudgeSegs=function(t,e,n,r,o,a){var s=r.length;if(!(s<=1)){for(var u=r.map(function(e){return new i.Variable(e[0][t])}),l=[],c=0;c<s;c++)for(var h=0;h<s;h++)if(c!==h){var d=r[c],p=r[h],f=d.edgeid,g=p.edgeid,v=-1,y=-1;"x"==t?o(f,g)&&(d[0][e]<d[1][e]?(v=h,y=c):(v=c,y=h)):o(f,g)&&(d[0][e]<d[1][e]?(v=c,y=h):(v=h,y=c)),v>=0&&l.push(new i.Constraint(u[v],u[y],a))}new i.Solver(u,l).solve(),u.forEach(function(e,i){var o=r[i],a=e.position();o[0][t]=o[1][t]=a;var s=n[o.edgeid];o.i>0&&(s[o.i-1][1][t]=a),o.i<s.length-1&&(s[o.i+1][0][t]=a)})}},t.nudgeSegments=function(e,n,r,i,o){for(var a=t.getSegmentSets(e,n,r),s=0;s<a.length;s++){for(var u=a[s],l=[],c=0;c<u.segments.length;c++){var h=u.segments[c];l.push({type:0,s:h,pos:Math.min(h[0][r],h[1][r])}),l.push({type:1,s:h,pos:Math.max(h[0][r],h[1][r])})}l.sort(function(t,e){return t.pos-e.pos+t.type-e.type});var d=[],p=0;l.forEach(function(a){0===a.type?(d.push(a.s),p++):p--,0==p&&(t.nudgeSegs(n,r,e,d,i,o),d=[])})}},t.prototype.routeEdges=function(e,n,r,i){var o=this,a=e.map(function(t){return o.route(r(t),i(t))}),s=t.orderEdges(a),u=a.map(function(e){return t.makeSegments(e)});return t.nudgeSegments(u,"x","y",s,n),t.nudgeSegments(u,"y","x",s,n),t.unreverseEdges(u,a),u},t.unreverseEdges=function(t,e){t.forEach(function(t,n){e[n].reversed&&(t.reverse(),t.forEach(function(t){t.reverse()}))})},t.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},t.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},t.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];void 0===e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return void 0!==e[t]&&e[t][n]}},t.orderEdges=function(e){for(var n=[],r=0;r<e.length-1;r++)for(var i=r+1;i<e.length;i++){var o,a,s,l=e[r],c=e[i],h=new u(l,c);0!==h.length&&(h.reversed&&(c.reverse(),c.reversed=!0,h=new u(l,c)),(h.si<=0||h.ti<=0)&&(h.si+h.length>=l.length||h.ti+h.length>=c.length)?n.push({l:r,r:i}):(h.si+h.length>=l.length||h.ti+h.length>=c.length?(o=l[h.si+1],s=l[h.si-1],a=c[h.ti-1]):(o=l[h.si+h.length-2],a=l[h.si+h.length],s=c[h.ti+h.length]),t.isLeft(o,a,s)?n.push({l:i,r:r}):n.push({l:r,r:i})))}return t.getOrder(n)},t.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=[],r=e(t[0]),i=1;i<t.length;i++){var o=e(t[i]),a=i<t.length-1?t[i+1]:null;a&&function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001}(r,o,a)||(n.push([r,o]),r=o)}return n},t.prototype.route=function(t,e){var n=this,r=this.nodes[t],i=this.nodes[e];this.obstacles=this.siblingObstacles(r,i);var a={};this.obstacles.forEach(function(t){return a[t.id]=t}),this.passableEdges=this.edges.filter(function(t){var e=n.verts[t.source],r=n.verts[t.target];return!(e.node&&e.node.id in a||r.node&&r.node.id in a)});for(var s=1;s<r.ports.length;s++){var u=r.ports[0].id,l=r.ports[s].id;this.passableEdges.push({source:u,target:l,length:0})}for(var s=1;s<i.ports.length;s++){var u=i.ports[0].id,l=i.ports[s].id;this.passableEdges.push({source:u,target:l,length:0})}var c=function(t){return t.source},h=function(t){return t.target},d=function(t){return t.length},p=new o.Calculator(this.verts.length,this.passableEdges,c,h,d),f=function(t,e,o){var a=n.verts[t],s=n.verts[e],u=n.verts[o],l=Math.abs(u.x-a.x),c=Math.abs(u.y-a.y);return a.node===r&&a.node===s.node||s.node===i&&s.node===u.node?0:l>1&&c>1?1e3:0},g=p.PathFromNodeToNodeWithPrevCost(r.ports[0].id,i.ports[0].id,f),v=g.reverse().map(function(t){return n.verts[t]});return v.push(this.nodes[i.id].ports[0]),v.filter(function(t,e){return!(e<v.length-1&&v[e+1].node===r&&t.node===r||e>0&&t.node===i&&v[e-1].node===i)})},t.getRoutePath=function(e,n,r,i){var o={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var a=0;a<e.length;a++){var s=e[a],u=s[1].x,l=s[1].y,c=u-s[0].x,h=l-s[0].y;if(a<e.length-1){Math.abs(c)>0?u-=c/Math.abs(c)*n:l-=h/Math.abs(h)*n,o.routepath+="L "+u+" "+l+" ";var d=e[a+1],p=d[0].x,f=d[0].y,g=d[1].x,v=d[1].y;c=g-p,h=v-f;var y,m,x=t.angleBetween2Lines(s,d)<0?1:0;Math.abs(c)>0?(y=p+c/Math.abs(c)*n,m=f):(y=p,m=f+h/Math.abs(h)*n);var b=Math.abs(y-u),w=Math.abs(m-l);o.routepath+="A "+b+" "+w+" 0 0 "+x+" "+y+" "+m+" "}else{var _,E,k=[u,l];Math.abs(c)>0?(u-=c/Math.abs(c)*i,_=[u,l+r],E=[u,l-r]):(l-=h/Math.abs(h)*i,_=[u+r,l],E=[u-r,l]),o.routepath+="L "+u+" "+l+" ",i>0&&(o.arrowpath="M "+k[0]+" "+k[1]+" L "+_[0]+" "+_[1]+" L "+E[0]+" "+E[1])}}else{var _,E,s=e[0],u=s[1].x,l=s[1].y,c=u-s[0].x,h=l-s[0].y,k=[u,l];Math.abs(c)>0?(u-=c/Math.abs(c)*i,_=[u,l+r],E=[u,l-r]):(l-=h/Math.abs(h)*i,_=[u+r,l],E=[u-r,l]),o.routepath+="L "+u+" "+l+" ",i>0&&(o.arrowpath="M "+k[0]+" "+k[1]+" L "+_[0]+" "+_[1]+" L "+E[0]+" "+E[1])}return o},t}();n.GridRouter=l},{"./rectangle":225,"./shortestpaths":226,"./vpsc":227}],218:[function(t,e,n){"use strict";function r(t,e,n,r,i){function a(t,e){m=[],f=0,g=0,y=h;for(var n=0;n<t.length;n++){s(t[n],e)}return Math.abs(l()-i)}function s(t,e){for(var n=void 0,r=0;r<m.length;r++)if(m[r].space_left>=t.height&&m[r].x+m[r].width+t.width+o.PADDING-e<=o.FLOAT_EPSILON){n=m[r];break}m.push(t),void 0!==n?(t.x=n.x+n.width+o.PADDING,t.y=n.bottom,t.space_left=t.height,t.bottom=t.y,n.space_left-=t.height+o.PADDING,n.bottom+=t.height+o.PADDING):(t.y=y,y+=t.height+o.PADDING,t.x=c,t.bottom=t.y,t.space_left=t.height),t.y+t.height-g>-o.FLOAT_EPSILON&&(g=t.y+t.height-h),t.x+t.width-f>-o.FLOAT_EPSILON&&(f=t.x+t.width-c)}function u(t){var e=0;return t.forEach(function(t){return e+=t.width+o.PADDING}),e}function l(){return f/g}void 0===i&&(i=1);var c=0,h=0,d=e,p=n,i=void 0!==i?i:1,r=void 0!==r?r:0,f=0,g=0,v=0,y=0,m=[];0!=t.length&&(function(t){function e(t){var e=Number.MAX_VALUE,n=Number.MAX_VALUE,i=0,o=0;t.array.forEach(function(t){var a=void 0!==t.width?t.width:r,s=void 0!==t.height?t.height:r;a/=2,s/=2,i=Math.max(t.x+a,i),e=Math.min(t.x-a,e),o=Math.max(t.y+s,o),n=Math.min(t.y-s,n)}),t.width=i-e,t.height=o-n}t.forEach(function(t){e(t)})}(t),function(t,e){var n=Number.POSITIVE_INFINITY,r=0;t.sort(function(t,e){return e.height-t.height}),v=t.reduce(function(t,e){return t.width<e.width?t.width:e.width});for(var i=g=v,s=y=u(t),l=0,c=Number.MAX_VALUE,h=Number.MAX_VALUE,d=-1,p=Number.MAX_VALUE,f=Number.MAX_VALUE;p>v||f>o.FLOAT_EPSILON;){if(1!=d)var g=s-(s-i)/o.GOLDEN_SECTION,c=a(t,g);if(0!=d)var y=i+(s-i)/o.GOLDEN_SECTION,h=a(t,y);if(p=Math.abs(g-y),f=Math.abs(c-h),c<n&&(n=c,r=g),h<n&&(n=h,r=y),c>h?(i=g,g=y,c=h,d=1):(s=y,y=g,h=c,d=0),l++>100)break}a(t,r)}(t,i),function(t){
t.forEach(function(t){var e={x:0,y:0};t.array.forEach(function(t){e.x+=t.x,e.y+=t.y}),e.x/=t.array.length,e.y/=t.array.length;var n={x:e.x-t.width/2,y:e.y-t.height/2},r={x:t.x-n.x+d/2-f/2,y:t.y-n.y+p/2-g/2};t.array.forEach(function(t){t.x+=r.x,t.y+=r.y})})}(t))}function i(t,e){function n(t,e){if(void 0===r[t.index]){e&&(a++,o.push({array:[]})),r[t.index]=a,o[a-1].array.push(t);var s=i[t.index];if(s)for(var u=0;u<s.length;u++)n(s[u],!1)}}for(var r={},i={},o=[],a=0,s=0;s<e.length;s++){var u=e[s],l=u.source,c=u.target;i[l.index]?i[l.index].push(c):i[l.index]=[c],i[c.index]?i[c.index].push(l):i[c.index]=[l]}for(var s=0;s<t.length;s++){var h=t[s];r[h.index]||n(h,!0)}return o}var o={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};n.applyPacking=r,n.separateGraphs=i},{}],219:[function(t,e,n){"use strict";function r(t){return void 0!==t.leaves||void 0!==t.groups}var i,o=t("./powergraph"),a=t("./linklengths"),s=t("./descent"),u=t("./rectangle"),l=t("./shortestpaths"),c=t("./geom"),h=t("./handledisconnected");!function(t){t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end"}(i=n.EventType||(n.EventType={}));var d=function(){function t(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:t.getSourceIndex,getTargetIndex:t.getTargetIndex,setLength:t.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return t.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[i[t]]=e:this.event[t]=e,this},t.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},t.prototype.kick=function(){for(;!this.tick(););},t.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:i.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,n=this._nodes.length;this._links.length;for(this._descent.locks.clear(),e=0;e<n;++e)if(t=this._nodes[e],t.fixed){void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y);var r=[t.px,t.py];this._descent.locks.add(e,r)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:void 0!==this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:i.tick,alpha:this._alpha,stress:this._lastStress}),!1},t.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)t=this._nodes[r],t.x=e[r],t.y=n[r]},t.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach(function(t){e=Math.max(e,t.source,t.target)}),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},t.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach(function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach(function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)}),void 0!==t.groups&&t.groups.forEach(function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)})}),this._rootGroup.leaves=this._nodes.filter(function(t){return void 0===t.parent}),this._rootGroup.groups=this._groups.filter(function(t){return void 0===t.parent}),this):this._groups},t.prototype.powerGraphGroups=function(t){var e=o.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(e.groups),t(e),this},t.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},t.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},t.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},t.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},t.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},t.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},t.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},t.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},t.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},t.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},t.prototype.linkType=function(t){return this._linkType=t,this},t.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},t.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:i.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},t.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},t.setLinkLength=function(t,e){t.length=e},t.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},t.prototype.symmetricDiffLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return a.symmetricDiffLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.jaccardLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return a.jaccardLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.start=function(e,n,r,i,o){var c=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=!0);var h,d=this.nodes().length,p=d+2*this._groups.length,f=(this._links.length,this._canvasSize[0]),g=this._canvasSize[1],v=new Array(p),y=new Array(p),m=null,x=this._avoidOverlaps;this._nodes.forEach(function(t,e){t.index=e,void 0===t.x&&(t.x=f/2,t.y=g/2),v[e]=t.x,y[e]=t.y}),this._linkLengthCalculator&&this._linkLengthCalculator();var b;this._distanceMatrix?b=this._distanceMatrix:(b=new l.Calculator(p,this._links,t.getSourceIndex,t.getTargetIndex,function(t){return c.getLinkLength(t)}).DistanceMatrix(),m=s.Descent.createSquareMatrix(p,function(){return 2}),this._links.forEach(function(t){"number"==typeof t.source&&(t.source=c._nodes[t.source]),"number"==typeof t.target&&(t.target=c._nodes[t.target])}),this._links.forEach(function(e){var n=t.getSourceIndex(e),r=t.getTargetIndex(e);m[n][r]=m[r][n]=e.weight||1}));var w=s.Descent.createSquareMatrix(p,function(t,e){return b[t][e]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var h=d,_=function(t,e,n,r){m[t][e]=m[e][t]=n,w[t][e]=w[e][t]=r};this._groups.forEach(function(t){_(h,h+1,c._groupCompactness,.1),v[h]=0,y[h++]=0,v[h]=0,y[h++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var E=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,E=E.concat(a.generateDirectedEdgeConstraints(d,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new s.Descent([v,y],w),this._descent.locks.clear();for(var h=0;h<d;++h){var k=this._nodes[h];if(k.fixed){k.px=k.x,k.py=k.y;var T=[k.x,k.y];this._descent.locks.add(h,T)}}if(this._descent.threshold=this._threshold,this.initialLayout(e,v,y),E.length>0&&(this._descent.project=new u.Projection(this._nodes,this._groups,this._rootGroup,E).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(f,g),this.avoidOverlaps(x),x&&(this._nodes.forEach(function(t,e){t.x=v[e],t.y=y[e]}),this._descent.project=new u.Projection(this._nodes,this._groups,this._rootGroup,E,!0).projectFunctions(),this._nodes.forEach(function(t,e){v[e]=t.x,y[e]=t.y})),this._descent.G=m,this._descent.run(r),i){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=d,this._descent.scaleSnapByMaxH=d!=p;var N=s.Descent.createSquareMatrix(p,function(t,e){return t>=d||e>=d?m[t][e]:0});this._descent.G=N,this._descent.run(i)}return this.updateNodePositions(),this.separateOverlappingComponents(f,g),o?this.resume():this},t.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,o=this._links.map(function(t){return{source:t.source.index,target:t.target.index}}),a=this._nodes.map(function(t){return{index:t.index}});this._groups.forEach(function(t,e){a.push({index:t.index=i+e})}),this._groups.forEach(function(t,e){void 0!==t.leaves&&t.leaves.forEach(function(e){return o.push({source:t.index,target:e.index})}),void 0!==t.groups&&t.groups.forEach(function(e){return o.push({source:t.index,target:e.index})})}),(new t).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach(function(t){n[t.index]=a[t.index].x,r[t.index]=a[t.index].y})}else this._descent.run(e)},t.prototype.separateOverlappingComponents=function(t,e){var n=this;if(!this._distanceMatrix&&this._handleDisconnected){var r=this._descent.x[0],i=this._descent.x[1];this._nodes.forEach(function(t,e){t.x=r[e],t.y=i[e]});var o=h.separateGraphs(this._nodes,this._links);h.applyPacking(o,t,e,this._defaultNodeSize),this._nodes.forEach(function(t,e){n._descent.x[0][e]=t.x,n._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))})}},t.prototype.resume=function(){return this.alpha(.1)},t.prototype.stop=function(){return this.alpha(0)},t.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new c.TangentVisibilityGraph(this._nodes.map(function(e){return e.bounds.inflate(-t).vertices()}))},t.prototype.routeEdge=function(t,e){var n=[],r=new c.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),i={x:t.source.x,y:t.source.y},o={x:t.target.x,y:t.target.y},a=r.addPoint(i,t.source.index),s=r.addPoint(o,t.target.index);r.addEdgeIfVisible(i,o,t.source.index,t.target.index),void 0!==e&&e(r);var h=function(t){return t.source.id},d=function(t){return t.target.id},p=function(t){return t.length()},f=new l.Calculator(r.V.length,r.E,h,d,p),g=f.PathFromNodeToNode(a.id,s.id);if(1===g.length||g.length===r.V.length){var v=u.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,5);n=[v.sourceIntersection,v.arrowStart]}else{for(var y=g.length-2,m=r.V[g[y]].p,x=r.V[g[0]].p,n=[t.source.innerBounds.rayIntersection(m.x,m.y)],b=y;b>=0;--b)n.push(r.V[g[b]].p);n.push(u.makeEdgeTo(x,t.target.innerBounds,5))}return n},t.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},t.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},t.linkId=function(e){return t.getSourceIndex(e)+"-"+t.getTargetIndex(e)},t.dragStart=function(e){r(e)?t.storeOffset(e,t.dragOrigin(e)):(t.stopNode(e),e.fixed|=2)},t.stopNode=function(t){t.px=t.x,t.py=t.y},t.storeOffset=function(e,n){void 0!==e.leaves&&e.leaves.forEach(function(e){e.fixed|=2,t.stopNode(e),e._dragGroupOffsetX=e.x-n.x,e._dragGroupOffsetY=e.y-n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.storeOffset(e,n)})},t.dragOrigin=function(t){return r(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},t.drag=function(e,n){r(e)?(void 0!==e.leaves&&e.leaves.forEach(function(t){e.bounds.setXCentre(n.x),e.bounds.setYCentre(n.y),t.px=t._dragGroupOffsetX+n.x,t.py=t._dragGroupOffsetY+n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.drag(e,n)})):(e.px=n.x,e.py=n.y)},t.dragEnd=function(e){r(e)?(void 0!==e.leaves&&e.leaves.forEach(function(e){t.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY}),void 0!==e.groups&&e.groups.forEach(t.dragEnd)):e.fixed&=-7},t.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},t.mouseOut=function(t){t.fixed&=-5},t}();n.Layout=d},{"./descent":215,"./geom":216,"./handledisconnected":218,"./linklengths":221,"./powergraph":222,"./rectangle":225,"./shortestpaths":226}],220:[function(t,e,n){"use strict";var r=t("./shortestpaths"),i=t("./descent"),o=t("./rectangle"),a=t("./linklengths"),s=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce(function(t,n){var r=n[e.target]-n[e.source];return t+r*r},0))},t}();n.Link3D=s;var u=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}return t}();n.Node3D=u;var l=function(){function t(e,n,r){void 0===r&&(r=1);var i=this;this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var o=0;o<t.k;++o)this.result[o]=new Array(e.length);e.forEach(function(e,n){for(var r=0,o=t.dims;r<o.length;r++){var a=o[r];void 0===e[a]&&(e[a]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z})}return t.prototype.linkLength=function(t){return t.actualLength(this.result)},t.prototype.start=function(t){var e=this;void 0===t&&(t=100);var n=this.nodes.length,s=new c;this.useJaccardLinkLengths&&a.jaccardLinkLengths(this.links,s,1.5),this.links.forEach(function(t){return t.length*=e.idealLinkLength});var u=new r.Calculator(n,this.links,function(t){return t.source},function(t){return t.target},function(t){return t.length}).DistanceMatrix(),l=i.Descent.createSquareMatrix(n,function(t,e){return u[t][e]}),h=i.Descent.createSquareMatrix(n,function(){return 2});this.links.forEach(function(t){var e=t.source,n=t.target;return h[e][n]=h[n][e]=1}),this.descent=new i.Descent(this.result,l),this.descent.threshold=.001,this.descent.G=h,this.constraints&&(this.descent.project=new o.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var d=0;d<this.nodes.length;d++){var p=this.nodes[d];p.fixed&&this.descent.locks.add(d,[p.x,p.y,p.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},t}();l.dims=["x","y","z"],l.k=l.dims.length,n.Layout3D=l;var c=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()},{"./descent":215,"./linklengths":221,"./rectangle":225,"./shortestpaths":226}],221:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function i(t,e){var n=0;for(var r in t)void 0!==e[r]&&++n;return n}function o(t,e){var n={},r=function(t,e){void 0===n[t]&&(n[t]={}),n[t][e]={}};return t.forEach(function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)}),n}function a(t,e,n,r){var i=o(t,r);t.forEach(function(t){var o=i[r.getSourceIndex(t)],a=i[r.getTargetIndex(t)];r.setLength(t,1+e*n(o,a))})}function s(t,e,n){void 0===n&&(n=1),a(t,n,function(t,e){return Math.sqrt(r(t,e)-i(t,e))},e)}function u(t,e,n){void 0===n&&(n=1),a(t,n,function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:i(t,e)/r(t,e)},e)}function l(t,e,n,r){var i=c(t,e,r),o={};i.forEach(function(t,e){return t.forEach(function(t){return o[t]=e})});var a=[];return e.forEach(function(t){var e=r.getSourceIndex(t),i=r.getTargetIndex(t);o[e]!==o[i]&&a.push({axis:n,left:e,right:i,gap:r.getMinSeparation(t)})}),a}function c(t,e,n){function r(t){t.index=t.lowlink=o++,a.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var i=n[e];void 0===i.index?(r(i),t.lowlink=Math.min(t.lowlink,i.lowlink)):i.onStack&&(t.lowlink=Math.min(t.lowlink,i.index))}if(t.lowlink===t.index){for(var u=[];a.length&&(i=a.pop(),i.onStack=!1,u.push(i),i!==t););s.push(u.map(function(t){return t.id}))}}for(var i=[],o=0,a=[],s=[],u=0;u<t;u++)i.push({id:u,out:[]});for(var l=0,c=e;l<c.length;l++){var h=c[l],d=i[n.getSourceIndex(h)],p=i[n.getTargetIndex(h)];d.out.push(p)}for(var f=0,g=i;f<g.length;f++){var v=g[f];void 0===v.index&&r(v)}return s}n.symmetricDiffLinkLengths=s,n.jaccardLinkLengths=u,n.generateDirectedEdgeConstraints=l,n.stronglyConnectedComponents=c},{}],222:[function(t,e,n){"use strict";function r(t,e,n){t.forAll(function(t){if(t.isLeaf())e.leaves||(e.leaves=[]),e.leaves.push(t.id);else{var i=e;if(t.gid=n.length,!t.isIsland()||t.isPredefined()){if(i={id:t.gid},t.isPredefined())for(var o in t.definition)i[o]=t.definition[o];e.groups||(e.groups=[]),e.groups.push(t.gid),n.push(i)}r(t.children,i,n)}})}function i(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}function o(t,e,n,r){for(var i=t.length,o=new s(i,e,n,r);o.greedyMerge(););var a=[],u=o.getGroupHierarchy(a);return a.forEach(function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")}),{groups:u,powerEdges:a}}var a=function(){function t(t,e,n){this.source=t,this.target=e,this.type=n}return t}();n.PowerEdge=a;var s=function(){function t(t,e,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new l);for(var o=0;o<t;++o)this.roots[0].add(this.modules[o]=new u(o))}this.R=e.length,e.forEach(function(t){var e=i.modules[n.getSourceIndex(t)],r=i.modules[n.getTargetIndex(t)],o=n.getType(t);e.outgoing.add(o,r),r.incoming.add(o,e)})}return t.prototype.initModulesFromGroup=function(t){var e=new l;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],i=new u(r.id);this.modules[r.id]=i,e.add(i)}if(t.groups)for(var o=0;o<t.groups.length;++o){var a=t.groups[o],s={};for(var h in a)"leaves"!==h&&"groups"!==h&&a.hasOwnProperty(h)&&(s[h]=a[h]);e.add(new u(-1-o,new c,new c,this.initModulesFromGroup(a),s))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),i=t.outgoing.intersection(e.outgoing),o=new l;o.add(t),o.add(e);var a=new u(this.modules.length,i,r,o);this.modules.push(a);var s=function(n,r,i){n.forAll(function(n,o){n.forAll(function(n){var s=n[r];s.add(o,a),s.remove(o,t),s.remove(o,e),t[i].remove(o,n),e[i].remove(o,n)})})};return s(i,"incoming","outgoing"),s(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(a),a},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,o=0,a=n-1;o<a;++o)for(var s=o+1;s<n;++s){var u=e[o],l=e[s];r[i]={id:i,nEdges:this.nEdges(u,l),a:u,b:l},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort(function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges}),n=e[0];if(!(n.nEdges>=this.R))return this.merge(n.a,n.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var e=this,n=[],i={};return r(this.roots[0],i,n),this.allEdges().forEach(function(r){var i=e.modules[r.source],o=e.modules[r.target];t.push(new a(void 0===i.gid?r.source:n[i.gid],void 0===o.gid?r.target:n[o.gid],r.type))}),n},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll(function(e){e.getEdges(n),t.getEdges(e.children,n)})},t}();n.Configuration=s;var u=function(){function t(t,e,n,r,i){void 0===e&&(e=new c),void 0===n&&(n=new c),void 0===r&&(r=new l),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll(function(n,r){n.forAll(function(n){t.push(new a(e.id,n.id,r))})})},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();n.Module=u;var l=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var n=new t;return n.table=i(this.table,e.table),n},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll(function(e){e.isPredefined()||t.push(e)}),t},t}();n.ModuleSet=l;var c=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules(function(n){e||n.id!=t||(e=!0)}),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new l).add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],Number(e))},t.prototype.forAllModules=function(t){this.forAll(function(e,n){return e.forAll(t)})},t.prototype.intersection=function(e){var n=new t;return this.forAll(function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}}),n},t}();n.LinkSets=c,n.getGroups=o},{}],223:[function(t,e,n){"use strict";var r=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach(function(e){return e.forEach(t)}))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(t,e){return t+e.count()},0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every(function(n){return t(e.elem,n.elem)&&n.isHeap(t)})},t.prototype.insert=function(e,n){return this.merge(new t(e),n)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var o=e.removeMin(i);e.elem=o.elem,e.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(e.elem,e);var a=new t(n);return null!==r&&r(n,a),this.merge(a,i)},t}();n.PairingHeap=r;var i=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n,i,o=0;i=t[o];++o)n=new r(i),this.root=this.empty()?n:this.root.merge(n,this.lessThan);return n},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}();n.PriorityQueue=i},{}],224:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){function e(t,e){return n(e,t)}var n=this._comparator;return this._bound(t,e)},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new o(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(n=r._ancestors[o],e(t,n.data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},t}();n.TreeBase=i;var o=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else if(null===this._cursor.right){var e;do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else if(null===this._cursor.left){var e;do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();n.Iterator=o;var a=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}(),s=function(t){function e(e){var n=t.call(this)||this;return n._root=null,n._comparator=e,n.size=0,n}return r(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new a(t),n=!0,this.size++;else{var r=new a(void 0),i=!1,o=!1,s=null,u=r,l=null,c=this._root;for(u.right=this._root;;){if(null===c?(c=new a(t),l.set_child(i,c),n=!0,this.size++):e.is_red(c.left)&&e.is_red(c.right)&&(c.red=!0,c.left.red=!1,c.right.red=!1),e.is_red(c)&&e.is_red(l)){var h=u.right===s;c===l.get_child(o)?u.set_child(h,e.single_rotate(s,!o)):u.set_child(h,e.double_rotate(s,!o))}var d=this._comparator(c.data,t);if(0===d)break;o=i,i=d<0,null!==s&&(u=s),s=l,l=c,c=c.get_child(i)}this._root=r.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new a(void 0),r=n;r.right=this._root;for(var i=null,o=null,s=null,u=!0;null!==r.get_child(u);){var l=u;o=i,i=r,r=r.get_child(u);var c=this._comparator(t,r.data);if(u=c>0,0===c&&(s=r),!e.is_red(r)&&!e.is_red(r.get_child(u)))if(e.is_red(r.get_child(!u))){var h=e.single_rotate(r,u);i.set_child(l,h),i=h}else if(!e.is_red(r.get_child(!u))){var d=i.get_child(!l);if(null!==d)if(e.is_red(d.get_child(!l))||e.is_red(d.get_child(l))){var p=o.right===i;e.is_red(d.get_child(l))?o.set_child(p,e.double_rotate(i,l)):e.is_red(d.get_child(!l))&&o.set_child(p,e.single_rotate(i,l));var f=o.get_child(p);f.red=!0,r.red=!0,f.left.red=!1,f.right.red=!1}else i.red=!1,d.red=!0,r.red=!0}}return null!==s&&(s.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==s},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(i);n.RBTree=s},{}],225:[function(t,e,n){"use strict";function r(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce(function(t,e){return e.bounds.union(t)},b.empty()):b.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce(function(t,e){return r(e).union(t)},t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}function i(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=i.x-r.x,a=i.y-r.y,s=Math.sqrt(o*o+a*a),u=s-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+u*o/s,y:r.y+u*a/s}}}function o(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,o=r.y-t.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}}function a(t,e){return t.pos>e.pos?1:t.pos<e.pos?-1:t.isOpen?-1:e.isOpen?1:0}function s(){return new x.RBTree(function(t,e){return t.pos-e.pos})}function u(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,o=void 0!==t.groups?t.groups.length:0,a=void 0!==t.leaves?t.leaves.length:0,s=o?t.groups.reduce(function(t,r){return t.concat(u(r,e,n,!0))},[]):[],c=(r?2:0)+a+o,h=new Array(c),d=new Array(c),p=0,f=function(t,e){d[p]=t,h[p++]=e};if(r){var g=t.bounds,v=e.getCentre(g),y=e.getSize(g)/2,m=e.getOpen(g),x=e.getClose(g),b=v-y+i/2,w=v+y-i/2;t.minVar.desiredPosition=b,f(e.makeRect(m,x,b,i),t.minVar),t.maxVar.desiredPosition=w,f(e.makeRect(m,x,w,i),t.maxVar)}a&&t.leaves.forEach(function(t){return f(t.bounds,t.variable)}),o&&t.groups.forEach(function(t){var n=t.bounds;f(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)});var _=l(d,h,e,n);return o&&(h.forEach(function(t){t.cOut=[],t.cIn=[]}),_.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),t.groups.forEach(function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach(function(t){return t.gap+=n}),t.minVar.cOut.forEach(function(e){e.left=t.maxVar,e.gap+=n})})),s.concat(_)}function l(t,e,n,r){var i,o=t.length,u=2*o;console.assert(e.length>=o);var l=new Array(u);for(i=0;i<o;++i){var c=t[i],h=new w(e[i],c,n.getCentre(c));l[i]=new _(!0,h,n.getOpen(c)),l[i+o]=new _(!1,h,n.getClose(c))}l.sort(a);var d=new Array,p=s();for(i=0;i<u;++i){var f=l[i],h=f.v;if(f.isOpen)p.insert(h),n.findNeighbours(h,p);else{p.remove(h);var g=function(t,e){var i=(n.getSize(t.r)+n.getSize(e.r))/2+r;d.push(new m.Constraint(t.v,e.v,i))},v=function(t,e,n){
for(var r,i=h[t].iterator();null!==(r=i[t]());)n(r,h),r[e].remove(h)};v("prev","next",function(t,e){return g(t,e)}),v("next","prev",function(t,e){return g(e,t)})}}return console.assert(0===p.size),d}function c(t,e){var n=function(n,r){for(var i,o=e.findIter(t);null!==(i=o[n]());){var a=i.r.overlapX(t.r);if((a<=0||a<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),a<=0)break}};n("next","prev"),n("prev","next")}function h(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}function d(t,e){return l(t,e,E,1e-6)}function p(t,e){return l(t,e,k,1e-6)}function f(t){return u(t,E,1e-6)}function g(t){return u(t,k,1e-6)}function v(t){var e=t.map(function(t){return new m.Variable(t.cx())}),n=d(t,e),r=new m.Solver(e,n);r.solve(),e.forEach(function(e,n){return t[n].setXCentre(e.position())}),e=t.map(function(t){return new m.Variable(t.cy())}),n=p(t,e),r=new m.Solver(e,n),r.solve(),e.forEach(function(e,n){return t[n].setYCentre(e.position())})}var y=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},m=t("./vpsc"),x=t("./rbtree");n.computeGroupBounds=r;var b=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;s<4;++s){var u=t.lineIntersection(e,n,r,i,o[s][0],o[s][1],o[s][2],o[s][3]);null!==u&&a.push({x:u.x,y:u.y})}return a},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y},{x:this.x,y:this.y}]},t.lineIntersection=function(t,e,n,r,i,o,a,s){var u=n-t,l=a-i,c=r-e,h=s-o,d=h*u-l*c;if(0==d)return null;var p=t-i,f=e-o,g=l*f-h*p,v=g/d,y=u*f-c*p,m=y/d;return v>=0&&v<=1&&m>=0&&m<=1?{x:t+v*u,y:e+v*c}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();n.Rectangle=b,n.makeEdgeBetween=i,n.makeEdgeTo=o;var w=function(){function t(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=s(),this.next=s()}return t}(),_=function(){function t(t,e,n){this.isOpen=t,this.v=e,this.pos=n}return t}(),E={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new b(n-r/2,n+r/2,t,e)},findNeighbours:c},k={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new b(t,e,n-r/2,n+r/2)},findNeighbours:h};n.generateXConstraints=d,n.generateYConstraints=p,n.generateXGroupConstraints=f,n.generateYGroupConstraints=g,n.removeOverlaps=v;var T=function(t){function e(e,n){var r=t.call(this,0,n)||this;return r.index=e,r}return y(e,t),e}(m.Variable);n.IndexedVariable=T;var N=function(){function t(t,e,n,i,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=!1);var a=this;if(this.nodes=t,this.groups=e,this.rootGroup=n,this.avoidOverlaps=o,this.variables=t.map(function(t,e){return t.variable=new T(e,1)}),i&&this.createConstraints(i),o&&n&&void 0!==n.groups){t.forEach(function(t){if(!t.width||!t.height)return void(t.bounds=new b(t.x,t.x,t.y,t.y));var e=t.width/2,n=t.height/2;t.bounds=new b(t.x-e,t.x+e,t.y-n,t.y+n)}),r(n);var s=t.length;e.forEach(function(t){a.variables[s]=t.minVar=new T(s++,void 0!==t.stiffness?t.stiffness:.01),a.variables[s]=t.maxVar=new T(s++,void 0!==t.stiffness?t.stiffness:.01)})}}return t.prototype.createSeparation=function(t){return new m.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,void 0!==t.equality&&t.equality)},t.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=t.offsets.map(function(t){return e.nodes[t.node]}).sort(function(t,e){return t[n]-e[n]}),o=null;i.forEach(function(t){o&&(t[n]=o[n]+o[r]+1),o=t})}},t.prototype.createAlignment=function(t){var e=this,n=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var r="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach(function(t){var i=e.nodes[t.node].variable;r.push(new m.Constraint(n,i,t.offset,!0))})},t.prototype.createConstraints=function(t){var e=this,n=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter(function(t){return"x"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),this.yConstraints=t.filter(function(t){return"y"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),t.filter(function(t){return"alignment"===t.type}).forEach(function(t){return e.createAlignment(t)})},t.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach(function(i,o){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var a=(i.width||0)/2,s=(i.height||0)/2,u=t[o],l=e[o];i.bounds=new b(u-a,u+a,l-s,l+s)})},t.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,function(t){return t.px},this.xConstraints,f,function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i})},t.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,function(t){return t.py},this.yConstraints,g,function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i})},t.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},t.prototype.project=function(t,e,n,i,o,a,s,u,l){this.setupVariablesAndBounds(t,e,i,o),this.rootGroup&&this.avoidOverlaps&&(r(this.rootGroup),a=a.concat(s(this.rootGroup))),this.solve(this.variables,a,n,i),this.nodes.forEach(u),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(l),r(this.rootGroup))},t.prototype.solve=function(t,e,n,r){var i=new m.Solver(t,e);i.setStartingPositions(n),i.setDesiredPositions(r),i.solve()},t}();n.Projection=N},{"./rbtree":224,"./vpsc":227}],226:[function(t,e,n){"use strict";var r=t("./pqueue"),i=function(){function t(t,e){this.id=t,this.distance=e}return t}(),o=function(){function t(t){this.id=t,this.neighbours=[]}return t}(),a=function(){function t(t,e,n){this.node=t,this.prev=e,this.d=n}return t}(),s=function(){function t(t,e,n,r,a){this.n=t,this.es=e,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new o(s);for(s=this.es.length;s--;){var u=this.es[s],l=n(u),c=r(u),h=a(u);this.neighbours[l].neighbours.push(new i(c,h)),this.neighbours[c].neighbours.push(new i(l,h))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var i=new r.PriorityQueue(function(t,e){return t.d<=e.d}),o=this.neighbours[t],s=new a(o,null,0),u={};for(i.push(s);!i.empty()&&(s=i.pop(),o=s.node,o.id!==e);)for(var l=o.neighbours.length;l--;){var c=o.neighbours[l],h=this.neighbours[c.id];if(!s.prev||h.id!==s.prev.node.id){var d=h.id+","+o.id;if(!(d in u&&u[d]<=s.d)){var p=s.prev?n(s.prev.node.id,o.id,h.id):0,f=s.d+c.distance+p;u[d]=f,i.push(new a(h,s,f))}}}for(var g=[];s.prev;)s=s.prev,g.push(s.node.id);return g},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new r.PriorityQueue(function(t,e){return t.d<=e.d}),i=this.neighbours.length,o=new Array(i);i--;){var a=this.neighbours[i];a.d=i===t?0:Number.POSITIVE_INFINITY,a.q=n.push(a)}for(;!n.empty();){var s=n.pop();if(o[s.id]=s.d,s.id===e){for(var u=[],l=s;void 0!==l.prev;)u.push(l.prev.id),l=l.prev;return u}for(i=s.neighbours.length;i--;){var c=s.neighbours[i],l=this.neighbours[c.id],h=s.d+c.distance;s.d!==Number.MAX_VALUE&&l.d>h&&(l.d=h,l.prev=s,n.reduceKey(l.q,l,function(t,e){return t.q=e}))}}return o},t}();n.Calculator=s},{"./pqueue":223}],227:[function(t,e,n){"use strict";function r(t,e,n){for(var r=t.map(function(t){return new a(t.desiredCenter)}),i=[],s=t.length,u=0;u<s-1;u++){var c=t[u],h=t[u+1];i.push(new o(r[u],r[u+1],(c.size+h.size)/2))}var d=r[0],p=r[s-1],f=t[0].size/2,g=t[s-1].size/2,v=null,y=null;return e&&(v=new a(e,1e3*d.weight),r.push(v),i.push(new o(v,d,f))),n&&(y=new a(n,1e3*p.weight),r.push(y),i.push(new o(p,y,g))),new l(r,i).solve(),{newCenters:r.slice(0,t.length).map(function(t){return t.position()}),lowerBound:v?v.position():d.position()-f,upperBound:y?y.position():p.position()+g}}var i=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.offset/t.scale,r=t.weight;this.AB+=r*e*n,this.AD+=r*e*t.desiredPosition,this.A2+=r*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();n.PositionStats=i;var o=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();n.Constraint=o;var a=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach(function(t){return n(t,t.right)}),this.cIn.forEach(function(t){return n(t,t.left)})},t}();n.Variable=a;var s=function(){function t(t){this.vars=[],t.offset=0,this.ps=new i(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,function(e,o){var a=r.compute_lm(o,t,n);o===e.right?(i+=a*e.left.scale,e.lm=a):(i+=a*e.right.scale,e.lm=-a),n(e)}),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)})},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,o){e.push(t(r)),i.traverse(t,e,o,n)})},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)}),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,function(){});var n=null;return this.findPath(t,null,e,function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)}),n},t.prototype.findPath=function(t,e,n,r){var i=this,o=!1;return t.visitNeighbours(e,function(e,a){o||a!==n&&!i.findPath(a,t,n,r)||(o=!0,r(e,a))}),o},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var o=t.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();n.Block=s;var u=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new s(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<l.LAGRANGIAN_TOLERANCE&&(n=r.left.block,s.split(r).forEach(function(t){return e.insert(t)}),e.remove(n),t.push(r))})},t}();n.Blocks=u;var l=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=e,e.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=e.map(function(t){return t.active=!1,t}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(t){return t.active=!1,t}),this.bs=new u(this.vs),this.bs.forEach(function(e,n){return e.posn=t[n]})},t.prototype.setDesiredPositions=function(t){this.vs.forEach(function(e,n){return e.desiredPosition=t[n]})},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;a<i;++a){var s=r[a];if(!s.unsatisfiable){var u=s.slack();if((s.equality||u<e)&&(e=u,n=s,o=a,s.equality))break}}return o!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new u(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t}();l.LAGRANGIAN_TOLERANCE=-1e-4,l.ZERO_UPPERBOUND=-1e-10,n.Solver=l,n.removeOverlapInOneDimension=r},{}]},{},[1]);